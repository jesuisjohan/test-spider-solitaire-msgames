(function(){var e={520:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var i=atob(this.toDataURL(t,n).split(",")[1]),a=i.length,r=a>>2,s=new Uint8Array(a),o=new Uint32Array(s.buffer,0,r),c=0,u=0;c<r;c++)o[c]=i.charCodeAt(u++)|i.charCodeAt(u++)<<8|i.charCodeAt(u++)<<16|i.charCodeAt(u++)<<24;for(var l=3&a;l--;)s[u]=i.charCodeAt(u++);e(new Blob([s],{type:t||"image/png"}))}})},672:function(e,t,n){"use strict";n.d(t,{J:function(){return R},Z:function(){return N}});var i=n(22),a=n(153),r=n.n(a),s=n(58),o=n.n(s),c=n(47),u=n.n(c),l=n(20),h=n.n(l),d=n(29),f=n(240),p=n.n(f),g=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-add-shortcut");null==n||n.remove(),e()}},m=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},v=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=m('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Add shortcut for this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to add a shortcut.</p>\n        </div>'),a=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">No</button>'),r=m('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Yes</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-add-shortcut",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",g(n)),r.addEventListener("click",g(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canCreateShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.createShortcutAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){v(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),E=y,S=function(e){return function(t){t.preventDefault();var n=document.getElementById("popup-subscribe-bots");null==n||n.remove(),e()}},T=function(e){var t=document.createElement("div");return t.innerHTML=p()(e).call(e),t.firstChild},A=function(){var e=(0,i.Z)(h().mark((function e(t,n){var i,a,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=T('<div style="height: 50vh;width: 53vh;max-width: 95vw;position:absolute;background-color: rgba(31, 120, 136, 0.48);border-radius: 2vh;margin: auto;right: 0;left: 0;top: 0;bottom: 0;display: flex;flex-direction:column;justify-content:space-evenly;">\n            <p style="color:white;font-size:40px;text-align:center">Turn on messages from this game</p>\n            <p style="color:white;font-size:20px;text-align:center">This game wants to send messages, announcements and more.</p>\n        </div>'),a=T('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Not Now</button>'),r=T('<button style="border: none;background-color: #1877f2;color: #fff;width: 90%;height: 50px;border-radius: 15px;margin-left: auto;margin-right: auto;font-size: 20px;cursor: pointer;">Turn On</button>'),i&&a&&r||n({code:"CREATE_POPUP_ERROR",message:"Show popup failed"}),i.id="popup-subscribe-bots",i.appendChild(a),i.appendChild(r),document.body.appendChild(i),a.addEventListener("click",S(n)),r.addEventListener("click",S(t));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){function e(){this.isFirstCall=!0}var t=e.prototype;return t.canSubscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isFirstCall){e.next=3;break}return this.isFirstCall=!1,e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.subscribeBotAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(o())((function(e,t){A(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),b=C,I=n(219),w=n(117),x=n(690),_=n(464),O=GameCore.Configs,P=O.Notification,k=O.AddShortcut,L=O.SubscribeBot,D=P.GameTitle,R=(P.GameImage,function(){function e(){}var t=e.prototype;return t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.createAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.joinAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.joinAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.postScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getTournamentsAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.tournament.getTournamentsAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}()),B=function(){function e(e){var t=this;this.facebook=void 0,this.supportedAPIs=[],this.mockSubscribeBot=void 0,this.mockAddShortcut=void 0,this.isCalledSubscribeBot=!1,this.isCalledCreateShortcut=!1,this.isCanPlayerMatch=null,this.isCanSubscribeBot=null,this.isCanCreateShortcut=null,this.attemptToAddShortcut=(0,i.Z)(h().mark((function e(){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledCreateShortcut){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanCreateShortcut&&(k.UseMock?t.isCanCreateShortcut=!0:t.isCanCreateShortcut=t.isSupportedAPI("canCreateShortcutAsync")),t.isCanCreateShortcut){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,GameSDK.player.getDataAsync(["lastCallCreateShortcut"]);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:if(n=e.t0,!(i=n.lastCallCreateShortcut||0)||!(0,w.Gm)(+i)){e.next=15;break}return e.abrupt("return",!1);case 15:if(!k.UseMock){e.next=21;break}return e.next=18,t.mockAddShortcut.canCreateShortcutAsync();case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,GameSDK.canCreateShortcutAsync();case 23:e.t1=e.sent;case 24:if(a=e.t1,r=Date.now(),GameSDK.player.setDataAsync({lastCallCreateShortcut:r}),!a){e.next=49;break}return s=d._.SHORTCUT_CREATE,o=d._.SHORTCUT_CREATE_POPUP,t.isCalledCreateShortcut=!0,window.game.analytics.event(o),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!k.UseMock){e.next=39;break}return e.next=37,t.mockAddShortcut.createShortcutAsync();case 37:e.next=41;break;case 39:return e.next=41,FBInstant.createShortcutAsync();case 41:return window.game.analytics.event(s,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(s,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.attemptToSubscribeBot=(0,i.Z)(h().mark((function e(){var n,i,a,r,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isCalledSubscribeBot){e.next=2;break}return e.abrupt("return",!1);case 2:if(e.prev=2,null===t.isCanSubscribeBot&&(L.UseMock?t.isCanSubscribeBot=!0:t.isCanSubscribeBot=t.isSupportedAPI("player.canSubscribeBotAsync")),t.isCanSubscribeBot){e.next=6;break}return e.abrupt("return",!1);case 6:if(!L.UseMock){e.next=12;break}return e.next=9,t.mockSubscribeBot.canSubscribeBotAsync();case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,GameSDK.player.canSubscribeBotAsync();case 14:e.t0=e.sent;case 15:if(!e.t0){e.next=49;break}return e.next=19,GameSDK.player.getDataAsync(["lastCallSubscribeBot"]);case 19:if(e.t1=e.sent,e.t1){e.next=22;break}e.t1={};case 22:if(n=e.t1,!(i=n.lastCallSubscribeBot)||!(0,w.Gm)(+i)){e.next=26;break}return e.abrupt("return",!1);case 26:return a=Date.now(),GameSDK.player.setDataAsync({lastCallSubscribeBot:a}),r=d._.BOT_SUBSCRIBE,s=d._.BOT_SUBSCRIBE_POPUP,t.isCalledSubscribeBot=!0,window.game.analytics.event(s),e.prev=31,e.next=34,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 34:if(!L.UseMock){e.next=39;break}return e.next=37,t.mockSubscribeBot.subscribeBotAsync();case 37:e.next=41;break;case 39:return e.next=41,GameSDK.player.subscribeBotAsync();case 41:return window.game.analytics.event(r,{success:!0}),e.abrupt("return",!0);case 45:return e.prev=45,e.t2=e.catch(31),window.game.analytics.event(r,{success:!1}),e.abrupt("return",!1);case 49:return e.abrupt("return",!1);case 52:return e.prev=52,e.t3=e.catch(2),e.abrupt("return",!1);case 55:case"end":return e.stop()}}),e,null,[[2,52],[31,45]])}))),this.matchPlayerAsync=function(){var e=(0,i.Z)(h().mark((function e(n,i,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===t.isCanPlayerMatch&&(t.isCanPlayerMatch=t.isSupportedAPI("checkCanPlayerMatchAsync")),t.isCanPlayerMatch){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,GameSDK.checkCanPlayerMatchAsync();case 6:if(e.sent){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,GameSDK.matchPlayerAsync(n,i,a);case 11:return e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,i){return e.apply(this,arguments)}}(),this.getTournamentAsync=(0,i.Z)(h().mark((function e(){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.facebook.tournament.getTournamentsAsync();case 2:if(n=e.sent,i=GameSDK.context.getID(),!(a=r()(n).call(n,(function(e){return e.getContextID()===i})))){e.next=7;break}return e.abrupt("return",o().resolve(a));case 7:return e.abrupt("return",o().reject(new x.Z(null)));case 8:case"end":return e.stop()}}),e)}))),this.requestTournamentAsync=function(){var e=(0,i.Z)(h().mark((function e(n){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.facebook.getTournamentAsync();case 3:return e.next=5,t.facebook.tournament.shareAsync({score:n});case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),i=GameSDK.player.getName(),e.next=12,t.facebook.tournament.createAsync({initialScore:n,config:{tournamentTitle:i+"'s Tournament"}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),this.isSupportedAPI=function(e){var n;return 0===t.supportedAPIs.length&&(t.supportedAPIs=GameSDK.getSupportedAPIs()),u()(n=t.supportedAPIs).call(n,e)},this.facebook=e,this.mockSubscribeBot=new b,this.mockAddShortcut=new E}var t=e.prototype;return t.switchAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 2:return e.next=4,GameSDK.context.switchAsync(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.chooseAsync=function(){var e=(0,i.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.chooseAsync({filters:["INCLUDE_EXISTING_CHALLENGES"],minSize:2,maxSize:2});case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t.createAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameCore.Utils.Valid.isValueChangeAsync(window.__fbGameReady,!0);case 3:return e.next=5,GameSDK.context.createAsync(""+t);case 5:case 15:return e.abrupt("return",GameSDK.context.getID());case 8:if(e.prev=8,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=16;break}e.t1=e.t0.code,e.next="USER_INPUT"===e.t1?14:"SAME_CONTEXT"===e.t1?15:16;break;case 14:return e.abrupt("return",!1);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t.getPlayerToken=function(){var e=(0,i.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.player.getSignedPlayerInfoAsync();case 2:return t=e.sent,e.abrupt("return",t.getSignature());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.getContextPlayers=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,GameSDK.context.getPlayersAsync();case 3:return n=e.sent,i=[],n.forEach((function(e){var n=e.getID();if(n!==t){var a=e.getName();if(a){var r=e.getPhoto();i.push(new I.Z(n,a,r).toObject())}}})),e.abrupt("return",GameCore.Utils.Array.unique(i));case 9:return e.prev=9,e.t0=e.catch(0),console.warn("getPlayersAsync",{error:e.t0}),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),t.shareAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.shareAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.sendMessage=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a,r,s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.image,a=t.template,r=t.cta,s=t.text,o={data:n,image:i,action:"CUSTOM",template:a,cta:r,text:s,strategy:"IMMEDIATE",notification:"PUSH"},e.next=4,GameSDK.updateAsync(o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.inviteAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.inviteAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.postSessionScoreAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.postSessionScoreAsync(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getRewardedVideoAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getRewardedVideoAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getInterstitialAdAsync=function(){var e=(0,i.Z)(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GameSDK.getInterstitialAdAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getContextID=function(){return GameSDK.context.getID()},t.setLoadingProgress=function(e){GameSDK.setLoadingProgress(e)},t.getLocale=function(){return GameSDK.getLocale()||"en"},t.injectTournament=function(){var e=(0,i.Z)(h().mark((function e(){var t,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GameCore.Configs.Tournament.UseMock){e.next=11;break}return e.next=4,n.e(302).then(n.bind(n,686));case 4:t=e.sent.default,i=new t,this.facebook.tournament=i,GameSDK.getTournamentAsync=this.getTournamentAsync,GameSDK.tournament=i,e.next=12;break;case 11:this.facebook.tournament=new R;case 12:this.facebook.getTournamentAsync=function(){return FBInstant.getTournamentAsync()},this.facebook.requestTournamentAsync=this.requestTournamentAsync;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.sendNotificationAsync=function(){var e=(0,i.Z)(h().mark((function e(t){var n,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("\ud83e\udd16 ? sendNotificationAsync",t),n=t.message,i=t.delayTime,a=t.type,e.next=5,FBInstant.scheduleNotificationAsync({title:D,minDelayInSeconds:i,description:n,type:null!=a?a:_.Z.GENERIC_NOTIFICATION});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("\ud83e\udd16 ? sendNotificationAsync",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),e}(),N=B},521:function(e,t,n){"use strict";var i=n(150),a=n.n(i),r=n(67),s=n.n(r),o=function(e,t){return void 0===t&&(t=1),a()({length:Math.ceil(e.length/t)},(function(n,i){return s()(e).call(e,i*t,i*t+t)}))},c=n(103),u=n.n(c),l=n(47),h=n.n(l),d=function(e,t){return u()(e).call(e,(function(e){return!h()(t).call(t,e)}))},f=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},p=n(83),g=n.n(p),m=function(e,t,n){return g()(n).call(n,e)===t&&null!==e&&void 0!==e},v=function(e){return u()(e).call(e,m)},y={chunk:o,difference:d,shuffle:f,unique:v},E=n(60),S=n.n(E),T=n(294),A=n.n(T),C=A()((function(e,t){if("string"===typeof e){var n=t[e.toLowerCase()];if("string"===typeof n)return n}return"?"})),b=A()((function(e){for(var t=null,n=[],i=/:([A-Z0-9?]+)/gm;null!==(t=i.exec(e));)n.push(t[1]);return n})),I=A()((function(e){for(var t=null,n=[],i=/([0-9]+[A-Z?]{1}|[A-Z?]{1})/gm;null!==(t=i.exec(e));){var a=t[0];if(a.length>=2){var r,o=a.length,c=s()(a).call(a,0,o-1),u=a[o-1],l=S()(r=new Array(+c)).call(r,u);n.push.apply(n,l)}else n.push(a)}return n})),w=function(e,t){var n=e,i=GameCore.Utils.Object.invert(t),a={},r=0,s=0;return b(n).forEach((function(e){r=0,s++,a[s]||(a[s]={}),I(e).forEach((function(e){r++,a[s][r]=C(e,i)}))})),a},x=A()((function(e,t){var n=t[e];return"string"===typeof n?""+n.toUpperCase():"?"})),_=function e(t,n,i){void 0===i&&(i=!1);var a="";if(!GameCore.Utils.Valid.isObject(t))return a;var r="",o=1;for(var c in t)if(GameCore.Utils.Object.hasOwn(t,c)){var u=t[c];if(GameCore.Utils.Valid.isObject(u))a+=":"+e(u,n,!0);else if(GameCore.Utils.Valid.isString(u)){var l=x(u,n);l===r?(o++,a=s()(a).call(a,0,-2)):o=1,a+=""+o+l,r=l}}return a=a.replace(/1([A-Z])/g,"$1")},O=function(e,t){try{if(!e)return"";if(t){var n=atob(e),i=btoa(t);return n=n.replace(i,"="),atob(n)}return atob(e)}catch(a){return console.warn("Error in hashToString",a),""}},P=function(e,t){try{if(!e)return"";if(t){var n=btoa(e),i=btoa(t);return n=n.replace("=",i),btoa(n)}return btoa(e)}catch(a){return console.warn("Error in stringToHash",a),""}},k=function(){var e={},t=0;e["="]=t++,e["["]=t++,e["]"]=t++,e[","]=t++,e['"']=t++,e[":"]=t++,e["{"]=t++,e["}"]=t++;for(var n=48;n<=57;n++)e[String.fromCharCode(n)]=t++;e['suits":["']=t++,e.clubs=t++,e.diamonds=t++,e.hearts=t++,e.spades=t++,e.id=t++,e['piles":']=t++,e['type":"prebuilt"']=t++,e['type":"dynamic"']=t++,e['difficulty":"random"']=t++,e['difficulty":"easy"']=t++,e['difficulty":"medium"']=t++,e['difficulty":"hard"']=t++,e['mainMissions":{']=t++,e.win=t++;for(var i=1;i<=8;i++)e["finish"+i+"Run"]=t++;for(var a=1;a<=9;a++)e["clear"+a+"Column"]=t++;e['foundations":']=t++,e['startingCards":']=t++,e['startingLayout":"']=t++,e['difficulty":"dynamic"']=t++,e['type":"journey"']=t++,e['journeyData":{']=t++,e['stock":"']=t++,e['pileData":{']=t++;for(var r=0;r<=9;r++)e["pile"+r+'":"']=t++;e.NoStock=t++,e['info":']=t++,e['extra":{']=t++,e['move":']=t++,e['time":']=t++,e['foundationData":{']=t++;for(var s=0;s<=9;s++)e["foundation"+s+'":"']=t++;return e['min":']=t++,e['max":']=t++,e}(),L=function(){for(var e={},t=5,n=["c","d","h","s"],i=1;i<=13;i++)for(var a=0;a<4;a++)e[""+i+n[a]]=t++,e[","+i+n[a]]=t++;for(var r=1;r<=13;r++)for(var s=0;s<4;s++)e["-"+r+n[s]]=t++,e[",-"+r+n[s]]=t++;return e}(),D=function(){var e=[];e.push('startingLayout":"'),e.push('stock":"');for(var t=0;t<=9;t++)e.push("pile"+t+'":"');for(var n=0;n<=9;n++)e.push("foundation"+n+'":"');return e}(),R=function(e){for(var t=!1,n="",i=[],a=0;a<e.length;a++){var r=e[a],s=n+r;'"'===r&&t&&(t=!1);var o=t?L:k;o[s]?(i.push(o[s]),h()(D).call(D,s)&&(t=!0),n=""):n=s}return i},B=n(105),N=n.n(B),M=n(104),G=n.n(M),U=function(e){var t;return N()(t=G()(e)).call(t,(function(t,n){return t[e[n]]=n,t}),{})},F=U(L),Z=U(k),H=function(e){for(var t=Z,n=F,i=!1,a="",r=0;r<e.length;r++){var s=e[r];4===e[r]&&i&&(i=!1);var o=i?n:t;if(!o[s]){console.warn("Invalid code in LZW decompression: ",s);break}a+=o[s],h()(D).call(D,o[s])&&(i=!0)}return a},W=n(33),z=n.n(W),Y={decodeMap:w,encodeMap:_,hashToString:O,stringToHash:P,lzwCompress:R,lzwDecompress:H,encodeLZWCompress:function(e){return z()(e).call(e,(function(e){return String.fromCharCode(e+48)})).join("")},decodeLZWCompress:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n)-48);return t}},V=function(e){try{return JSON.parse(e)}catch(t){return null}},K=n(48),j=n.n(K),J=function(e){try{return j()(e,null,0)}catch(t){return""}},X=function(e){return V(J(e))},q={clone:X,decode:V,encode:J},Q=function(e){var t="object"===typeof e||"function"===typeof e,n=Array.isArray(e);return null!==e&&t&&!n},$=function(e){return void 0===e||null===e},ee=function e(t){if(!Q(t))return t;for(var n in t){$(t[n])&&delete t[n];var i=t[n];Q(i)&&(t[n]=e(i))}return t},te=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ne=function(e){var t={};return G()(e).forEach((function(n){if(te(e,n)){var i=e[n];"string"===typeof i&&(t[i]=n)}})),t},ie=function(e,t){if(!Array.isArray(e))return{};var n={};return e.forEach((function(e){if(te(e,t)){var i=e[t];"string"===typeof i&&(n[i]=e)}})),n},ae={clear:ee,hasOwn:te,invert:ne,keyBy:ie},re=function(e){return e?e[0].toUpperCase()+s()(e).call(e,1):e},se=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t},oe=function(e){var t;return N()(t=G()(e)).call(t,(function(t,n){var i=e[n];return void 0!==i&&t.push(n+"="+i),t}),[]).join("&")},ce=function(e){void 0===e&&(e="0x");for(var t=e,n=0;n<6;n++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},ue=n(461),le=function(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[\u0111\u0110]/g,(function(e){return"\u0111"===e?"d":"D"}))},he=n(66),de=n.n(he),fe=n(542),pe=n.n(fe),ge=function(e,t){var n,i=e.split(" "),a=(i.length<=1?de()(n=[]).call(n,i):[i[0],i.pop()]).join(" "),r=pe()(a).call(a," ")||0,s=r>=0?r:t;return(a.length>t?a.substring(0,s):a).substring(0,t)},me=n(182),ve=n.n(me),ye=function(e){void 0===e&&(e=16);var t=function(t){return Math.floor(t).toString(e)};return t(Date.now()/1e3)+ve()(" ").call(" ",e).replace(/./g,(function(){return t(Math.random()*e)}))},Ee=n(462),Se={capitalize:re,hashCode:se,params:oe,toCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toLowerCase()+t.substr(1)},toUpperCamelCase:function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},randomColor:ce,random:ue.Z,removeDiacritics:le,getShortName:ge,generateObjectId:ye,replaceVariables:Ee.Z},Te=function(e){return"boolean"===typeof e},Ae=function(){return!0},Ce=function(e){return"function"===typeof e},be=function(e){return"number"===typeof e},Ie=function(e){var t;return g()(t=["string","number","symbol"]).call(t,typeof e)>-1},we=function(e){return"string"===typeof e},xe=n(58),_e=n.n(xe),Oe=function(e,t,n){var i=n||{},a=i.timeout,r=void 0===a?1e3:a,s=i.checkInterval,o=void 0===s?100:s;return new(_e())((function(n){var i=setInterval((function(){("function"===typeof e?e():e)===("function"===typeof t?t():t)&&(clearInterval(i),n(!0))}),o);r>0&&setTimeout((function(){clearInterval(i),n(!1)}),r)}))},Pe={isBoolean:Te,isDebugger:Ae,isFunction:Ce,isNumber:be,isObject:Q,isPropertyKey:Ie,isString:we,isValueChangeAsync:Oe},ke=function(e){var t=e.scene,n=e.key,i=e.newKey,a=t.textures.get(n).getSourceImage();if(!a)return!1;var r=Math.min(a.width,a.height);i||t.textures.removeKey(n);var s=t.textures.createCanvas(i||n,r,r),o=s.context;return o.beginPath(),o.arc(r/2,r/2,r/2,0,2*Math.PI,!1),o.clip(),s.draw((a.width-r)/2,(a.height-r)/2,a),!0},Le=function(e){var t=e.scene,n=e.key,i=e.newKey,a=e.radius,r=e.width,s=e.height,o=t.textures.get(n).getSourceImage();if(!o)return!1;r||(r=o.width),s||(s=o.height),i||t.textures.removeKey(n);var c=t.textures.createCanvas(i||n,r,s),u=c.context,l=Math.min(r,s)/100*a/2;return u.beginPath(),u.moveTo(0+l,0),u.lineTo(0+r-l,0),u.quadraticCurveTo(0+r,0,0+r,0+l),u.lineTo(0+r,0+s-l),u.quadraticCurveTo(0+r,0+s,0+r-l,0+s),u.lineTo(0+l,0+s),u.quadraticCurveTo(0,0+s,0,0+s-l),u.lineTo(0,0+l),u.quadraticCurveTo(0,0,0+l,0),u.closePath(),u.clip(),c.draw(0,0,o),!0},De=function(){return GameCore.Utils.Device.isDesktop()||GameCore.Utils.Device.pixelRatio()>1?2:1},Re=function(e,t){var n=e.split(","),i=n[0].match(/:(.*?);/);if(!i)return null;for(var a=i[1],r=atob(n[n.length-1]),s=r.length,o=new Uint8Array(s);s--;)o[s]=r.charCodeAt(s);return new File([o],t,{type:a})},Be=n(238),Ne=n.n(Be),Me=new Image,Ge=function(e,t){return void 0===t&&(t=!0),new(_e())((function(n){t&&(Me=new Image),Me.onload=function(){n(Me)},Me.onerror=function(){n(null)},Me.src=Ne().createObjectURL(e)}))},Ue=n(22),Fe=n(20),Ze=n.n(Fe),He=function(){var e=(0,Ue.Z)(Ze().mark((function e(t,n){var i;return Ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then((function(e){return e.blob()})).catch((function(){return null}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new File([i],n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),We=function(e){if(g()(e).call(e,".")<0)return e;for(var t=e.length-1;t>=0;t--){if("."==e[t])return e.substring(0,t);if("0"!=e[t])return e.substring(0,t+1)}return e},ze=function(e,t){var n=t||{},i=n.fractionalDigits,a=void 0===i?0:i,r=n.startAbbreviate,s=void 0===r?1e3:r,o=n.abbreviateStep,c=void 0===o?3:o,u=n.maxLength,l=void 0===u?-1:u,h=n.removeLastZero,d=void 0===h||h,f=n.suffixes,p=void 0===f?["","k","m","b","t","q"]:f,g=-1===l?99999999:l;if(e>=s){var m=Math.floor(e/Math.pow(10,c)),v=Math.floor((m.toString().length-1)/c)+1,y=(e/Math.pow(Math.pow(10,c),v)).toFixed(a),E=g-p[v].length,S=y.substring(0,E);return(d?We(S):S)+p[v]}var T=e.toFixed(a),A=g-p[0].length,C=T.substring(0,A);return d?We(C):C+p[0]},Ye={Array:y,Hash:Y,Json:q,Object:ae,String:Se,Valid:Pe,Image:{drawCircle:ke,drawBorder:Le,getImageScale:De,base64ToFile:Re,blobToHtmlImage:Ge,blobUrlToFile:He},Number:{toAbbreviatedString:ze,padStart:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i=n+i;return i},padEnd:function(e,t,n){void 0===n&&(n="0");for(var i=e.toString(),a=i.length,r=0;r<t-a;r++)i+=n;return i}},Device:{isDesktop:function(){return!/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobile:function(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},isAndroid:function(){return window.__fbPlatform?"ANDROID"===window.__fbPlatform:/Android/i.test(navigator.userAgent)},isIOS:function(){return window.__fbPlatform?"IOS"===window.__fbPlatform:/iPhone|iPad|iPod/i.test(navigator.userAgent)},isMobileWeb:function(){return window.__fbPlatform?"MOBILE_WEB"===window.__fbPlatform:/mobile/i.test(navigator.userAgent)},pixelRatio:function(){return Math.round(window.devicePixelRatio)||1}},Time:{isToday:function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},sleepAsync:function(e){return new(_e())((function(t){return setTimeout(t,e)}))}}},Ve=n(32),Ke=n(116),je=.8+function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0}()/function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0}()/2,Je={AppId:"1944110049277385",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io"},Xe={ENV:"production",ApiHost:"https://fbig-singleplay-apps.citigo.site",OtherHost:"https://fbig-leaderboards.citigo.site",Notification:{Enable:!1},LeadersBoard:{Prefix:"leaderboards"},Debugger:{ShowConsole:!1,ShowInspector:!1,ShowMonitoring:!1},Statistics:{Enable:!1,ShowFPSInGame:!1,ShowMemoryInGame:!1},Rollbar:{Enable:!1}},qe={ENV:"development",AppId:"",ApiHost:"https://fbig-singleplay-apps-dev.sunstudio.io",OtherHost:"https://leaderboards-dev.sunstudio.io",SyncProfileFromAPI:!1,Notification:{Enable:!0,DisableSendNotification:!1,ApiUrl:"https://notifications.sunstudio.io",GameTitle:"Sun Studio",GameImage:"https://sunstudio.io/images/logo.png",DailyNotificationMessages:{MONDAY:"Welcome back! A surprise awaits you in the game today. Don't miss out on your daily reward. \ud83c\udf1f",TUESDAY:"Ready for some fun? Your next adventure is waiting for you. Jump back in now! \ud83d\ude80",WEDNESDAY:"A mystery gift has been spotted in the game! Log in today to claim your exclusive reward. \ud83c\udf81",THURSDAY:"Challenge of the day: Can you beat it? Prove your skills and earn unique rewards. \ud83c\udfaf",FRIDAY:"Feeling lucky? Your daily spin is ready! Log in now for a chance to win big. \ud83c\udfa1",SATURDAY:"A special event is happening in the game today. Join the fun and don't miss out on exclusive content. \u2728",SUNDAY:"We'd love to hear from you! Log in to share your thoughts and suggestions, and let's make the game even better together. Plus, a reward for your feedback! \ud83c\udf08"}},AddShortcut:{UseMock:!1},SubscribeBot:{UseMock:!1},PlayerMock:{id:"",signature:""},OpponentMock:{id:"",signature:""},MatchMockFailRate:5,Gameplay:{StartLevel:1,StartScore:0,StartDiamonds:0,DefaultDiamondsForNewUser:300,LevelDifficultRate:{FromUnder30:1.07,FromUnder35:1.05,FromUnder45:1.05,FromUnder200:1.1},StartAdAtLevel:2,NewUserEasyGameCount:10,GiftTime:10800,AwardDiamonds:100,FreeItems:!1,DelayStart:2e3,DelayLevelUp:1800,DelayFinishGame:2900,EnableVibrate:!0,SmartClick:!1},LevelScroller:{limitLevelButtonInContainer:6},Tutorial:{ForceUseTutorial:!1,NumberOfTutorial:{FirstMove:3,TargetScore:1,CurrentScore:1,ColorfulGem:1,ItemPaint:1,ItemHammer:1,ItemShuffle:1}},PlayerDataStore:"playerData",Game:{AutoResize:!0,PortraitRatio:375/518,PortraitWidth:375,PortraitHeight:667,LandscapeRatio:760/360,LandscapeWidth:760*je,LandscapeHeight:360*je,ForcePixelRatio:0,DisableLandscape:!1,FullSizeOnLandscape:!0},Debugger:{ShowInspector:!1,ShowMonitoring:!1,ShowConsole:!1,Expanded:!0,AutoRefresh:!0,InspectorAutoUpdate:!0,Opacity:.8,ListPlayerDevIds:[]},Statistics:{Enable:!1,DisplayMode:0,FPS:!0,MS:!0,MB:!0,Opacity:.8,ShowFPSInGame:!0,ShowMemoryInGame:!1},ParticleEditor:{Enable:!1,Opacity:.8,Expanded:!0},ProfilerPlugin:{Enable:!1},CanvasRecorder:{Enable:!1,Options:{Type:"png",Quality:.85,RecordFps:60,SyncFps:!0}},Match:{MaxRescueCount:1,RescueGamePopupTimeout:15,ContinueSingleMatchEnabled:!1,SingleMatchStore:"singleMatch",LocalSingleMatchDefault:{_id:"12345678890",status:"open",playerId:"",score:0,level:1,startedAt:0,updateAt:0,finishAt:0,data:{}}},Tournament:{UseMock:!1,ForcePlay:!1,UseLeaderboard:!0,TournamentContextIds:[],YourMockTournamentCount:1},LeadersBoard:{Name:null,UseMock:!1,Prefix:"leaderboards",LeaderboardId:"",Limit:50,MockOptions:{PlayerEntryIndex:-1}},LanguageSupport:{en:"en"},EnableEffectSceneTransition:!1,DefaultTheme:"default",ThemeSupport:{default:"default"},Ads:{Enabled:!0,CalculateSafeAreaBottom:!0,EnableRewardVideoResetInterstitial:!1,Mockup:{Enable:!1,ErrorRate:5,GiphyApiKey:""},InterstitialAdOptions:{pID:"",showWhenStartGame:!0,secondsFirstTime:5,secondsBetweenAds:5,breakAdsConfig:{showOnFirstFoundationSession:!1,showOnFirstFoundationNewMatch:!1,secondsBetweenBreakAds:180}},RewardAdOptions:{pID:"",secondsFirstTime:0,secondsBetweenAds:0},BannerAdOptions:[{placementId:"123",position:"bottom",bannerWidth:320,bannerHeight:50,platform:"MOBILE",secondsReload:60},{placementId:"456",position:"right",bannerWidth:160,bannerHeight:600,platform:"DESKTOP",secondsReload:60}]},Network:{MaximumRequest:6,Timeout:15e3,Retries:3},Analytics:{GoogleAnalytics:{consoleLog:!1},FacebookAnalytics:{prefix:"fba",consoleLog:!1}},Sentry:{errorCodes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},errorMessages:{accepted:[],ignored:["Load image failed","Script error."]}},Rollbar:{Enable:!1,UseMockup:!1,FilterError:{Codes:{accepted:[],ignored:["USER_INPUT","NETWORK_FAILURE"]},Messages:{accepted:[],ignored:["Load image failed","Request failed to be processed","Script error."]}}},Performance:{Enable:!1,trackingSceneKeys:["DASHBOARD_SCENE","GAME_SCENE"],minQuality:1,maxQuality:2,fpsThreshold:48,checkInterval:2e3,qualityAdjustStep:.1,autoUpgradeQuality:!0,onlyUpdateWhenSwitchScene:!0}};qe=(0,Ke.TS)((0,Ve.Z)({},qe),Xe);var Qe=qe=(0,Ke.TS)((0,Ve.Z)({},qe),Je),$e=function(e){return function(t){try{var n=window.game,i=t.module;if(n.scene.getScenes(!0)[0].scene.key!==e)return;var a=i.default;n.scene.remove(e),n.scene.add(e,a,!0),n.scene.bringToTop(n.globalScene),console.log("%c HotScene: ","font-size:12px;background-color: #465975;color:#fff;",e)}catch(s){var r;null==(r=void 0)||r.invalidate()}}},et=n(612),tt=n.n(et),nt=n(614),it=n.n(nt),at=n(616),rt=n.n(at),st=n(218),ot=!1,ct=function e(t,n,i){n.forEach((function(n){if(n.name){var a=null;if(a=i?i.getByName(n.name):t.children.getByName(n.name),ot&&console.log("%c Checking object: ","font-size:12px;background-color: #465975;color:#fff;",n.name,n.type),a){if("Container"===n.type){var r=a,s=n.getAll();if(e(t,s,r),!r.hotContainer)return;console.log("%c Update container: ","font-size:12px;background-color: #33A5FF;color:#fff;",r.name)}var o=tt()(n),c=["_events","_sysEvents","input","localTransform","list","displayList"],l=u()(o).call(o,(function(e){if("string"!==typeof e)return!1;if(g()(c).call(c,e)>=0)return!1;if(!a)return!1;var t=it()(n,e);return!(t instanceof Function)&&(!(t instanceof Phaser.Scene)&&(!(t instanceof Phaser.GameObjects.Group)&&(!(t instanceof Phaser.GameObjects.GameObject)&&t===it()(a,e))))}));l.length<1||(ot&&console.log("%c HotObject: ","font-size:12px;background-color: #2EAFB0;color:#fff;",n.name,l),l.forEach((function(e){if(a){var t=it()(n,e),i=it()(a,e),r=rt()(a,e,t);ot&&console.log("%c Update property: ","font-size:12px;background-color: #B03734;color:#fff;",r,e,{oldValue:i,newValue:t})}})))}}}))},ut={Configs:Qe,Utils:Ye,LiveUpdate:{Scene:$e,SceneObjects:function(e,t){return void 0===t&&(t=ot),function(n){try{var i=window.game,a=n.module,r=i.scene.getScenes(!0)[0];if(r.scene.key!==e)return;ot=t;var s=a.default,o=e+"-draft";i.scene.remove(o);var c=i.scene.add(o,s);console.log("%c HotSceneObjects: ","font-size:12px;background-color: #465975;color:#fff;",e),r=i.scene.getScene(e),c.events.once(Phaser.Scenes.Events.RENDER,(0,st.D)((function(){var e=c.children.getAll();ct(r,e),i.scene.remove(o)})),50),i.scene.run(o),i.scene.bringToTop(r),i.scene.bringToTop(i.globalScene)}catch(u){console.warn(u)}}}}};window.GameCore=ut},677:function(e,t,n){"use strict";var i=n(22),a=n(2),r=n(20),s=n.n(r),o=n(29),c=n(492),u=GameCore.Utils.Object,l=GameCore.Ads,h=l.Types,d=l.Status,f=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).instance=void 0,i.placementId=void 0,i.instanceLoadFailedQueue=void 0,i.isHasTooManyInstancesError=void 0,i.instance=null,i.placementId=n,i.instanceLoadFailedQueue=[],i.isHasTooManyInstancesError=!1,i}(0,a.Z)(t,e),t.setGame=function(e){self.game=e};var n=t.prototype;return n.loadAsync=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===d.IDLE){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,this.status=d.LOADING,e.next=6,this.createInstanceByType(this.type);case 6:if(this.instance=e.sent,null!==this.instance){e.next=9;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 9:return e.next=11,this.instance.loadAsync();case 11:this.status=d.FILLED,t=this.getSceneName(),this.type===h.PRE_ROLL&&self.game.analytics.loadPreRollAd(t),this.type===h.INTERSTITIAL&&self.game.analytics.loadInterstitialAd(t),this.type===h.REWARDED&&self.game.analytics.loadRewardedVideoAd(t),e.next=26;break;case 18:throw e.prev=18,e.t0=e.catch(2),this.status=d.IDLE,this.instance&&this.instanceLoadFailedQueue.push(this.instance),this.instance=null,n=this.getSceneName(),self.game.analytics.loadAdFail(this.type,n,e.t0),e.t0;case 26:case"end":return e.stop()}}),e,this,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),n.showAsync=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,e.prev=1,this.status===d.FILLED){e.next=4;break}throw new GameCore.Ads.AdError("AD_NOT_FILLED","Ads no fill.");case 4:if(this.status=d.SHOWING,null!==this.instance){e.next=7;break}throw new GameCore.Ads.AdError("AD_INSTANCE_NOT_INITIATED","Ad instance didn't initiated.");case 7:return this.isHasTooManyInstancesError&&self.game.analytics.event(o._.MISSING_AD_SHOW,{ad_type:this.type}),e.next=10,this.instance.showAsync();case 10:t=!0,this.status=d.IDLE,this.instance=null,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0 instanceof Object&&u.hasOwn(e.t0,"code")?("ADS_NOT_LOADED"===e.t0.code?this.status=d.FILLED:(this.status=d.IDLE,this.instance=null),"USER_INPUT"===e.t0.code&&(this.status=d.IDLE,this.instance=null,t=!0)):(this.status=d.IDLE,this.instance=null),e.t0;case 19:return e.prev=19,window.focus(),n=this.getSceneName(),t?(this.type===h.PRE_ROLL&&self.game.analytics.showPreRollAd(n),this.type===h.INTERSTITIAL&&self.game.analytics.showInterstitialAd(n),this.type===h.REWARDED&&self.game.analytics.showRewardedVideoAd(n)):self.game.analytics.showAdFail(this.type,n),e.finish(19);case 24:case"end":return e.stop()}}),e,this,[[1,15,19,24]])})));return function(){return e.apply(this,arguments)}}(),n.getStatus=function(){return this.status},n.createInstanceByType=function(){var e=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=self.game.facebook,e.prev=1,e.t0=t,e.next=e.t0===h.REWARDED?5:e.t0===h.INTERSTITIAL||e.t0===h.PRE_ROLL?8:11;break;case 5:return e.next=7,n.getRewardedVideoAsync(this.placementId);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,n.getInterstitialAdAsync(this.placementId);case 11:case 20:return e.abrupt("return",null);case 12:e.next=21;break;case 14:if(e.prev=14,e.t1=e.catch(1),!(e.t1 instanceof Object&&u.hasOwn(e.t1,"code"))){e.next=20;break}if("ADS_TOO_MANY_INSTANCES"!==e.t1.code){e.next=20;break}return this.isHasTooManyInstancesError=!0,e.abrupt("return",this.instanceLoadFailedQueue.shift()||null);case 21:case"end":return e.stop()}}),e,this,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),n.getSceneName=function(){try{var e=self.game.globalScene;return e instanceof c.Z?e.getCurrentScene().scene.getSceneName():"unknown"}catch(t){return"unknown"}},t}(GameCore.Ads.AdInstance);t.Z=f},144:function(e,t,n){"use strict";n.d(t,{U:function(){return T},v:function(){return A}});var i=n(32),a=n(22),r=n(20),s=n.n(r),o=n(48),c=n.n(o),u=n(2),l=n(55),h=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="BadRequest",i.message=t||"This request is bad",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),d=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="RequestTimeout",i.message=t||"This request is timeout",i.payload=n,i}return(0,u.Z)(t,e),t}((0,l.Z)(Error)),f=n(117),p=GameCore.Configs,g=p.AppId,m=p.Network,v=function(e){if(!e.ok)throw new h(null,{response:e})},y=function(){var e=window.game.auth.getToken();return{token:e,timeout:m.Timeout,headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}},E=function(e,t,n,i){return(0,a.Z)(s().mark((function a(){var r,o,u,l,f;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r=e+"/apps/"+g+"/"+t,o=new AbortController,n.signal=o.signal,u=setTimeout((function(){o.abort()}),n.timeout),GameCore.Utils.Valid.isObject(i)&&(n.body=c()(i)),a.next=8,fetch(r,n);case 8:return l=a.sent,clearTimeout(u),v(l),a.next=13,l.json();case 13:if(a.t0=a.sent,a.t0){a.next=16;break}a.t0={};case 16:return f=a.t0,a.abrupt("return",f);case 20:if(a.prev=20,a.t1=a.catch(0),!(a.t1 instanceof h)){a.next=24;break}return a.abrupt("return",null);case 24:if(!(a.t1 instanceof Object&&GameCore.Utils.Object.hasOwn(a.t1,"name"))){a.next=27;break}if("AbortError"!==a.t1.name){a.next=27;break}throw new d(null);case 27:throw a.t1;case 28:case"end":return a.stop()}}),a,null,[[0,20]])})))},S=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",t());case 4:if(e.prev=4,e.t0=e.catch(0),!(e.t0 instanceof d&&n>0)){e.next=18;break}return e.prev=7,e.next=10,(0,f.qZ)(600);case 10:return e.next=12,S(t,n-1);case 12:return e.abrupt("return",e.sent);case 15:return e.prev=15,e.t1=e.catch(7),e.abrupt("return",{});case 18:if(!(e.t0 instanceof d)){e.next=20;break}return e.abrupt("return",{});case 20:return console.warn(e.t0),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e,null,[[0,4],[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),void 0===r&&(r=m.Retries),e.prev=2,o=(0,i.Z)({},y(),n,{method:"GET"}),c=E(a,t,o),e.next=7,S(c,r);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(s().mark((function e(t,n,a,r,o){var c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),void 0===o&&(o=m.Retries),e.prev=2,c=(0,i.Z)({},y(),a,{method:"POST"}),u=E(r,t,c,n),e.next=7,S(u,o);case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(2),console.warn(e.t0),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,i,a,r){return e.apply(this,arguments)}}()},221:function(e,t,n){"use strict";n.d(t,{DW:function(){return c},EH:function(){return r},fJ:function(){return a},kL:function(){return i},qj:function(){return s},rh:function(){return o}});var i="CONTEXT_RECEIVED",a="CONTEXT_PROCESSED",r="CONTEXT_GAME_MODE_DETECTED",s="MESSAGES_SENT_UPDATE",o="MESSAGES_SENT_REMOVE",c="SCENE_KEY_UPDATE"},146:function(e,t,n){"use strict";n.d(t,{Sb:function(){return r},W6:function(){return i},lB:function(){return s},nx:function(){return a}});var i="share_invite",a="tournament",r="challenge_friend_match",s="matching_group_match"},145:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var i=n(219),a=n(220),r=new i.Z("10","Your Friend",a.Z.AVATAR.FILE).toObject()},473:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(32),a=n(142),r=n(471),s=a.Z.sound,o=a.Z.music,c=a.Z.vibrate,u=a.Z.language,l=a.Z.theme,h=a.Z.tapToMove,d=a.Z.smartClick,f=a.Z.autoHints,p=a.Z.autoComplete,g=a.Z.backgroundIdx,m=a.Z.suitSize,v=a.Z.difficulty,y=a.Z.cardFaceIdx,E=a.Z.cardBackIdx,S=function(){function e(e){this.sound=void 0,this.music=void 0,this.vibrate=void 0,this.language=void 0,this.theme=void 0,this.tapToMove=void 0,this.smartClick=void 0,this.autoHints=void 0,this.autoComplete=void 0,this.relaxedSpider=void 0,this.suitSize=void 0,this.difficulty=void 0,this.backgroundIdx=void 0,this.cardFaceIdx=void 0,this.cardBackIdx=void 0;var t=e||{},n=t.sound,i=t.music,a=t.vibrate,S=t.language,T=t.theme,A=t.tapToMove,C=t.smartClick,b=t.autoHints,I=t.relaxedSpider,w=t.autoComplete,x=t.suitSize,_=t.difficulty,O=t.backgroundIdx,P=t.cardFaceIdx,k=t.cardBackIdx;this.sound=GameCore.Utils.Valid.isBoolean(n)?n:s,this.music=GameCore.Utils.Valid.isBoolean(i)?i:o,this.vibrate=GameCore.Utils.Valid.isBoolean(a)?a:c,this.language=GameCore.Utils.Valid.isString(S)?S:u,this.theme=GameCore.Utils.Valid.isString(T)?T:l,this.tapToMove=GameCore.Utils.Valid.isBoolean(A)?A:h,this.smartClick=GameCore.Utils.Valid.isBoolean(C)?C:d,this.autoHints=GameCore.Utils.Valid.isBoolean(b)?b:f,this.autoComplete=GameCore.Utils.Valid.isBoolean(w)?w:p,this.relaxedSpider=!GameCore.Utils.Valid.isBoolean(I)||I,this.suitSize=GameCore.Utils.Valid.isString(x)?x:m,this.difficulty=GameCore.Utils.Valid.isString(_)?_:v,this.backgroundIdx=GameCore.Utils.Valid.isNumber(O)?O:g,this.cardFaceIdx=GameCore.Utils.Valid.isNumber(P)?P:y,this.cardBackIdx=GameCore.Utils.Valid.isNumber(k)&&k<r.Z.Desktop.CardBack.length?k:E}return e.prototype.toObject=function(){return{sound:this.sound,music:this.music,vibrate:this.vibrate,language:this.language,theme:this.theme,tapToMove:this.tapToMove,smartClick:this.smartClick,autoHints:this.autoHints,autoComplete:this.autoComplete,relaxedSpider:this.relaxedSpider,suitSize:this.suitSize,difficulty:this.difficulty,backgroundIdx:this.backgroundIdx,cardFaceIdx:this.cardFaceIdx,cardBackIdx:this.cardBackIdx}},e}(),T=GameCore.Utils,A=T.Valid,C=T.Object,b=function(){function e(e){this.score=void 0,this.settings=void 0,this.gameData=void 0,this.userGuideDisplays=void 0,this.setupDefaultData(),this.updateScore(e),this.updateSettings(e),this.updateGameData(e),this.updateUserGuideDisplays(e)}var t=e.prototype;return t.setupDefaultData=function(){this.score=0,this.settings=(0,i.Z)({},a.Z),this.gameData={coins:0,gameStats:{},tournaments:[],currentJourneyLevel:1,newUserEasyGameCount:-1},this.userGuideDisplays=0},t.updateScore=function(e){var t=e.score;!1!==A.isNumber(t)&&(this.score=t)},t.updateSettings=function(e){var t=e.settings;if(!1!==A.isObject(t)){var n=new S(t).toObject();this.settings=n}},t.updateGameData=function(e){var t=e.gameData;!1!==A.isObject(t)&&(C.hasOwn(t,"coins")&&A.isNumber(t.coins)&&(this.gameData.coins=t.coins),this.gameData.gameStats=t.gameStats,this.gameData.tournaments=t.tournaments,A.isNumber(t.currentJourneyLevel)&&(this.gameData.currentJourneyLevel=t.currentJourneyLevel),this.gameData.newUserEasyGameCount=t.newUserEasyGameCount)},t.updateUserGuideDisplays=function(e){var t=e.userGuideDisplays;!1!==A.isNumber(t)&&(this.userGuideDisplays=t)},t.toObject=function(){return{score:this.score,settings:this.settings,gameData:this.gameData,userGuideDisplays:this.userGuideDisplays}},t.convertToPlayerData=function(){var e=this.gameData,t=e.coins,n=e.gameStats,i=e.tournaments,a=e.newUserEasyGameCount,r=e.currentJourneyLevel;return{score:this.score,settings:this.settings,customFields:{coins:t,gameStats:n,tournaments:i,currentJourneyLevel:r,newUserEasyGameCount:a},userGuideDisplays:this.userGuideDisplays}},t.convertToFacebookData=function(e){var t=e.score,n=e.settings,i=e.customFields,a=e.userGuideDisplays;return this.updateScore({score:t}),this.updateSettings({settings:n}),this.updateGameData({gameData:i}),this.updateUserGuideDisplays({userGuideDisplays:a}),this.toObject()},e}()},486:function(e,t,n){"use strict";var i=n(2),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LeaderboardNotFound",i.message=t||"Leaderboard not found",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(55).Z)(Error));t.Z=a},690:function(e,t,n){"use strict";var i=n(2),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentNotFound",i.message=t||"A Tournament with current context was not found",i.payload=n,i.code="TOURNAMENT_NOT_FOUND",i}return(0,i.Z)(t,e),t}((0,n(55).Z)(Error));t.Z=a},80:function(e,t,n){"use strict";var i=n(116),a=function(){function e(e,t){if(this.scene=void 0,this.config=void 0,this.isStarted=void 0,this.tween=void 0,!(t.targets.length<1)){this.buildConfig(e,t);var n=this.config.targets[0].scene;n&&(this.scene=n,this.isStarted=!1,this.tween=n.tweens.create(this.config))}}var t=e.prototype;return t.buildConfig=function(e,t){this.config=(0,i.TS)(e,t)},t.play=function(){this.tween&&(this.isStarted&&this.tween.hasStarted?this.restart():(this.isStarted||this.tween.hasStarted||this.tween.play(),this.isStarted=!0))},t.restart=function(){var e;null==(e=this.tween)||e.restart()},t.stop=function(){var e;null==(e=this.tween)||e.stop()},t.remove=function(){var e;null==(e=this.tween)||e.remove()},t.next=function(e){return this.tween?(this.tween.off(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween.once(Phaser.Tweens.Events.TWEEN_COMPLETE,e),this.tween):null},e}();t.Z=a},495:function(e,t,n){"use strict";var i=n(2),a=n(80),r={targets:[],yoyo:!0,repeat:-1,duration:600,repeatDelay:50,ease:n(496).Z,easeParams:[0,.9],props:{scale:{from:1,to:1.2}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},496:function(e,t,n){"use strict";var i=n(210),a=n.n(i)()(.55,.47,.43,.91);t.Z=a},494:function(e,t,n){"use strict";var i=n(210),a=n.n(i)()(.48,1.57,.6,.83);t.Z=a},100:function(e,t,n){"use strict";var i=n(2),a=n(80),r={targets:[],duration:600,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:0,from:0,to:1}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},148:function(e,t,n){"use strict";var i=n(2),a=n(80),r={targets:[],duration:600,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:500,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},101:function(e,t,n){"use strict";var i=n(2),a=n(80),r={targets:[],duration:600,ease:Phaser.Math.Easing.Quadratic.Out,props:{alpha:{start:1,from:1,to:0}}},s=function(e){function t(t){return e.call(this,r,t)||this}return(0,i.Z)(t,e),t}(a.Z);t.Z=s},230:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(28),a=n(19),r=n(2),s=n(29),o=n(80),c={targets:[],duration:400,ease:n(494).Z,props:{scale:"-=0.1"}},u=function(e){function t(t){return e.call(this,c,t)||this}return(0,r.Z)(t,e),t}(o.Z),l=n(81),h=n(46),d=n(56),f=function(e){function t(t,n,i,r,s,o){var c;return void 0===o&&(o=!1),(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.scaleDown=-1,c.button=void 0,c.upAnimation=void 0,c.downAnimation=void 0,c.isUsePixelPerfect=!1,c.hitArea=void 0,c.hitZone=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.callback=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){var e;c.isClicked||null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!0,c.runDownAnimation())},c.handleOnClick=function(e){return function(){var t,n;c.isClicked&&(null!=(t=c.upAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(c.isClicked=!1,c.runUpAnimation(),null==(n=c.upAnimation)||null==(n=n.tween)||n.once(Phaser.Tweens.Events.TWEEN_COMPLETE,(function(){c.logButtonEvent(),c.addDebugData(),c.processCallback(e)}))))}},c.handlePointerOut=function(){var e;c.isClicked&&(null!=(e=c.upAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(c.isClicked=!1,c.runUpAnimation()))},c.runDownAnimation=function(){var e;-1===c.scaleDown&&(c.scaleUp=c.scale,c.scaleDown=c.scaleDownPress),c.useSound&&c.scene.audio.playSound(h.Z.BUTTON_CLICK),null==(e=c.downAnimation)||e.remove(),c.downAnimation=new u({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleDown},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.downAnimation.play()},c.runUpAnimation=function(){var e;-1!==c.scaleUp&&(null==(e=c.upAnimation)||e.remove(),c.upAnimation=new u({targets:[(0,a.Z)(c)],duration:150,props:{scale:c.scaleUp},onUpdate:function(){c.hitZone.scale=1/c.scale}}),c.upAnimation.play())},c.isUsePixelPerfect=o,c.setDepth(l.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.disableButtonInteraction=function(){var e;null==(e=this.hitArea)||e.disableInteractive()},n.processCallback=function(e){var t,n,i;null==(t=this.upAnimation)||t.stop(),null==(n=this.downAnimation)||n.stop(),null==(i=this.scene)||i.tweens.killTweensOf(this),-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=this.scene.add.image(0,0,e,t),n&&i&&this.button.setWorldSize(n,i),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitZone=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.hitZone])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitZone.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,d.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.button.disableInteractive(),this.hitZone.disableInteractive(),this.isUsePixelPerfect?(this.hitArea=this.button,this.hitArea.setInteractive({useHandCursor:!0,pixelPerfect:!0})):(this.hitArea=this.hitZone,this.updateSize(),this.hitArea.setInteractive({useHandCursor:!0})),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(this.callback)),this.hitArea.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut),this.callback=e,this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(this.callback)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}},{key:"isUsePixelPerFect",get:function(){return this.isUsePixelPerfect}}]),t}(Phaser.GameObjects.Container)},82:function(e,t,n){"use strict";var i=n(28),a=n(19),r=n(2),s=n(29),o=n(81),c=n(56),u=n(46),l=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).useSound=!0,r.isClicked=!1,r.scaleUp=-1,r.scaleDownPress=void 0,r.parentName=void 0,r.disable=void 0,r.handelObjectDestroy=function(){r.scene&&r.scene.events.off(Phaser.Scenes.Events.SLEEP,r.handleSceneSleep)},r.handleSceneSleep=function(){r.scene&&r.scene.tweens.killTweensOf((0,a.Z)(r))},r.handlePointerDown=function(){r.isClicked||(r.animButtonDown(),r.isClicked=!0)},r.handleOnClick=function(e){return function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp(),r.logButtonEvent(),r.addDebugData(),r.processCallback(e))}},r.handlePointerOut=function(){r.isClicked&&(r.isClicked=!1,r.animButtonUp())},r.setDepth(o.Z.BUTTON),r.setSize(n,i),r.listenEvents(),r.scene.add.existing((0,a.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.animButtonDown=function(){var e=this;this.useSound&&this.scene.audio.playSound(u.Z.BUTTON_CLICK),this.scene.add.tween({targets:this,alpha:.75,duration:100,ease:Phaser.Math.Easing.Sine.Out,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.animButtonUp=function(){var e=this;this.scene.add.tween({targets:this,alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.In,onStart:function(t){e.disable&&t.remove()},onUpdate:function(t){e.disable&&t.remove()}})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){this.disable!=e&&(this.disable=e,e?(this.setAlpha(.5),this.disableInteractive()):(this.setAlpha(1),this.setInteractive()))},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},(0,i.Z)(t,[{key:"onClick",set:function(e){this.setInteractive({useHandCursor:!0}),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=l},229:function(e,t,n){"use strict";var i=n(28),a=n(19),r=n(2),s=n(29),o=n(81),c=n(56),u=n(59),l=n(495),h=n(46),d=function(e){function t(t,n,i,r,s){var c;return(c=e.call(this,t)||this).useSound=!0,c.isClicked=!1,c.scaleUp=-1,c.button=void 0,c.buttonDown=void 0,c.hitArea=void 0,c.scaleDownPress=void 0,c.parentName=void 0,c.handelObjectDestroy=function(){c.scene&&c.scene.events.off(Phaser.Scenes.Events.SLEEP,c.handleSceneSleep)},c.handleSceneSleep=function(){c.scene&&c.scene.tweens.killTweensOf((0,a.Z)(c))},c.handlePointerDown=function(){c.isClicked||(c.showButtonDown(),c.isClicked=!0)},c.handleOnClick=function(e){return function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown(),c.logButtonEvent(),c.addDebugData(),c.processCallback(e))}},c.handlePointerOut=function(){c.isClicked&&(c.isClicked=!1,c.hideButtonDown())},c.buttonsPulsateAnimation=void 0,c.setDepth(o.Z.BUTTON),c.createButton(n,i,r,s),c.updateSize(),c.listenEvents(),c.scene.add.existing((0,a.Z)(c)),c}(0,r.Z)(t,e);var n=t.prototype;return n.listenEvents=function(){this.scene.events.on(Phaser.Scenes.Events.SLEEP,this.handleSceneSleep),this.once(Phaser.GameObjects.Events.DESTROY,this.handelObjectDestroy)},n.showButtonDown=function(){this.useSound&&this.scene.audio.playSound(h.Z.BUTTON_CLICK),this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:.4,duration:150,ease:Phaser.Math.Easing.Sine.Out})},n.hideButtonDown=function(){this.scene.tweens.killTweensOf(this.buttonDown),this.scene.add.tween({targets:this.buttonDown,alpha:0,duration:150,ease:Phaser.Math.Easing.Sine.In})},n.processCallback=function(e){-1!==this.scaleUp&&this.setScale(this.scaleUp),e()},n.setDisabled=function(e){var t,n;e?(this.setAlpha(.5),null==(t=this.hitArea)||t.disableInteractive()):(this.setAlpha(1),null==(n=this.hitArea)||n.setInteractive())},n.createButton=function(e,t,n,i){this.button=new u.Z(this.scene,0,0,e,t,n,i),this.buttonDown=new u.Z(this.scene,0,0,e,t,n,13619151),this.buttonDown.setAlpha(0),this.scaleDownPress=this.scale-.1;var a=this.button,r=a.displayWidth,s=a.displayHeight;this.hitArea=this.scene.make.zone({displayWidth:r,displayHeight:s}),this.add([this.button,this.buttonDown,this.hitArea])},n.updateSize=function(){var e=this.button,t=e.width,n=e.height,i=t/100*10,a=n/100*10,r=i<10?i:10,s=a<10?a:10;this.setSize(t+r,n+s),this.hitArea.setSize(t+r,n+s)},n.addDebugData=function(){var e=this.getParentName(),t=this.name;(0,c.sw)("ui-click",e+":"+t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name;this.scene.analytics.event(s._.BUTTON_CLICK,{button_name:t,screen_name:e})},n.getParentName=function(){if(this.parentName)return this.parentName;for(var e=this.parentContainer;e;){if(e instanceof GameCore.Screen){var t=e;return this.parentName=t.getScreenName(),this.parentName}e=e.parentContainer}return this.parentName=this.scene.getSceneName(),this.parentName},n.runPulsate=function(){var e,t;null==(e=this.buttonsPulsateAnimation)||e.remove(),this.buttonsPulsateAnimation=new l.Z({targets:[this],props:{scale:{from:1,to:1.05},duration:500}}),null==(t=this.buttonsPulsateAnimation)||t.play()},n.stopPulsate=function(){var e;null==(e=this.buttonsPulsateAnimation)||e.stop(),this.setScale(1)},(0,i.Z)(t,[{key:"onClick",set:function(e){this.hitArea.setInteractive({useHandCursor:!0}),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleOnClick(e)),this.hitArea.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)}}]),t}(Phaser.GameObjects.Container);t.Z=d},493:function(e,t,n){"use strict";var i=n(19),a=n(2),r=n(33),s=n.n(r),o=n(40).Z.GAMEPLAY_DEFAULT,c=o.KEY,u=o.FRAME,l=function(e){function t(t){var n;return(n=e.call(this,t)||this).icons=[],n.originalScale=[],n.canPlayAnimation=!1,n.timeline=void 0,n.setSize(158,32),n.createIcons(),n.runAnimation(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createIcons=function(){var e,t=this.scene.add.image(0,0,c,u.LOADING_CLUB),n=this.scene.add.image(0,0,c,u.LOADING_DIAMOND),i=this.scene.add.image(0,0,c,u.LOADING_HEART),a=this.scene.add.image(0,0,c,u.LOADING_SPADE);t.setWorldSize(25.6,25.6),i.setWorldSize(25.6,25.6),a.setWorldSize(25.6,25.6),n.setWorldSize(25.6,25.6),this.icons=[t,n,i,a],this.add(this.icons),this.alignIcons(),this.originalScale=s()(e=this.icons).call(e,(function(e){return e.scale}))},n.alignIcons=function(){var e=10,t=this.icons[0].displayWidth;Phaser.Display.Align.In.Center(this.icons[0],this,3*-t/2-e-5),Phaser.Display.Align.In.Center(this.icons[1],this,-t/2-5),Phaser.Display.Align.In.Center(this.icons[2],this,t/2+5),Phaser.Display.Align.In.Center(this.icons[3],this,3*t/2+e+5)},n.runAnimation=function(){var e,t=this;if(this.canPlayAnimation){null==(e=this.timeline)||e.stop();var n=function(){t.icons.forEach((function(e,n){return e.setScale(t.originalScale[n])}))},i=this.scene.tweens.createTimeline({loop:-1,onStart:n,onLoop:n});this.icons.forEach((function(e,n){i.add({targets:e,duration:150,ease:Phaser.Math.Easing.Sine.Out,yoyo:!0,offset:150*n,props:{scale:{from:t.originalScale[n],to:t.originalScale[n]/.8*1.1}}})})),i.play(),this.timeline=i}},n.stopAnimation=function(){var e;null==(e=this.timeline)||e.stop()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this.canPlayAnimation=t,t?this.runAnimation():this.stopAnimation(),this},n.setTint=function(e){return this.icons.forEach((function(t){return t.setTint(e)})),this},t}(Phaser.GameObjects.Container);t.Z=l},511:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(28),a=n(2),r=n(103),s=n.n(r),o=n(60),c=n.n(o),u=n(33),l=n.n(u),h=n(32),d=n(19),f=n(105),p=n.n(f),g=n(67),m=n.n(g),v=n(150),y=n.n(v),E=n(151),S=n.n(E),T=n(231),A=n.n(T),C=n(81),b=n(218);function I(e,t){var n="undefined"!==typeof S()&&A()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return w(e,t);var i=m()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return y()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var x=function(e){function t(t,n){var i,a;(a=e.call(this,t)||this).config=void 0,a.isEnable=void 0,a.minValue=void 0,a.maxValue=void 0,a.isScrolling=void 0,a.boundTop=void 0,a.boundBottom=void 0,a.maskGraphics=void 0,a.objects=void 0,a._value=0,a.velocity=0,a.isScrollingSmooth=void 0,a.lastScrollY=void 0,a.isScrollingBack=void 0,a.scrollingBackTo=void 0,a.lastScrollYCount=0,a.hitArea=void 0,a.onScrollEvents=[],a.updateObjectVisible=(0,b.D)((function(){for(var e=a.objects.getChildren(),t=0;t<e.length;t++){var n=e[t];n.y+n.height<-a.height||n.y-n.height>a.height?n.setVisible(!1):n.active&&n.setVisible(!0)}}),100,{maxWait:100}),a.update=function(e,t){a.isScrollingSmooth&&a.velocity&&a.scrollingSmooth(t),a.isScrollingBack&&a.scrollingBack(t)},a.checkReachBound=function(){return a.isReachTop()||a.isReachBottom()},a.onMouseScroll=(0,b.D)((function(e,t,n){if(a.isEnable){var i;if(a.isScrolling=!0,a.checkReachBound())return a.lastScrollY=l()(i=a.lastScrollY).call(i,(function(){return 0})),void(a.isScrolling=!1);a.stopScrollingBack(),a.startScrollSmooth(-n*a.scrollSmooth/15)}}),100,{isImmediate:!0,maxWait:100}),a.onTouchScroll=function(e){if(a.isEnable){a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack(),a.isScrolling=!0;var t=a.scene.game.world.getZoomRatio(),n=e.position,i=e.prevPosition,r=(n.y-i.y)/t,s=a.height*a.maxScrollOver,o=1;if(a.lastScrollY[++a.lastScrollYCount%a.lastScrollY.length]=r,a.isReachTop()&&r>=0){var c=(s+(-a.minValue-a.value))/s;o=Math.min(o,c)}if(a.isReachBottom()&&r<=0){var u=(s-(-a.maxValue-a.value))/s;o=Math.min(o,u)}var l=r*o,h=a.maxScrollOver*a.height;a.value+l>-a.minValue+h?a.value=-a.minValue+h:a.value+l<-a.maxValue-h?a.value=-a.maxValue-h:a.value+=l,a.callOnScrollEvents(a.value,l)}},a.onTouchDown=function(){a.isEnable&&(a.velocity&&a.stopScrollSmooth(),a.stopScrollingBack())},a.onTouchEnd=function(){var e,t;if(a.input.enabled&&(a.isReachTop()&&(a.startScrollingBack(-a.minValue),a.stopScrollSmooth()),a.isReachBottom()&&(a.startScrollingBack(-a.maxValue),a.stopScrollSmooth()),a.isScrolling)){var n=p()(e=a.lastScrollY).call(e,(function(e,t){return e+t}))/a.lastScrollY.length;a.startScrollSmooth(n*a.scrollSmooth),a.lastScrollY=l()(t=a.lastScrollY).call(t,(function(){return 0}))}},a.config=(0,h.Z)({marginTop:0,marginBottom:0,maxScrollOver:.15,acceleration:.05,scrollSmooth:45,scrollingBackRate:5},n);var r=n.width,s=n.height;return a.isEnable=!1,a.minValue=-a.config.marginTop,a.maxValue=a.minValue,a.lastScrollY=c()(i=new Array(3)).call(i,0),a.setSize(r,s),a.createGroup(),a.createInput(),a.createEvents(),a.scene.add.existing((0,d.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.onScroll=function(e){this.onScrollEvents.push(e)},n.gotoTop=function(){this.value=this.config.marginTop},n.reset=function(){this.minValue=-this.config.marginTop,this.maxValue=this.minValue,this.isScrolling=!1,this.isScrollingBack=!1,this.isScrollingSmooth=!1,this.gotoTop(),this.setEnable(!1)},n.createDebug=function(){var e=this.drawDebugBox(16711680,.8);console.log(null==e?void 0:e.x,null==e?void 0:e.y,null==e?void 0:e.displayWidth,null==e?void 0:e.displayHeight)},n.setEnable=function(e){this.isEnable=e,e?this.setInteractive({draggable:!0,useHandCursor:!0}):this.disableInteractive()},n.addItem=function(e){this.addAt(e),this.objects.add(e);var t=e.y,n=e.height,i=t-n/2-this.marginTop+this.height/2,a=t+n/2+this.marginBottom-this.height/2;this.minValue=Math.min(this.minValue,i,0),this.maxValue=Math.max(this.maxValue,a,0),this.updateObjectVisible()},n.addItems=function(e){var t=this;this.addAt(e),this.objects.addMultiple(e);var n=l()(e).call(e,(function(e){return e.y-e.height/2-t.marginBottom+t.height/2})),i=l()(e).call(e,(function(e){return e.y+e.height/2+t.marginBottom-t.height/2}));this.minValue=Math.min(this.minValue,Math.max.apply(Math,n),0),this.maxValue=Math.max(this.maxValue,Math.max.apply(Math,i),0),this.updateObjectVisible()},n.clearItem=function(){this.objects.clear(!0,!0),this.reset()},n.getChildren=function(){var e;return s()(e=this.objects.getChildren()).call(e,(function(e){return e.active}))},n.createBound=function(e,t,n,i){this.boundTop=this.scene.make.image({key:e,frame:t}),this.boundBottom=this.scene.make.image({key:e,frame:t}),this.boundTop.setTint(i),this.boundBottom.setTint(i),this.boundTop.setAlpha(1,1,0,0),this.boundBottom.setAlpha(0,0,1,1),this.boundTop.setDepth(C.Z.PRIORITY),this.boundBottom.setDepth(C.Z.PRIORITY);var a=this.width,r=n,s=this.getWorldPosition(),o=s.x,c=s.y;this.boundTop.setDisplaySize(a,r),this.boundBottom.setDisplaySize(a,r),this.boundTop.setY(-this.displayHeight/2+r/2+c-this.y-1),this.boundBottom.setY(this.displayHeight/2-r/2+c-this.y+1),this.boundTop.setX(o-this.x),this.boundBottom.setX(o-this.x),this.add([this.boundTop,this.boundBottom])},n.createMask=function(){var e;null==(e=this.maskGraphics)||e.destroy(),this.maskGraphics=this.scene.make.graphics({fillStyle:{color:255,alpha:1},visible:!0}),this.maskGraphics.setName("MaskGraphics");var t=this.width,n=this.height;this.maskGraphics.fillRoundedRect(0-t/2,0-n/2,t,n,0),this.setMask(this.maskGraphics.createGeometryMask()),this.scene.events.off(Phaser.Scenes.Events.UPDATE,this.updateMask,this),this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.updateMask,this)},n.updateMask=function(){var e=this.getWorldPosition(),t=e.x,n=e.y;this.maskGraphics.setPosition(t,n)},n.createGroup=function(){this.objects=this.scene.make.group({})},n.updateObject=function(e){this.objects.incY(e),this.updateObjectVisible()},n.createInput=function(){this.setInteractive({draggable:!0,useHandCursor:!0}),this.on(Phaser.Input.Events.POINTER_WHEEL,this.onMouseScroll),this.on(Phaser.Input.Events.GAMEOBJECT_DRAG,this.onTouchScroll),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.onTouchDown),this.scene.input.on(Phaser.Input.Events.POINTER_UP,this.onTouchEnd,this)},n.createEvents=function(){this.scene.events.on(Phaser.Scenes.Events.UPDATE,this.update)},n.callOnScrollEvents=function(e,t){for(var n,i=I(this.onScrollEvents);!(n=i()).done;){(0,n.value)(this,e,t)}},n.scrollingBack=function(e){var t=(this.scrollingBackTo-this.value)*e*this.scrollingBackRate/1e3;this.value+=t,Math.abs(this.scrollingBackTo-this.value)<.5&&(this.value=this.scrollingBackTo,this.stopScrollingBack()),this.callOnScrollEvents(this.value,t)},n.startScrollingBack=function(e){this.isScrollingBack=!0,this.scrollingBackTo=e},n.stopScrollingBack=function(){this.isScrollingBack=!1},n.scrollingSmooth=function(e){var t=this.velocity*e/1e3;this.value+=t;var n=Math.abs(this.velocity)/this.velocity;this.isReachTop()&&(this.startScrollingBack(-this.minValue),this.stopScrollSmooth()),this.isReachBottom()&&(this.startScrollingBack(-this.maxValue),this.stopScrollSmooth()),this.callOnScrollEvents(this.value,t),Math.abs(this.velocity)<1?this.stopScrollSmooth():this.velocity-=Math.abs(this.velocity)*this.acceleration*n},n.startScrollSmooth=function(e){this.isScrollingSmooth=!0,e&&(e*this.velocity>0?this.velocity+=e:this.velocity=e)},n.stopScrollSmooth=function(){this.isScrollingSmooth=!1,this.isScrolling=!1,this.velocity=0,this.callOnScrollEvents(this.value,0)},n.isReachTop=function(){return this.value>-this.minValue},n.isReachBottom=function(){return-this.value>this.maxValue},(0,i.Z)(t,[{key:"marginTop",get:function(){return this.config.marginTop}},{key:"marginBottom",get:function(){return this.config.marginBottom}},{key:"acceleration",get:function(){return this.config.acceleration}},{key:"maxScrollOver",get:function(){return this.config.maxScrollOver}},{key:"scrollSmooth",get:function(){return this.config.scrollSmooth}},{key:"scrollingBackRate",get:function(){return this.config.scrollingBackRate}},{key:"value",get:function(){return this._value},set:function(e){var t=e-this._value;this._value=e,this.updateObject(t)}}]),t}(Phaser.GameObjects.Container),_=(function(e){function t(t){var n;return(n=e.call(this,t,"UpdateAbleObject")||this).updateInfo=void 0,n}(0,a.Z)(t,e)}(Phaser.GameObjects.GameObject),function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).classType=void 0,i.listConfigs=void 0,i.padding=void 0,i.startObjectIndex=void 0,i.endObjectIndex=void 0,i.listObjects=void 0,i.classType=n.classType,i.listConfigs=n.listConfigs,i.padding=n.padding?n.padding:0,i.objects.classType=i.classType,i.updateConfig(i.listConfigs),i}(0,a.Z)(t,e);var n=t.prototype;return n.reset=function(){e.prototype.reset.call(this),this.killAndHideAll()},n.getChildren=function(){var e;return s()(e=this.listObjects).call(e,(function(e){return void 0!=e&&e.active}))},n.updateConfig=function(e){var t;this.reset(),this.listConfigs=e,this.listObjects=c()(t=new Array(e.length)).call(t,void 0),this.addObjectIndex(0,0);var n=this.getEndObjectIndex();this.addObjectIndex(1,n),this.startObjectIndex=this.getStartObjectIndex(),this.endObjectIndex=this.getEndObjectIndex(),this.updateMaxHeight(),this.value=this.marginTop},n.killAndHideAll=function(){var e,t=this;this.listObjects instanceof Array&&l()(e=this.listObjects).call(e,(function(e){void 0!==e&&t.objects.killAndHide(e)}))},n.setItemPosition=function(e,t){var n=e.height;e.setPosition(0,n/2+(n+this.padding)*t-this.height/2)},n.updateMaxHeight=function(){return this.maxValue=Math.max(this.listConfigs.length*(this.objHeight+this.padding)-this.padding+this.marginBottom-this.height,0)},n.updateObject=function(t){e.prototype.updateObject.call(this,t);for(var n=this.getStartObjectIndex(),i=this.getEndObjectIndex(),a=this.startObjectIndex;a<=this.endObjectIndex;a++)(a<n||a>i)&&this.killObjectIndex(a,a);for(var r=n;r<=i;r++)(r<this.startObjectIndex||r>this.endObjectIndex)&&this.addObjectIndex(r,r);this.startObjectIndex=n,this.endObjectIndex=i},n.killObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.listObjects[n];i&&(this.objects.killAndHide(i),this.listObjects[n]=void 0)}},n.addObjectIndex=function(e,t){for(var n=e;n<=t;n++){var i=this.padding,a=this.listConfigs;if(n>=a.length)return;var r=this.objects.getFirstDead(!0),s=r.height,o=s/2+(s+i)*n+this.value-this.height/2;r.updateInfo(a[n]),r.setPosition(0,o),r.setActive(!0),r.setVisible(!0),this.addAt(r),this.listObjects[n]=r}},n.getStartObjectIndex=function(){var e=this.objHeight,t=this.padding;return Math.max(Math.floor((0-this.value)/(e+t)),0)},n.getEndObjectIndex=function(){var e=this.objHeight,t=this.padding,n=this.listConfigs,i=e+t;return Math.min(Math.floor((this.height-this.value)/i),n.length)},(0,i.Z)(t,[{key:"objHeight",get:function(){var e=this.objects.getChildren();return 0==e.length?this.maxValue=0:e[0].height}}]),t}(x))},504:function(e,t,n){"use strict";var i=n(19),a=n(2),r=function(e){function t(t,n){var a;return(a=e.call(this,t)||this).payload=void 0,a.mainText=void 0,a.shadowText=void 0,a.payload=n,a.createMainText(),a.createShadowText(),a.updateSize(),a.moveDown(a.shadowText),a.scene.add.existing((0,i.Z)(a)),a}(0,a.Z)(t,e);var n=t.prototype;return n.setText=function(e){this.mainText.setText(e),this.shadowText.setText(e),this.scene.lang.setFontSize(this.mainText,this.payload.maxWidth,this.payload.maxHeight),this.scene.lang.setFontSize(this.shadowText,this.payload.maxWidth,this.payload.maxHeight),this.updateSize()},n.setTintText=function(e,t,n,i){this.mainText.setTint(e,t,n,i)},n.setDropShadow=function(e,t,n,i){void 0===i&&(i=1),this.shadowText.setVisible(!0),this.shadowText.setTint(n),this.shadowText.setAlpha(i),Phaser.Display.Align.In.Center(this.shadowText,this.mainText,e,t)},n.updateSize=function(){var e=this.mainText,t=e.width,n=e.height;this.setSize(t,n)},n.createMainText=function(){this.mainText=this.scene.lang.makeText(this.scene,{font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},maxWidth:this.payload.maxWidth,maxHeight:this.payload.maxHeight}),this.add(this.mainText)},n.createShadowText=function(){this.shadowText=this.scene.lang.makeText(this.scene,{font:this.payload.font,size:this.payload.size,origin:{x:.5,y:.5},visible:!1,maxWidth:this.payload.maxWidth,maxHeight:this.payload.maxHeight}),this.add(this.shadowText)},t}(Phaser.GameObjects.Container);t.Z=r},81:function(e,t){"use strict";t.Z={BACKGROUND:1,FOOTER_LOGO:2,FIREWORKS:5,ITEM:10,LOGO:15,BUTTON:40,TILE:50,TEXT:60,ENCOURAGING:62,EFFECT:64,MESSAGE:66,POPUP:80,PRIORITY:160,DEBUG:180,ON_TOP:1e4}},501:function(e,t){"use strict";t.Z={FOOTER:12,TITLE:24,TAB_SELECTOR_LABEL:14,TOURNAMENT_BLOCK:{TITLE:20,JOIN_LABEL:16,LOW_TO_WIN:12}}},500:function(e,t){"use strict";t.Z={STATUS:{READY:"ready",RUNNING:"running",STOPPED:"stopped"}}},490:function(e,t){"use strict";t.Z={ONE_SUIT:{KEY:"dynamic-levels-one-suit",PATH:"assets/levels/spider/one-suit/dynamic.txt",DECOMPRESSED_DATA:[]},TWO_SUIT:{KEY:"dynamic-levels-two-suit",PATH:"assets/levels/spider/two-suit/dynamic.txt",DECOMPRESSED_DATA:[]},FOUR_SUIT:{KEY:"dynamic-levels-four-suit",PATH:"assets/levels/spider/four-suit/dynamic.txt",DECOMPRESSED_DATA:[]}}},57:function(e,t){"use strict";t.Z={PRIMARY:{KEY:"sf-pro-medium",en:{TEXTURE:"./assets/fonts/sf-pro-medium.png",DATA:"./assets/fonts/sf-pro-medium.xml"},ru:{TEXTURE:"./assets/fonts/sf-pro-medium-ru.png",DATA:"./assets/fonts/sf-pro-medium-ru.xml"},es:{TEXTURE:"./assets/fonts/sf-pro-medium-es.png",DATA:"./assets/fonts/sf-pro-medium-es.xml"},pt:{TEXTURE:"./assets/fonts/sf-pro-medium-pt.png",DATA:"./assets/fonts/sf-pro-medium-pt.xml"},zh:{TEXTURE:"./assets/fonts/sf-pro-medium-zh.png",DATA:"./assets/fonts/sf-pro-medium-zh.xml"},fr:{TEXTURE:"./assets/fonts/sf-pro-medium-fr.png",DATA:"./assets/fonts/sf-pro-medium-fr.xml"},id:{TEXTURE:"./assets/fonts/sf-pro-medium.png",DATA:"./assets/fonts/sf-pro-medium.xml"},de:{TEXTURE:"./assets/fonts/sf-pro-medium-de.png",DATA:"./assets/fonts/sf-pro-medium-de.xml"},it:{TEXTURE:"./assets/fonts/sf-pro-medium-it.png",DATA:"./assets/fonts/sf-pro-medium-it.xml"},ja:{TEXTURE:"./assets/fonts/sf-pro-medium-ja.png",DATA:"./assets/fonts/sf-pro-medium-ja.xml"},tr:{TEXTURE:"./assets/fonts/sf-pro-medium-tr.png",DATA:"./assets/fonts/sf-pro-medium-tr.xml"}},BOLD:{KEY:"sf-pro-bold",en:{TEXTURE:"./assets/fonts/sf-pro-bold.png",DATA:"./assets/fonts/sf-pro-bold.xml"},ru:{TEXTURE:"./assets/fonts/sf-pro-bold-ru.png",DATA:"./assets/fonts/sf-pro-bold-ru.xml"},es:{TEXTURE:"./assets/fonts/sf-pro-bold-es.png",DATA:"./assets/fonts/sf-pro-bold-es.xml"},pt:{TEXTURE:"./assets/fonts/sf-pro-bold-pt.png",DATA:"./assets/fonts/sf-pro-bold-pt.xml"},zh:{TEXTURE:"./assets/fonts/sf-pro-bold-zh.png",DATA:"./assets/fonts/sf-pro-bold-zh.xml"},fr:{TEXTURE:"./assets/fonts/sf-pro-bold-fr.png",DATA:"./assets/fonts/sf-pro-bold-fr.xml"},de:{TEXTURE:"./assets/fonts/sf-pro-bold-de.png",DATA:"./assets/fonts/sf-pro-bold-de.xml"},id:{TEXTURE:"./assets/fonts/sf-pro-bold.png",DATA:"./assets/fonts/sf-pro-bold.xml"},it:{TEXTURE:"./assets/fonts/sf-pro-bold-it.png",DATA:"./assets/fonts/sf-pro-bold-it.xml"},ja:{TEXTURE:"./assets/fonts/sf-pro-bold-ja.png",DATA:"./assets/fonts/sf-pro-bold-ja.xml"},tr:{TEXTURE:"./assets/fonts/sf-pro-bold-tr.png",DATA:"./assets/fonts/sf-pro-bold-tr.xml"}},FONT_FAMILY:"sf-pro",ATLAS:{KEY:"fonts",TEXTURE:"./assets/fonts/fonts.png",JSON:"./assets/fonts/fonts.json"},BOLD_SHADOW:{KEY:"agan65-shadow",TEXTURE:"./assets/fonts/agan65-shadow.png",DATA:"./assets/fonts/agan65-shadow.xml"},BOLD_SHADOW_BLUR:{KEY:"agan65-shadow-blur",TEXTURE:"./assets/fonts/agan65-shadow-blur.png",DATA:"./assets/fonts/agan65-shadow-blur.xml"}}},220:function(e,t){"use strict";var n={AVATAR:{KEY:"avatar",FILE:"./assets/images/others/avatar.png",CONFIG:{}},ICON_EARTH:{KEY:"icon-earth",FILE:"./assets/images/others/icon-earth.png",CONFIG:{}},BACKGROUND:{KEY:"background",FILE:"./assets/images/"+GameCore.Utils.Image.getImageScale()+"x/bg.jpg",CONFIG:{}}};t.Z=n},491:function(e,t){"use strict";t.Z={TEST_LEVELS:{KEY:"test-journey-levels",PATH:"assets/levels/spider/journey/test.txt",DECOMPRESSED_DATA:[]}}},489:function(e,t){"use strict";t.Z={ONE_SUIT:{GROUP1:{KEY:"difficulty-1-one-suit",PATH:"assets/levels/spider/one-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-one-suit",PATH:"assets/levels/spider/one-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-one-suit",PATH:"assets/levels/spider/one-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-one-suit",PATH:"assets/levels/spider/one-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-one-suit",PATH:"assets/levels/spider/one-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-one-suit",PATH:"assets/levels/spider/one-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-one-suit",PATH:"assets/levels/spider/one-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-one-suit",PATH:"assets/levels/spider/one-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-one-suit",PATH:"assets/levels/spider/one-suit/levels9.txt",DECOMPRESSED_DATA:[]}},TWO_SUIT:{GROUP1:{KEY:"difficulty-1-two-suit",PATH:"assets/levels/spider/two-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-two-suit",PATH:"assets/levels/spider/two-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-two-suit",PATH:"assets/levels/spider/two-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-two-suit",PATH:"assets/levels/spider/two-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-two-suit",PATH:"assets/levels/spider/two-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-two-suit",PATH:"assets/levels/spider/two-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-two-suit",PATH:"assets/levels/spider/two-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-two-suit",PATH:"assets/levels/spider/two-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-two-suit",PATH:"assets/levels/spider/two-suit/levels9.txt",DECOMPRESSED_DATA:[]}},FOUR_SUIT:{GROUP1:{KEY:"difficulty-1-four-suit",PATH:"assets/levels/spider/four-suit/levels1.txt",DECOMPRESSED_DATA:[]},GROUP2:{KEY:"difficulty-2-four-suit",PATH:"assets/levels/spider/four-suit/levels2.txt",DECOMPRESSED_DATA:[]},GROUP3:{KEY:"difficulty-3-four-suit",PATH:"assets/levels/spider/four-suit/levels3.txt",DECOMPRESSED_DATA:[]},GROUP4:{KEY:"difficulty-4-four-suit",PATH:"assets/levels/spider/four-suit/levels4.txt",DECOMPRESSED_DATA:[]},GROUP5:{KEY:"difficulty-5-four-suit",PATH:"assets/levels/spider/four-suit/levels5.txt",DECOMPRESSED_DATA:[]},GROUP6:{KEY:"difficulty-6-four-suit",PATH:"assets/levels/spider/four-suit/levels6.txt",DECOMPRESSED_DATA:[]},GROUP7:{KEY:"difficulty-7-four-suit",PATH:"assets/levels/spider/four-suit/levels7.txt",DECOMPRESSED_DATA:[]},GROUP8:{KEY:"difficulty-8-four-suit",PATH:"assets/levels/spider/four-suit/levels8.txt",DECOMPRESSED_DATA:[]},GROUP9:{KEY:"difficulty-9-four-suit",PATH:"assets/levels/spider/four-suit/levels9.txt",DECOMPRESSED_DATA:[]}}}},40:function(e,t){"use strict";var n=GameCore.Utils.Image.getImageScale(),i={TUTORIAL:{KEY:"tutorial-resources",TEXTURE:"./assets/textures/"+n+"x/tutorial-resources.png",JSON:"./assets/textures/"+n+"x/tutorial-resources.json",FRAME:{TIP:"tip",HAND:"hand",BLANK:"blank",AVATAR_CAT:"avatar-cat",POPUP_TALK:"talk-popup",FIRST_MOVE:"first-move",CURRENT_SCORE:"current-score",TARGET_SCORE:"target-score",HAMMER_ITEM:"hammer-item",PAINT_ITEM:"paint-item",SHUFFLE_ITEM:"shuffle-item",COLORFUL_GEM_1:"colorful-gem-1",COLORFUL_GEM_2:"colorful-gem-2"}},GAMEPLAY_DEFAULT:{KEY:"gameplay-default",en:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default.png",JSON:"./assets/textures/"+n+"x/gameplay-default.json"},ru:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-ru.png",JSON:"./assets/textures/"+n+"x/gameplay-default-ru.json"},es:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-es.png",JSON:"./assets/textures/"+n+"x/gameplay-default-es.json"},pt:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-pt.png",JSON:"./assets/textures/"+n+"x/gameplay-default-pt.json"},zh:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-zh.png",JSON:"./assets/textures/"+n+"x/gameplay-default-zh.json"},fr:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-fr.png",JSON:"./assets/textures/"+n+"x/gameplay-default-fr.json"},de:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-de.png",JSON:"./assets/textures/"+n+"x/gameplay-default-de.json"},id:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-id.png",JSON:"./assets/textures/"+n+"x/gameplay-default-id.json"},it:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-it.png",JSON:"./assets/textures/"+n+"x/gameplay-default-it.json"},ja:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-ja.png",JSON:"./assets/textures/"+n+"x/gameplay-default-ja.json"},tr:{TEXTURE:"./assets/textures/"+n+"x/gameplay-default-tr.png",JSON:"./assets/textures/"+n+"x/gameplay-default-tr.json"},FRAME:{BLANK:"blank",STATS_CROWN:"crown",STATS_STAR:"star",STATS_CUP:"stats_cup",STATS_MEDAL_START:"stats_medal_star",STATS_TIMER:"stats_timer",STATS_FLASH:"flash",MENU_STATISTIC:"menu_statistics",CUP:"cup",IC_SETTINGS:"ic_setting",IC_PLAY:"ic_play",IC_HINT:"ic_hint",IC_AUTO_HINT:"ic-auto-hint",IC_RELAX:"ic-relax",IC_SUIT_SIZE:"ic-suit-size",IC_UNDO:"ic_undo",IC_SHARE:"ic_share",IC_THEME:"ic_theme",IC_INVITE:"ic_invite",IC_SOUND:"ic_sound",IC_MOVE:"ic_move",IC_STATISTICS:"ic_statistics",IC_NEXT:"ic_next",IC_BOOK:"ic_book",IC_RESTART:"ic_restart",IC_REPLAY:"ic_replay",IC_RECYCLE:"ic_recycle",IC_DRAW_MODE:"ic_draw_mode",IC_AUTO_COMPLETE:"ic_auto_complete",IC_SWITCH_ON:"ic_switch_on",IC_SWITCH_OFF:"ic_switch_off",IC_SQUARE_ON:"ic_square_on",IC_SQUARE_OFF:"ic_square_off",ADD_SQUARE:"add-square",TIMER:"timer",GOLD:"gold",SILVER:"silver",BRONZE:"bronze",CUSTOM_MEDAL:"custom_medal",TOURNAMENT_TIMER:"tournament_timer",MEDAL_STAR:"medal-star",NO_TOURNAMENT:"no-tournament",IC_BG_OFF:"ic_bg_off",ARROW_SWAP_HORIZONTAL:"arrow-swap-horizontal",AVATAR_CROWN:"avatar_crown",WIN_BANNER:"win_banner",LOSE_BANNER:"lose_banner",BEAM:{AXIS:"beam_axis",LOSE_AXIS:"lose_beam_axis"},FLAG:{LEFT:"flags/left/",RIGHT:"flags/right/"},STRING:{LEFT:"string/left",RIGHT:"string/right"},LIGHTNING:{LEFT:"lightning/left_lightning",MIDDLE:"lightning/middle_lightning",RIGHT:"lightning/right_lightning"},HAND:"hand",LOADING_CLUB:"loading_club",LOADING_DIAMOND:"loading_diamond",LOADING_HEART:"loading_heart",LOADING_SPADE:"loading_spade",BOTTOM_BG:"bottom_bg",BOTTOM_LOGO:"bottom_logo",FOOTER_BG:"footer-bg",STOCK_BG:"stock-bg",FOOTER_TEXT:{BACK_TO_GAME:"text/back-to-game",TEXT_GAME:"text/text-game",TEXT_HINT:"text/text-hint",TEXT_SETTINGS:"text/text-settings",TEXT_TOURNAMENTS:"text/text-tournaments",TEXT_UNDO:"text/text-undo"},STEP:{IN_PROCESS_STEP:"steps/in_process_step",COMING_STEP:"steps/coming_step"},MISSION_MEDAL:"mission_medal",IC_VERIFY:"ic_verify",MISSION_HEADER_COMPLETED:"mission_header_completed",MISSION_HEADER_FAILED:"mission_header_failed",DEV_TOOLS_BUTTON:"dev-tools-button",JOURNEY:{PATH_Y1:"journey/path y1",PATH_Y2:"journey/path y2",PATH_Y3:"journey/path y3",PATH_Y0:"journey/path y0",PATH_G1:"journey/path g1",PATH_G2:"journey/path g2",PATH_G3:"journey/path g3",PATH_G0:"journey/path g0",LV_ACTIVE_FX:"journey/lv-active_fx",LV_ACTIVE:"journey/lv-active",LV_PASSED:"journey/lv-passed",LV_PASSED_BG:"journey/lv-passed_bg1",LV_TWO_CARDS_LOCK:"journey/lv-special_lck",LV_TWO_CARDS_PASS:"journey/lv-special",LV_TWO_CARDS_PASS_TICK:"journey/lv-special_2",ICO_KING_LOCKED:"journey/ico-special lv locked",ICO_KING_PASS:"journey/ico-special lv unlocked",ICO_KING_PASS_TICK:"journey/ico-special lv unlocked_tick",ICO_LOCK:"journey/ico-lock",IC_SETTINGS:"journey/btn-setting",IC_BACK:"journey/back",BTN_PLAY:"journey/btn-play",ICN_PLAY:"journey/icn_play",ICO_JOURNEY:"journey/Journey-icon",BG_BAR_TIME:"journey/bars_02_time counter"}}},CARD_BACK:{KEY:"card-back",TEXTURE:"./assets/textures/"+n+"x/card-back.png",JSON:"./assets/textures/"+n+"x/card-back.json"},HOW_TO_PLAY:{KEY:"how-to-play",TEXTURE:"./assets/textures/"+n+"x/how-to-play.jpg",JSON:"./assets/textures/"+n+"x/how-to-play.json"},THEME_PREVIEW:{KEY:"theme-preview",TEXTURE:"./assets/textures/"+n+"x/theme-preview.png",JSON:"./assets/textures/"+n+"x/theme-preview.json"},DEFAULT:{KEY:"default-resources",TEXTURE:"./assets/textures/"+n+"x/default-resources.png",JSON:"./assets/textures/"+n+"x/default-resources.json",FRAME:{LINE:"line",BLANK:"blank",LOGO:"title-logo",GEMS:"title-gems",TEXT_LOADING:"loading",BOTTOM_BG:"bottom-bg",BOTTOM_LINE:"bottom-line",TOP_BG_LONG:"top-bg-long",BLOCK_LEADER_BLUE:"block-blue-bg",BLOCK_LEADER_YELLOW:"block-yellow-bg",PRELOADER:"preloader/dual-ring",LEADERBOARD_TAB_ON:"leaderboards/tab-on",LEADERBOARD_TAB_OFF:"leaderboards/tab-off",LEADERBOARD_BG_DARK:"leaderboards/bg-dark",LEADERBOARD_BG_LIGHT:"leaderboards/bg-light",MISSION_ICON_BG:"dailyMission/bg-icon",MISSION_BLOCK_BG:"dailyMission/bg-block",MISSION_CLOCK_BG:"dailyMission/bg-clock",DAILY_DAY_BG:"dailyRewards/bg",DAILY_DAY_LABEL:"dailyRewards/label",DAILY_DAY_BG_WAIT:"dailyRewards/bg-wait",DAILY_DAY_BG_OPEN:"dailyRewards/bg-open",DAILY_DAY_TITLE_GREY:"dailyRewards/title-grey",DAILY_DAY_TITLE_GREEN:"dailyRewards/title-green",DAILY_DAY_TITLE_ORANGE:"dailyRewards/title-orange",RIBBON_LONG:"ribbon/long",RIBBON_FULL:"ribbon/long-full",RIBBON_SHORT:"ribbon/short",RIBBON_SMALL:"ribbon/small",AVATAR_BG_BLUE:"avatar/blue-bg",AVATAR_FRAME_BLUE:"avatar/blue-frame",AVATAR_BG_BLUE_SMALL:"avatar/blue-bg-small",AVATAR_FRAME_BLUE_SMALL:"avatar/blue-frame-small",AVATAR_BG_BLUE_BIG:"avatar/blue-bg-big",AVATAR_FRAME_BLUE_BIG:"avatar/blue-frame-big",AVATAR_BG_YELLOW:"avatar/yellow-bg",AVATAR_FRAME_YELLOW:"avatar/yellow-frame",AVATAR_BG_YELLOW_SMALL:"avatar/yellow-bg-small",AVATAR_FRAME_YELLOW_SMALL:"avatar/yellow-frame-small",AVATAR_BG_YELLOW_BIG:"avatar/yellow-bg-big",AVATAR_FRAME_YELLOW_BIG:"avatar/yellow-frame-big",THE_CAT:"logo/cat",SAD_CAT:"logo/sad-cat",LOGO_GIFT:"logo/gift",LOGO_GIFT_ADS:"logo/gift-ad",LOGO_GIFT_WHITE:"logo/gift_white",LOGO_DIAMONDS_LIGHT_2:"logo/diamonds-light-2",LOGO_DIAMONDS_LIGHT_3:"logo/diamonds-light-3",LOGO_DIAMONDS_LIGHT_4:"logo/diamonds-light-4",LOGO_DIAMONDS_LIGHT_5:"logo/diamonds-light-5",LOGO_DIAMONDS_LIGHT_6:"logo/diamonds-light-6",LOGO_ADS_DIAMONDS:"logo/ads-diamonds",POPUP_TOP_LEFT:"popup/top-left",POPUP_TOP_MID:"popup/top-middle",POPUP_TOP_RIGHT:"popup/top-right",POPUP_MID_LEFT:"popup/middle-left",POPUP_MID_MID:"popup/middle-middle",POPUP_MID_RIGHT:"popup/middle-right",POPUP_BOTTOM_LEFT:"popup/bottom-left",POPUP_BOTTOM_MID:"popup/bottom-middle",POPUP_BOTTOM_RIGHT:"popup/bottom-right",PROGRESS_BG_LEFT:"progress/bg-left",PROGRESS_BG_MID:"progress/bg-mid",PROGRESS_BG_RIGHT:"progress/bg-right",PROGRESS_BAR_LEFT:"progress/bar-left",PROGRESS_BAR_MID:"progress/bar-mid",PROGRESS_BAR_RIGHT:"progress/bar-right",ICON_DOT:"icons/dot",ICON_CUP:"icons/cup",ICON_GIFT:"icons/gift",ICON_PLUS:"icons/plus",ICON_RANK:"icons/rank",ICON_FLAG:"icons/flag",ICON_CLOCK:"icons/clock",ICON_DAILY:"icons/daily",ICON_ADS:"icons/flat-ad",ICON_CHECK:"icons/check",ICON_CANCEL:"icons/cancel",ICON_SETTING:"icons/setting",ICON_RESUME:"icons/flat-resume",ICON_VIB_ON:"icons/flat-vib-on",ICON_VIB_OFF:"icons/flat-vib-off",ICON_MUSIC_ON:"icons/flat-music-on",ICON_MUSIC_OFF:"icons/flat-music-off",ICON_SOUND_ON:"icons/flat-sound-on",ICON_SOUND_OFF:"icons/flat-sound-off",ICON_FLAT_HOME:"icons/flat-home",ICON_FLAT_RANK:"icons/flat-rank",ICON_FLAT_SHARE:"icons/flat-share",ICON_CROWN:"icons/crown",ICON_CUP_MINI:"icons/cup-mini",ICON_CUP_GOLD:"icons/cup-gold",ICON_CUP_SILVER:"icons/cup-silver",ICON_CUP_COPPER:"icons/cup-bronze",ICON_DIAMOND:"icons/diamond",ICON_DIAMOND_SMALL:"icons/diamond-small",ICON_DIAMOND_GREY:"icons/diamond-grey",ICON_DIAMOND_LIGHT:"icons/diamond-light",BUTTON_CLOSE:"buttons/close",BUTTON_RED_LONG:"buttons/red-long",BUTTON_YELLOW_LONG:"buttons/yellow-long",BUTTON_YELLOW_CIRCLE:"buttons/yellow-circle",BUTTON_BLUE:"buttons/blue",BUTTON_BLUE_SHORT:"buttons/blue-short",BUTTON_BLUE_LONG:"buttons/blue-long",BUTTON_BLUE_CIRCLE:"buttons/blue-circle",BUTTON_GREEN:"buttons/green",BUTTON_GREEN_SHORT:"buttons/green-short",BUTTON_GREEN_LONG:"buttons/green-long",BUTTON_GREEN_MINOR:"buttons/green-minor",BUTTON_GREEN_CIRCLE:"buttons/green-circle",BUTTON_GREEN_MINOR_MINI:"buttons/green-minor-mini",NO_THANK_TEXT:"texts/no-thank",HORIZONTAL_LUCKY_BAR:"lucky-bar/horizontal-lucky-bar",HORIZONTAL_ARROW:"lucky-bar/horizontal-arrow",ARC_LUCKY_BAR:"lucky-bar/arc-lucky-bar",ARC_ARROW:"lucky-bar/arc-arrow"}},EFFECTS:{KEY:"effects-resources",PATH:"./assets/textures/"+n+"x/",JSON:"./assets/textures/"+n+"x/effects-resources.json",FRAME:{BLANK:"blank",FX_COMET:"comet",FX_SPARK:"spark",FX_CIRCLE:"circle",FX_CIRCLE_LIGHT:"circle-light",FX_GLOW_LIGHT:"glow-light",FX_GLOW_SMALL:"glow-small",FX_STAR_WHITE:"star-white",FX_STAR_YELLOW:"star-yellow",TEXT_COOL:"texts/cool",TEXT_GOOD:"texts/good",TEXT_GREAT:"texts/great",TEXT_EXCELLENT:"texts/excellent",TEXT_CONGRATULATION:"texts/congratulation",FX_CONFETTI_SMALL_1:"confetti/small-1",FX_CONFETTI_SMALL_2:"confetti/small-2",FX_CONFETTI_SMALL_3:"confetti/small-3",FX_CONFETTI_SMALL_4:"confetti/small-4",FX_CONFETTI_HEXAGON:"confetti/hexagon-",FX_FIREWORKS_SMALL:"fireworks/small",FX_FIREWORKS_BIG_0:"fireworks/big-explosive-0",FX_FIREWORKS_BIG_1:"fireworks/big-explosive-1",FX_FIREWORKS_SOAR_LINE:"fireworks/soar-line",FX_FIREWORKS_SOAR_CIRCLE:"fireworks/soar-circle",FX_HIGHLIGHT:"fx-items/highlight",FX_PAINT_EXPLOSIVE:"fx-items/paint-explosive-",FX_RED_EXPLOSIVE:"fx-gems/red-explosive-",FX_BLUE_EXPLOSIVE:"fx-gems/blue-explosive-",FX_PINK_EXPLOSIVE:"fx-gems/pink-explosive-",FX_GREEN_EXPLOSIVE:"fx-gems/green-explosive-",FX_YELLOW_EXPLOSIVE:"fx-gems/yellow-explosive-",FX_COLORFUL:"fx-gems/colorful-",FX_COLOR_CHANGE:"fx-gems/color-change-",FX_FREEZE_EXPLOSIVE:"fx-gems/freeze-explosive-",FX_COLORFUL_EXPLOSIVE:"fx-gems/colorful-explosive-",ANIMATION_STAR_X:"star-x/star-",ANIMATION_STAR_Y:"star-y/star-",FX_CONFETTI_RIBBON:"ribbon/ribbon",PREFIX_ANIMATION_RIBBON_CONFETTI_A:"ribbon/falling-confetti/confetti-a/confetti-a-",PREFIX_ANIMATION_RIBBON_CONFETTI_B:"ribbon/falling-confetti/confetti-b/confetti-b-",PREFIX_ANIMATION_RIBBON_CONFETTI_C:"ribbon/falling-confetti/confetti-c/confetti-c-",PREFIX_ANIMATION_RIBBON_CONFETTI_D:"ribbon/falling-confetti/confetti-d/confetti-d-"}},GAMEPLAY:{KEY:"gameplay-resources",TEXTURE:"./assets/textures/"+n+"x/gameplay-resources.png",JSON:"./assets/textures/"+n+"x/gameplay-resources.json",FRAME:{BLANK:"blank"}}};t.Z=i},79:function(e,t,n){"use strict";n.d(t,{C:function(){return a},K:function(){return r}});var i=n(151),a={BOOT_SCENE:"BOOT_SCENE",LOAD_SCENE:"LOAD_SCENE",GAME_SCENE:"GAME_SCENE",GLOBAL_SCENE:"GLOBAL_SCENE",DASHBOARD_SCENE:"DASHBOARD_SCENE",JOURNEY_SCENE:"JOURNEY_SCENE",JOURNEY_TEST_SCENE:"JOURNEY_TEST_SCENE",TEST_SCENE:"TEST_SCENE"},r={SWITCH:n.n(i)()("SWITCH")}},39:function(e,t,n){"use strict";n.d(t,{Ks:function(){return a},o4:function(){return i}});var i={WELL_DONE_SCREEN:"WELL_DONE_SCREEN",MISSION_WELCOME_SCREEN:"MISSION_WELCOME_SCREEN",MISSION_COMPLETED_SCREEN:"MISSION_COMPLETED_SCREEN",PAUSE_SCREEN:"PAUSE_SCREEN",NOTIFY_SCREEN:"NOTIFY_SCREEN",REWARD_SCREEN:"REWARD_SCREEN",RESCUE_SCREEN:"RESCUE_SCREEN",SETTINGS_SCREEN:"SETTINGS_SCREEN",BEST_SCORE_SCREEN:"BEST_SCORE_SCREEN",DAILY_REWARD_SCREEN:"DAILY_REWARD_SCREEN",DAILY_MISSIONS_SCREEN:"DAILY_MISSIONS_SCREEN",LUCKY_REWARD_SCREEN:"LUCKY_REWARD_SCREEN",NO_MORE_MOVES_SCREEN:"NO_MORE_MOVES_SCREEN",VICTORY_SCREEN:"VICTORY_SCREEN",PLAY_SCREEN:"PLAY_SCREEN",RESULT_PLAY_SCREEN:"RESULT_PLAY_SCREEN",GAME_STATS_SCREEN:"GAME_STATS_SCREEN",THEME_SCREEN:"THEME_SCREEN",HOW_TO_PLAY_SCREEN:"HOW_TO_PLAY_SCREEN",AWESOME_SCREEN:"AWESOME_SCREEN",NOTIFICATION_SCREEN:"NOTIFICATION_SCREEN",TOURNAMENTS_SCREEN:"TOURNAMENTS_SCREEN",PLAY_WITH_FRIEND_GAME_OVER_SCREEN:"PLAY_WITH_FRIEND_GAME_OVER_SCREEN",TOURNAMENTS_RESULT_SCREEN:"TOURNAMENTS_RESULT_SCREEN"},a={SCREEN:200,POPUP:300,PRIORITY:999}},46:function(e,t){"use strict";t.Z={BUTTON_CLICK:"button_click",POPUP_OFF:"popup_out",POPUP_SHOW:"popup_in",AUTO_COMPLETE:"auto_complete",CARD_MOVE:"card_move",FINISH_1:"finish1",FINISH_2:"finish2",FINISH_3:"finish3",FINISH_4:"finish4",FINISH_5:"finish5",FINISH_6:"finish6",FINISH_7:"finish7",FINISH_8:"finish8",FINISH_9:"finish9",FINISH_10:"finish10",FINISH_11:"finish11",FINISH_12:"finish12",FINISH_13:"finish13",HINT:"hint",NO_MOVE:"no_move",SHUFFLE:"shuffle",UNDO:"undo",WON:"won",DIAMONDS_EAT:"",FIREWORKS_SOAR:"",FIREWORKS_BIG:"",FIREWORKS_SMALL:"",DAILY_REWARD:"",SCORE_COUNTER:"",CONGRATULATION:"",YOU_WIN:"",YOU_LOSE:"",GIFT_CHARGE:"",GIFT_REVEAL:"",GIFT_EXPLODE:""}},509:function(e,t,n){"use strict";n.d(t,{Gc:function(){return i},iD:function(){return a},uw:function(){return r}});var i={GLOBAL:"Global",FRIENDS:"Friends",YOU:"You"},a={SCREEN_WIDTH:375,HEADER:{WIDTH:375,HEIGHT:50},TAB_SELECTOR:{WIDTH:342,HEIGHT:28},MAX_LEADERS:4,LEADER_LIST:{WIDTH:303,HEIGHT:126},FOOTER:{WIDTH:375,HEIGHT:68},TOURNAMENT_BLOCK:{HEADER:{HEIGHT:48},FOOTER:{HEIGHT:66},TAB:{HEIGHT:35}}},r={COLOR:4937547,ALPHA:.5,Texture:{OutOfMoves:{SCREEN:"OUT_OF_MOVES_SCREEN_FILTER",POPUP:"OUT_OF_MOVES_POPUP_FILTER"},Challenge:{SCREEN:"CHALLENGE_SCREEN_FILTER",POPUP:"CHALLENGE_POPUP_FILTER"}}}},222:function(e,t,n){"use strict";var i=n(28),a=n(2),r=n(119),s=n(477),o=function(e){function t(){var t;return(t=e.call(this)||this).gameMode=void 0,t.autoPlaySingleMode=void 0,t.friendsChallenged=void 0,t.isGameLoadedInTournament=!1,t.gameMode=s.Z.SINGLE,t.autoPlaySingleMode=!0,t.friendsChallenged=[],t}(0,a.Z)(t,e);var n=t.prototype;return n.setGameMode=function(e){this.gameMode=e,console.log("\ud83e\udd16 ? Set game mode:",this.gameMode),this.emit(r.Z.GAME_MODE_CHANGED)},n.getGameMode=function(){return this.gameMode},n.isSingleMode=function(){return this.gameMode==s.Z.SINGLE},n.isChallengeMode=function(){return this.gameMode==s.Z.CHALLENGE_FRIENDS},n.isTournamentMode=function(){return this.gameMode===s.Z.TOURNAMENT},(0,i.Z)(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t)}}]),t}(Phaser.Events.EventEmitter);o._instance=void 0,t.Z=o},119:function(e,t){"use strict";var n=function(e){return e.GAME_MODE_CHANGED="game-mode-changed",e.BACKGROUND_CHANGED="background-changed",e.GAME_START="game-start",e}(n||{});t.Z=n},477:function(e,t){"use strict";var n=function(e){return e.SINGLE="single",e.CHALLENGE_FRIENDS="challenge-friends",e.TOURNAMENT="tournaments",e}(n||{});t.Z=n},498:function(e,t,n){"use strict";var i=n(2),a=n(29),r=n(102),s=n(499),o=n(119),c=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.setBackground=function(){var e=n.scene.theme.getCurrentThemeConfig().backgroundKey;if(n.scene.load.off("filecomplete-image-"+e,n.setBackground),n.scene.textures.exists(e))return n.scene.setBackground(e),void n.scene.events.emit(o.Z.BACKGROUND_CHANGED,e);n.scene.load.once("filecomplete-image-"+e,n.setBackground)},n.updateCardStyle=function(){var e=n.scene.theme.getCurrentThemeConfig().cardFaceKey;if(n.scene.load.off("filecomplete-json-"+e,n.updateCardStyle),n.scene.textures.exists(e)&&n.scene instanceof r.Z){var t=n.scene.gameplay.boardGame,i=t.stock,a=t.foundations,s=t.piles;return i.cards.forEach((function(e){return e.updateCardStyle()})),a.forEach((function(e){e.cards.forEach((function(e){return e.updateCardStyle()}))})),void s.forEach((function(e){e.cards.forEach((function(e){return e.updateCardStyle()})),e.updateCardTintByAvailability()}))}n.scene.load.once("filecomplete-json-"+e,n.updateCardStyle)},n.scene=t,n.setBackground(),n}(0,i.Z)(t,e);var n=t.prototype;return n.changeBackground=function(e){this.scene.theme.changeBackground(e),this.setBackground(),this.scene.analytics.event(a._.THEME_CHANGED,{theme_type:"background",theme_idx:e})},n.changeCardFace=function(e){this.scene.theme.changeCardFace(e),this.updateCardStyle(),this.scene.analytics.event(a._.THEME_CHANGED,{theme_type:"card_face",theme_idx:e})},n.changeCardBack=function(e){this.scene.theme.changeCardBack(e),this.updateCardStyle(),this.scene.analytics.event(a._.THEME_CHANGED,{theme_type:"card_back",theme_idx:e})},t}(s.Z);t.Z=c},499:function(e,t,n){"use strict";var i=n(500).Z.STATUS,a=function(){function e(e){this.state=void 0,this.scene=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.setState(i.READY)},t.start=function(){this.isRunning()||this.setState(i.RUNNING)},t.stop=function(){this.isRunning()&&this.setState(i.STOPPED)},t.setState=function(e){this.state=e},t.isReady=function(){return this.state===i.READY},t.isRunning=function(){return this.state===i.RUNNING},t.isStopped=function(){return this.state===i.STOPPED},e}();t.Z=a},149:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(2),a=n(29),r=function(e){function t(t,n,i){var a;return(a=e.call(this,t,0,0,n,i)||this).setOrigin(0,0),a}return(0,i.Z)(t,e),t}(Phaser.GameObjects.Zone),s=n(472),o={LAYOUT_UPDATE:"layout-update"},c=function(e){function t(){var t;return(t=e.call(this,{visible:!1})||this).unsubscribeList=void 0,t.gameZone=void 0,t.background=void 0,t.handleOpenScene=function(){t.logPageviewOnOpen(),t.logEventOpen()},t.handleResize=function(){if(t.background&&t.gameZone){var e=t.world.getResizeEventData(),n=e.width,i=e.height;t.gameZone.setSize(n,i),t.background.setPosition(n/2,i/2),t.background.setDisplaySize(n,i),t.events.emit(o.LAYOUT_UPDATE)}},t.removeStateChange=function(){t.unsubscribeList.forEach((function(e){return e()}))},t}(0,i.Z)(t,e);var n=t.prototype;return n.create=function(){this.events.on("wake",this.handleOpenScene),this.events.on("resume",this.handleOpenScene),this.events.on("create",this.handleOpenScene),this.world.events.on(s.Z.RESIZE,this.handleResize),this.scaleGame(),this.createGameZone()},n.scaleGame=function(){var e=this.getCamera("main"),t=this.world.getZoomRatio(),n=this.world.getWorldSize(),i=n.width,a=n.height;e.setZoom(t),e.centerOn(i/2,a/2)},n.createGameZone=function(){var e=this.world.getWorldSize(),t=e.width,n=e.height;this.gameZone=new r(this,t,n)},n.getCamera=function(e){return"main"===e?this.cameras.main:this.cameras.getCamera(e)},n.createMask=function(e){void 0===e&&(e=1),this.getCamera("main").setBackgroundColor("rgba(0, 0, 0, "+e+")")},n.fontSize=function(e){return Math.round(e/1.01)},n.createBackground=function(e,t,n,i){this.background?(this.background.setTexture(e),t&&this.background.setFrame(t)):this.background=this.make.image({key:e,frame:t}),this.background.setName(e);var a=this.gameZone,r=a.displayWidth,s=a.displayHeight;this.background.setDisplaySize(r,s),GameCore.Utils.Valid.isNumber(n)&&this.background.setAlpha(n),GameCore.Utils.Valid.isNumber(i)&&this.background.setTint(i),Phaser.Display.Align.In.Center(this.background,this.gameZone)},n.handleStateChange=function(e){var t=this;this.unsubscribeList=[],e.forEach((function(e){var n=e.selector,i=e.callback,a=t.storage.watch(n,i);t.unsubscribeList.push(a)})),this.events.once("sleep",this.removeStateChange),this.events.once("destroy",this.removeStateChange),this.events.once("shutdown",this.removeStateChange)},n.logPageviewOnOpen=function(){this.analytics.pageview(this.scene.key)},n.logEventOpen=function(){this.analytics.event(a._.SCREEN_OPEN,{screen_name:this.getSceneName()})},n.getSceneName=function(){return GameCore.Utils.String.toUpperCamelCase(this.scene.key.toLowerCase())},t}(Phaser.Scene)},497:function(e,t,n){"use strict";n.d(t,{Z:function(){return vu}});var i=n(22),a=n(19),r=n(2),s=n(20),o=n.n(s),c=n(66),u=n.n(c),l=n(39),h=n(149),d=n(32),f=n(33),p=n.n(f),g=n(60),m=n.n(g),v=n(667),y=n.n(v),E=n(104),S=n.n(E),T=n(517),A=n.n(T),C=n(518),b=n.n(C),I=n(103),w=n.n(I),x=n(67),_=n.n(x),O=n(153),P=n.n(O),k=n(152),L=n.n(k),D=n(83),R=n.n(D),B=function(e){return e[e.NONE=0]="NONE",e[e.DEALING=1]="DEALING",e[e.WAITING_FIRST_MOVE=2]="WAITING_FIRST_MOVE",e[e.PAUSING=3]="PAUSING",e[e.PLAYING=4]="PLAYING",e[e.AUTO_COMPLETING=5]="AUTO_COMPLETING",e[e.GAME_OVER=6]="GAME_OVER",e}({}),N=n(40),M=N.Z.GAMEPLAY_DEFAULT,G=M.KEY,U=M.FRAME,F=function(e){function t(t){var n;return(n=e.call(this,t)||this).hand=void 0,n.handScaleDefault=1,n.name="TutorialHand",n.addHand(),n.hand.scale,n.scene.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.addHand=function(){this.hand=this.scene.make.image({key:G,frame:U.HAND,origin:{x:.5,y:.5}}),this.hand.setWorldSize(65.5,55.5),this.handScaleDefault=this.hand.scale,this.resetHandPosition(),this.add(this.hand)},n.doubleTap=function(e,t,n){var i=this;this.setHandPositionOnDoubleClick(),this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.In,props:{scale:{duration:100,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:100}},loop:1,yoyo:!0,onComplete:function(){t&&i.hide(),n&&n()}})},n.tapAndHold=function(e,t){this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:this.handScaleDefault,to:.8*this.handScaleDefault},angle:{from:0,value:-10,duration:200}},onComplete:t})},n.unHold=function(e,t,n){var i=this;this.scene.tweens.add({delay:e,targets:[this.hand],ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{duration:200,from:.8*this.handScaleDefault,to:this.handScaleDefault},angle:{from:-10,value:0,duration:200}},onComplete:function(){t&&i.hide(),n&&n()}})},n.show=function(){this.hand.setVisible(!0)},n.hide=function(){this.hand.setVisible(!1)},n.preDestroy=function(){this.scene.tweens.killTweensOf(this.hand)},n.kill=function(){e.prototype.kill.call(this),this.resetHandPosition()},n.setHandPositionOnDoubleClick=function(){this.hand.setPosition(5+this.hand.width/4,5+this.hand.height/4)},n.resetHandPosition=function(){this.hand.setPosition(20,20)},t}(Phaser.GameObjects.Container),Z=n(515),H=n.n(Z),W=n(234),z=n.n(W),Y=function(e){return e[e.ACE=301]="ACE",e[e.TWO=302]="TWO",e[e.THREE=303]="THREE",e[e.FOUR=304]="FOUR",e[e.FIVE=305]="FIVE",e[e.SIX=306]="SIX",e[e.SEVEN=307]="SEVEN",e[e.EIGHT=308]="EIGHT",e[e.NINE=309]="NINE",e[e.TEN=310]="TEN",e[e.JACK=311]="JACK",e[e.QUEEN=312]="QUEEN",e[e.KING=313]="KING",e}(Y||{}),V=function(e){return e[e.ACE=201]="ACE",e[e.TWO=202]="TWO",e[e.THREE=203]="THREE",e[e.FOUR=204]="FOUR",e[e.FIVE=205]="FIVE",e[e.SIX=206]="SIX",e[e.SEVEN=207]="SEVEN",e[e.EIGHT=208]="EIGHT",e[e.NINE=209]="NINE",e[e.TEN=210]="TEN",e[e.JACK=211]="JACK",e[e.QUEEN=212]="QUEEN",e[e.KING=213]="KING",e}(V||{}),K=function(e){return e[e.ACE=101]="ACE",e[e.TWO=102]="TWO",e[e.THREE=103]="THREE",e[e.FOUR=104]="FOUR",e[e.FIVE=105]="FIVE",e[e.SIX=106]="SIX",e[e.SEVEN=107]="SEVEN",e[e.EIGHT=108]="EIGHT",e[e.NINE=109]="NINE",e[e.TEN=110]="TEN",e[e.JACK=111]="JACK",e[e.QUEEN=112]="QUEEN",e[e.KING=113]="KING",e}(K||{}),j=function(e){return e[e.ACE=401]="ACE",e[e.TWO=402]="TWO",e[e.THREE=403]="THREE",e[e.FOUR=404]="FOUR",e[e.FIVE=405]="FIVE",e[e.SIX=406]="SIX",e[e.SEVEN=407]="SEVEN",e[e.EIGHT=408]="EIGHT",e[e.NINE=409]="NINE",e[e.TEN=410]="TEN",e[e.JACK=411]="JACK",e[e.QUEEN=412]="QUEEN",e[e.KING=413]="KING",e}(j||{}),J=function(e){return e[e.ACE=1]="ACE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX",e[e.SEVEN=7]="SEVEN",e[e.EIGHT=8]="EIGHT",e[e.NINE=9]="NINE",e[e.TEN=10]="TEN",e[e.JACK=11]="JACK",e[e.QUEEN=12]="QUEEN",e[e.KING=13]="KING",e}(J||{}),X={DEPTH:{REMAINING_STOCK:12,HINT:11,CARD:10,CARD_SLOT:9},FOUNDATION_Y:70,VERTICAL_PILE_SPACE:20,MAX_HORIZONTAL_PILE_SPACE:52,SPACE_BETWEEN_PILE_AND_FOUNDATION:65,CARD_WIDTH:49,CARD_HEIGHT:72,NUMBER_OF_TARGET:4,NUMBER_OF_PILE:7},q=function(e){X.FOUNDATION_Y=e},Q=X,$=n(663),ee=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,N.Z.GAMEPLAY_DEFAULT.KEY,"card-bg")||this).parent=void 0,i.updateFromParent=function(){i.setPosition(i.parent.x,i.parent.y+1),i.setScale(i.parent.scaleX,i.parent.scaleY),i.setVisible(i.parent.visible)},i.parent=n,i.setDepth(Q.DEPTH.CARD_SLOT),i.updateFromParent(),t.add.existing((0,a.Z)(i)),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Image),te=N.Z.CARD_BACK,ne=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,"")||this).scene=void 0,i.bg=void 0,i.tag=void 0,i.facingUp=void 0,i.futureX=void 0,i.futureY=void 0,i.shakePosition=void 0,i.facingTween=void 0,i.movingTween=void 0,i.moves=void 0,i.placement=void 0,i.originalCardIdx=void 0,i.setFacing=function(e){i.facingUp=e,e?(i.setCardFace(),i.clearTint()):(i.setCardBack(),i.setTint(13684944))},i.scene=t,i.createBackground(),i.tag=n,i.moves=[],i.facingUp=!1,i.originalCardIdx=-1,t.add.existing((0,a.Z)(i)),i.addBehavior(),i}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new ee(this.scene,this);this.bg=e,this.scene.events.on(Phaser.Scenes.Events.POST_UPDATE,e.updateFromParent)},n.updateCardStyle=function(){this.setFacing(this.facingUp),this.input||(this.setInteractive({useHandCursor:!0,draggable:!0}),this.disableInteractive()),this.updateSize()},n.setPlacement=function(e){this.placement=e},n.setOriginalCardIdx=function(e){this.originalCardIdx=e},n.shake=function(){var e,t;null!=(e=this.movingTween)&&e.isPlaying()||(null!=(t=this.shakePosition)&&t.isPaused&&(this.shakePosition.stop(),this.shakePosition=new $.Z(this)),this.shakePosition.setMagnitude(1.2),this.shakePosition.setDuration(500),this.shakePosition.shake())},n.setFacingWithFlippingAnim=function(e,t){var n,i=this;void 0===t&&(t=0),this.facingUp!==e&&(this.facingUp=e,null==(n=this.facingTween)||n.remove(),this.updateSize(),this.facingTween=this.scene.tweens.add({targets:this,delay:t,scaleX:0,yoyo:!0,duration:150,onYoyo:function(){return i.setFacing(e)}}))},n.isFacingUp=function(){return this.facingUp},n.getTag=function(){return this.tag},n.getSavingData=function(){return this.tag+"|"+this.originalCardIdx},n.isAce=function(){return this.tag%100===J.ACE},n.isKing=function(){return this.tag%100===J.KING},n.moveTo=function(e,t,n,i,a,r){var s,o=this;void 0===n&&(n=0),void 0===i&&(i=0),this.shakePosition.isRunning&&this.shakePosition.pause(),null==(s=this.movingTween)||s.remove(),e==this.x&&t==this.y||(this.futureX=e,this.futureY=t,this.movingTween=this.scene.tweens.add({targets:this,delay:i,x:e,y:t,duration:n,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){a&&a()},onComplete:function(){o.setPosition(e,t),r&&r()}}))},n.isMoving=function(){return this.movingTween&&(this.movingTween.isPlaying()||!this.movingTween.hasStarted)},n.reset=function(){var e,t;null==(e=this.movingTween)||e.remove(),null==(t=this.facingTween)||t.complete(),this.updateSize(),this.disableInteractive(),this.setFacing(!1)},n.setTag=function(e){this.tag=e},n.setCardFace=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey,t=this.tag;this.setTexture(e,""+t)},n.setCardBack=function(){var e=this.scene.theme.getCurrentThemeConfig().cardBackFrame;this.setTexture(te.KEY,e)},n.updateSize=function(){var e=Q.CARD_WIDTH,t=Q.CARD_HEIGHT;this.setWorldSize(e,t)},n.addBehavior=function(){this.shakePosition=new $.Z(this,{duration:500,magnitude:2})},n.setNotAvailableToMoveTint=function(){this.setTint(13684944)},n.resetCardTint=function(){this.clearTint()},t}(Phaser.GameObjects.Image),ie=n(58),ae=n.n(ie),re=function(){var e=(0,i.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.time.delayedCall(n,e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=re,oe=N.Z.GAMEPLAY_DEFAULT.KEY,ce=function(e){function t(t,n){var i;(i=e.call(this,t,0,0,oe,"ic_slot")||this).placement=void 0;var r=Q.CARD_WIDTH,s=Q.CARD_HEIGHT,o=Q.DEPTH;return i.placement=n,i.setInteractive(),i.disableInteractive(),i.setAlpha(.6).setWorldSize(r,s),i.setInteractive({useHandCursor:!0}),i.setDepth(o.CARD_SLOT),i.scene.add.existing((0,a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.onClick=function(e){var t=!1;this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,(function(){t=!0})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,(function(){t&&e(),t=!1})),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,(function(){t=!1}))},n.offClick=function(){this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_UP),this.off(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT)},t}(Phaser.GameObjects.Image),ue=ce,le=function(e){function t(t){var n;return(n=e.call(this)||this).boardGame=void 0,n.slot=void 0,n.cards=void 0,n.x=void 0,n.y=void 0,n.name=void 0,n.idx=void 0,n.active=void 0,n.boardGame=t,n.cards=[],n.active=!0,n.slot=new ue(t.scene,(0,a.Z)(n)),n.setIdx(-1),n}(0,r.Z)(t,e);var n=t.prototype;return n.setName=function(e){this.name=e},n.setIdx=function(e){this.idx=e},n.getIdx=function(){return this.idx},n.getname=function(){return this.name},n.setPosition=function(e,t){this.x=e,this.y=t,this.slot.setPosition(e,t)},n.addCard=function(e,t){if(e instanceof ne){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var n=this.getPlacingPosition(this.cards.length),i=n.x,a=n.y;e.moveTo(i,a,300)}this.cards.push(e)}else for(var r=this.getPlacingPosition(this.cards.length),s=r.x,o=r.y,c=0;c<e.length;c++){var u=e[c];if(u.scene.gameplay.cardsLayer.bringToTop(u.bg),u.scene.gameplay.cardsLayer.bringToTop(u),u.setPlacement(this),t){var l=o+c*this.boardGame.getVerticalSpacePile();u.moveTo(s,l,300)}this.cards.push(u)}},n.pickTopCards=function(e){var t,n=this.cards.length;return 0==n?[]:z()(t=this.cards).call(t,Math.max(n-e,0))},n.getLastCard=function(){return this.cards[this.cards.length-1]},n.getPlacingPosition=function(e){return{x:this.x,y:this.y}},n.getPlacingPositionForContinueGame=function(e){return{x:this.x,y:this.y}},n.addCardsFromSaveData=function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,a,r,s,c,u,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.boardGame,a=i.deck,r=i.scene,s=0;case 2:if(!(s<t.length)){e.next=14;break}return c=t[s].split("|"),u=parseInt(c[0]),l=parseInt(c[1]),(h=a.setUpCardWhenContinueGame(u,this,t.length,l)).setFacingWithFlippingAnim(!0),h.setInteractive(),e.next=11,se(r,30);case 11:s++,e.next=2;break;case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getCardVerticalSpaceForContinueGame=function(e){return 0},n.canBePlace=function(e){return!1},n.update=function(e){},n.clear=function(){this.cards=[]},n.isEmpty=function(){return 0===this.cards.length},n.pickAllCards=function(){var e;return z()(e=this.cards).call(e,0)},n.kill=function(){this.active=!1,this.slot.kill(),this.clear()},n.setVisible=function(e){this.slot.setVisible(e)},n.revive=function(){this.active=!0,this.slot.revive()},t}(Phaser.Events.EventEmitter),he=le,de=function(e){return e.Stock="stock",e.Waste="waste",e.Pile="pile",e.Foundation="foundation",e}(de||{}),fe=de,pe=function(e){function t(t){var n;return(n=e.call(this,t)||this).setName(fe.Pile),n}(0,r.Z)(t,e);var n=t.prototype;return n.addCardsFromSaveData=function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,a,r,s,c,u,l,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=this.boardGame,a=i.deck,r=i.scene,s=this.boardGame.scene.levelHandler.replayCardStatus,c=0;case 3:if(!(c<t.length)){e.next=15;break}return u=t[c].split("|"),l=parseInt(u[0]),h=parseInt(u[1]),l<100&&s[h]>100&&(l=s[h]),d=a.setUpCardWhenContinueGame(l,this,t.length,h),c>=n&&(d.setFacingWithFlippingAnim(!0),d.setInteractive()),e.next=12,se(r,30);case 12:c++,e.next=3;break;case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getPlacingPosition=function(){var e=this.x,t=this.y,n=this.boardGame.getVerticalSpacePile();if(this.cards.length>0){var i=this.cards[this.cards.length-1];t=i.isFacingUp()?i.futureY+n:i.futureY+.5*n}return{x:e,y:t}},n.getPlacingPositionForContinueGame=function(e){var t=this.getCardVerticalSpaceForContinueGame(e);t>this.boardGame.getVerticalSpacePile()&&(t=this.boardGame.getVerticalSpacePile());for(var n=this.y,i=1;i<this.cards.length;i++){this.cards[i].isFacingUp()?n+=t:n+=.5*t}return{x:this.x,y:n}},n.getCardVerticalSpaceForContinueGame=function(e){return(this.getPileHeightLimit()-Q.CARD_HEIGHT)/e},n.resizePile=function(){var e=this.x,t=this.y,n=this.checkIfResizeNeeded(),i=this.boardGame.getVerticalSpacePile();if(n){var a=this.cards.length-this.getMaximumRevealedCards(),r=a-4>0?a-4:0,s=this.getSpacesBetweenHiddenCards(a);s>.5*i&&0==r&&(s=.5*i);for(var o=0;o<this.cards.length;o++){var c=this.cards[o];if(o>r){var u=this.cards[o-1];o>a&&u.isFacingUp()?t+=i:t+=s}c.x===e&&c.y===t||c.moveTo(e,t,300)}}else for(var l=0;l<this.cards.length;l++){var h=this.cards[l];if(0!==l)this.cards[l-1].isFacingUp()?t+=i:t+=.5*i;h.x===e&&h.y===t||h.moveTo(e,t,300)}},n.getPileHeight=function(){var e=this.cards.length;if(0==e)return 0;for(var t=this.cards[0].height,n=this.boardGame.getVerticalSpacePile(),i=1;i<e;i++){this.cards[i].isFacingUp()?t+=n:t+=.5*n}return t},n.getPileHeightLimit=function(){var e=this.boardGame.scene.footer,t=Q.CARD_HEIGHT,n=e.playBtn.getWorldPosition().y-this.y;return Math.max(n+t/2-40,0)},n.getMaximumRevealedCards=function(){var e=Q.CARD_HEIGHT,t=this.getPileHeightLimit(),n=this.boardGame.getVerticalSpacePile(),i=t-e+n;return Math.floor(i/n)-1},n.getSpacesBetweenHiddenCards=function(e){var t=this.cards[0].height,n=this.getMaximumRevealedCards(),i=this.boardGame.getVerticalSpacePile(),a=(this.getPileHeightLimit()-t+i-n*i)/e;return Math.max(a,i/6)},n.checkIfResizeNeeded=function(){var e=this.getPileHeightLimit();return this.getPileHeight()>e},n.getSubCards=function(e){var t,n,i=H()(t=this.cards).call(t,(function(t){return t===e}));return _()(n=this.cards).call(n,i)},n.pickSubCards=function(e){var t,n,i=H()(t=this.cards).call(t,(function(t){return t===e}));return z()(n=this.cards).call(n,i)},n.removeLastCard=function(){if(this.cards.length>0)return this.cards.pop()},n.getFacingUpCards=function(){var e,t;if(0===this.cards.length)return[];var n=H()(e=this.cards).call(e,(function(e){return e.isFacingUp()}));return n<0?[]:_()(t=this.cards).call(t,n)},n.faceUpLast=function(e){void 0===e&&(e=0);var t=this.cards.length;if(t>0){var n=this.cards[t-1];if(n.isFacingUp())return;return n.getTag()<100&&this.boardGame.dynamicCardHandler.setDynamicTagForBackfaceCard(n),this.boardGame.isGameWon(!0)||n.setFacingWithFlippingAnim(!0,e),n.setInteractive(),n}this.slot.setInteractive()},n.faceDownLast=function(){var e=this.cards.length;if(e>0){var t=this.cards[e-1];return t.setFacingWithFlippingAnim(!1),t.disableInteractive(),t}this.slot.setInteractive()},n.canBePlace=function(e){var t=e.getTag()%100;return 0===this.cards.length||t==this.cards[this.cards.length-1].getTag()%100-1},n.getTopCardStackData=function(){var e=this.cards.length;if(0===e)return null;var t=Math.floor(this.cards[e-1].getTag()/100);if(1===e)return{color:t,length:1};for(var n=1,i=this.cards[e-1].getTag()%100,a=e-2;a>=0;a--){var r=this.cards[a],s=Math.floor(r.getTag()/100),o=r.getTag()%100;if(!1===r.isFacingUp())break;if(s!==t||o-1!==i)break;n++,i=o}return{color:t,length:n}},n.updateCardTintByAvailability=function(){var e=this.cards.length;if(0!==e){var t=this.getTopCardStackData();if(null!==t)for(var n=t.length,i=1;e-i>=0;i++){var a=this.cards[e-i];if(!1===a.isFacingUp())break;if(this.boardGame.isGameWon(!0))break;i<=n?a.resetCardTint():a.setNotAvailableToMoveTint()}}},n.canBeHint=function(e){var t=e.getTag()%100;return 0===this.cards.length||t==this.cards[this.cards.length-1].getTag()%100-1},n.isLastCard=function(e){return this.cards[this.cards.length-1]===e},n.getFaceDownCardAmount=function(){for(var e=0,t=0;t<this.cards.length;t++){if(!1!==this.cards[t].isFacingUp())break;e++}return e},n.clear=function(){this.cards=[]},t}(he),ge=pe,me=N.Z.CARD_BACK,ve=Q.DEPTH,ye=function(){function e(e){this.boardGame=void 0,this.bg=void 0,this.hintContainer=void 0,this.group=void 0,this.hintTween=void 0,this.hand=void 0,this.boardGame=e,this.group=e.scene.add.group({defaultKey:N.Z.GAMEPLAY_DEFAULT.KEY}),this.createBg(),this.createContainer(),this.createTutorialHand()}var t=e.prototype;return t.createBg=function(){var e=this.boardGame.scene.add.image(0,0,N.Z.GAMEPLAY_DEFAULT.KEY,"blank"),t=this.boardGame.scene.world.getWorldSize(),n=t.width,i=t.height;e.setOrigin(0,0),e.setWorldSize(n,i),e.setAlpha(.5),e.setTint(859421),e.setDepth(ve.HINT),e.kill(),this.bg=e},t.createContainer=function(){this.hintContainer=this.boardGame.scene.add.container(),this.hintContainer.setDepth(ve.HINT)},t.showDealerHint=function(){var e,t=this;if((null==(e=this.hintTween)||!e.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)&&!this.hand.visible){if(this.boardGame.stock.cards.length>0){var n=this.createCardBack();this.hintContainer.add([n])}var i=this.createHintGlow(),a=this.boardGame.stock.getPlacingPosition(0),r=a.x,s=a.y;this.hintContainer.add(i),this.hintContainer.setPosition(r,s),this.hintContainer.setActive(!0),this.hintContainer.add(this.hand),this.hintTween=this.boardGame.scene.tweens.addCounter({duration:800,onStart:function(){t.bg.revive(),t.hand.revive(),t.hintContainer.setVisible(!0),t.hand.doubleTap(0,!1,(function(){console.log("complete double tap")}))},onComplete:function(){t.hintContainer.getAll().forEach((function(e){return t.group.killAndHide(e)})),t.hintContainer.removeAll(),t.hintContainer.kill(),t.bg.kill(),t.hand.kill()}})}},t.showMoveHintAnimation=function(e,t){var n,i=this;if((null==(n=this.hintTween)||!n.isPlaying())&&!(this.hintTween&&this.hintTween.countdown>0)&&!this.hand.visible){var a=e.getWorldPosition(),r=a.x,s=a.y,o=t.getPlacingPosition(t.cards.length),c=o.x,u=o.y;if(t instanceof ge){var l=t.getLastCard();if(l){var h=l.getWorldPosition();c=h.x,u=h.y+this.boardGame.getVerticalSpacePile()}}if(e.placement instanceof ge)for(var d=e.placement.getSubCards(e),f=0;f<d.length;f++){var p=this.createHintCard(d[f].frame.name);p.setY(this.boardGame.getVerticalSpacePile()*f);var g=this.createHintGlow();g.setY(this.boardGame.getVerticalSpacePile()*f),this.hintContainer.add([g,p])}else{var m=this.createHintCard(e.frame.name),v=this.createHintGlow();this.hintContainer.add([v,m])}this.hintContainer.add(this.hand),this.boardGame.scene.tweens.killTweensOf(this.hand),this.hintContainer.setPosition(r,s),this.hand.revive(),this.bg.revive(),this.hand.tapAndHold(0),this.hintContainer.revive(),this.hintTween=this.boardGame.scene.tweens.add({targets:this.hintContainer,x:{start:r,from:r,to:c},y:{start:s,from:s,to:u},delay:300,duration:600,completeDelay:500,ease:Phaser.Math.Easing.Sine.Out,onComplete:function(){i.hand.unHold(0,!1,(function(){i.hintContainer.getAll().forEach((function(e){return i.group.killAndHide(e)})),i.hintContainer.removeAll(),i.hintContainer.kill(),i.bg.kill(),i.hand.kill()}))}})}},t.createHintGlow=function(){var e=Q.CARD_WIDTH,t=Q.CARD_HEIGHT,n=this.group.get();return n.setTexture(N.Z.GAMEPLAY_DEFAULT.KEY,"hint"),n.setWorldSize(1.2*e,1.15*t),n.revive(),n},t.createHintCard=function(e){var t=this.boardGame.scene.theme.getCurrentThemeConfig().cardFaceKey,n=this.group.get();n.setTexture(t),n.revive(),n.setFrame(e);var i=Q.CARD_WIDTH,a=Q.CARD_HEIGHT;return n.setWorldSize(i,a),n},t.createCardBack=function(){var e=this.boardGame.scene.theme.getCurrentThemeConfig().cardBackFrame,t=this.group.get();t.setTexture(me.KEY,e),t.revive();var n=Q.CARD_WIDTH,i=Q.CARD_HEIGHT;return t.setWorldSize(n,i),t},t.createTutorialHand=function(){this.hand=new F(this.boardGame.scene),this.hand.kill()},e}(),Ee=ye,Se=n(46),Te=1/GameCore.Utils.Image.getImageScale(),Ae=N.Z.GAMEPLAY_DEFAULT.KEY,Ce=function(e){function t(t){var n;return(n=e.call(this,t,Ae)||this).emitZone=void 0,n.particleEmitters=void 0,n.particleEmitters=[],n.emitZone=new Phaser.Geom.Rectangle(-15,-20,30,40),n.createSuitEmitter("suit_clubs"),n.createSuitEmitter("suit_diamonds"),n.createSuitEmitter("suit_heart"),n.createSuitEmitter("suit_spades"),n.scene.add.existing((0,a.Z)(n)),n.setDepth(1e3),n}(0,r.Z)(t,e);var n=t.prototype;return n.createSuitEmitter=function(e){this.particleEmitters.push(this.createEmitter({on:!1,frame:e,emitZone:{source:this.emitZone,type:"random"},speed:40,frequency:100,alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.Out},scale:.5*Te,lifespan:1200,rotate:{start:0,end:40,random:!0}}))},n.explode=function(e,t,n,i){this.particleEmitters[e].explode(t,n,i)},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),be=function(e){function t(t){var n;return(n=e.call(this,t)||this).cards=[],n.suitExplosive=void 0,n.createAce(),n.suitExplosive=new Ce(t.scene),n.slot.setVisible(!1),n.setName(fe.Foundation),n}(0,r.Z)(t,e);var n=t.prototype;return n.createAce=function(){this.slot.setFrame("ic_slot_a")},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n)},n.addCardsFromSaveData=function(){var t=(0,i.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.addCardsFromSaveData.call(this,n,0);case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.addCard=function(e,t){var n=this;if(e instanceof ne){if(e.scene.gameplay.cardsLayer.bringToTop(e.bg),e.scene.gameplay.cardsLayer.bringToTop(e),e.setPlacement(this),t){var i=this.getPlacingPosition(this.cards.length),a=i.x,r=i.y;e.moveTo(a,r,300)}this.cards.push(e)}else for(var s=this.getPlacingPosition(this.cards.length),o=s.x,c=s.y,u=function(i){var a=e[i];if(a.setPlacement(n),t){var r=e[0].getTag(),s=(r-r%100)/100-1;a.moveTo(o,c,300,650-50*i,(function(){a.scene.gameplay.cardsLayer.bringToTop(a.bg),a.scene.gameplay.cardsLayer.bringToTop(a)}),(function(){n.suitExplosive.explode(s,i,o,c)}))}n.cards.push(a)},l=e.length-1;l>=0;l--)u(l)},n.canBePlace=function(e){return e.getTag()%100==J.KING&&13!==this.cards.length},n.isFull=function(){return 13===this.cards.length},n.kill=function(){this.active=!1,this.clear()},n.revive=function(){this.active=!0},t}(he),Ie=be,we=function(){function e(e){this.scene=void 0,this.boardGame=void 0,this.availableHints=void 0,this.outOfMove=void 0,this.hintAnimation=void 0,this.hintClicked=void 0,this.currentAvailableHintMoves=void 0,this.currentBoardStateHash=void 0,this.currentHintIdx=void 0,this.timeToAutoHint=void 0,this.outOfMoverTimer=void 0,this.boardGame=e,this.scene=e.scene,this.outOfMove=!0,this.hintClicked=0,this.timeToAutoHint=0,this.currentAvailableHintMoves=[],this.currentBoardStateHash="",this.currentHintIdx=0,this.hintAnimation=new Ee(e)}var t=e.prototype;return t.canHint=function(){return this.boardGame.bestMoveFinder.findMoveableCards(!0).length>0},t.showHint=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.boardGame.isWaitingFirstMove()&&(this.boardGame.boardState=B.PLAYING),this.boardGame.boardState===B.PLAYING){e.next=3;break}return e.abrupt("return");case 3:if(this.boardGame.scene.audio.playSound(Se.Z.HINT),this.hintClicked+=1,t=this.boardGame.generateBoardStateHash(),this.currentBoardStateHash!==t){e.next=10;break}return this.resetAutoHintTime(),this.showDifferentPossibleMoves(),e.abrupt("return");case 10:if(this.currentBoardStateHash=t,this.currentAvailableHintMoves=this.boardGame.bestMoveFinder.findBestMoves(),this.currentHintIdx=0,this.resetAutoHintTime(),!(this.currentAvailableHintMoves.length>0)){e.next=18;break}return n=this.currentAvailableHintMoves[0],i=n.targetCard,a=n.targetPlacement,this.hintAnimation.showMoveHintAnimation(i,a),e.abrupt("return");case 18:if(!(this.boardGame.stock.cards.length>0)){e.next=21;break}return this.hintAnimation.showDealerHint(),e.abrupt("return");case 21:this.boardGame.outOfMove();case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.showDifferentPossibleMoves=function(){if(0!==this.currentAvailableHintMoves.length){this.currentHintIdx+=1,this.currentHintIdx>=this.currentAvailableHintMoves.length&&(this.currentHintIdx=0);var e=this.currentAvailableHintMoves[this.currentHintIdx],t=e.targetCard,n=e.targetPlacement;this.hintAnimation.showMoveHintAnimation(t,n)}else this.boardGame.stock.cards.length>0?this.hintAnimation.showDealerHint():this.boardGame.outOfMove()},t.autoPlayStep=function(){var e,t,n=this.boardGame.bestMoveFinder,i=p()(e=n.findMoveableCards()).call(e,(function(e){return e.card}));if(this.boardGame.hasUsedAutoPlay=!0,i.length>0){this.outOfMove=!1;var a=this.getAutoMove();if(a)return void this.autoPlayMove(a)}this.boardGame.stock.cards.length<=0?P()(t=this.boardGame.foundations).call(t,(function(e){return e.isEmpty()}))?this.boardGame.outOfMove():this.boardGame.isAutoPlay=!1:this.handleDealCards()},t.handleDealCards=function(){this.boardGame.getCurrentGameRelaxedSpiderSetting()?this.boardGame.mover.deal():this.boardGame.bestMoveFinder.handleNonRelaxedDealCards()},t.getAutoMove=function(){var e,t=this.boardGame.bestMoveFinder.findBestMoves(),n=this.boardGame.getCurrentGameRelaxedSpiderSetting(),i=null==(e=t[0])?void 0:e.targetPlacement;if(!(i instanceof ge)&&!(i instanceof Ie))return null;var a=n?-300:-100;if(t[0].movePriority<a)return null;var r=this.randomizeAutoMove(t);return 0===r.length?null:(this.boardGame.bestMoveFinder.addMoveToAcceptedList(r[0]),console.log("Accepted Move",r[0].targetCard.getTag(),r[0].targetPlacement.getname()+"-"+r[0].targetPlacement.getIdx()+"]",r[0].movePriority),r[0])},t.randomizeAutoMove=function(e){var t=e[0].movePriority,n=t>0?Math.floor(.9*t):Math.floor(1.1*t),i=w()(e).call(e,(function(e){return e.movePriority>=n}));return L()(i).call(i,(function(){return Math.random()-.5})),i},t.resetAutoHintTime=function(){this.timeToAutoHint=0},t.resetOutOfMoveTimer=function(){this.outOfMoverTimer=0},t.clear=function(){this.hintClicked=0},t.update=function(e){if(this.boardGame.isPlaying()){if(this.boardGame.scene.player.getPlayerSettings().autoHints?this.timeToAutoHint+=e:this.timeToAutoHint=0,this.outOfMove&&this.boardGame.stock.isEmpty()){if(this.outOfMoverTimer+=e,this.outOfMoverTimer>2e3)return this.boardGame.outOfMove(),this.resetOutOfMoveTimer(),void(this.outOfMove=!1)}else this.resetOutOfMoveTimer();this.timeToAutoHint>1e4&&this.showHint()}},t.autoPlayMove=function(e){var t,n=this.boardGame.mover;if(!n.isPicked()){var i=e.targetCard,a=e.targetPlacement,r=i.placement,s=R()(t=i.placement.cards).call(t,i);n.pickCard(r,r.cards.length-s),n.movePickedToNewPlacement(a),n.donePick()}},e}(),xe=we,_e=n(47),Oe=n.n(_e),Pe=n(239),ke=n.n(Pe),Le=n(150),De=n.n(Le),Re=n(151),Be=n.n(Re),Ne=n(231),Me=n.n(Ne),Ge=n(81),Ue=n(505),Fe=n(507),Ze=n(147),He=n(29);function We(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return ze(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ze(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ye=GameCore.Configs.Gameplay.SmartClick,Ve=Phaser.Input.Events,Ke=Ve.GAMEOBJECT_DOWN,je=Ve.DRAG,Je=Ve.POINTER_UP,Xe=Ve.POINTER_DOWN,qe=function(){function e(e){var t=this;this.boardGame=void 0,this.undos=void 0,this.picked=void 0,this.dragX=void 0,this.dragY=void 0,this.pickedPlacement=void 0,this.smartClickBounds=void 0,this.smartClickDebugRect=void 0,this.undoClicked=void 0,this.numOfFutureFoundationCompleted=0,this.isEmptySmartClick=void 0,this.isDealingNewCards=void 0,this.curMaxFoundationFinished=void 0,this.handlePointerDown=function(e,n){if(!t.isPicked()&&!t.isEmptySmartClick){var i=t.boardGame,a=i.isDevToolAddingCards,r=i.isDevToolRemovingCards,s=i.isDevToolChangingCards,o=a||r||s;if(n instanceof ne){var c;t.boardGame.boardState=B.PLAYING;var u=n;if(u.placement instanceof ge&&o)return s&&t.handleDevToolChangeCard(u),r&&t.handleDevToolRemoveCard(u),a&&t.handleDevToolAddCard(u.placement),u.placement.resizePile(),u.placement.faceUpLast(),void u.placement.updateCardTintByAvailability();if(u.isMoving())return;if(!t.checkIfCardIsValidToMove(u))return;var l=R()(c=u.placement.cards).call(c,u);t.pickCard(u.placement,u.placement.cards.length-l)}}},this.handleSmartClickNoCardPointerDown=function(e){var n=t.boardGame.scene.player.getPlayerSettings();t.isPicked()||t.isEmptySmartClick||n.tapToMove&&Ye&&(t.boardGame.isWaitingFirstMove()||t.boardGame.isPlaying())&&(t.isEmptySmartClick=!0)},this.isDragged=void 0,this.dragPicked=function(e,n,i,a){!t.isDragged&&e.getDistanceX()+e.getDistanceY()<15||(t.isDragged=!0,t.dragX=i,t.dragY=a)},this.handlePointerUp=function(e){if(t.isPicked()||t.isEmptySmartClick){var n=t.checkForClickableState(),i=!t.isDealingNewCards&&Ye&&n;if(t.isEmptySmartClick&&i){var a=t.gatherCardsForSmartClick(e),r=t.getBestCardForSmartClick(a);return r&&t.handleClickOnCard(r),t.boardGame.hint.resetAutoHintTime(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint(),void(t.isEmptySmartClick=!1)}if(t.picked[0]){var s=t.picked[0],o=t.findFirstDestination(e,t.picked);if(o&&n&&t.movePickedToNewPlacement(o),!t.isDragged&&n&&e.upTime-e.downTime<1e3){if(t.donePick(),t.boardGame.scene.player.getPlayerSettings().tapToMove){if(s.isMoving())return;var c=s;if(i){var u=t.gatherCardsForSmartClick(e);Oe()(u).call(u,s)||u.push(s);var l=t.getBestCardForSmartClick(u);l&&(c=l)}t.donePick(),t.handleClickOnCard(c)}}else t.donePick();t.boardGame.hint.resetAutoHintTime(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint()}else t.donePick()}},this.deal=function(){if(!t.boardGame.stock.isEmpty()){if(!1===t.boardGame.getCurrentGameRelaxedSpiderSetting()){for(var e=!1,n=0,i=0;i<t.boardGame.piles.length;i++){var a=t.boardGame.piles[i];n+=a.cards.length,a.isEmpty()&&(e=!0)}var r=t.boardGame.piles.length;if(e&&n>=r)return void t.boardGame.stock.getLastCard().shake()}var s=t.boardGame.scene.levelHandler.getConfigs();if(s){var o=s.piles;t.boardGame.isPlaying()&&t.boardGame.scene.audio.playSound(Se.Z.CARD_MOVE);var c=t.boardGame.stock.pickTopCards(o);if(c.length>0){t.isDealingNewCards=!0,t.boardGame.dynamicCardHandler.setDynamicTagForDealingCards(c);for(var u=0;u<c.length;u++){var l=c[u],h=t.boardGame.piles.length,d=t.boardGame.piles[u%h];d.addCard(l,!0),d.faceUpLast(),t.resizePile(d),t.autoCompleteCardStack(d)}t.boardGame.scene.time.delayedCall(310,(function(){t.boardGame.piles.forEach((function(e){e.updateCardTintByAvailability(),t.isDealingNewCards=!1}))})),t.undos.push({type:"deal",numOfCards:c.length,srcName:t.boardGame.stock.getname(),srcIdx:t.boardGame.stock.getIdx(),destName:t.boardGame.stock.getname(),destIdx:t.boardGame.stock.getIdx()}),t.boardGame.hint.canHint()&&(t.boardGame.hint.outOfMove=!1),t.boardGame.stock.isEmpty()&&t.boardGame.hint.outOfMove&&t.boardGame.outOfMove(),t.boardGame.decreaseScore(5),t.boardGame.increaseMoves()}}}},this.boardGame=e,this.undos=[],this.picked=[],this.undoClicked=0,this.isEmptySmartClick=!1,this.isDealingNewCards=!1,this.curMaxFoundationFinished=0}var t=e.prototype;return t.enableInput=function(){var e=this,t=this.boardGame.scene;t.input.on(Ke,this.handlePointerDown),t.input.on(je,this.dragPicked),t.input.on(Je,this.handlePointerUp),t.input.on(Xe,this.handleSmartClickNoCardPointerDown),this.boardGame.stock.slot.onClick((function(){e.boardGame.boardState=B.PLAYING,e.deal()}))},t.disableInput=function(e){void 0===e&&(e=!1);var t=this.boardGame.scene;t.input.off(Ke,this.handlePointerDown),t.input.off(je,this.dragPicked),t.input.off(Je,this.handlePointerUp),t.input.off(Xe,this.handleSmartClickNoCardPointerDown),e&&this.boardGame.deck.cards.forEach((function(e){e.isFacingUp()&&e.placement instanceof ge&&e.setNotAvailableToMoveTint()})),this.boardGame.stock.slot.offClick()},t.isPicked=function(){return this.picked.length>0},t.isCurMaxFoundationFinishedValueChange=function(){var e=this.boardGame.foundations,t=0;return e.forEach((function(e){e.isFull()&&t++})),t>this.curMaxFoundationFinished&&(this.curMaxFoundationFinished=t,!0)},t.movePickedToNewPlacement=function(e){var t=this;if(e.addCard(this.picked,!0),e instanceof ge){this.boardGame.decreaseScore(5),e.updateCardTintByAvailability();var n=e.getTopCardStackData();n&&13===n.length||this.resizePile(e),this.autoCompleteCardStack(e)}var i=0;if(e instanceof Ie){this.isCurMaxFoundationFinishedValueChange()&&this.boardGame.scene.analytics.event(He._.FOUNDATION_FINISH,{value:this.curMaxFoundationFinished}),this.boardGame.increaseScore(650),this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound("finish"+e.cards.length,{delay:.1});var a=this.boardGame.isAutoPlay,r=a?400:1250;i=a?0:700;var s=!this.boardGame.hint.canHint();this.boardGame.canAutoComplete||8===this.curMaxFoundationFinished||s||this.boardGame.scene.time.delayedCall(r,(function(){t.boardGame.scene.gameplay.handleShowCompleteStackAd()}))}else this.boardGame.isPlaying()&&this.boardGame.scene.audio.playSound(Se.Z.CARD_MOVE);var o=this.pickedPlacement instanceof ge&&!!this.pickedPlacement.faceUpLast(i);this.pickedPlacement instanceof ge&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),this.undos.push({type:"move",numOfCards:this.picked.length,srcName:this.pickedPlacement.getname(),srcIdx:this.pickedPlacement.getIdx(),destName:e.getname(),destIdx:e.getIdx(),faceLast:!!o}),e instanceof Ie||this.boardGame.increaseMoves(),this.boardGame.checkGameWin(),this.picked=[]},t.unMovePickedToPlacement=function(e,t,n){void 0===n&&(n=!1),e instanceof ge&&t&&e.faceDownLast(),e.addCard(this.picked,!0),e instanceof ge&&(e.updateCardTintByAvailability(),this.resizePile(e)),this.pickedPlacement instanceof ge&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),n||this.boardGame.increaseMoves(),this.picked=[]},t.getBestCardForSmartClick=function(e){var t=this.boardGame.bestMoveFinder,n=p()(e).call(e,(function(e){return{card:e,priority:0}})),i=t.findAllAvailableMoves(n);return 0===i.length?null:L()(i).call(i,(function(e,t){return t.movePriority-e.movePriority}))[0].targetCard},t.gatherCardsForSmartClick=function(e){var t=this,n=e.worldX,i=e.worldY,a=this.boardGame.scene.gameZone,r=a.width,s=a.height;if(this.smartClickBounds)this.smartClickBounds.setPosition(n-this.smartClickBounds.width/2,i-this.smartClickBounds.height/2),this.smartClickDebugRect.setPosition(this.smartClickBounds.x,this.smartClickBounds.y);else{var o=Math.min(.1*s,.1*r,15);this.smartClickBounds=new Phaser.Geom.Rectangle(n-o/2,i-o/2,o,o),this.smartClickDebugRect=this.boardGame.scene.add.rectangle(this.smartClickBounds.x,this.smartClickBounds.y,this.smartClickBounds.width,this.smartClickBounds.height,16711680,.5),this.smartClickDebugRect.setOrigin(0,0),this.smartClickDebugRect.setDepth(Ge.Z.EFFECT),this.smartClickDebugRect.kill()}var c=[];return this.boardGame.piles.forEach((function(e){var n=e.cards;if(0!==n.length){var i=e.getTopCardStackData();if(i)for(var a=i.length;a>=1;a--){var r=n[n.length-a];if(r){if(!r.isFacingUp())return;var s=r.getBounds(),o=Phaser.Geom.Rectangle.Intersection(t.smartClickBounds,s);o.width>0&&o.height>0&&c.push(r)}}}})),c},t.handleDevToolRemoveCard=function(e){var t,n;if(e.placement instanceof ge){var i=e.placement,a=R()(t=i.cards).call(t,e);z()(n=i.cards).call(n,a,1).forEach((function(e){e.kill()}))}},t.handleDevToolChangeCard=function(e){var t=this.boardGame,n=t.devToolChangeCardValue+t.devToolChangeSuitValue;e.setTag(n),e.updateCardStyle(),e.resetCardTint()},t.handleDevToolAddCard=function(e){var t=this.boardGame,n=t.devToolAddCardValue+t.devToolAddSuitValue,i=this.boardGame.deck.requestNewCard(n);i.updateCardStyle(),i.resetCardTint(),i.setFacing(!0),i.setDepth(10),this.boardGame.gameplay.cardsLayer.add(i.bg),this.boardGame.gameplay.cardsLayer.add(i),this.boardGame.gameplay.cardsLayer.sortChildrenFlag=!1,e.addCard(i,!0)},t.checkIfCardIsValidToMove=function(e){var t,n,i=e.placement;if(i instanceof Ie)return!1;var a=R()(t=i.cards).call(t,e),r=i.cards.length;if(a===r-1)return!0;for(var s,o=_()(n=i.cards).call(n,a,r),c=!0,u=!0,l=e.getTag(),h=l%100,d=Math.floor(l/100),f=We(o);!(s=f()).done;){var p=s.value;if(p!==e){var g=p.getTag(),m=g%100,v=Math.floor(g/100);if(h-m!==1&&(c=!1),d!==v&&(u=!1),!c&&!u)break;h=m,d=v}}return c&&u},t.pickCard=function(e,t,n){var i;(void 0===n&&(n=!1),this.pickedPlacement=e,this.picked=e.pickTopCards(t),n)&&ke()(i=this.picked).call(i);this.isDragged=!1},t.donePick=function(){this.isPicked()&&(this.pickedPlacement.addCard(this.picked,this.isDragged),this.pickedPlacement instanceof ge&&(this.pickedPlacement.updateCardTintByAvailability(),this.resizePile(this.pickedPlacement)),this.picked=[],this.isDragged=!1)},t.checkForClickableState=function(){var e=this.boardGame.scene.screen.get(l.o4.GAME_STATS_SCREEN);if(e&&e instanceof Ue.Z&&e.visible)return!1;var t=this.boardGame.scene.screen.get(l.o4.HOW_TO_PLAY_SCREEN);if(t&&t instanceof Fe.Z&&t.visible)return!1;var n=this.boardGame.scene.screen.get(l.o4.SETTINGS_SCREEN);return!(n&&n instanceof Ze.Z&&n.visible)&&(this.boardGame.isWaitingFirstMove()||this.boardGame.isPlaying())},t.autoCompleteCardStack=function(e){var t=this;if(!this.boardGame.isAutoPlay){var n=e.getTopCardStackData();if(n&&13===n.length){this.numOfFutureFoundationCompleted+=1,this.disableInput();this.boardGame.scene.time.delayedCall(450,(function(){t.numOfFutureFoundationCompleted-=1;var n=e.cards[e.cards.length-13];t.handleClickOnCard(n),t.boardGame.isGameOver()||(t.enableInput(),t.boardGame.hint.outOfMove=!t.boardGame.hint.canHint())}))}}},t.resizePile=function(e){this.boardGame.isAutoPlay?e.resizePile():this.boardGame.scene.time.delayedCall(350,(function(){e.resizePile()}))},t.findFirstDestination=function(e,t){if(13==t.length){var n=this.detectFoundation(e,t[0]);if(n)return n}return this.detectPile(e,t[0])},t.detectFoundation=function(e,t){var n,i=w()(n=this.boardGame.foundations).call(n,(function(e){return Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),e.slot.getBounds())&&e.canBePlace(t)}));if(2==i.length)return e.worldX-i[0].x<i[1].x-e.worldX?i[0]:i[1];if(1==i.length){if(i[0]==this.pickedPlacement)return;return i[0]}},t.detectPile=function(e,t){var n,i=this,a=w()(n=this.boardGame.piles).call(n,(function(e){var n,a=(null==(n=e.getLastCard())?void 0:n.getBounds())||e.slot.getBounds();return e!==i.pickedPlacement&&Phaser.Geom.Intersects.RectangleToRectangle(t.getBounds(),a)&&e.canBePlace(t)}));return 2==a.length?(e.worldX,a[0].x,a[1].x,e.worldX,a[1]):1==a.length?a[0]:void 0},t.checkIfCanMoveToFoundation=function(){var e=this,t=this.boardGame.foundations,n=[];return 13==this.picked.length?(n.push.apply(n,w()(t).call(t,(function(t){return t!==e.pickedPlacement&&t.canBePlace(e.picked[0])}))),n):[]},t.getAvailableDestinations=function(e){var t=[],n=this.boardGame.bestMoveFinder.findAllAvailableMoves([{card:e,priority:0}]);return 0===n.length?t:t=p()(n).call(n,(function(e){return{pile:e.targetPlacement,priority:e.movePriority}}))},t.handleClickOnCard=function(e){var t;if(!this.isPicked()&&e){var n=this.getAvailableDestinations(e),i=R()(t=e.placement.cards).call(t,e);if(this.pickCard(e.placement,e.placement.cards.length-i),0!==n.length)this.movePickedToNewPlacement(n[0].pile),this.donePick();else{this.boardGame.scene.audio.playSound(Se.Z.NO_MOVE);for(var a,r=We(this.picked);!(a=r()).done;){a.value.shake()}this.donePick()}}},t.undo=function(e){if(void 0===e&&(e=!1),this.boardGame.boardState!==B.GAME_OVER){var t=this.undos.pop();if(t){this.boardGame.scene.audio.playSound(Se.Z.UNDO),this.boardGame.boardState=B.PLAYING,e||(this.undoClicked+=1),this.boardGame.bestMoveFinder.rollbackOneMoveFromAcceptedList();var n=t.numOfCards,i=t.srcName,a=t.srcIdx,r=t.destName,s=t.destIdx,o=t.faceLast,c=void 0!==o&&o,u=this.getPlacement(i,a),l=this.getPlacement(r,s);if("deal"===t.type){var h=[];for(var d in this.boardGame.piles){var f=this.boardGame.piles[d],p=f.removeLastCard();p&&h.push(p),f.updateCardTintByAvailability(),this.resizePile(f)}for(var g=0,m=h;g<m.length;g++){var v=m[g];u.addCard(v,!0)}e||this.boardGame.increaseMoves()}else"move"===t.type&&(this.pickCard(l,n,l instanceof Ie),l instanceof Ie&&this.boardGame.decreaseScore(650),this.unMovePickedToPlacement(u,c,e),this.donePick(),this.boardGame.hint.outOfMove=!1);e||this.boardGame.decreaseScore(20),this.boardGame.setAutoCompleteStatus(),l instanceof Ie&&this.undo(!0)}}},t.clear=function(){this.undos=[],this.undoClicked=0,this.numOfFutureFoundationCompleted=0,this.isEmptySmartClick=!1,this.isDealingNewCards=!1,this.curMaxFoundationFinished=0},t.update=function(){if(this.isDragged)for(var e=0;e<this.picked.length;e++){var t=this.picked[e];t.setPosition(this.dragX,this.dragY+e*this.boardGame.getVerticalSpacePile()),t.scene.gameplay.cardsLayer.bringToTop(t)}},t.getPlacement=function(e,t){if(e===fe.Stock)return this.boardGame.stock;if(e===fe.Pile)return this.boardGame.piles[t];if(e===fe.Foundation)return this.boardGame.foundations[t];throw new Error("Placement not found!!!")},t.getNumOfFutureFoundationCompleted=function(){return this.numOfFutureFoundationCompleted},e}(),Qe=qe,$e=n(57),et=N.Z.GAMEPLAY_DEFAULT,tt=et.KEY,nt=et.FRAME,it=function(e){function t(t){var n;return(n=e.call(this,t)||this).restartIcon=void 0,n.remainContainer=void 0,n.remainText=void 0,n.slot.input.cursor="pointer",n.createRecycle(),n.createStockCountText(),n.setName(fe.Stock),n}(0,r.Z)(t,e);var n=t.prototype;return n.createRecycle=function(){var e=this.boardGame.scene,t=this.boardGame.scene.world.isLandscape()?1.2:.8;this.restartIcon=e.add.image(0,0,tt,nt.IC_RECYCLE),this.restartIcon.setWorldSize(36*t,36*t)},n.addCardsFromSaveData=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.boardGame.deck,i=this.boardGame.scene.levelHandler.replayCardStatus,a=0;a<t.length;a++)r=t[a].split("|"),s=parseInt(r[0]),c=parseInt(r[1]),s<100&&i[c]>100&&(s=i[c]),n.setUpCardWhenContinueGame(s,this,t.length,c);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createStockCountText=function(){var e=this.boardGame.scene,t=e.add.container();t.setDepth(Q.DEPTH.REMAINING_STOCK),this.remainText=e.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:e.fontSize(12),origin:{x:.5,y:.5},text:"0"}),this.remainText.setCenterAlign(),this.remainText.setTint(16579837),this.remainText.setPosition(9,-9);var n=e.add.image(9,-9,tt,nt.STOCK_BG);n.setWorldSize(18,18),t.add([n,this.remainText]),this.remainContainer=t,this.remainContainer.kill()},n.setPosition=function(t,n){e.prototype.setPosition.call(this,t,n),this.restartIcon.setPosition(t,n);var i=this.slot,a=i.displayWidth/2,r=i.displayHeight/2;this.remainContainer.setPosition(t-a,n+r)},n.addCard=function(t,n){e.prototype.addCard.call(this,t,n),t.setFacingWithFlippingAnim(!1),t.disableInteractive()},n.canBePlace=function(e){return!1},n.clear=function(){this.cards=[]},n.update=function(t){e.prototype.update.call(this,t),this.cards.length>0?(this.remainContainer.revive(),this.remainText.setText(""+this.cards.length)):this.remainContainer.kill()},n.kill=function(){e.prototype.kill.call(this),this.restartIcon.kill()},n.revive=function(){e.prototype.revive.call(this),this.restartIcon.revive()},t}(he),at=it,rt=n(82),st=function(){function e(e){this.boardGame=void 0,this.cards=void 0,this.cardGroup=void 0,this.boardGame=e,this.cards=[],this.cardGroup=this.boardGame.scene.add.group()}var t=e.prototype;return t.init=function(){var e=this.boardGame.scene.levelHandler.getConfigs().type;"dynamic"===e&&this.initDynamicLevel(),"prebuilt"===e&&this.initPrebuiltLevel()},t.initDynamicLevel=function(){for(var e=this,t=this.boardGame.scene.levelHandler.getConfigs(),n=this.boardGame.scene.levelHandler.replayCardStatus,i=t,a=i.foundations,r=i.piles,s=i.startingCards,o=13*a,c=i.startingLayout.split(","),u=0;u<o;u++){var l=void 0,h=o-s;if(u>=h&&u<=o-s+r-1){var d=c[u-h];l=this.requestNewCard(this.getCardTag(d)),this.removeCardFromDiffHandler(d),this.boardGame.scene.levelHandler.setReplayCardStatus(u,l.getTag())}else n[u]>100?(l=this.requestNewCard(n[u]),this.removeCardFromDiffHandler(n[u])):l=this.requestNewCard(0);l.setOriginalCardIdx(u),this.cards.push(l)}var f=this.boardGame.stock.getPlacingPosition(0),p=f.x,g=f.y;this.cards.forEach((function(t){t.updateCardStyle(),t.resetCardTint(),t.setFacing(!1),t.kill(),t.setPosition(p,g),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},t.initPrebuiltLevel=function(){for(var e=this,t=this.boardGame.scene.levelHandler.getConfigs().startingLayout.split(","),n=0;n<t.length;n++){var i=t[n],a=this.requestNewCard(this.getCardTag(i));this.removeCardFromDiffHandler(i),this.boardGame.scene.levelHandler.setReplayCardStatus(n,a.getTag()),a.setOriginalCardIdx(n),this.cards.push(a)}var r=this.boardGame.stock.getPlacingPosition(0),s=r.x,o=r.y;this.cards.forEach((function(t){t.updateCardStyle(),t.resetCardTint(),t.setFacing(!1),t.kill(),t.setPosition(s,o),t.setDepth(10),e.boardGame.gameplay.cardsLayer.add(t.bg),e.boardGame.gameplay.cardsLayer.add(t)}))},t.createCardForJourneyMode=function(e){var t=e;"-"===e[0]&&(t=e.substring(1,e.length));var n=this.getCardTag(t),i=this.requestNewCard(n);i.setOriginalCardIdx(-1),this.cards.push(i);var a=this.boardGame.stock.getPlacingPosition(0),r=a.x,s=a.y;return i.updateCardStyle(),i.resetCardTint(),i.setFacing(!1),i.setPosition(r,s),i.setDepth(10),this.boardGame.gameplay.cardsLayer.add(i.bg),this.boardGame.gameplay.cardsLayer.add(i),this.boardGame.gameplay.cardsLayer.sortChildrenFlag=!1,i.reset(),i},t.getCardTag=function(e){var t=e.length,n=e.substring(0,t-1),i=100;switch(e.substring(t-1,t)){case"c":i=K.ACE-1;break;case"d":i=V.ACE-1;break;case"h":i=Y.ACE-1;break;case"s":i=j.ACE-1}return i+parseInt(n)},t.removeCardFromDiffHandler=function(e){if("number"!==typeof e){var t=e.length,n=e.substring(0,t-1),i=-1;switch(e.substring(t-1,t)){case"c":i=1;break;case"d":i=2;break;case"h":i=3;break;case"s":i=4}this.boardGame.dynamicCardHandler.manualRemoveCardHash(i,parseInt(n))}else{var a=this.boardGame.dynamicCardHandler.getCardIdAndValueFromCardTag(e),r=a.cardId,s=a.cardValue;this.boardGame.dynamicCardHandler.manualRemoveCardHash(r,s)}},t.requestNewCard=function(e){var t=this.cardGroup.getFirstDead();if(t&&t instanceof ne)return t.setTag(e),t.revive(),t.resetCardTint(),t.setOriginalCardIdx(-1),t;var n=new ne(this.boardGame.scene,e);return this.cardGroup.add(n),n},t.setUpCardWhenContinueGame=function(e,t,n,i){var a=this.requestNewCard(e);if(e>100&&this.removeCardFromDiffHandler(e),t.addCard(a,!1),!(t instanceof at)){t.cards.pop();var r=t.getPlacingPositionForContinueGame(n),s=r.x,o=r.y;a.moveTo(s,o,300),t.cards.push(a)}a.setOriginalCardIdx(i);var c=this.boardGame.stock.getPlacingPosition(0),u=c.x,l=c.y;return a.updateCardStyle(),a.resetCardTint(),a.setFacing(!1),a.setPosition(u,l),a.setDepth(10),this.boardGame.gameplay.cardsLayer.add(a.bg),this.boardGame.gameplay.cardsLayer.add(a),this.boardGame.gameplay.cardsLayer.sortChildrenFlag=!1,a},t.reset=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.revive(),e.moveTo(t,n,200)}))},t.killAllCards=function(){this.cardGroup.getChildren().forEach((function(e){e instanceof ne&&e.active&&e.kill()})),this.cards=[]},t.align=function(){var e=this.boardGame.stock.getPlacingPosition(0),t=e.x,n=e.y;this.cards.forEach((function(e){e.reset(),e.setPosition(t,n,200)}))},t.getDeck=function(){return this.cards},e}(),ot=st,ct=n(119),ut=function(){function e(e){this.boardGame=void 0,this.remainingCards=[],this.remainingCardsHash=[],this.curFaceUpCards=[],this.levelHandler=void 0,this.boardGame=e,this.levelHandler=e.scene.levelHandler}var t=e.prototype;return t.init=function(){var e;this.remainingCards=[],this.remainingCardsHash=m()(e=Array(53)).call(e,0),this.curFaceUpCards=[];var t=this.levelHandler.getConfigs().suits.length,n=this.getCardIdxList();if(1===t)for(var i=0;i<n.length;i++){for(var a=1;a<=8;a++)this.remainingCards.push(n[i]);this.remainingCardsHash[n[i]]=8}else if(2===t)for(var r=0;r<n.length;r++){for(var s=1;s<=4;s++)this.remainingCards.push(n[r]);this.remainingCardsHash[n[r]]=4}else for(var o=0;o<n.length;o++){for(var c=1;c<=2;c++)this.remainingCards.push(n[o]);this.remainingCardsHash[n[o]]=2}},t.getCardIdxList=function(){for(var e=this.boardGame.scene.levelHandler.getConfigs().suits,t=e.length,n=[],i=0;i<t;i++){var a=0;switch(e[i][0]){case"c":a=0;break;case"d":a=1;break;case"h":a=2;break;case"s":a=3}for(var r=1;r<=13;r++)n.push(r+13*a)}return n},t.randomCardIdAndValue=function(){var e,t=0,n=0;if(Math.random()<.9){var i,a=[],r=0;this.remainingCardsHash.forEach((function(e,t){e>r?(a=[t],r=e):e===r&&a.push(t)})),t=a[Math.floor(Math.random()*a.length)],n=R()(i=this.remainingCards).call(i,t)}else n=Math.floor(Math.random()*this.remainingCards.length),t=this.remainingCards[n];var s=t%13===0?13:t%13,o=Math.ceil(this.remainingCards[n]/13);return this.remainingCardsHash[t]-=1,z()(e=this.remainingCards).call(e,n,1),this.curFaceUpCards.push(t),{cardId:o,cardValue:s}},t.manualRemoveCardHash=function(e,t){var n,i,a=this.getCardHashIdx(e,t),r=R()(n=this.remainingCards).call(n,a);this.remainingCardsHash[a]-=1,z()(i=this.remainingCards).call(i,r,1),this.curFaceUpCards.push(a)},t.getCardHashIdx=function(e,t){return 13*(e-1)+t},t.getCardIdAndValueFromCard=function(e){var t=e.getTag();return this.getCardIdAndValueFromCardTag(t)},t.getCardIdAndValueFromCardTag=function(e){var t=e%100;return{cardId:Math.floor(e/100),cardValue:t}},t.getCardIdFromCHI=function(e){return Math.floor((Math.abs(e)-1)/13)+1},t.getGoodInitCardIdAndValue=function(){var e=this,t=[];if(this.curFaceUpCards.forEach((function(n){e.remainingCardsHash[n+1]>0&&t.push(n+1),e.remainingCardsHash[n-1]>0&&t.push(n-1)})),0===t.length)return this.randomCardIdAndValue();var n,i,a=t[Math.floor(Math.random()*t.length)],r=R()(n=this.remainingCards).call(n,a),s=a%13===0?13:a%13,o=Math.ceil(this.remainingCards[r]/13);return this.remainingCardsHash[a]-=1,z()(i=this.remainingCards).call(i,r,1),this.curFaceUpCards.push(a),{cardId:o,cardValue:s}},t.setCardTagOnReplay=function(e){var t=this.boardGame.scene.levelHandler.replayCardStatus;if(t[e.originalCardIdx]>100){var n=t[e.originalCardIdx];e.setTag(n);var i=Math.floor(n/100),a=n%100%13===0?13:n%100%13;return this.manualRemoveCardHash(i,a),!0}return!1},t.setDynamicTagForBackfaceCard=function(e){if(!this.setCardTagOnReplay(e)){var t=this.boardGame.scene.levelHandler;if(Math.random()<=.7){for(var n=[],i=0;i<this.boardGame.piles.length;i++){for(var a=this.boardGame.piles[i],r=null,s=a.cards.length-1;s>=0;s--){var o=a.cards[s];if(!o.isFacingUp()||!this.boardGame.mover.checkIfCardIsValidToMove(o)){if(!r)break;var c=this.getCardIdAndValueFromCard(r),u=c.cardId,l=c.cardValue,h=this.getCardHashIdx(u,l);this.remainingCardsHash[h+1]>0&&this.getCardIdFromCHI(h)===this.getCardIdFromCHI(h+1)&&n.push(h+1);break}r=o}if(a.cards.length>0){var d=a.getLastCard();if(d.isFacingUp()){var f=this.getCardIdAndValueFromCard(d),p=f.cardId,g=f.cardValue,m=this.getCardHashIdx(p,g);this.remainingCardsHash[m-1]>0&&this.getCardIdFromCHI(m)===this.getCardIdFromCHI(m-1)&&n.push(m-1)}}}if(0===(n=GameCore.Utils.Array.unique(n)).length){var v=this.randomCardIdAndValue(),y=v.cardId,E=v.cardValue;e.setTag(100*y+E),t.setReplayCardStatus(e.originalCardIdx,e.getTag()),console.log("%c cardId, cardValue: ","font-size:12px;background-color: #111111;color:#fff;",y,E,e.getTag())}else{var S,T,A=n[Math.floor(Math.random()*n.length)],C=R()(S=this.remainingCards).call(S,A),b=A%13===0?13:A%13,I=Math.ceil(this.remainingCards[C]/13);this.remainingCardsHash[A]-=1,z()(T=this.remainingCards).call(T,C,1),this.curFaceUpCards.push(A),e.setTag(100*I+b),t.setReplayCardStatus(e.originalCardIdx,e.getTag()),console.log("%c cardId, cardValue: ","font-size:12px;background-color: #AAC9AB;color:#fff;",I,b,e.getTag())}}else{var w=this.randomCardIdAndValue(),x=w.cardId,_=w.cardValue;e.setTag(100*x+_),t.setReplayCardStatus(e.originalCardIdx,e.getTag()),console.log("%c cardId, cardValue: ","font-size:12px;background-color: #BAAC9A;color:#fff;",x,_,e.getTag())}}},t.setDynamicTagForDealingCards=function(e){var t=this;if(0!==e.length)for(var n=[],i=this.boardGame.scene.levelHandler,a=function(){var a=e[r];if(a.getTag()>=100)return 0;if(t.setCardTagOnReplay(a))return 0;var s=Math.floor(3*e.length/5/2);if(r<e.length-s){t.setDynamicTagForBackfaceCard(a);var o=t.getCardIdAndValueFromCard(a),c=o.cardId,u=o.cardValue;n.push(t.getCardHashIdx(c,u))}else{var l=[];if(n.forEach((function(e){t.remainingCardsHash.length>e+1&&t.remainingCardsHash[e+1]>0&&t.getCardIdFromCHI(e)===t.getCardIdFromCHI(e+1)&&l.push(e+1),t.remainingCardsHash[e-1]>0&&t.getCardIdFromCHI(e)===t.getCardIdFromCHI(e-1)&&l.push(e-1)})),0===l.length){var h=t.randomCardIdAndValue(),d=h.cardId,f=h.cardValue;a.setTag(100*d+f),i.setReplayCardStatus(a.originalCardIdx,a.getTag()),console.log("%c cardId * 100 + cardValue: ","font-size:12px;background-color: #C5C4BC;color:#fff;",100*d+f)}else{var p,g,m=l[Math.floor(Math.random()*l.length)],v=R()(p=t.remainingCards).call(p,m),y=m%13===0?13:m%13,E=Math.ceil(t.remainingCards[v]/13);t.remainingCardsHash[m]-=1,z()(g=t.remainingCards).call(g,v,1),t.curFaceUpCards.push(m),a.setTag(100*E+y),i.setReplayCardStatus(a.originalCardIdx,a.getTag()),console.log("%c cardId * 100 + cardValue: ","font-size:12px;background-color: #42b983;color:#fff;",100*E+y);var S=P()(n).call(n,(function(e){return e===m-1||e===m+1}));S&&z()(n).call(n,S,1)}}},r=0;r<e.length;r++)a()},e}(),lt=ut,ht=n(675),dt=function(e){var t=window.game.world.getPixelRatio(),n=e.scene,i=e.key,a=e.newKey,r=e.radius,s=e.alpha,o=e.width*t,c=e.height*t,u=e.border||0,l=n.textures.get(i).getSourceImage(),h=l.width/2-o/2,d=l.height/2-c/2+e.y*t;if(!l)return!1;if(n.textures.exists(a))return!0;var f=n.textures.createCanvas(a||i,o,c),p=f.context,g=u*t,m=document.createElement("canvas");m.width=o,m.height=c;var v=m.getContext("2d");return v.drawImage(l,-h,-d),ht.r_(m,0,0,f.canvas.width,f.canvas.height,r),v.globalAlpha=s,v.fillStyle="#ffffff",null==v||v.fillRect(0,0,o,c),v.globalAlpha=1,p.beginPath(),p.moveTo(g,0),p.lineTo(o-g,0),p.quadraticCurveTo(o,0,o,0+g),p.lineTo(o,0+c-g),p.quadraticCurveTo(o,0+c,o-g,0+c),p.lineTo(g,0+c),p.quadraticCurveTo(0,0+c,0,0+c-g),p.lineTo(0,0+g),p.quadraticCurveTo(0,0,g,0),p.closePath(),p.clip(),f.draw(0,0,m),!0},ft=function(e){function t(t,n){var i,a=n.key,r=n.width,s=n.height,o=n.border,c=n.radius,u=n.y,l=void 0===u?0:u,h=n.alpha,d=void 0===h?.15:h,f=t.theme.getCurrentThemeConfig().backgroundKey,p=f+a;return dt({scene:t,key:f,newKey:p,radius:c,border:o,width:r,height:s,alpha:d,y:l}),(i=e.call(this,t,0,0,p)||this).setTexture(p),i.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){var n=e+a;dt({scene:t,key:e,newKey:n,radius:c,border:o,width:r,height:s,alpha:d,y:l}),i.setTexture(n),i.setWorldSize(r,s)})),i.setWorldSize(r,s),i}return(0,r.Z)(t,e),t}(Phaser.GameObjects.Image),pt=n(495),gt={UNCOVER_NEW_CARDS:500,HELPS_COMPLETE_SUIT:3e3,CARD_VALUE_MULTIPLIER:5,FACE_DOWN_CARD_COUNT_PENALTY:-10,EMPTY_PILE_PENALTY:-1e3},mt={UNCOVER_POTENTIAL_STACK:200},vt={SAME_SUIT_MOVE:200,MOVE_KING_TO_EMPTY_PILE:300,MOVE_CARD_TO_EMPTY_PILE:100,MOVING_ONE_PILE_TO_ANOTHER:-5e3,CAPTURING_FULL_STACK:5e3},yt={DIFFERENT_SUIT_MOVE:-500},Et=function(){function e(e,t){this.scene=void 0,this.boardGame=void 0,this.acceptedMoveList=void 0,this.scene=e,this.boardGame=t,this.acceptedMoveList=[]}var t=e.prototype;return t.addMoveToAcceptedList=function(e){var t=this.generateMoveHash(e);this.acceptedMoveList.push(t)},t.rollbackOneMoveFromAcceptedList=function(){this.acceptedMoveList.pop()},t.resetAcceptedList=function(){this.acceptedMoveList=[]},t.findBestMoves=function(){var e=this.findMoveableCards(!0),t=this.findAllAvailableMoves(e,!0);return t.length>=15?_()(t).call(t,0,15):t},t.findMoveableCards=function(e){void 0===e&&(e=!1);for(var t=[],n=this.boardGame,i=0;i<n.piles.length;i++){var a=n.piles[i];t.push.apply(t,this.calculateTopCardStackPriority(a,e))}return L()(t).call(t,(function(e,t){return t.priority-e.priority})),t},t.findAllAvailableMoves=function(e,t){var n=this;void 0===t&&(t=!1);var i=[];if(0===e.length)return i;for(var a=this.boardGame,r=a.piles,s=a.foundations,o=this.scene.levelHandler.getConfigs().suits,c=function(){var a,c=e[u],l=c.card,h=c.priority;if(!(l.placement instanceof ge))return 0;var d=R()(a=l.placement.cards).call(a,l),f=l.placement.cards.length-d,p=l.placement.cards;if(l.isKing()&&13===f){var g=P()(s).call(s,(function(e){return e.canBePlace(l)}));if(!g)return 0;var m={targetCard:l,targetPlacement:g,movePriority:h+vt.CAPTURING_FULL_STACK};return i.push(m),0}r.forEach((function(e){var a;if(e.canBePlace(l)&&e!==l.placement){var r=h,s=e.getTopCardStackData();if(s){var c=e.cards[e.cards.length-1].getTag()-l.getTag()===1;c?r+=vt.SAME_SUIT_MOVE:o.length>1&&(r+=yt.DIFFERENT_SUIT_MOVE),c&&s.length+f===13?r+=vt.CAPTURING_FULL_STACK:r+=s.length}else f===p.length?r+=vt.MOVING_ONE_PILE_TO_ANOTHER:l.isKing()?r+=vt.MOVE_KING_TO_EMPTY_PILE:r+=vt.MOVE_CARD_TO_EMPTY_PILE;var u={targetCard:l,targetPlacement:e,movePriority:r};t&&Oe()(a=n.acceptedMoveList).call(a,n.generateMoveHash(u))||i.push(u)}}))},u=0;u<e.length;u++)c();return L()(i).call(i,(function(e,t){return t.movePriority-e.movePriority})),i},t.calculateTopCardStackPriority=function(e,t){var n=this;void 0===t&&(t=!1);var i=e.getTopCardStackData(),a=[];if(!i)return a;for(var r,s=this.boardGame.piles.some((function(e){return e.isEmpty()})),o=this.boardGame.stock.isEmpty(),c=function(r){var c;if(r===i.length){var u,l,h=e.cards.length-i.length,d=e.cards[h],f=e.cards[h-1],p=P()(u=n.boardGame.piles).call(u,(function(e){return e.canBePlace(d)&&e!==d.placement})),g=13===i.length&&d.isKing();if(!p&&!g)return{v:a};var m=0;if(f&&!f.isFacingUp())m+=gt.UNCOVER_NEW_CARDS,m+=e.getFaceDownCardAmount()*gt.FACE_DOWN_CARD_COUNT_PENALTY;m+=d.getTag()%100*gt.CARD_VALUE_MULTIPLIER,m+=h,0===h&&s&&!o&&(m+=gt.EMPTY_PILE_PENALTY);var v=P()(l=n.boardGame.piles).call(l,(function(e){var t=e.getTopCardStackData();return!!t&&(e.getLastCard().getTag()-d.getTag()===1&&t.length+i.length===13)}));v&&(m+=gt.HELPS_COMPLETE_SUIT),g&&(m+=vt.CAPTURING_FULL_STACK);var y=n.scene.levelHandler.getConfigs().suits;return t&&y.length>1&&(m+=n.extraPriorityCalculationForMultipleSuits(h,e)),a.push({card:d,priority:m}),0}var E=e.cards.length-r,S=e.cards[E],T=P()(c=n.boardGame.piles).call(c,(function(t){if(t===e)return!1;var n=t.getTopCardStackData();return!!n&&(t.cards[t.cards.length-1].getTag()-S.getTag()===1&&n.length+r===13)}));if(!T)return 0;a.push({card:S,priority:gt.HELPS_COMPLETE_SUIT})},u=1;u<=i.length;u++)if(0!==(r=c(u))&&r)return r.v;return a},t.extraPriorityCalculationForMultipleSuits=function(e,t){var n=0;if(0===e)return 0;var i=this.findStackAfterCardForMulitpleSuit(e,t);if(!i)return 0;var a=t.cards[e-i.length],r=!1,s=!1;return this.boardGame.piles.forEach((function(e){if(e!==t){e.canBePlace(a)&&(s=!0);var n=e.getTopCardStackData();if(n){var i=e.cards[e.cards.length-n.length];a.getTag()-i.getTag()===1&&(r=!0)}}})),(r||s)&&(n+=mt.UNCOVER_POTENTIAL_STACK),n},t.findStackAfterCardForMulitpleSuit=function(e,t){if(0===e)return null;var n=t.cards[e-1],i=Math.floor(n.getTag()/100),a=n.getTag()%100,r=1;if(!n.isFacingUp())return{color:i,length:r};for(var s=e-2;s>=0;s--){var o=t.cards[s],c=o.getTag()%100;if(Math.floor(o.getTag()/100)!==i)break;if(c-1!==a)break;if(!o.isFacingUp())break;a=c,r++}return{color:i,length:r}},t.generateMoveHash=function(e){var t,n,i,a=e.targetCard,r=e.targetPlacement,s=a.placement,o=""+s.getIdx(),c=""+r.getIdx();e.targetPlacement instanceof Ie&&(c+="foundation"+r.getIdx());var u=""+R()(t=s.cards).call(t,e.targetCard),l=p()(n=s.cards).call(n,(function(e){return e.getTag()})),h=p()(i=r.cards).call(i,(function(e){return e.getTag()}));return o+"-"+c+"-"+u+"-"+l.join(",")+"-"+h.join(",")},t.handleNonRelaxedDealCards=function(){var e=[],t=[];if(this.boardGame.piles.forEach((function(n){n.isEmpty()?e.push(n):n.cards.length>=2&&t.push(n)})),0!==e.length){L()(t).call(t,(function(e,t){return e.cards.length-t.cards.length}));for(var n=[],i=0;i<t.length;i++){var a,r=t[i],s=u()(a=[]).call(a,r.cards);s.shift(),ke()(s).call(s),n.push.apply(n,s)}if(n.length<e.length)this.boardGame.mover.deal();else{for(var o=0;o<e.length;o++){var c=n.shift(),l=e[o];if(!c)break;this.boardGame.hint.autoPlayMove({targetCard:c,targetPlacement:l,movePriority:0})}this.boardGame.mover.deal()}}else this.boardGame.mover.deal()},e}(),St=Et,Tt=n(473),At=n(483),Ct=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).scene=void 0,n.suitInfo=void 0,n.difficultyInfo=void 0,n.diffScoreInfo=void 0,n.scene=t,n.createLevelInfo(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createLevelInfo=function(){this.createSuitInfo(),this.createDifficultyInfo(),this.createDiffInfo()},n.createSuitInfo=function(){this.suitInfo=this.scene.make.bitmapText({text:"Suit: ",font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:0,y:0}}),this.add(this.suitInfo),this.suitInfo.setPosition(0,0)},n.createDifficultyInfo=function(){this.difficultyInfo=this.scene.make.bitmapText({text:"Difficulty: ",font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:0,y:0}}),this.add(this.difficultyInfo),Phaser.Display.Align.In.Center(this.difficultyInfo,this,0,0),this.difficultyInfo.setPosition(0,-20)},n.createDiffInfo=function(){this.diffScoreInfo=this.scene.make.bitmapText({text:"DiffScore: ",font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:0,y:0}}),this.add(this.diffScoreInfo),Phaser.Display.Align.In.Center(this.diffScoreInfo,this,0,0),this.diffScoreInfo.setPosition(0,20)},n.setSuitInfo=function(e,t){this.suitInfo.setText("Suit: "+e),this.difficultyInfo.setText("Difficulty: "+t);var n=-100;switch(e){case"1":n=this.scene.gameStats.getTotalDifficultyScore("one");break;case"2":n=this.scene.gameStats.getTotalDifficultyScore("two");break;case"4":n=this.scene.gameStats.getTotalDifficultyScore("four")}this.diffScoreInfo.setText("DiffScore: "+n)},t}(Phaser.GameObjects.Container),bt=Ct,It=n(230),wt=N.Z.GAMEPLAY_DEFAULT,xt=wt.KEY,_t=wt.FRAME,Ot=function(e){function t(t,n){var i;return t.world.isLandscape()?(i=e.call(this,t,xt,_t.DEV_TOOLS_BUTTON,122,33)||this).label=void 0:(i=e.call(this,t,xt,_t.DEV_TOOLS_BUTTON,90,33)||this).label=void 0,i.createLabel(n),(0,a.Z)(i)}(0,r.Z)(t,e);var n=t.prototype;return n.createLabel=function(e){this.label=this.scene.make.bitmapText({text:e,font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}}),this.add(this.label),Phaser.Display.Align.In.Center(this.label,this,0,0)},n.setLabelTint=function(e){this.label.setTint(e)},t}(It.Z);function Pt(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return kt(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Lt=function(e){function t(t){var n,i=t.scene;return(n=e.call(this,i,0,0)||this).scene=void 0,n.devToolbar=void 0,n.mainButton=void 0,n.subButtons=void 0,n.isEnabled=void 0,n.scene=i,n.devToolbar=t,n.subButtons=[],n.isEnabled=!1,n.createMainButton(),n.createSubButtons(),n.alignButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createButton=function(e){return new Ot(this.scene,e)},n.alignButtons=function(){this.scene.world.isLandscape()?this.alignButtonsLandscape():this.alignButtonsPortrait()},n.alignButtonsLandscape=function(){for(var e=this.mainButton,n=e.x,i=e.y,a=this.mainButton.button,r=a.height,s=a.width,o=0;o<this.subButtons.length;o++){var c=this.subButtons[o];if(0===o)c.setPosition(n+.25*s,i+r);else{var u=this.subButtons[o-1],l=u.x,h=u.y,d=u instanceof t?u.getHeight():r;c.setPosition(l,h+d)}c instanceof Ot&&c.setDisabled(!this.isEnabled),c.setVisible(this.isEnabled)}},n.alignButtonsPortrait=function(){for(var e=this.mainButton,n=e.x,i=e.y,a=this.mainButton.button.height,r=0;r<this.subButtons.length;r++){var s=this.subButtons[r];if(0===r)s.setPosition(n,i-a);else{var o=this.subButtons[r-1],c=o.x,u=o.y,l=o instanceof t?o.getHeight():a;s.setPosition(c,u-l)}s instanceof Ot&&s.setDisabled(!this.isEnabled),s.setVisible(this.isEnabled)}},n.updateButtons=function(){this.alignButtons(),this.parentContainer instanceof t?this.parentContainer.updateButtons():this.devToolbar.updateButtons()},n.getHeight=function(){if(!this.isEnabled)return this.mainButton.button.height;for(var e,n=this.mainButton.button.height,i=n,a=Pt(this.subButtons);!(e=a()).done;){var r=e.value;i+=r instanceof t?r.getHeight():n}return i},t}(Phaser.GameObjects.Container),Dt=Lt,Rt=100,Bt=200,Nt=300,Mt=400,Gt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).suitTypeButton=void 0,n.cardTypeButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this,t=this.scene.world.isLandscape()?"Add Card":"Add";this.mainButton=this.createButton(t),this.mainButton.onClick=function(){var t=e.scene.gameplay.boardGame;e.isEnabled=!e.isEnabled,e.mainButton.setLabelTint(e.isEnabled?16711680:16777215),t.isDevToolAddingCards=e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createSuitTypeButton(),this.createCardTypeButton(),this.subButtons=[this.suitTypeButton,this.cardTypeButton],this.add(this.subButtons)},n.createSuitTypeButton=function(){this.suitTypeButton=this.createButton("Clubs");var e=this.scene.gameplay.boardGame,t=this.suitTypeButton.label;this.suitTypeButton.onClick=function(){switch(e.devToolAddSuitValue){case Rt:e.devToolAddSuitValue=Bt,t.setText("Diamonds");break;case Bt:e.devToolAddSuitValue=Nt,t.setText("Hearts");break;case Nt:e.devToolAddSuitValue=Mt,t.setText("Spades");break;case Mt:e.devToolAddSuitValue=Rt,t.setText("Clubs")}}},n.createCardTypeButton=function(){this.cardTypeButton=this.createButton("A");var e=this.scene.gameplay.boardGame,t=this.cardTypeButton.label;this.cardTypeButton.onClick=function(){var n=e.devToolAddCardValue;switch(e.devToolAddCardValue=13===n?1:n+1,n){case 10:t.setText("J");break;case 11:t.setText("Q");break;case 12:t.setText("K");break;case 13:t.setText("A");break;default:t.setText(""+(n+1))}}},t}(Dt),Ut=Gt,Ft=100,Zt=200,Ht=300,Wt=400,zt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).suitTypeButton=void 0,n.cardTypeButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this,t=this.scene.world.isLandscape()?"Change Card":"Change";this.mainButton=this.createButton(t),this.mainButton.onClick=function(){var t=e.scene.gameplay.boardGame;e.isEnabled=!e.isEnabled,e.mainButton.setLabelTint(e.isEnabled?16711680:16777215),t.isDevToolChangingCards=e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createSuitTypeButton(),this.createCardTypeButton(),this.subButtons=[this.suitTypeButton,this.cardTypeButton],this.add(this.subButtons)},n.createSuitTypeButton=function(){this.suitTypeButton=this.createButton("Clubs");var e=this.scene.gameplay.boardGame,t=this.suitTypeButton.label;this.suitTypeButton.onClick=function(){switch(e.devToolChangeSuitValue){case Ft:e.devToolChangeSuitValue=Zt,t.setText("Diamonds");break;case Zt:e.devToolChangeSuitValue=Ht,t.setText("Hearts");break;case Ht:e.devToolChangeSuitValue=Wt,t.setText("Spades");break;case Wt:e.devToolChangeSuitValue=Ft,t.setText("Clubs")}}},n.createCardTypeButton=function(){this.cardTypeButton=this.createButton("A");var e=this.scene.gameplay.boardGame,t=this.cardTypeButton.label;this.cardTypeButton.onClick=function(){var n=e.devToolChangeCardValue;switch(e.devToolChangeCardValue=13===n?1:n+1,n){case 10:t.setText("J");break;case 11:t.setText("Q");break;case 12:t.setText("K");break;case 13:t.setText("A");break;default:t.setText(""+(n+1))}}},t}(Dt),Yt=zt,Vt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).addCardButton=void 0,n.removeCardButton=void 0,n.changeCardButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Card Utils"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createAddCardButton(),this.createRemoveCardButton(),this.createChangeCardButton(),this.subButtons=[this.addCardButton,this.removeCardButton,this.changeCardButton],this.add(this.subButtons)},n.createAddCardButton=function(){this.addCardButton=new Ut(this.devToolbar)},n.createRemoveCardButton=function(){var e=this.scene.world.isLandscape()?"Remove Card":"Remove";this.removeCardButton=this.createButton(e);var t=this.scene.gameplay.boardGame,n=this.removeCardButton.label;this.removeCardButton.onClick=function(){t.isDevToolRemovingCards?(n.setTint(16777215),t.isDevToolRemovingCards=!1):(n.setTint(16711680),t.isDevToolRemovingCards=!0)}},n.createChangeCardButton=function(){this.changeCardButton=new Yt(this.devToolbar)},t}(Dt),Kt=Vt,jt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).stepButton=void 0,n.autoplayButton=void 0,n.suitButton=void 0,n.diffButton=void 0,n.levelTypeButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Gameplay"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createStepButton(),this.createAutoplayButton(),this.createLevelTypeButton(),this.createSuitButton(),this.createDiffButton(),this.subButtons=[this.stepButton,this.autoplayButton,this.levelTypeButton,this.suitButton,this.diffButton],this.add(this.subButtons)},n.createStepButton=function(){this.stepButton=this.createButton("Step");var e=this.scene.gameplay.boardGame;this.stepButton.onClick=function(){e.isWaitingFirstMove()&&(e.boardState=B.PLAYING),e.isPlaying()&&e.hint.autoPlayStep()}},n.createAutoplayButton=function(){this.autoplayButton=this.createButton("Autoplay");var e=this.scene.gameplay.boardGame,t=this.autoplayButton.label,n=this.scene.time.addEvent({delay:200,repeat:-1,callback:function(){return e.isAutoPlay&&e.boardState!==B.GAME_OVER?(e.isWaitingFirstMove()&&(e.boardState=B.PLAYING),e.canAutoComplete?(e.isAutoPlay=!0,void i()):void e.hint.autoPlayStep()):(e.isAutoPlay=!0,void i())},paused:!0}),i=function(){e.isAutoPlay?(t.setText("Autoplay"),n.paused=!0,e.isAutoPlay=!1):(t.setText("Stop"),n.paused=!1,e.isAutoPlay=!0)};this.autoplayButton.onClick=i},n.createSuitButton=function(){var e=this;this.suitButton=this.createButton("Suits: 1");var t=this.scene.gameplay.boardGame,n=this.suitButton.label;this.suitButton.onClick=function(){"one"===t.levelSuit?(t.levelSuit="two",n.setText("Suits: 2")):"two"===t.levelSuit?(t.levelSuit="four",n.setText("Suits: 4")):"four"===t.levelSuit&&(t.levelSuit="one",n.setText("Suits: 1")),e.scene.gameplay.startGame({type:"constant",suitSize:t.levelSuit,difficulty:t.levelType})}},n.createDiffButton=function(){var e=this;this.diffButton=this.createButton("Easy");var t=this.scene.gameplay.boardGame,n=this.diffButton.label;this.diffButton.onClick=function(){"easy"===t.levelDifficulty?(t.levelDifficulty="medium",n.setText("Medium")):"medium"===t.levelDifficulty?(t.levelDifficulty="hard",n.setText("Hard")):"hard"===t.levelDifficulty&&(t.levelDifficulty="easy",n.setText("Easy")),t.levelType=t.levelDifficulty,e.scene.gameplay.startGame({type:"constant",suitSize:t.levelSuit,difficulty:t.levelType})}},n.createLevelTypeButton=function(){var e=this;this.levelTypeButton=this.createButton("Static");var t=this.scene.gameplay.boardGame,n=this.levelTypeButton.label;this.levelTypeButton.onClick=function(){"dynamic"!==t.levelType?(t.levelType="dynamic",n.setText("Dynamic")):(t.levelType=t.levelDifficulty,n.setText("Static")),e.scene.gameplay.startGame({type:"constant",suitSize:t.levelSuit,difficulty:t.levelType})}},t}(Dt),Jt=jt,Xt=n(48),qt=n.n(Xt);function Qt(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return $t(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $t(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var en=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).winGameButton=void 0,n.loseGameButton=void 0,n.newGameButton=void 0,n.restartButton=void 0,n.journeyButton=void 0,n.logLevelButton=void 0,n.modifyDiffButton=void 0,n.divForm=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Level"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createWinGameButton(),this.createLoseGameButton(),this.createNewGameButton(),this.createRestartButton(),this.createJourneyButton(),this.createLogLevelButton(),this.createModifyDiffButton(),this.subButtons=[this.winGameButton,this.loseGameButton,this.newGameButton,this.restartButton,this.journeyButton,this.logLevelButton,this.modifyDiffButton],this.add(this.subButtons)},n.createWinGameButton=function(){var e=this;this.winGameButton=this.createButton("Win"),this.winGameButton.onClick=function(){e.scene.gameplay.boardGame.handleGameWon()}},n.createLoseGameButton=function(){var e=this;this.loseGameButton=this.createButton(this.scene.lang.Text.LOSE),this.loseGameButton.onClick=function(){e.scene.gameplay.boardGame.outOfMove()}},n.createNewGameButton=function(){var e=this;this.newGameButton=this.createButton("New"),this.newGameButton.onClick=function(){e.scene.screen.close(l.o4.PLAY_SCREEN);var t=e.scene.gameplay.boardGame;e.scene.gameplay.startGame({type:"constant",suitSize:t.levelSuit,difficulty:t.levelType})}},n.createRestartButton=function(){var e=this;this.restartButton=this.createButton("Restart"),this.restartButton.onClick=function(){e.scene.gameplay.replayGame(),e.scene.screen.close(l.o4.PLAY_SCREEN)}},n.createJourneyButton=function(){var e=this;this.journeyButton=this.createButton("Journey");var t=["finish1Run","finish2Run","finish3Run","finish4Run","finish5Run","finish6Run","finish7Run","clear1Column","clear2Column","clear3Column","clear4Column","clear5Column","clear6Column","clear7Column","finish1RunNoStock","finish2RunNoStock","finish3RunNoStock","finish4RunNoStock"];this.journeyButton.onClick=function(){e.scene.handlePlayJourney({type:"journey",missionId:t[Math.floor(Math.random()*t.length)],suitSize:"one",difficulty:"easy"})}},n.createLogLevelButton=function(){var e=this;this.logLevelButton=this.createButton("Log Level"),this.logLevelButton.onClick=function(){var t=e.scene.levelHandler;console.log(qt()(t.getConfigs()))}},n.createModifyDiffButton=function(){var e=this;this.divForm=this.createDivFormHtml(),this.modifyDiffButton=this.createButton("Modify Diff"),this.modifyDiffButton.onClick=function(){"none"===e.divForm.style.display?e.divForm.style.display="flex":e.divForm.style.display="none"}},n.createDivFormHtml=function(){var e=this,t=document.createElement("div");t.id="diff-score-changer",t.style.height="100vh",t.style.width="calc(100vw - 100px)",t.style.padding="50px",t.style.display="flex",t.style.flexFlow="column",t.style.position="absolute",t.style.justifyContent="center",t.style.backgroundColor="#000000cc",t.innerHTML='\n        <button id=\'close-diff-form\' style="width:80px">Close</button>\n        <form id=\'diff-form\'>\n            <label for="diff">Change diff score:</label><br>\n            <select name="suitSize" id="suitSize">\n                <option value="one">one</option>\n                <option value="two">two</option>\n                <option value="four">four</option>\n            </select>\n            <br>\n            <input type="number" id="easy" name="easy" value="80"><br>\n            <input type="number" id="medium" name="medium" value="80"><br>\n            <input type="number" id="hard" name="hard" value="80"><br>\n            <input type="submit" value="Change">\n        </form>',document.body.appendChild(t);var n=document.getElementById("close-diff-form");null==n||n.addEventListener("click",(function(){t.style.display="none"}));var i=document.getElementById("diff-form");return null==i||i.addEventListener("submit",(function(n){n.preventDefault();for(var a,r={},s=Qt(new FormData(i));!(a=s()).done;){var o=a.value,c=o[0],u=o[1];r[c]=u}var l=e.scene.player.getPlayerData(),h=new Tt.Z({}).convertToFacebookData(l),d=GameCore.Utils.Json.clone(h);d.gameData.gameStats[r.suitSize].easy.targetLevelTracking.difficultyScore=parseInt(r.easy),d.gameData.gameStats[r.suitSize].medium.targetLevelTracking.difficultyScore=parseInt(r.medium),d.gameData.gameStats[r.suitSize].hard.targetLevelTracking.difficultyScore=parseInt(r.hard),FBInstant.player.setDataAsync(d),t.style.display="none"})),t.style.display="none",t},t}(Dt),tn=en,nn=n(377),an=n.n(nn),rn=n(146),sn=n(55),on=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="WideFrameRenderFail",i.message=t||"Wide frame render fail",i.payload=n,i}return(0,r.Z)(t,e),t}((0,sn.Z)(Error)),cn=n(220),un=n(488),ln=n(223),hn=n(487),dn=n(56),fn=function(e){if("string"!==typeof e||!e)throw new on(null,{imageShare:e})},pn=(function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,c=pn({playerId:r,playerPhoto:s})){e.next=6;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 6:return u={name:"share-best-score",width:750,height:1e3,renderOptions:c},e.next=9,i.frameCapture.capture(u);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i;return"string"!==typeof n||"string"!==typeof a?null:{avatar:{name:""+n,type:"image",x:253,y:73,image:a,width:250,height:250,fallbackWithImage:cn.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:750,height:1e3}}}),gn=function(){return(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(l.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,duration:10,loading:!0}),e.next=5,mn();case 5:return s=e.sent,fn(s),c=n.getPlayer(),u=c.playerId,h=c.name,d=c.photo,e.next=10,a.shareAsync({text:"Great! I have a best score!",intent:"SHARE",image:s||"",data:{playerId:u,playerName:h,playerPhoto:d,type:rn.W6}});case 10:i.event(He._.SHARE,{share_content_type:"BestScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(He._.SHARE,{share_content_type:"BestScore",success:!1}),(0,dn.tO)(e.t0);case 17:return e.prev=17,r.screen.close(l.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])})))},mn=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.globalScene,a=n.getPlayer(),r=a.playerId,s=a.photo,c=a.data,u=(c||{}).score,l=yn({playerId:r,playerPhoto:s,playerScore:u})){e.next=7;break}return console.warn("getRenderOptionsBestScore"),e.abrupt("return");case 7:return h={name:"share-best-score",width:952,height:492,renderOptions:l},e.next=10,i.frameCapture.capture(h);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),vn=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,l,h,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=(0,hn.J)(t),s=i.getPlayer(),c=s.playerId,u=s.photo,l=r[c]||{},h=l.score,d=yn({playerId:c,playerPhoto:u,playerScore:h})){e.next=8;break}return console.warn("getRenderOptionsCurrentScore"),e.abrupt("return");case 8:return f={name:"share-current-score",width:952,height:492,renderOptions:d},e.next=11,a.frameCapture.capture(f);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yn=function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r;return"string"!==typeof n||"string"!==typeof a||"number"!==typeof s?null:{avatar:{name:""+n,type:"image",x:66,y:73,image:a,width:190,height:190,fallbackWithImage:cn.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-message-win",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-message-win.png",width:952,height:492},playerScoreShadow:{type:"text",x:156,y:323,font:"600 60px",fillStyle:"#f2a62e",text:""+s,textAlign:"center"},playerScore:{type:"text",x:156,y:323,font:"600 60px",fillStyle:"#ffd10d",text:""+s,textAlign:"center"}}},En=(function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h,d,f,p,g,m,v,y,E,S,T;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.profile,a=t.globalScene,r=n.getPlayer(),s=r.playerId,c=r.name,u=r.photo,(l=n.getConnectedPlayerIds(99,0)).push(s),h=[],e.next=7,(0,un.tu)({playerIds:GameCore.Utils.Array.unique(l),limit:l.length});case 7:d=e.sent,f=GameCore.Utils.Object.keyBy(d,"playerId"),p={playerId:s,name:c,photo:u,score:0},GameCore.Utils.Object.hasOwn(f,s)&&(p=f[s]),h.push(p),e.t0=an()(o()).call(o(),f);case 14:if((e.t1=e.t0()).done){e.next=27;break}if(g=e.t1.value,!GameCore.Utils.Object.hasOwn(f,g)){e.next=25;break}if(m=f[g],3!==h.length){e.next=20;break}return e.abrupt("break",27);case 20:if(m.playerId!==s){e.next=22;break}return e.abrupt("continue",14);case 22:if(!(Number(m.score)>Number(p.score))){e.next=24;break}return e.abrupt("continue",14);case 24:h.push(m);case 25:e.next=14;break;case 27:return v=GameCore.Utils.Array.unique(l),e.next=30,i.requestProfiles(v);case 30:if(y=i.getProfiles(),h.forEach((function(e,t){var n=e.playerId;if(GameCore.Utils.Object.hasOwn(y,n)){var i=y[n],a=i.name,r=i.photo;h[t].name=a,h[t].photo=r}})),h.length<3)for(E=0;E<=3-h.length;)h.push({playerId:"bot"+E,name:"???",score:0,photo:"./assets/images/others/avatar.png"}),E++;if(S=En({playerId:s,playerName:c,playerPhoto:u,listLeaders:h})){e.next=37;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 37:return T={name:"share-leaderboard",width:1500,height:2e3,renderOptions:S},e.next=40,a.frameCapture.capture(T);case 40:return e.abrupt("return",e.sent);case 41:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.listLeaders,s=void 0===r?[]:r;if(!Array.isArray(s))return null;if("string"!==typeof n)return null;if("string"!==typeof a)return null;var o={avatar:{name:""+n,type:"image",x:510,y:278,image:a,width:510,height:510,fallbackWithImage:cn.Z.AVATAR.KEY}};return s.forEach((function(e,t){var n=e.playerId,i=e.photo;o["photo_"+n]={name:""+n,type:"image",x:436,y:1294+180*t,image:i,width:96,height:96,fallbackWithImage:cn.Z.AVATAR.KEY}})),o.wideFrame={name:"wide-frame-share",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-share.png",width:1500,height:2e3},s.forEach((function(e,t){var n=e.playerId,i=e.name,a=e.score;o["name_"+n]={type:"text",x:600,y:1360+180*t,font:"600 48px",text:i,fillStyle:"#b18151"},o["score_"+n]={type:"text",x:1e3,y:1360+180*t,font:"600 48px",text:a,fillStyle:"#b18151"}})),o}),Sn=(function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,l,h,d,f,p,g,m,v,y,E,S,T,A,C;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=(0,hn.J)(t),s=(0,ln.iq)(t),c=i.getPlayer(),u=c.photo,l=c.playerId,h=(0,ln.oN)(t),d=h.photo,f=s.whitePlayerId,p=s.blackPlayerId,g=f===l?p:f,m=(0,ln.pP)(t,{playerId:l}),v=(0,ln.zQ)(t,{opponentId:g}),y=r[l]||{},E=y.score,S=r[g]||{},T=S.score,A=Sn({playerId:l,playerPhoto:u,playerScore:E,opponentId:g,opponentPhoto:d,opponentScore:T,isPlayerFinished:m,isOpponentFinished:v})){e.next=16;break}return console.warn("getRenderOptionsLeaderboard"),e.abrupt("return");case 16:return C={name:"share-game-result",width:952,height:492,renderOptions:A},e.next=19,a.frameCapture.capture(C);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,l,h,d,f,p,g,m,v;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window.game,i=n.player,a=n.globalScene,r=(0,hn.J)(t),s=i.getPlayer(),c=s.photo,u=s.playerId,l=(0,ln.Me)(t),h=l.playerId,d=l.photo,f=l.score,p=r[u]||{},g=p.score,m=Sn({playerId:u,playerPhoto:c,playerScore:g,opponentId:h,opponentPhoto:d,opponentScore:f})){e.next=9;break}return console.warn("getRenderOptionsGroupResult"),e.abrupt("return");case 9:return v={name:"share-group-match-result",width:952,height:492,renderOptions:m},e.next=12,a.frameCapture.capture(v);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})))}(),function(e){var t=e.playerId,n=void 0===t?"10":t,i=e.playerPhoto,a=void 0===i?"":i,r=e.playerScore,s=void 0===r?0:r,o=e.opponentId,c=void 0===o?"20":o,u=e.opponentPhoto,l=void 0===u?"":u,h=e.opponentScore,d=void 0===h?0:h,f=e.isPlayerFinished,p=e.isOpponentFinished;if("string"!==typeof n)return null;if("string"!==typeof a)return null;if("number"!==typeof s)return null;if("string"!==typeof c)return null;if("string"!==typeof l)return null;if("number"!==typeof d)return null;if("boolean"!==typeof f)return null;if("boolean"!==typeof p)return null;var g=s===d,m=s>d,v=f||p,y=f&&p,E={leftPhoto:{name:""+n,type:"image",x:93,y:229,image:a,width:180,height:180,fallbackWithImage:cn.Z.AVATAR.KEY},rightPhoto:{name:""+c,type:"image",x:682,y:229,image:l,width:180,height:180,fallbackWithImage:cn.Z.AVATAR.KEY},wideFrame:{name:"wide-frame-game-result",type:"image",x:0,y:0,image:"./assets/wideframes/wide-frame-game-result.png",width:952,height:492}};return v&&(E.leftScoreShadow={type:"text",x:182,y:465,font:"600 50px",fillStyle:"#c4683f",text:f?""+s:"???",textAlign:"center"},E.leftScore={type:"text",x:182,y:465,font:"600 50px",fillStyle:"#f2a62e",text:f?""+s:"???",textAlign:"center"},E.rightScoreShadow={type:"text",x:771,y:465,font:"600 50px",fillStyle:"#c4683f",text:p?""+d:"???",textAlign:"center"},E.rightScore={type:"text",x:771,y:465,font:"600 50px",fillStyle:"#f2a62e",text:p?""+d:"???",textAlign:"center"}),!g&&y&&(m?E.leftCrown={name:"crown-icon",type:"image",x:40,y:315,image:"./assets/images/others/crown-icon.png",width:105,height:112}:E.rightCrown={name:"crown-icon",type:"image",x:628,y:315,image:"./assets/images/others/crown-icon.png",width:105,height:112}),E}),Tn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).inviteButton=void 0,n.shareButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Friend"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createInviteButton(),this.createShareButton(),this.subButtons=[this.inviteButton,this.shareButton],this.add(this.subButtons)},n.createInviteButton=function(){var e=this;this.inviteButton=this.createButton("Invite"),this.inviteButton.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.handlePlayWithFriend();case 1:case"end":return t.stop()}}),t)})))},n.createShareButton=function(){this.shareButton=this.createButton(this.scene.lang.Text.SHARE),this.shareButton.onClick=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn();case 2:case"end":return e.stop()}}),e)})))},t}(Dt),An=Tn,Cn=function(){function e(){this.payload=void 0}var t=e.prototype;return t.getData=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.payload){e.next=2;break}return e.abrupt("return",this.payload);case 2:return e.next=4,this.getFacebookTournamentData();case 4:return this.payload=e.sent,console.log("CurrentTournamentManager payload",this.payload),e.abrupt("return",this.payload);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.setData=function(e){this.payload=e},t.clearData=function(){this.payload=void 0},t.getFacebookTournamentData=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.game.facebook.getTournamentAsync();case 2:if(t=e.sent,n=t.getPayload()){e.next=6;break}return e.abrupt("return",void 0);case 6:i=null;try{i=JSON.parse(n)}catch(o){console.warn("Tournament payload parse error",o)}if(i){e.next=10;break}return e.abrupt("return",void 0);case 10:if(r=(a=i).playerName,a.leaderboardId){e.next=13;break}return e.abrupt("return",void 0);case 13:return s={id:t.getID(),title:t.getTitle()||r+"'s Tournament",payload:i,endTime:t.getEndTime(),contextID:t.getContextID()},e.abrupt("return",s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}(),bn=new Cn,In=n(479),wn=n(485),xn=n(117),_n=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).createTournamentButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Tournament"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createCreateTournamentButton(),this.subButtons=[this.createTournamentButton],this.add(this.subButtons)},n.createCreateTournamentButton=function(){var e=this;this.createTournamentButton=this.createButton("Create"),this.createTournamentButton.onClick=(0,i.Z)(o().mark((function t(){var n,i,a,r,s,c,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.scene.game.globalScene,t.prev=1,i=e.scene.player.getPlayer(),a=i.playerId,r=i.name,s={playerId:a,playerName:r,score:0,autoStartGame:!0,success:!0},n.screen.open(l.o4.NOTIFY_SCREEN,{message:"Creating tournament...",loading:!0}),t.next=7,(0,xn.qZ)(500);case 7:return t.next=9,(0,In.Sl)();case 9:return t.next=11,e.scene.storage.dispatch((0,wn.lj)(s));case 11:return t.next=13,e.scene.storage.dispatch((0,In.li)());case 13:return t.next=15,e.scene.facebook.getTournamentAsync();case 15:c=t.sent,u={id:c.getID(),title:c.getTitle()||r+"'s Tournament",endTime:c.getEndTime(),contextID:c.getContextID()},bn.setData(u),e.scene.screen.close(l.o4.TOURNAMENTS_SCREEN),e.scene.gameplay.detectConfigAndStartGame(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(1),n.screen.open(l.o4.NOTIFY_SCREEN,{message:"Oops!\n You are not able to create\ntournaments right now.\n\nPlease try again later.",duration:2e3,loading:!1});case 26:return t.prev=26,n.screen.close(l.o4.NOTIFY_SCREEN),t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[1,23,26,29]])})))},t}(Dt),On=_n,Pn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).friendGroup=void 0,n.tournamentGroup=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=this.createButton("Match"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.add(this.mainButton)},n.createSubButtons=function(){this.createFriendGroup(),this.createTournamentGroup(),this.subButtons=[this.friendGroup,this.tournamentGroup],this.add(this.subButtons)},n.createFriendGroup=function(){this.friendGroup=new An(this.devToolbar)},n.createTournamentGroup=function(){this.tournamentGroup=new On(this.devToolbar)},t}(Dt),kn=Pn,Ln=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0)||this).scene=void 0,i.boardGame=void 0,i.mainButton=void 0,i.levelInfo=void 0,i.levelGroup=void 0,i.gameplayGroup=void 0,i.matchGroup=void 0,i.cardUtilsGroup=void 0,i.clearDataButton=void 0,i.isEnabled=void 0,i.scene=t,i.boardGame=n,i.createDevToolButton(),i.createLevelInfo(),i.createLevelGroup(),i.createGameplayGroup(),i.createMatchGroup(),i.createCardUtilsGroup(),i.createClearDataButton(),i.updateButtons(),i}(0,r.Z)(t,e);var n=t.prototype;return n.createDevToolButton=function(){var e=this;this.mainButton=new Ot(this.scene,"DevTools"),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.updateButtons()},this.mainButton.setLabelTint(16711680),this.add(this.mainButton)},n.createLevelInfo=function(){this.levelInfo=new bt(this.scene),this.add(this.levelInfo)},n.createLevelGroup=function(){this.levelGroup=new tn(this),this.add(this.levelGroup)},n.createGameplayGroup=function(){this.gameplayGroup=new Jt(this),this.add(this.gameplayGroup)},n.createMatchGroup=function(){this.matchGroup=new kn(this),this.add(this.matchGroup)},n.createCardUtilsGroup=function(){this.cardUtilsGroup=new Kt(this),this.add(this.cardUtilsGroup)},n.createClearDataButton=function(){this.clearDataButton=new Ot(this.scene,"Clear Data"),this.clearDataButton.onClick=function(){(0,At.tL)("current-level"),(0,At.tL)("singleMatch"),(0,At.tL)("current-board");var e=new Tt.Z({}).toObject();FBInstant.player.setDataAsync(e)},this.add(this.clearDataButton)},n.updateButtons=function(){this.scene.world.isLandscape()?this.updateButtonLandscape():this.updateButtonPortrait()},n.updateButtonLandscape=function(){var e=this.mainButton,t=e.x,n=e.y,i=this.mainButton.button,a=i.width,r=i.height;this.levelInfo.setPosition(t+.6*a,n),this.levelGroup.setPosition(t,n+r);var s=this.levelGroup,o=s.x,c=s.y;this.gameplayGroup.setPosition(o,c+this.levelGroup.getHeight());var u=this.gameplayGroup,l=u.x,h=u.y;this.matchGroup.setPosition(l,h+this.gameplayGroup.getHeight());var d=this.matchGroup,f=d.x,p=d.y;this.cardUtilsGroup.setPosition(f,p+this.matchGroup.getHeight());var g=this.cardUtilsGroup,m=g.x,v=g.y;this.clearDataButton.setPosition(m,v+this.cardUtilsGroup.getHeight()),this.levelInfo.setVisible(this.isEnabled),this.levelGroup.setVisible(this.isEnabled),this.gameplayGroup.setVisible(this.isEnabled),this.matchGroup.setVisible(this.isEnabled),this.cardUtilsGroup.setVisible(this.isEnabled),this.clearDataButton.setVisible(this.isEnabled)},n.updateButtonPortrait=function(){var e=this.mainButton,t=e.x,n=e.y,i=this.mainButton.button,a=i.width,r=i.height;this.levelGroup.setPosition(t+a,n),this.levelInfo.setPosition(t-a/2,n-1.5*r);var s=this.levelGroup,o=s.x,c=s.y;this.gameplayGroup.setPosition(o+a,c);var u=this.gameplayGroup,l=u.x,h=u.y;this.matchGroup.setPosition(l+a,h);var d=this.matchGroup,f=d.x,p=d.y;this.cardUtilsGroup.setPosition(f+a,p);var g=this.cardUtilsGroup,m=g.x,v=g.y;this.clearDataButton.setPosition(m+a,v),this.levelInfo.setVisible(this.isEnabled),this.levelGroup.setVisible(this.isEnabled),this.gameplayGroup.setVisible(this.isEnabled),this.matchGroup.setVisible(this.isEnabled),this.cardUtilsGroup.setVisible(this.isEnabled),this.clearDataButton.setVisible(this.isEnabled)},n.updateLevelInfo=function(e,t){this.levelInfo.setSuitInfo(e,t)},t}(Phaser.GameObjects.Container),Dn=Ln,Rn=n(142),Bn=267,Nn=48,Mn=function(e){function t(t){var n;(n=e.call(this)||this).scene=void 0,n.gameplay=void 0,n.deck=void 0,n.stock=void 0,n.piles=void 0,n.foundations=void 0,n.hint=void 0,n.mover=void 0,n.boardState=void 0,n.bestMoveFinder=void 0,n.dynamicCardHandler=void 0,n.isAutoPlay=void 0,n.hasUsedAutoPlay=void 0,n.isDevToolRemovingCards=void 0,n.devTools=void 0,n.isDevToolAddingCards=void 0,n.devToolAddSuitValue=void 0,n.devToolAddCardValue=void 0,n.isDevToolChangingCards=void 0,n.devToolChangeSuitValue=void 0,n.devToolChangeCardValue=void 0,n.autoCompleteBtn=void 0,n.levelType="easy",n.levelSuit="one",n.levelDifficulty="easy",n.canAutoComplete=void 0,n.isRelaxedSpider=void 0,n.score=void 0,n.moves=void 0,n.time=void 0,n.timeToSaveBoardData=void 0,n.timeScoreBonusTween=void 0,n.autoCompleteData=void 0,n.analyticsLevel=0,n.gameplay=t,n.scene=t.scene,n.dynamicCardHandler=new lt((0,a.Z)(n)),n.bestMoveFinder=new St(n.scene,(0,a.Z)(n)),n.deck=new ot((0,a.Z)(n)),n.stock=new at((0,a.Z)(n)),n.piles=[],n.foundations=[],n.score=0,n.time=0,n.moves=0,n.timeToSaveBoardData=0,n.autoCompleteData={kingPiles:null,nonKingPiles:null},n.hint=new xe((0,a.Z)(n)),n.mover=new Qe((0,a.Z)(n)),n.boardState=B.NONE,n.canAutoComplete=!1,n.isAutoPlay=!1,n.hasUsedAutoPlay=!1,n.isDevToolRemovingCards=!1,n.isDevToolAddingCards=!1,n.devToolAddSuitValue=100,n.devToolAddCardValue=1,n.isDevToolChangingCards=!1,n.devToolChangeSuitValue=100,n.devToolChangeCardValue=1,n.isRelaxedSpider=!0,n.listenEvents(),n.createAutoWinButton();var i=B.PAUSING;return n.scene.game.globalScene.screen.events.on(GameCore.Screens.Events.OPEN,(function(e){n.scene.scene.isSleeping(n.scene)||e.name!==l.o4.NOTIFICATION_SCREEN&&(n.boardState!==B.PLAYING&&n.boardState!==B.WAITING_FIRST_MOVE||(i=n.boardState,n.boardState=B.PAUSING,n.isAutoPlay=!1))})),n.scene.screen.events.on(GameCore.Screens.Events.OPEN,(function(){n.boardState!==B.PLAYING&&n.boardState!==B.WAITING_FIRST_MOVE||(i=n.boardState,n.boardState=B.PAUSING,n.isAutoPlay=!1)})),n.scene.game.globalScene.screen.events.on(GameCore.Screens.Events.CLOSE,(function(e){n.scene.scene.isSleeping(n.scene)||e.name!==l.o4.NOTIFICATION_SCREEN&&n.boardState===B.PAUSING&&(n.boardState=i)})),n.scene.screen.events.on(GameCore.Screens.Events.CLOSE,(function(){n.boardState===B.PAUSING&&(n.boardState=i)})),n}(0,r.Z)(t,e);var n=t.prototype;return n.getStatistics=function(){return{score:this.score,time:this.time,moves:this.moves}},n.getCurrentGameRelaxedSpiderSetting=function(){return this.isRelaxedSpider},n.setUpBoard=function(e){void 0===e&&(e=!1);for(var t=this.scene,n=t.levelHandler,i=t.placementManager,a=n.getConfigs(),r=a.foundations,s=a.piles,o=a.suits,c=0;c<r;c++){var u=i.requestNewFoundation(c);this.foundations.push(u)}for(var l=0;l<s;l++){var h=i.requestNewPile(l);this.piles.push(h),h.setVisible(!1)}if(this.stock.setVisible(!1),!e){switch(this.score=1e3,o.length){case 2:this.score=1500;break;case 4:this.score=2e3}this.deck.init()}},n.increaseScore=function(e){this.score+=e},n.decreaseScore=function(e){this.score=Math.max(0,this.score-e)},n.increaseMoves=function(){this.hint.resetAutoHintTime(),this.moves+=1,this.gameplay.saveSystem.saveCurrentBoardData()},n.getScore=function(){return this.score},n.getTime=function(){return Math.round(this.time)},n.getMoves=function(){return this.moves},n.createAutoWinButton=function(){var e=this,t=Bn,n=Nn,i=new rt.Z(this.scene,t,n);i.setName("AutoComplete");var a=new ft(this.scene,{key:"auto-complete-button",radius:10,border:16,width:t,height:n,alpha:.24}),r=this.scene.add.graphics();r.lineStyle(1,16777215),r.strokeRoundedRect(-t/2,-n/2,t,n,n/4);var s=this.scene.time.addEvent({delay:50,repeat:-1,callback:function(){e.boardState===B.AUTO_COMPLETING?e.autoCompleteGame():s.paused=!0},paused:!0});i.onClick=function(){i.kill(),e.mover.disableInput(),e.boardState=B.AUTO_COMPLETING,s.paused=!1,e.gameplay.scene.footer.hintBtn.setDisabled(!0),e.gameplay.scene.footer.playBtn.setDisabled(!0),e.scene.audio.playSound(Se.Z.AUTO_COMPLETE)};var o=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.AUTO_COMPLETE,origin:{x:.5,y:.5}});i.add([a,r,o]),Phaser.Display.Align.To.TopCenter(i,this.scene.footer,0,24),new pt.Z({targets:[i],duration:500,props:{scale:"*=0.98"}}).play(),i.kill(),this.autoCompleteBtn=i},n.listenEvents=function(){var e=this;this.scene.events.on("settings-changed",(function(t){"autoComplete"===t&&e.setAutoCompleteStatus()}))},n.autoCompleteGame=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.autoCompleteData,n=t.kingPiles,i=t.nonKingPiles,a=[],r=[],null!==n&&a.push.apply(a,n),null!==i&&r.push.apply(r,i),s=0;case 6:if(!(s<a.length)){e.next=16;break}if(c=a[s],!(u=c.getTopCardStackData())||13!==u.length){e.next=13;break}return this.mover.handleClickOnCard(c.cards[0]),e.next=13,se(this.scene,30);case 13:s++,e.next=6;break;case 16:l=0;case 17:if(!(l<r.length)){e.next=25;break}return(h=r[l].cards[0])&&this.mover.handleClickOnCard(h),e.next=22,se(this.scene,30);case 22:l++,e.next=17;break;case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.alignBoard=function(){if(0!==this.piles.length){var e=this.scene.world.getWorldSize().width/2,t=Q.FOUNDATION_Y+30,n=this.getHorizontalPileSpace();this.placeCenter([this.stock],e,t,n,3.5);var i=this.scene.world.isLandscape()?1.3:1,a=Q.SPACE_BETWEEN_PILE_AND_FOUNDATION*i;this.placeCenter(this.piles,e,t+a,n);var r=this.piles[0],s=this.piles[this.piles.length-1];this.stock.setPosition(s.x,t),this.placeFoundations(this.foundations,r.x,t),this.deck.align(),this.piles.forEach((function(e){e.setVisible(!0)})),this.stock.setVisible(!0)}},n.getHorizontalPileSpace=function(){var e=Math.floor((this.scene.gameZone.width-10*Q.CARD_WIDTH)/11)+Q.CARD_WIDTH;return Math.min(e,Q.MAX_HORIZONTAL_PILE_SPACE)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var r=e.length,s=t-(r/2-.5-a)*i,o=0;o<r;o++)e[o].setPosition(s+o*i,n)},n.placeFoundations=function(e,t,n){for(var i=e.length,a=t,r=.4*Q.CARD_WIDTH,s=0;s<i;s++)e[s].setPosition(a+s*r,n)},n.startGame=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDealing()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.addShortCutAfterStartGame(),"loadPrevious"===t.type?this.setupGameSettings({isRelaxedSpider:t.settings.relaxedSpider}):(n=!0===this.scene.player.getPlayerSetting("relaxedSpider"),this.setupGameSettings({isRelaxedSpider:n})),(i=this.scene.levelHandler).setConfig(t),"loadPrevious"===t.type?this.clearOldBoard({resetCardStatus:!0}):this.clearOldBoard({resetCardStatus:"replay"!==t.type}),a=i.getConfigs(),r=a.suits,this.devTools.updateLevelInfo(r.length.toString(),this.scene.gameplay.difficulty),console.log("StartGame with config: ",t),this.setUpBoard(),this.alignBoard(),!i.isInJourneyLevel()){e.next=19;break}return e.next=15,this.playMissionWelcomeAnimation();case 15:return e.next=17,this.startJourneyGame();case 17:e.next=21;break;case 19:return e.next=21,this.startClassicGame();case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.playMissionWelcomeAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(l.o4.MISSION_WELCOME_SCREEN),e.next=3,se(this.scene,1e3);case 3:return t=this.scene.header.journeyInfo,e.next=6,this.scene.screen.get(l.o4.MISSION_WELCOME_SCREEN);case 6:return n=e.sent,e.next=9,n.morphIntoTopBanner(t);case 9:this.scene.screen.close(l.o4.MISSION_WELCOME_SCREEN),this.scene.time.delayedCall(0,(function(){i.scene.header.useJourneyInfo(i.scene.levelHandler.getConfigs())}));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startClassicGame=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h,d,f,p,g=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.levelHandler,n=t.getConfigs(),a=(i=n).startingCards,r=i.piles,this.scene.events.emit(ct.Z.GAME_START),s=this.scene.gameStats.getCurrentGameStats(),c=s.suitSize,u=s.difficulty,this.analyticsLevel=this.scene.gameStats.getTotalDifficultyScore(c),this.scene.analytics.levelStart({level:this.analyticsLevel,suit_size:c,difficulty:u,relaxed_spider:this.isRelaxedSpider}),this.scene.analytics.event(He._.FOUNDATION_MODE,{value:0}),this.boardState=B.DEALING,this.deck.reset(),l=this.deck.getDeck(),e.next=13,se(this.scene,300);case 13:this.scene.audio.playSound(Se.Z.SHUFFLE),h=0;case 15:if(!(h<a)){e.next=25;break}if(d=l.pop(),f=h%r,!d){e.next=22;break}return this.piles[f].addCard(d,!0),e.next=22,se(this.scene,30);case 22:h++,e.next=15;break;case 25:return l.forEach((function(e){return g.stock.addCard(e,!1)})),e.next=28,se(this.scene,100);case 28:for(p=0;p<r;p++)this.piles[p].faceUpLast();return e.next=31,se(this.scene,400);case 31:this.boardState=B.WAITING_FIRST_MOVE,this.checkGameWin(),this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.mover.enableInput();case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.startJourneyGame=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h,d,f,g,m,v,y,E,T,C,I,w,x,_,O,P,k,L,D,R,N,M,G,U,F;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.levelHandler,n=t.getConfigs(),a=(i=n).journeyData,r=i.mainMissions,s=a.pileData,c=a.stock,u=a.foundationData,this.scene.events.emit(ct.Z.GAME_START),"journey"===(l=this.scene.levelHandler.getConfigs()).type&&(h=this.scene.levelHandler.getCurrentJourneyPlayingLevel(),this.scene.analytics.event(He._.JOURNEY_START,{level:h,mission_id:this.scene.levelHandler.getMissionId(),suit_size:l.suits.length,relaxed_spider:this.isRelaxedSpider}),d=l.journeyData.foundationData,this.scene.analytics.event(He._.FOUNDATION_MODE,{value:S()(d).length})),this.boardState=B.DEALING,e.next=10,se(this.scene,300);case 10:this.scene.audio.playSound(Se.Z.SHUFFLE),f=[],g=S()(u),m=0;case 14:if(!(m<g.length)){e.next=35;break}if(v=u[g[m]],y=v.split(","),E=parseInt(g[m].substring(10)),""!==y[0]){e.next=20;break}return e.abrupt("continue",32);case 20:T=0;case 21:if(!(T<y.length)){e.next=32;break}if(C=y[T],!(I=this.deck.createCardForJourneyMode(C))){e.next=29;break}return I.setFacing(!0),this.foundations[E].addCard(I,!0),e.next=29,se(this.scene,30);case 29:T++,e.next=21;break;case 32:m++,e.next=14;break;case 35:w=S()(s),x=Math.max.apply(Math,p()(w).call(w,(function(e){return s[e].length}))),_=0;case 38:if(!(_<x)){e.next=59;break}O=0;case 40:if(!(O<w.length)){e.next=56;break}if(P=parseInt(w[O].substring(4)),!(""===(k=s[w[O]].split(","))[0]||k.length-1<_)){e.next=45;break}return e.abrupt("continue",53);case 45:if(L=k[_],D="-"!==L[0],!(R=this.deck.createCardForJourneyMode(L))){e.next=53;break}return this.piles[P].addCard(R,!0),D&&f.push(R),e.next=53,se(this.scene,30);case 53:O++,e.next=40;break;case 56:_++,e.next=38;break;case 59:if(""!==(N=c.split(","))[0])for(M=0;M<N.length;M++)G=N[M],(U=this.deck.createCardForJourneyMode(G))&&(this.stock.addCard(U,!1),U.setFacing(!1));return e.next=63,se(this.scene,100);case 63:return f.forEach((function(e){e.setFacingWithFlippingAnim(!0),e.setInteractive()})),e.next=66,se(this.scene,350);case 66:return this.piles.forEach((function(e){e.updateCardTintByAvailability(),e.resizePile()})),e.next=69,se(this.scene,400);case 69:this.boardState=B.WAITING_FIRST_MOVE,this.checkGameWin(),this.gameplay.scene.footer.hintBtn.setDisabled(!1),F=S()(r)[0],A()(F).call(F,"finish")&&b()(F).call(F,"RunNoStock")&&(this.stock.cards.forEach((function(e){return e.kill()})),this.stock.kill()),this.mover.enableInput();case 75:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.continueGame=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,h,f,p,g,m,v,y,E,S,T,A,C,b,I,w,x,_,O,P;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.scene.addShortCutAfterStartGame(),this.analyticsLevel=this.scene.gameStats.getTotalDifficultyScore(t.suitSize),this.scene.analytics.event(He._.LEVEL_CONTINUE,{level:this.analyticsLevel,suit_size:t.suitSize,difficulty:t.difficulty,relaxed_spider:t.settings.relaxedSpider}),this.scene.analytics.event(He._.FOUNDATION_MODE,{value:0}),!this.isDealing()){e.next=6;break}return e.abrupt("return");case 6:return n=this.scene.levelHandler.getLevelConfigLocalStorage(),i=!0,n&&(i=n.settings.relaxedSpider),this.setupGameSettings({isRelaxedSpider:i}),n?(a=this.scene.player.getPlayerSettings(),r=a.relaxedSpider,s=a.suitSize,c=n.settings,u=c.relaxedSpider,h=c.suitSize,f="",s!==h&&(p=1,"two"===h?p=2:"four"===h&&(p=4),f+="\n"+this.scene.lang.Text.SUIT_SIZE+": "+p),r!==u&&(f+="\n"+this.scene.lang.Text.RELAXED_SPIDER+": "+(!0===u?this.scene.lang.Text.ON:this.scene.lang.Text.OFF)),""!==f&&this.scene.game.globalScene.screen.open(l.o4.NOTIFICATION_SCREEN,{message:this.scene.lang.Text.CONTINUE_GAME_WITH+"\n"+f}),this.scene.levelHandler.setConfig((0,d.Z)({type:"loadPrevious"},n))):(console.error("Continue Board found but init board not found"),g=Rn.Z.suitSize,this.scene.levelHandler.setConfig({type:"single",suitSize:g})),this.clearOldBoard({resetCardStatus:!0}),this.setUpBoard(!0),this.alignBoard(),m=this.scene.levelHandler.getConfigs(),this.devTools.updateLevelInfo(m.suits.length.toString(),this.scene.gameplay.difficulty),this.boardState=B.DEALING,v=t.stock,y=t.piles,E=t.faceBackOfPiles,S=t.foundations,T=t.time,A=t.score,C=t.moves,b=t.movesData,I=t.replayCardStatus,w=t.settings,this.deck.reset(),this.scene.levelHandler.replayCardStatus=I,this.hasUsedAutoPlay=w.hasUsedAutoPlay,e.next=23,se(this.scene,300);case 23:return this.time=T,this.score=A,this.moves=C,this.scene.audio.playSound(Se.Z.SHUFFLE),e.next=29,this.stock.addCardsFromSaveData(v);case 29:x=0;case 30:if(!(x<S.length)){e.next=37;break}return _=S[x],e.next=34,this.foundations[x].addCardsFromSaveData(_);case 34:x++,e.next=30;break;case 37:O=0;case 38:if(!(O<y.length)){e.next=45;break}return P=y[O],e.next=42,this.piles[O].addCardsFromSaveData(P,E[O]);case 42:O++,e.next=38;break;case 45:return e.next=47,se(this.scene,300);case 47:return this.piles.forEach((function(e){e.updateCardTintByAvailability(),e.resizePile()})),e.next=50,se(this.scene,100);case 50:this.mover.undos=b,this.boardState=B.WAITING_FIRST_MOVE,this.gameplay.scene.footer.hintBtn.setDisabled(!1),this.checkGameWin(),this.mover.enableInput();case 55:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.checkAutoCompletePossible=function(){var e=[],t=[],n={canWin:!1,autoCompleteData:{kingPiles:null,nonKingPiles:null}};if(this.stock.cards.length>0)return n;for(var i=0;i<this.piles.length;i++){var a=this.piles[i],r=a.cards.length;if(0!=r){var s=a.cards[0],o=a.getTopCardStackData();if(o){if(o.length!==r)return n;s&&s.isKing()?e.push(a):t.push(a)}}else t.push(a)}return 0==e.length||(n.canWin=!0,n.autoCompleteData={kingPiles:e,nonKingPiles:t}),n},n.setAutoCompleteStatus=function(){var e=this.scene.player.getPlayerSettings().autoComplete,t=this.scene.levelHandler;if(!e||t.isInJourneyLevel()&&!t.isJourneyWinMission())return this.canAutoComplete=!1,void this.autoCompleteBtn.kill();var n=this.checkAutoCompletePossible(),i=n.canWin,a=n.autoCompleteData;i?(this.canAutoComplete=!0,this.autoCompleteBtn.revive()):(this.canAutoComplete=!1,this.autoCompleteBtn.kill()),this.autoCompleteData=a},n.checkGameWin=function(){this.isGameWon()?this.handleGameWon():(this.isWaitingFirstMove()||this.isPlaying())&&this.setAutoCompleteStatus()},n.checkGameLose=function(){this.isGameLost()&&this.outOfMove()},n.isGameWon=function(e){var t;void 0===e&&(e=!1);var n=this.scene.levelHandler.getConfigs().mainMissions;if(this.scene.levelHandler.isInJourneyLevel()){var i,a,r=S()(n)[0],s=w()(i=this.foundations).call(i,(function(e){return e.isFull()})).length;e&&(s+=this.mover.getNumOfFutureFoundationCompleted());var o=w()(a=this.piles).call(a,(function(e){return e.isEmpty()})).length;if(A()(r).call(r,"finish")&&b()(r).call(r,"Run")&&s>=parseInt(_()(r).call(r,6,r.length-3)))return!0;if(A()(r).call(r,"clear")&&b()(r).call(r,"Column")&&o>=parseInt(_()(r).call(r,5,r.length-6)))return!0;if(A()(r).call(r,"finish")&&b()(r).call(r,"RunNoStock")&&s>=parseInt(_()(r).call(r,6,r.length-10)))return!0}return!P()(t=this.foundations).call(t,(function(e){return!e.isFull()}))},n.isGameLost=function(){var e=this.scene.levelHandler.getConfigs();if("journey"!==e.type)return!1;if(this.isGameWon(!0))return!1;var t=e.mainMissions,n=t[S()(t)[0]].extra,i=n.move,a=n.time;return i>0&&this.moves>=i||a>0&&this.time>=a},n.outOfMove=function(){this.boardState=B.GAME_OVER,this.isAutoPlay=!1,this.gameplay.updateLoseStats(!0),this.gameplay.handleGameOver(!1),this.gameplay.saveSystem.clearLastGame()},n.setupGameSettings=function(e){this.isRelaxedSpider=e.isRelaxedSpider},n.clearOldBoard=function(e){this.boardState=B.NONE,this.canAutoComplete=!1,this.isAutoPlay=!1,this.moves=0,this.time=0,this.hasUsedAutoPlay=!1,this.scene.gameStats.updateCurrentGameStats({currentMoves:0,playedTime:0,score:0,usedUndo:!1}),this.mover.disableInput(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.gameplay.boardGame.autoCompleteBtn.kill(),this.piles.forEach((function(e){return e.kill()})),this.foundations.forEach((function(e){return e.kill()})),this.stock.clear(),this.stock.revive(),this.mover.clear(),this.hint.clear(),this.deck.killAllCards(),this.dynamicCardHandler.init(),e.resetCardStatus&&this.scene.levelHandler.resetReplayCardStatus(),this.piles=[],this.foundations=[],this.bestMoveFinder.resetAcceptedList()},n.resetBoard=function(){this.clearOldBoard({resetCardStatus:!0})},n.getWonCelebrationDelayTime=function(){var e=this.scene.levelHandler;return e.isInJourneyLevel()?e.isJourneyWinMission()||e.isJourneyFinishRunMission()?1e3:0:1e3},n.getTimeScoreBonusDuration=function(){var e=this.scene.levelHandler;return e.isInJourneyLevel()?(e.isJourneyWinMission()||e.isJourneyFinishRunMission(),500):1500},n.handleGameWon=function(){var e=this;if(this.boardState!==B.GAME_OVER){this.mover.disableInput(!0),this.autoCompleteBtn.kill(),this.gameplay.scene.footer.hintBtn.setDisabled(!0),this.boardState=B.GAME_OVER,this.scene.audio.playSound(Se.Z.WON),this.gameplay.saveSystem.clearLastGame(),this.scene.levelHandler.clearLevelConfigLocalStorage(),this.boardState=B.GAME_OVER,this.handleNewUserEasyGameCount();var t=this.getWonCelebrationDelayTime();this.scene.time.delayedCall(t,(function(){e.handleTimeScoreBonus()}))}},n.handleNewUserEasyGameCount=function(){var e=this.scene.player.getCustomData("newUserEasyGameCount");!GameCore.Utils.Valid.isNumber(e)||e<=0?this.scene.player.setMultiCustomData({newUserEasyGameCount:0}):this.scene.player.setMultiCustomData({newUserEasyGameCount:e-1})},n.handleTimeScoreBonus=function(){var e,t=this,n=0===this.time?0:Math.floor(7e5/this.time*1e3);this.hasUsedAutoPlay&&(n=0);var i=this.time,a=this.score;null==(e=this.timeScoreBonusTween)||e.stop(),this.gameplay.scene.gameStats.updateCurrentGameStats({score:a+n,playedTime:i,currentMoves:this.moves,usedUndo:this.mover.undoClicked>0});var r=this.scene.levelHandler.isInJourneyLevel();r||this.gameplay.scene.gameStats.makeWin(),this.hasUsedAutoPlay||r?(this.score=a+n,this.scene.time.delayedCall(300,(function(){t.gameplay.handleGameOver(!0)}))):this.timeScoreBonusTween=this.scene.tweens.addCounter({from:0,to:1500,duration:this.getTimeScoreBonusDuration(),onUpdate:function(e){var r=e.getValue(),s=a+r/1500*n,o=i*(1500-r)/1500;t.time=Math.floor(o),t.score=Math.floor(s)},onComplete:function(){t.scene.time.delayedCall(300,(function(){t.gameplay.handleGameOver(!0)}))}})},n.update=function(e){(this.isPlaying()||this.isAutoCompleting())&&(this.time+=e,this.checkGameLose()),this.isPlaying()&&(this.timeToSaveBoardData+=e,this.timeToSaveBoardData>2e3&&(this.gameplay.saveSystem.saveCurrentBoardData(),this.timeToSaveBoardData-=1e3)),this.stock.update(e),this.mover.update(),this.hint.update(e),this.mover.isPicked()&&this.hint.resetAutoHintTime(),this.scene.footer.undoBtn.setDisabled(0==this.mover.undos.length||this.isAutoCompleting()||this.isGameOver());var t=this.isDealing()||this.isAutoCompleting()||this.isGameOver();this.scene.footer.playBtn.setDisabled(t)},n.isDealing=function(){return this.boardState==B.DEALING},n.isPlaying=function(){return this.boardState==B.PLAYING},n.isAutoCompleting=function(){return this.boardState==B.AUTO_COMPLETING},n.isPausing=function(){return this.boardState==B.PAUSING},n.isWaitingFirstMove=function(){return this.boardState==B.WAITING_FIRST_MOVE},n.isGameOver=function(){return this.boardState==B.GAME_OVER},n.isNone=function(){return this.boardState==B.NONE},n.createDevTools=function(){var e=new Dn(this.scene,this);this.scene.add.existing(e),Phaser.Display.Align.In.TopLeft(e,this.scene.gameZone,-70,-40),this.devTools=e,this.scene.world.isLandscape()||(this.devTools.setScale(.75),Phaser.Display.Align.In.TopLeft(this.devTools,this.scene.footer,-40,20)),this.devTools.setDepth(Ge.Z.POPUP),GameCore.Utils.Valid.isDebugger()||this.devTools.kill()},n.getVerticalSpacePile=function(){return Q.VERTICAL_PILE_SPACE},n.generateBoardStateHash=function(){var e="";return this.piles.forEach((function(t){0===t.cards.length?e+="EP":t.cards.forEach((function(t){e+=t.getTag().toString()}))})),e+="-",this.foundations.forEach((function(t){0!==t.cards.length?e+="1":e+="0"})),e+="-",0===this.stock.cards.length?e+="ES":(this.stock.cards.forEach((function(t){e+=t.getTag().toString()})),e)},t}(Phaser.Events.EventEmitter),Gn=Mn,Un=n(222),Fn=function(){function e(e){this.gameplay=void 0,this.gameplay=e}var t=e.prototype;return t.saveCurrentBoardData=function(){var e,t,n,i;if(Un.Z.instance.isSingleMode()&&!this.gameplay.scene.levelHandler.isInJourneyLevel()){var a=this.gameplay,r=a.scene,s=a.boardGame,o=a.suitSize,c=a.difficulty,u=r.levelHandler.replayCardStatus,l=p()(e=s.stock.cards).call(e,(function(e){return e.getSavingData()})),h=p()(t=s.piles).call(t,(function(e){var t;return p()(t=e.cards).call(t,(function(e){return e.getSavingData()}))})),d=p()(n=s.piles).call(n,(function(e){var t;return H()(t=e.cards).call(t,(function(e){return e.isFacingUp()}))})),f=p()(i=s.foundations).call(i,(function(e){var t;return p()(t=e.cards).call(t,(function(e){return e.getSavingData()}))})),g=s.getTime(),m={stock:l,piles:h,faceBackOfPiles:d,foundations:f,score:s.getScore(),time:g,moves:s.getMoves(),suitSize:o,difficulty:c,movesData:s.mover.undos,updatedAt:(new Date).getTime(),replayCardStatus:u,settings:{relaxedSpider:s.getCurrentGameRelaxedSpiderSetting(),hasUsedAutoPlay:s.hasUsedAutoPlay}};(0,At.vk)("current-board",{boardData:m})}else this.clearLastGame()},t.clearLastGame=function(){(0,At.tL)("current-board")},t.getLastGameData=function(){var e=(0,At.Th)("current-board");if(!e)return null;if(!GameCore.Utils.Object.hasOwn(e,"boardData"))return null;var t=e.boardData;return this.isBoardDataValid(t)?t:null},t.isBoardDataValid=function(e){return!0},e}(),Zn=Fn,Hn=n(116),Wn=N.Z.EFFECTS,zn=Wn.KEY,Yn=Wn.FRAME,Vn=function(e){function t(t,n){var i;return(i=e.call(this,t,zn,Yn.BLANK)||this).config=void 0,i.emitter=void 0,i.config=n||{},i.scene.add.existing((0,a.Z)(i)),i}(0,r.Z)(t,e);var n=t.prototype;return n.createEmitters=function(){var e=Yn.FX_CONFETTI_SMALL_1,t=Yn.FX_CONFETTI_SMALL_2,n=Yn.FX_CONFETTI_SMALL_3,i=Yn.FX_CONFETTI_SMALL_4,a=1/GameCore.Utils.Image.getImageScale(),r={on:!1,particleBringToTop:!0,frame:[e,t,n,i],tint:[14223402,1021804,5420529,16702052],timeScale:1,frequency:400,maxParticles:120,gravityY:-10,speedX:{min:-100,max:100},speedY:{min:80,max:250},alpha:{start:1,end:0,ease:Phaser.Math.Easing.Expo.In},rotate:{start:0,end:1080},scale:{min:.8*a,max:2*a},angle:{min:20,max:160},lifespan:{min:8e3,max:12e3}},s=(0,Hn.TS)(r,this.config);this.emitter=this.createEmitter(s)},n.run=function(e,t,n){this.stop(),this.emitter.setQuantity(e),this.emitter.setPosition(t,n),this.emitter.start()},n.explode=function(e,t,n){this.emitter||this.createEmitters(),this.emitter.explode(e,t,n)},n.stop=function(){var e,t,n;null==(e=this.emitter)||e.killAll(),null==(t=this.emitter)||t.stop(),null==(n=this.emitter)||n.remove(),this.createEmitters()},t}(Phaser.GameObjects.Particles.ParticleEmitterManager),Kn=Vn,jn=n(484),Jn=n(480),Xn=GameCore.Configs.Ads.InterstitialAdOptions.breakAdsConfig,qn=Xn.secondsBetweenBreakAds,Qn=Xn.showOnFirstFoundationNewMatch,$n=Xn.showOnFirstFoundationSession,ei=function(){function e(e){this.scene=void 0,this.lastBreakAdTime=void 0,this.isFirstFoundation=void 0,this.isShowingAds=void 0,this.scene=e,this.lastBreakAdTime=0,this.isFirstFoundation=Qn,this.isShowingAds=!1}var t=e.prototype;return t.canShowCompleteStackAd=function(){return!1!==this.scene.ads.enabled&&(!this.scene.levelHandler.isInJourneyLevel()&&(0!==this.lastBreakAdTime||$n?Qn?this.isFirstFoundation&&!this.isShowingAds:Date.now()-this.lastBreakAdTime>1e3*qn&&!this.isShowingAds:(this.lastBreakAdTime=1,this.isFirstFoundation=!1,!1)))},t.resetBreakAdsOnFirstFoundation=function(){this.isFirstFoundation=!0},t.handleShowAds=function(){var e=(0,i.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.audio,this.canShowCompleteStackAd()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,this.isShowingAds=!0,this.isFirstFoundation=!1,t.pauseMusic(),t.muteAll(),this.scene.scene.pause(),n="\n"+this.scene.lang.Text.GREAT_JOB_,this.scene.game.globalScene.screen.open(l.o4.NOTIFY_SCREEN,{message:n,duration:0,loading:!0}),e.next=13,new(ae())((function(e){return setTimeout(e,1800)}));case 13:return e.next=15,this.scene.game.ads.showInterstitialAdAsync();case 15:this.lastBreakAdTime=Date.now(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.info("\ud83d\ude80 > showInterstitialAdAsync",e.t0);case 21:return e.prev=21,t.unmuteAll(),t.playMusic(),this.scene.scene.resume(),this.scene.game.ads.preloadInterstitialAdAsync().catch((function(){})),this.isShowingAds=!1,this.scene.game.globalScene.screen.close(l.o4.NOTIFY_SCREEN),e.finish(21);case 29:case"end":return e.stop()}}),e,this,[[3,18,21,29]])})));return function(){return e.apply(this,arguments)}}(),e}(),ti=ei,ni=n(228),ii=n(477),ai=GameCore.Utils.Valid,ri=function(e){function t(t){var n;return(n=e.call(this)||this).scene=void 0,n.suitSize=void 0,n.difficulty=void 0,n.boardGame=void 0,n.saveSystem=void 0,n.confettiSmallFallDown=void 0,n.cardsLayer=void 0,n.breakAdsHandler=void 0,n.handleSendLateMessages=(0,i.Z)(o().mark((function e(){var t,i,a,r,s,c,u,l,h,d,f,p,g,m,v,y,E,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.saveSystem.getLastGameData(),i=window.FBInstant.getEntryPointData(),a=n.scene.storage.getState(),GameCore.Utils.Valid.isObject(i)){e.next=5;break}return e.abrupt("return");case 5:if(r=t&&i&&t.suitSize===i.suitSize&&t.difficulty===i.difficulty,s=FBInstant.context.getID()){e.next=9;break}return e.abrupt("return");case 9:if(c=n.scene.player.getPlayerId(),u=(0,ln.rl)(a),l=i.suitSize,h=i.difficulty,d=c&&"string"===typeof c,f=l&&"string"===typeof l,p=h&&"string"===typeof h,g=s&&"string"===typeof s,m=u&&"string"===typeof u&&d&&f&&p&&g,r){e.next=23;break}if(v=(0,ln.iq)(a),y=v.blackPlayerId,E=v.whitePlayerId,S=y===c||"10"===y&&E!==c,!m||!S){e.next=23;break}return e.abrupt("return");case 23:if(m){e.next=25;break}return e.abrupt("return");case 25:case"end":return e.stop()}}),e)}))),n.scene=t,n.cardsLayer=t.add.layer(),n.cardsLayer.setDepth(Q.DEPTH.CARD),n.boardGame=new Gn((0,a.Z)(n)),n.saveSystem=new Zn((0,a.Z)(n)),n.breakAdsHandler=new ti(t),n.createConfetti(),n}(0,r.Z)(t,e);var n=t.prototype;return n.detectConfigAndStartGame=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.boardGame.isDealing()){e||this.updateLoseStats(e);var n=this.scene.player.getPlayerSettings(),i=n.suitSize,a=n.relaxedSpider,r=this.scene.levelHandler.getLevelConfigLocalStorage(),s=Un.Z.instance.getGameMode();if(this.isEasyGameForNewUserAvailable())return this.startGame({type:"constant",suitSize:i,difficulty:"dynamic"}),void this.scene.checkNewUser();t&&r&&s===ii.Z.SINGLE&&s===r.settings.gameMode&&"journey"!==r.levelConfig.type&&r.settings.suitSize===i&&r.settings.relaxedSpider===a?this.startGame((0,d.Z)({type:"loadPrevious"},r)):this.startGame({type:"single",suitSize:i}),this.scene.checkNewUser()}},n.updateLoseStats=function(e){if(!(this.boardGame.isGameWon()||this.boardGame.getMoves()<=0)){var t=this.boardGame.getStatistics(),n=t.score,i=t.time,a=t.moves;if(this.scene.gameStats.updateCurrentGameStats({score:n,playedTime:i,currentMoves:a,usedUndo:this.boardGame.mover.undoClicked>0}),this.scene.levelHandler.isInJourneyLevel()||this.scene.gameStats.makeLose(e),!e){var r=this.scene.gameStats.getCurrentGameStats(),s=r.score,o=r.currentMoves,c=r.playedTime,u=r.suitSize,l=r.difficulty,h=this.scene.gameStats.getGameStats(u,l),d=h.winRate,f=h.totalGame;this.scene.analytics.event(He._.LEVEL_GIVE_UP,{score:s,moves:o,win_rate:d,suit_size:u,difficulty:l,total_game:f,time_played:c,relaxed_spider:this.boardGame.getCurrentGameRelaxedSpiderSetting()})}}},n.startGame=function(e){if(!this.boardGame.isDealing()){if("replay"===e.type);else if("journey"===e.type){var t=e;this.suitSize=t.suitSize,this.difficulty=t.difficulty}else if("journey-level"===e.type||"journey-level-debug"===e.type)this.suitSize="one",this.difficulty="easy";else if("loadPrevious"===e.type){var n=e;this.suitSize=n.settings.suitSize,this.difficulty=n.settings.difficulty}else if("constant"===e.type){var i=e;this.suitSize=i.suitSize,this.difficulty=i.difficulty}else{var a=e;this.suitSize=a.suitSize,this.difficulty="easy"}console.log("> Raw start game. Suit size: "+this.suitSize+". Difficulty: "+this.difficulty),this.scene.gameStats.updateCurrentGameStats({suitSize:this.suitSize,difficulty:this.difficulty}),this.saveSystem.clearLastGame(),this.breakAdsHandler.resetBreakAdsOnFirstFoundation(),this.boardGame.startGame(e)}},n.replayGame=function(e){void 0===e&&(e=!1),this.boardGame.isDealing()||(e||this.updateLoseStats(e),this.saveSystem.clearLastGame(),this.breakAdsHandler.resetBreakAdsOnFirstFoundation(),this.boardGame.startGame({type:"replay"}))},n.getGameOverScreenKey=function(e){return Un.Z.instance.isChallengeMode()?l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN:Un.Z.instance.isTournamentMode()?l.o4.TOURNAMENTS_RESULT_SCREEN:"journey"===this.scene.levelHandler.getConfigs().type?l.o4.MISSION_COMPLETED_SCREEN:e?l.o4.VICTORY_SCREEN:l.o4.NO_MORE_MOVES_SCREEN},n.getJourneyGameOverScreenData=function(e){var t,n=this.scene.levelHandler;return{description:null!=(t=n.getMissionDescription())?t:"",stats:n.getCurrentMissionMeasurement(),level:n.getCurrentJourneyPlayingLevel(),completed:e}},n.showWellDoneScreen=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.screen.open(l.o4.WELL_DONE_SCREEN,{wellDone:t}),e.next=3,se(this.scene,1500);case 3:return this.scene.screen.close(l.o4.WELL_DONE_SCREEN),e.next=6,se(this.scene,300);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.handleGameOver=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,l,h,d,f,p,g,m,v,y;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showWellDoneScreen(t);case 2:if(n=this.scene.storage.getState(),!(i=(0,ln.rl)(n))){e.next=10;break}return e.next=7,(0,jn.qm)(i);case 7:return a=e.sent,e.next=10,this.scene.storage.dispatch((0,Jn.UK)(a));case 10:return r=this.scene.gameStats.getGameStats(this.suitSize,this.difficulty),s=r.wins,c=r.totalGame,u=this.scene.gameStats.getCurrentGameStats(),l=u.score,h=u.currentMoves,d=u.playedTime,f=u.suitSize,p=u.difficulty,g=u.usedUndo,e.next=14,this.scene.storage.dispatch((0,ni.eG)({score:l,level:s,moves:h,suit_size:f,difficulty:p,total_game:c,time_played:d,success:t}));case 14:return e.next=16,this.scene.storage.dispatch((0,In.RM)());case 16:m=this.getGameOverScreenKey(t),v={score:l,currentMoves:h,playedTime:d,suitSize:f,difficulty:p,usedUndo:g},"journey"===(y=this.scene.levelHandler.getConfigs()).type?(v=this.getJourneyGameOverScreenData(t),this.scene.analytics.event(He._.JOURNEY_END,{suit_size:y.suits.length,level:this.scene.levelHandler.getCurrentJourneyPlayingLevel(),mission_id:this.scene.levelHandler.getMissionId(),score:l,moves:h,time_played:d,success:t})):this.scene.analytics.event(He._.LEVEL_END,{total_game:c,suit_size:f,difficulty:p,level:this.boardGame.analyticsLevel,score:l,moves:h,time_played:d,success:t}),this.scene.screen.open(m,v);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.processFlowOnShowResult=function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.boardGame.isGameOver()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.handleShowInterstitialAd().catch((function(e){console.log(e)}));case 4:if(!t){e.next=14;break}return e.prev=5,n=this.boardGame.getScore(),e.next=9,this.scene.storage.dispatch((0,wn.l6)(n));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),n.loadAndPlayGame=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l,h,d,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene.storage.getState(),n=this.scene.player.getPlayerId(),i=(0,ln.pP)(t,{playerId:n}),this.breakAdsHandler.resetBreakAdsOnFirstFoundation(),i){e.next=12;break}if(a=window.FBInstant.getEntryPointData(),!GameCore.Utils.Valid.isObject(a)){e.next=12;break}if(this.handleSendLateMessages(),r=a.suitSize,s=a.difficulty,!ai.isString(r)||!ai.isString(s)){e.next=12;break}return this.startGame({type:"constant",suitSize:r,difficulty:s}),e.abrupt("return");case 12:if(!Un.Z.instance.isTournamentMode()){e.next=29;break}return e.prev=13,e.next=16,FBInstant.getTournamentAsync();case 16:if(c=e.sent,u=c.getPayload(),!(l=JSON.parse(u))){e.next=24;break}return h=l.suitSize||Rn.Z.suitSize,d=l.difficulty||Rn.Z.difficulty,this.startGame({type:"constant",suitSize:h,difficulty:d}),e.abrupt("return");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),console.error(e.t0);case 29:if(f=this.saveSystem.getLastGameData()){e.next=33;break}return this.detectConfigAndStartGame(!0,!0),e.abrupt("return");case 33:this.suitSize=f.suitSize,this.difficulty=f.difficulty,this.scene.gameStats.updateCurrentGameStats({suitSize:this.suitSize,difficulty:this.difficulty}),this.boardGame.continueGame(f);case 37:case"end":return e.stop()}}),e,this,[[13,26]])})));return function(){return e.apply(this,arguments)}}(),n.update=function(e){this.boardGame.update(e)},n.isEasyGameForNewUserAvailable=function(){var e=this.scene.player.getCustomData("newUserEasyGameCount");return console.log("currentEasyGameCount",e),!(!GameCore.Utils.Valid.isNumber(e)||e<=0)},n.handleShowInterstitialAd=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.scene,n=t.audio,t.ads.canbeShowInterstitialAd()){e.next=3;break}return e.abrupt("return");case 3:return i=null,e.prev=4,n.pauseMusic(),n.muteAll(),this.scene.scene.pause(),i=this.scene.game.globalScene.time.delayedCall(200,(function(){r.scene.game.globalScene.screen.open(l.o4.NOTIFY_SCREEN,{message:r.scene.lang.Text.LOADING_ADS,duration:0,loading:!0})})),e.next=11,this.scene.game.ads.showInterstitialAdAsync();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.info("\ud83d\ude80 > showInterstitialAdAsync",e.t0);case 16:return e.prev=16,n.unmuteAll(),n.playMusic(),this.scene.scene.resume(),null==(a=i)||a.remove(),this.scene.game.ads.preloadInterstitialAdAsync().catch((function(){})),this.scene.game.globalScene.screen.close(l.o4.NOTIFY_SCREEN),e.finish(16);case 24:case"end":return e.stop()}}),e,this,[[4,13,16,24]])})));return function(){return e.apply(this,arguments)}}(),n.handleShowCompleteStackAd=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.breakAdsHandler.handleShowAds();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.createConfetti=function(){var e,t,n=this.scene.gameZone.width,i=new Phaser.Geom.Rectangle(n/2-187.5,-100,375,50),a=p()(e=m()(t=Array(40)).call(t,0)).call(e,(function(e,t){var n;return"confetti/papers/"+y()(n=GameCore.Utils.Number).call(n,t,4,"0")}));this.confettiSmallFallDown=new Kn(this.scene,{rotate:{start:-720,end:0},lifespan:{min:1500,max:2e3},emitZone:{source:i,type:"random"},particleBringToTop:!0,frame:a,tint:void 0}),this.confettiSmallFallDown.setDepth(Ge.Z.ON_TOP)},t}(Phaser.Events.EventEmitter),si=ri,oi=n(501),ci=N.Z.GAMEPLAY_DEFAULT,ui=ci.KEY,li=ci.FRAME,hi=-10,di=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsBtn=void 0,n.themeBtn=void 0,n.gameStatsButton=void 0,n.playBtn=void 0,n.hintBtn=void 0,n.undoBtn=void 0,n.listText=[],n.scene=t,n.setSize(375,68),n.createBackground(),n.createButtons(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.isLandscape()?0:40,t=this.scene.add.image(0,0,ui,li.FOOTER_BG);t.setWorldSize(this.width+e,this.height),this.add(t)},n.createButtons=function(){this.createSettingsBtn(),this.createStatisticsButton(),this.createPlayBtn(),this.createHintBtn(),this.createUndoBtn(),this.syncFontSize(),this.alignButtons()},n.syncFontSize=function(){var e=Phaser.Math.MAX_SAFE_INTEGER;this.listText.forEach((function(t){t.fontSize<e&&(e=t.fontSize)})),this.listText.forEach((function(t){t.setFontSize(e)}))},n.createSettingsBtn=function(){var e=this;this.settingsBtn=new rt.Z(this.scene,40,40),this.settingsBtn.setName("Settings");var t=this.scene.add.image(0,hi,ui,li.IC_SETTINGS).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5},y:14,maxWidth:60,maxHeight:28});n.setTint(13355979),this.listText.push(n),this.settingsBtn.add([t,n]),this.settingsBtn.onClick=function(){e.scene.game.globalScene.screen.open(l.o4.SETTINGS_SCREEN)}},n.createStatisticsButton=function(){var e=this;this.gameStatsButton=new rt.Z(this.scene,40,40),this.gameStatsButton.setName("GameStats");var t=this.scene.add.image(0,hi,ui,li.MENU_STATISTIC).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.STATISTICS,origin:{x:.5,y:.5},y:14,maxWidth:60,maxHeight:28}).setTint(13355979);this.listText.push(n),this.gameStatsButton.add([t,n]),this.gameStatsButton.onClick=function(){e.scene.game.globalScene.screen.open(l.o4.GAME_STATS_SCREEN)}},n.createPlayBtn=function(){var e=this;this.playBtn=new rt.Z(this.scene,40,40),this.playBtn.setName("Play");var t=this.scene.add.image(0,hi,ui,li.ADD_SQUARE).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.GAME,origin:{x:.5,y:.5},y:14,maxWidth:60,maxHeight:28}).setTint(13355979);this.listText.push(n),this.playBtn.add([t,n]),this.playBtn.onClick=function(){e.scene.screen.open(l.o4.PLAY_SCREEN)}},n.createHintBtn=function(){var e=this;this.hintBtn=new rt.Z(this.scene,40,40),this.hintBtn.setName("Hint");var t=this.scene.add.image(0,hi,ui,li.IC_HINT).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.HINT,origin:{x:.5,y:.5},y:14,maxWidth:60,maxHeight:28}).setTint(13355979);this.listText.push(n),this.hintBtn.add([t,n]),this.hintBtn.onClick=function(){e.scene.gameplay.boardGame.hint.showHint()},this.hintBtn.setDisabled(!0)},n.createUndoBtn=function(){var e=this;this.undoBtn=new rt.Z(this.scene,40,40),this.undoBtn.setName("Undo");var t=this.scene.add.image(0,hi,ui,li.IC_UNDO).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.UNDO,origin:{x:.5,y:.5},y:14,maxWidth:60,maxHeight:28}).setTint(13355979);this.listText.push(n),this.undoBtn.add([t,n]),this.undoBtn.onClick=function(){e.scene.gameplay.boardGame.mover.undo()}},n.createThemeBtn=function(){var e=this;this.themeBtn=new rt.Z(this.scene,40,40),this.themeBtn.setName("Theme");var t=this.scene.add.image(0,hi,ui,li.IC_THEME).setTint(16579837);t.setWorldSize(28,28);var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:this.scene.lang.Text.THEME,origin:{x:.5,y:.5}}).setTint(13355979);this.themeBtn.add([t,n]),this.themeBtn.onClick=function(){e.scene.screen.open(l.o4.THEME_SCREEN)}},n.alignButtons=function(){var e=[this.settingsBtn,this.gameStatsButton,this.playBtn,this.hintBtn,this.undoBtn];this.add(e);for(var t=0;t<e.length;t++)e[t].setX(75*(t-e.length/2+.5)),e[t].setY(2)},t}(Phaser.GameObjects.Container),fi=di,pi=n(80),gi={targets:[],duration:600,ease:Phaser.Math.Easing.Linear,props:{angle:{from:0,to:360}}},mi=function(e){function t(t){return e.call(this,gi,t)||this}return(0,r.Z)(t,e),t}(pi.Z),vi=N.Z.DEFAULT,yi=vi.KEY,Ei=vi.FRAME,Si=function(e){function t(t){var n;return(n=e.call(this,t,0,0,yi,Ei.PRELOADER)||this).anim=void 0,n.runAnimation(),n.setWorldSize(56.5,56.5),n.scene.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.runAnimation=function(){var e;null==(e=this.anim)||e.remove(),this.anim=new mi({targets:[this],repeat:-1,duration:1200}),this.anim.play()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),t?this.runAnimation():this.anim.stop(),this},t}(Phaser.GameObjects.Image),Ti=function(e){function t(t,n){var i;(i=e.call(this,t)||this).payload=void 0,i.loading=void 0,i.photo=void 0,i.avtFrame=void 0,i.background=void 0,i.loadPhotoTimer=void 0,i.handleLoadPhotoAfterDelay=function(e,t){return function(){var n=i.scene.textures.get(e);n&&n.key===e?i.handleLoadComplete(e):(i.scene.load.once("filecomplete-image-"+e,i.handleLoadComplete),i.scene.load.image(e,t),i.scene.load.start())}},i.handleLoadComplete=function(e){if(i.scene){var t=i.payload,n=t.id,a=t.radius,r=void 0===a?0:a;if(n&&n===e){var s=n+"_bordered_"+r,o=r>0?s:n,c=i.scene.textures.get(o);if(c&&c.key===o)i.setPhoto(c.key);else if(0!=r&&r<100){if(!GameCore.Utils.Image.drawBorder({scene:i.scene,key:n,newKey:s,radius:r}))return void i.showLoading(!1);i.setPhoto(s)}else if(100==r){if(!GameCore.Utils.Image.drawCircle({scene:i.scene,key:n,newKey:s}))return void i.showLoading(!1);i.setPhoto(s)}else i.setPhoto(n)}}},i.handleLoadPhotoFailed=function(e){e.key===i.payload.id&&i.setDefaultAvatar(e.key)},i.scene.add.existing((0,a.Z)(i)),i.payload=n,i.setSize(n.width,n.height),i.createBackground(),i.createLoading(),i.createPhoto(),i.createFrame();var r=i.payload,s=r.id,o=r.url,c=r.radius;return s&&o&&i.loadPhoto(s,o,c),i.addDefaultListeners(),i}(0,r.Z)(t,e);var n=t.prototype;return n.setFrame=function(e){this.avtFrame.setFrame(e),this.avtFrame.setVisible(!0)},n.setBackground=function(e){this.background.setFrame(e)},n.loadPhoto=function(e,t,n){var i;if(void 0===n&&(n=0),this.payload.id=e,this.payload.url=t,this.payload.radius=n,null==(i=this.loadPhotoTimer)||i.remove(),e&&t){var a=this.scene.textures.get(e);if(a&&a.key===e)this.handleLoadComplete(e);else{this.showLoading(!0);var r=this.payload.loadDelay||0;this.loadPhotoTimer=this.scene.time.delayedCall(r,this.handleLoadPhotoAfterDelay(e,t))}}else this.setPhoto(cn.Z.AVATAR.KEY)},n.addDefaultListeners=function(){var e=this;this.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,this.handleLoadPhotoFailed),this.on(Phaser.GameObjects.Events.DESTROY,(function(){var t;null==(t=e.loadPhotoTimer)||t.remove(),e.scene.load.off(Phaser.Loader.Events.FILE_LOAD_ERROR,e.handleLoadPhotoFailed)}))},n.setDefaultAvatar=function(e){this.loadPhoto(e,cn.Z.AVATAR.FILE,this.payload.radius)},n.createBackground=function(){var e=this.payload,t=e.key,n=e.background;this.background=this.scene.make.image({key:t,frame:n}),this.background.setWorldSize(this.width,this.height),this.add(this.background)},n.createLoading=function(){this.loading=new Si(this.scene),this.loading.setWorldSize(.75*this.width,.75*this.height),this.loading.setVisible(!1),this.add(this.loading)},n.createPhoto=function(){this.photo=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.photo)},n.createFrame=function(){var e=this.payload,t=e.key,n=e.frame,i=e.width,a=e.height;n?(this.avtFrame=this.scene.make.image({key:t,frame:n}),this.avtFrame.setWorldSize(i,a)):this.avtFrame=this.scene.make.image({x:0,y:0,origin:{x:.5,y:.5},visible:!1}),this.add(this.avtFrame)},n.showLoading=function(e){this.photo.setVisible(!e),this.loading.setVisible(e)},n.setPhoto=function(e){this.showLoading(!1),this.photo.setTexture(e),this.photo.setFrame(0);var t=this.payload,n=t.width,i=t.height,a=Math.min(n,i)-10;this.photo.setWorldSize(a,a),Phaser.Display.Align.In.Center(this.photo,this.background)},n.addBackground=function(){var e="avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Ai=N.Z.GAMEPLAY_DEFAULT.KEY,Ci="...",bi=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.avatar=void 0,n.scoreText=void 0,n.scoreIcon=void 0,n.scoreAnim=void 0,n.hasAnimPlayed=void 0,n.timeText=void 0,n.moveText=void 0,n.scene=t;var i=124;return n.scene.world.isLandscape()&&(i=150),n.setSize(i,40),n.createBackground(),n.createAvatar(),n.createIcon(),n.createText(),n.timeText.kill(),n.moveText.kill(),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignLeft=function(){Phaser.Display.Align.In.LeftCenter(this.avatar,this),Phaser.Display.Align.In.RightCenter(this.scoreIcon,this.avatar,20),Phaser.Display.Align.In.Center(this.scoreText,this,24)},n.alignRight=function(){Phaser.Display.Align.In.RightCenter(this.avatar,this),Phaser.Display.Align.In.LeftCenter(this.scoreIcon,this.avatar,20),Phaser.Display.Align.In.Center(this.scoreText,this,-24)},n.createBackground=function(){var e=new ft(this.scene,{key:"challenge-info-block",radius:0,border:20,width:this.width,height:this.height,y:-200});this.add(e)},n.createAvatar=function(){this.avatar=new Ti(this.scene,{width:42,height:42,key:Ai,background:"blank"}),this.avatar.background.kill(),this.avatar.loadPhoto("avatar",cn.Z.AVATAR.FILE,100),this.avatar.setPosition(-38,0),this.add(this.avatar)},n.createIcon=function(){var e=this.scene.add.image(-6,0,Ai,"medal-star");e.setWorldSize(20,20),this.add([e]),this.scoreIcon=e},n.createText=function(){var e=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"9999999",origin:{x:.5,y:.5}});e.setCenterAlign(),this.add(e);var t=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"00:00",origin:{x:.5,y:.5},y:0,x:6});e.setCenterAlign(),this.add(t);var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"0",origin:{x:0,y:.5},y:18,x:6});this.add(n),this.scoreText=e,this.timeText=t,this.moveText=n},n.updateData=function(e,t,n){this.scoreAnim&&(this.scoreAnim.remove(),this.scoreAnim=null,this.hasAnimPlayed=!1),this.scoreText.setText(""+(null!=e?e:Ci)),this.timeText.setText(t?(0,xn.F0)(t,!1):Ci),this.moveText.setText(""+(null!=n?n:Ci))},n.runScoreAnimation=function(e,t){var n=this;this.hasAnimPlayed||(this.hasAnimPlayed=!0,this.scoreAnim=this.scene.tweens.addCounter({from:e,to:t,duration:2e3,ease:Phaser.Math.Easing.Expo.InOut,onUpdate:function(e){var t=Math.floor(e.getValue());n.scoreText.setText(""+t)}}))},t}(Phaser.GameObjects.Container),Ii=bi,wi=16762624,xi=120,_i=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.vsText=void 0,n.leftBlock=void 0,n.rightBlock=void 0,n.scene=t;var i=n.scene.world.getWorldSize().width;return n.scene.world.isLandscape()&&(i=710),n.setSize(i,62),n.createBlocks(),n.createVSText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBlocks=function(){this.leftBlock=new Ii(this.scene),this.leftBlock.alignRight(),this.rightBlock=new Ii(this.scene),this.rightBlock.alignLeft(),this.leftBlock.setX(-120),this.leftBlock.setY(-3),this.rightBlock.setX(xi),this.rightBlock.setY(-3),this.add([this.leftBlock,this.rightBlock])},n.createVSText=function(){this.vsText=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(18),text:"VS",origin:{x:.5,y:.5}}),this.add(this.vsText),this.vsText.setTint(11222016,wi,wi,wi),Phaser.Display.Align.In.Center(this.vsText,this)},n.alignChildren=function(){GameCore.Utils.Device.isMobile(),this.leftBlock.setX(-120),this.rightBlock.setX(xi)},t}(Phaser.GameObjects.Container),Oi=function(e){function t(t){var n;return(n=e.call(this,t)||this).label=void 0,n.text=void 0,n.createLabel(),n.createText(),n.setTintComponents(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createLabel=function(){this.label=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"Label",origin:{x:.5,y:.5}}),this.add(this.label)},n.createText=function(){this.text=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"99999",origin:{x:0,y:.5}}),this.add(this.text)},n.setTintComponents=function(){this.label.setTint(15527148),this.text.setTint(15527148)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.label,this),Phaser.Display.Align.To.RightCenter(this.text,this.label,7)},t}(Phaser.GameObjects.Container),Pi=function(e){function t(t){var n;(n=e.call(this,t)||this).label.setText(t.lang.Text.MOVES),n.text.setOrigin(1,.5),Phaser.Display.Align.In.RightCenter(n.text,(0,a.Z)(n),0),Phaser.Display.Align.To.LeftCenter(n.label,n.text,7);var i=n.label.x;return n.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){n.label.setX(i+43-9*(n.text.text.length-1))})),n}return(0,r.Z)(t,e),t}(Oi),ki=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.setText(t.lang.Text.SCORE),n.alignComponents(),n}return(0,r.Z)(t,e),t}(Oi),Li=function(e){function t(t){var n;return(n=e.call(this,t)||this).label.kill(),n.text.setOrigin(.5,.5),Phaser.Display.Align.In.Center(n.text,(0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.alignComponents=function(){Phaser.Display.Align.In.Center(this.text,this)},n.createText=function(){e.prototype.createText.call(this),this.text.setText("00:00")},t}(Oi),Di=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t;var i=n.scene.world.getWorldSize().width;return n.scene.world.isLandscape()&&(i=710),n.setSize(i,62),n.createContent(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new Pi(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Li(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new ki(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.world.isLandscape()?-19:-8;Phaser.Display.Align.In.LeftCenter(this.scoreBlock,this,e),Phaser.Display.Align.In.RightCenter(this.movesBlock,this,e)},t}(Phaser.GameObjects.Container),Ri=n(28),Bi=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n.movesBlock=void 0,n.timeBlock=void 0,n.scoreBlock=void 0,n.scene=t;var i=n.scene.world.getWorldSize().width;return n.scene.world.isLandscape()&&(i=710),n.setSize(i,54),n.createContent(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createScore(),this.createTime(),this.createMoves()},n.createMoves=function(){this.movesBlock=new Pi(this.scene),this.add(this.movesBlock)},n.createTime=function(){this.timeBlock=new Li(this.scene),this.add(this.timeBlock)},n.createScore=function(){this.scoreBlock=new ki(this.scene),this.add(this.scoreBlock)},n.alignChildren=function(){var e=this.scene.world.isLandscape()?-19:-8;Phaser.Display.Align.In.LeftCenter(this.scoreBlock,this,e,-16),Phaser.Display.Align.In.RightCenter(this.movesBlock,this,e,-16)},t}(Phaser.GameObjects.Container),Ni=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n._tournamentTitle=void 0,n.scene=t,n.setSize(375,62),n.createContent(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle()},n.createTitle=function(){this._tournamentTitle=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Your Tournament",origin:{x:.5,y:.5},y:-15}),this.add(this._tournamentTitle),Phaser.Display.Align.In.BottomCenter(this._tournamentTitle,this)},(0,Ri.Z)(t,[{key:"tournamentTitle",get:function(){return this._tournamentTitle}}]),t}(Phaser.GameObjects.Container),Mi=function(e){function t(t){var n;(n=e.call(this,t)||this).scene=void 0,n._statBlock=void 0,n._titleBlock=void 0,n.scene=t,n.createContent();var i=n.scene.world.getWorldSize().width;return n.scene.world.isLandscape()&&(i=710),n.setSize(i,n._titleBlock.height+n._statBlock.height),n.alignChildren(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createContent=function(){this.createTitle(),this.createStat()},n.createTitle=function(){this._titleBlock=new Ni(this.scene),this.add(this._titleBlock)},n.createStat=function(){this._statBlock=new Bi(this.scene),this.add(this._statBlock)},n.alignChildren=function(){this.scene.world.isLandscape()?(Phaser.Display.Align.In.TopCenter(this._titleBlock,this,0,5),Phaser.Display.Align.In.BottomCenter(this._statBlock,this._titleBlock,0,31),this._statBlock.timeBlock.y+=10):(Phaser.Display.Align.In.TopCenter(this._titleBlock,this,0,8),Phaser.Display.Align.In.BottomCenter(this._statBlock,this._titleBlock,0,46))},(0,Ri.Z)(t,[{key:"statBlock",get:function(){return this._statBlock}},{key:"titleBlock",get:function(){return this._titleBlock}}]),t}(Phaser.GameObjects.Container),Gi=n(59),Ui=N.Z.GAMEPLAY_DEFAULT,Fi=Ui.KEY,Zi=Ui.FRAME,Hi=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).background=void 0,i.icon=void 0,i.missionDescriptionWithLimit=void 0,i.missionDescriptionWithoutLimit=void 0,i.verticalLine=void 0,i.missionLimit=void 0,i.isEnablingLimit=!0,i.isLongBanner=!1,i.isLongBanner=n,n?i.setSize(670,44):i.setSize(336,64),i.createBackground(),i.createIcon(),i.createMissionDescriptionWithLimit(),i.createMissionDescriptionWithoutLimit(),i.createVerticalLine(),i.createMissionLimit(),i.alignComponents(),i.enableLimit(!0),i}(0,r.Z)(t,e);var n=t.prototype;return n.enableLimit=function(e){this.isEnablingLimit=e,this.missionLimit.setVisible(e),this.verticalLine.setVisible(e),this.missionDescriptionWithLimit.setVisible(e),this.missionDescriptionWithoutLimit.setVisible(!e)},n.getIsEnablingLimit=function(){return this.isEnablingLimit},n.setDescription=function(e){this.missionDescriptionWithLimit.setText(e),this.missionDescriptionWithoutLimit.setText(e),this.missionDescriptionWithLimit.setFontSize(this.scene.fontSize(14)),this.missionDescriptionWithoutLimit.setFontSize(this.scene.fontSize(14)),this.shrinkDescriptionFontSizeUntilItFit(),this.alignComponents()},n.setLimit=function(e){var t=e;this.isLongBanner||(t=e.replace(": ","\n")),this.missionLimit.setText(t)},n.getDescription=function(){return this.missionDescriptionWithLimit.text},n.getLimit=function(){return this.missionLimit.text},n.getDescriptionFontSize=function(){return this.missionDescriptionWithLimit.fontSize},n.enableIcon=function(e){e?this.icon.revive():this.icon.kill(),this.alignComponents()},n.createBackground=function(){var e=this.width,t=this.height;this.background=new Gi.Z(this.scene,0,0,e,t,16,16579837,.15),this.add(this.background)},n.createIcon=function(){this.icon=this.scene.add.image(0,0,Fi,Zi.IC_VERIFY),this.icon.setWorldSize(32,32),this.add(this.icon),this.icon.kill()},n.createMissionDescriptionWithLimit=function(){this.missionDescriptionWithLimit=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"Move 9 cards into\nthe Foundation",origin:{x:.5,y:.5}}),this.missionDescriptionWithLimit.setCenterAlign(),this.isLongBanner||this.missionDescriptionWithLimit.setMaxWidth(192),this.missionDescriptionWithLimit.setLineHeight(55),this.add(this.missionDescriptionWithLimit)},n.createMissionDescriptionWithoutLimit=function(){this.missionDescriptionWithoutLimit=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"Move 9 cards into\nthe Foundation",origin:{x:.5,y:.5}}),this.missionDescriptionWithoutLimit.setCenterAlign(),this.isLongBanner||this.missionDescriptionWithoutLimit.setMaxWidth(223),this.missionDescriptionWithoutLimit.setLineHeight(55),this.add(this.missionDescriptionWithoutLimit)},n.createVerticalLine=function(){var e=this.isLongBanner?20:36;this.verticalLine=this.scene.add.line(0,0,0,0,0,e,16579837,.35),this.add(this.verticalLine)},n.createMissionLimit=function(){this.missionLimit=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"Moves\n2/192",origin:{x:.5,y:.5}}).setCenterAlign(),this.missionLimit.setLineHeight(55),this.add(this.missionLimit)},n.alignComponents=function(){var e=this.x,t=this.y;this.x=e,this.y=0,Phaser.Display.Align.In.LeftCenter(this.icon,this,-18),Phaser.Display.Align.In.RightCenter(this.verticalLine,this,this.isLongBanner?-110:-74),this.missionLimit.setX((this.verticalLine.x+this.x+this.width/2)/2);var n=this.x-this.width/2+32;this.icon.visible&&(n=this.icon.x+this.icon.displayWidth/2);var i=this.x+this.width/2-32;this.verticalLine.visible&&(i=this.verticalLine.x),this.missionDescriptionWithLimit.setX((n+i)/2),this.missionDescriptionWithoutLimit.setX((n+i)/2),this.x=e,this.y=t},n.getDescriptionLineCount=function(e){return e.getTextBounds().wrappedText.split("\n").length},n.shrinkDescriptionFontSizeUntilItFit=function(){var e=this;for([this.missionDescriptionWithLimit,this.missionDescriptionWithoutLimit].forEach((function(t){for(var n=e.getDescriptionLineCount(t);n>3;)t.setFontSize(t.fontSize-1),n=e.getDescriptionLineCount(t)}));this.missionDescriptionWithLimit.width>500;)this.missionDescriptionWithLimit.setFontSize(.95*this.missionDescriptionWithLimit.fontSize)},n.playFocusAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.tweens.add({targets:t.background,duration:500,tempAlpha:{from:.15,to:1},onUpdate:function(){t.background._fillAlpha=t.background.tempAlpha},yoyo:!0,ease:Phaser.Math.Easing.Sine.In}),t.scene.tweens.add({targets:t,props:{scale:{from:1,to:1.2}},yoyo:!0,duration:500,ease:Phaser.Math.Easing.Sine.In,onComplete:function(){e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Wi=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.singleInfo=void 0,n.journeyInfo=void 0,n.challengeInfo=void 0,n.tournamentInfo=void 0,n.fadeOutTween=void 0,n.scene=t,n.setSize(375,62),t.add.existing((0,a.Z)(n)),n.createSingleInfo(),n.createJourneyInfo(),n.createChallengeInfo(),n.createTournamentInfo(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getInfoContainersWithout=function(e){var t;return w()(t=[this.singleInfo,this.challengeInfo,this.tournamentInfo,this.journeyInfo]).call(t,(function(t){return t!==e}))},n.useChallengeInfo=function(){var e=this,t=[this.tournamentInfo];if(p()(t).call(t,(function(e){return e.kill()})),this.challengeInfo.revive(),this.singleInfo.revive(),this.scene.world.isLandscape()){var n=this.singleInfo.timeBlock;Phaser.Display.Align.In.Center(n,this.challengeInfo,0,10);var i=this.challengeInfo.vsText;Phaser.Display.Align.In.Center(i,this.challengeInfo,0,-10)}this.scene.tweens.add({targets:this.challengeInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){q(75),e.scene.gameplay.boardGame.alignBoard()}});var a=this.scene.world.isLandscape()?0:35;this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:a},duration:500,ease:Phaser.Math.Easing.Sine.Out})},n.useSingleInfo=function(){var e=this,t=this.getInfoContainersWithout(this.singleInfo);p()(t).call(t,(function(e){return e.kill()})),this.singleInfo.revive(),this.scene.tweens.add({targets:this.singleInfo,y:{from:-200,to:-10},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){var t=e.scene.world.isLandscape()?60:40;q(t),e.scene.gameplay.boardGame.alignBoard()}}),p()(t).call(t,(function(e){return e.kill()}))},n.useJourneyInfo=function(e){this.fadeOutTween&&this.fadeOutTween.remove();var t=this.getInfoContainersWithout(this.journeyInfo);this.journeyInfo.revive();var n=this.scene.levelHandler.getMissionDescription("journey-level-debug"===e.type),i=this.scene.levelHandler.getCurrentMissionMeasurement();n&&this.journeyInfo.setDescription(n),i?(this.journeyInfo.setLimit(i),this.journeyInfo.enableLimit(!0)):this.journeyInfo.enableLimit(!1);var a=this.scene.world.isLandscape();q(80),this.scene.gameplay.boardGame.alignBoard(),this.journeyInfo.setY(a?0:10),t.forEach((function(e){e.y=-200,e.kill()}))},n.useTournamentInfo=function(){var e=this,t=this.getInfoContainersWithout(this.tournamentInfo);this.tournamentInfo.revive(),p()(t).call(t,(function(e){return e.kill()})),this.scene.tweens.add({targets:this.tournamentInfo,y:{from:-200,to:0},duration:500,ease:Phaser.Math.Easing.Sine.Out,onStart:function(){var t=e.scene.world.isLandscape()?60:75;q(t),e.scene.gameplay.boardGame.alignBoard()}})},n.createChallengeInfo=function(){var e=new _i(this.scene);this.challengeInfo=e,this.add(e),this.challengeInfo.kill()},n.createSingleInfo=function(){var e=new Di(this.scene);this.singleInfo=e,this.add(e)},n.createJourneyInfo=function(){var e=this.scene.world.isLandscape(),t=new Hi(this.scene,e);this.journeyInfo=t,this.add(t),this.journeyInfo.setY(e?0:10),this.journeyInfo.kill()},n.createTournamentInfo=function(){var e=new Mi(this.scene);this.tournamentInfo=e,this.add(e),this.tournamentInfo.kill()},n.update=function(){var e=this.scene,t=e.levelHandler,n=e.gameplay.boardGame,i=n.getScore(),a=n.getTime(),r=n.getMoves(),s=this.singleInfo,o=s.scoreBlock,c=s.timeBlock,u=s.movesBlock;if(o.text.setText(""+i),c.text.setText((0,xn.F0)(a,!1)),u.text.setText(""+r),t.isInJourneyLevel()){var l=t.getCurrentMissionMeasurement();l?(this.journeyInfo.setLimit(l),this.journeyInfo.enableLimit(!0)):this.journeyInfo.enableLimit(!1)}switch(Un.Z.instance.getGameMode()){case ii.Z.CHALLENGE_FRIENDS:var h=this.challengeInfo.leftBlock;this.scene.gameplay.boardGame.getMoves()>0?h.scoreText.setText(""+i):h.runScoreAnimation(0,i),h.timeText.setText((0,xn.F0)(a,!1)),h.moveText.setText(""+r);break;case ii.Z.TOURNAMENT:var d=this.tournamentInfo.statBlock,f=d.movesBlock,p=d.timeBlock;d.scoreBlock.text.setText(""+i),p.text.setText((0,xn.F0)(a,!1)),f.text.setText(""+r)}},n.alignChildren=function(){this.singleInfo.alignChildren(),this.challengeInfo.alignChildren(),this.tournamentInfo.statBlock.alignChildren()},t}(Phaser.GameObjects.Container),zi=n(100),Yi=n(148),Vi=n(101),Ki=n(229),ji=n(102),Ji=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.newDealButton=void 0,n.newDealText=void 0,n.createBackground(),n.createContent(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(360,120);var e=new Gi.Z(this.scene,0,0,360,120,16,16119285);e.setAlpha(.85),e.setY(30),this.add(e),this.bg=e},n.createContent=function(){this.createJourneyButton(),this.createReplayButton(),this.createCloseButton();var e=this.scene.add.line(0,this.bg.y,0,0,this.width,0,3947587);e.setLineWidth(.5),e.setAlpha(.36),this.add(e)},n.createJourneyButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Journey"),t.onClick=function(){var t=e.scene.screen.get(l.o4.PLAY_SCREEN);t instanceof qi&&t.setCloseImmediately(),e.scene.screen.close(l.o4.PLAY_SCREEN),e.scene instanceof ji.Z&&e.scene.handleGoToJourneyScene()};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.JOURNEY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createReplayButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Replay"),t.onClick=function(){e.scene instanceof ji.Z&&e.scene.gameplay.replayGame(),e.scene.screen.close(l.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.REPLAY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-60),this.add([t])},n.createCloseButton=function(){var e=this,t=new Ki.Z(this.scene,360,60,16,16579837);t.setName("Cancel"),t.onClick=function(){e.scene.screen.close(l.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},t}(Phaser.GameObjects.Container),Xi=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.newDealButton=void 0,n.newDealText=void 0,n.createBackground(),n.createContent(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(360,120);var e=new Gi.Z(this.scene,0,0,360,180,16,16119285);e.setAlpha(.85),this.add(e),this.bg=e},n.createContent=function(){this.createJourneyButton(),this.createNewDealButton(),this.createReplayButton(),this.createCloseButton();var e=this.scene.add.line(0,-30,0,0,this.width,0,3947587);e.setLineWidth(.5),e.setAlpha(.36);var t=this.scene.add.line(0,30,0,0,this.width,0,3947587);t.setLineWidth(.5),t.setAlpha(.36),this.add(e),this.add(t)},n.createJourneyButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Journey"),t.onClick=function(){var t=e.scene.screen.get(l.o4.PLAY_SCREEN);t instanceof qi&&t.setCloseImmediately(),e.scene.screen.close(l.o4.PLAY_SCREEN),e.scene instanceof ji.Z&&e.scene.handleGoToJourneyScene()};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.JOURNEY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createChallengeButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("ChallengeFriend"),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(l.o4.PLAY_SCREEN),!(e.scene instanceof ji.Z)){t.next=4;break}return t.next=4,e.scene.handlePlayWithFriend();case 4:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Play With Friends",origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-60),this.add([t])},n.createNewDealButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("NewDeal"),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(l.o4.PLAY_SCREEN),!(e.scene instanceof ji.Z)){t.next=4;break}return t.next=4,e.scene.handlePlaySingle();case 4:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.NEW_DEAL,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-60),this.add([t]),this.newDealButton=t,this.newDealText=n},n.createReplayButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Replay"),t.onClick=function(){e.scene instanceof ji.Z&&e.scene.gameplay.replayGame(),e.scene.screen.close(l.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.REPLAY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-120),this.add([t])},n.createCloseButton=function(){var e=this,t=new Ki.Z(this.scene,360,60,16,16579837);t.setName("Cancel"),t.onClick=function(){e.scene.screen.close(l.o4.PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},n.switchMode=function(e){this.newDealButton.setName(e?"ExitJourney":"NewDeal"),this.newDealText.setText(e?"Exit Journey":"New Deal")},t}(Phaser.GameObjects.Container),qi=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playContainer=void 0,r.journeyPlayContainer=void 0,r.isFastClose=!1,r.setDepth(l.Ks.POPUP),r.createPlayContainer(),r.createJourneyPlayContainer(),r}(0,r.Z)(t,e);var n=t.prototype;return n.createPlayContainer=function(){this.playContainer=new Xi(this.scene),this.add(this.playContainer)},n.createJourneyPlayContainer=function(){this.journeyPlayContainer=new Ji(this.scene),this.add(this.journeyPlayContainer)},n.open=function(){var t=this;(e.prototype.open.call(this),this.isFastClose=!1,this.scene instanceof vu)&&(this.scene.levelHandler.isInJourneyLevel()?(this.journeyPlayContainer.revive(),this.playContainer.kill()):(this.journeyPlayContainer.kill(),this.playContainer.revive()));this.playContainer.setAlpha(1),this.background.setAlpha(.8),this.playContainer.setInteractive(),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(l.o4.PLAY_SCREEN)})),this.runOpenAnimation()},n.close=function(){this.isFastClose?(this.setAlpha(0),e.prototype.close.call(this)):this.runCloseAnimation()},n.setCloseImmediately=function(){this.isFastClose=!0},n.runOpenAnimation=function(){var e;if(null==(e=this.slideInAnimation)||null==(e=e.tween)||!e.isPlaying()){this.scene.audio.playSound(Se.Z.POPUP_SHOW);var t=this.scene.game.world.isLandscape()?33:13,n=this.scene.ads.getBannerHeight(),i=this.scene.gameZone.height;this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.playContainer,this.journeyPlayContainer],props:{y:{from:i/2,to:i/2-160-n-t,ease:Phaser.Math.Easing.Back.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),Qi={wins:0,winRate:0,totalGame:0,winsWithoutUndo:0,bestScore:0,averageScore:0,bestWinningTime:0,averageWinningTime:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0,targetLevelTracking:{difficultyScore:0,lose:[],win:[]}},$i={score:0,suitSize:Rn.Z.suitSize,difficulty:Rn.Z.difficulty,playedTime:0,currentMoves:0,usedUndo:!1},ea=function(){function e(e){this.scene=void 0,this.oneSuitStats=void 0,this.twoSuitStats=void 0,this.fourSuitStats=void 0,this.currentGame=void 0,this.scene=e,this.setupInitGameStats(),this.setupInitialStats(),this.loadUserStats(e)}var t=e.prototype;return t.setupInitGameStats=function(){this.currentGame=(0,d.Z)({},$i)},t.setupInitialStats=function(){this.oneSuitStats={easy:GameCore.Utils.Json.clone(Qi),medium:GameCore.Utils.Json.clone(Qi),hard:GameCore.Utils.Json.clone(Qi),dynamic:GameCore.Utils.Json.clone(Qi)},this.twoSuitStats={easy:GameCore.Utils.Json.clone(Qi),medium:GameCore.Utils.Json.clone(Qi),hard:GameCore.Utils.Json.clone(Qi),dynamic:GameCore.Utils.Json.clone(Qi)},this.fourSuitStats={easy:GameCore.Utils.Json.clone(Qi),medium:GameCore.Utils.Json.clone(Qi),hard:GameCore.Utils.Json.clone(Qi),dynamic:GameCore.Utils.Json.clone(Qi)}},t.loadUserStats=function(e){var t=this,n=e.player.getCustomData("gameStats");if(GameCore.Utils.Valid.isObject(n)){if(GameCore.Utils.Object.hasOwn(n,"one")){var i=(0,d.Z)({},this.oneSuitStats);this.oneSuitStats=(0,Hn.TS)(i,n.one)}if(GameCore.Utils.Object.hasOwn(n,"two")){var a=(0,d.Z)({},this.twoSuitStats);this.twoSuitStats=(0,Hn.TS)(a,n.two)}if(GameCore.Utils.Object.hasOwn(n,"four")){var r=(0,d.Z)({},this.fourSuitStats);this.fourSuitStats=(0,Hn.TS)(r,n.four)}S()(this.oneSuitStats).forEach((function(e){var n,i,a=t.oneSuitStats[e].targetLevelTracking;a.win=w()(n=a.win).call(n,(function(e){return(0,xn.VY)(e)})),a.lose=w()(i=a.lose).call(i,(function(e){return(0,xn.VY)(e)}))})),S()(this.twoSuitStats).forEach((function(e){var n,i,a=t.twoSuitStats[e].targetLevelTracking;a.win=w()(n=a.win).call(n,(function(e){return(0,xn.VY)(e)})),a.lose=w()(i=a.lose).call(i,(function(e){return(0,xn.VY)(e)}))})),S()(this.fourSuitStats).forEach((function(e){var n,i,a=t.fourSuitStats[e].targetLevelTracking;a.win=w()(n=a.win).call(n,(function(e){return(0,xn.VY)(e)})),a.lose=w()(i=a.lose).call(i,(function(e){return(0,xn.VY)(e)}))})),this.postGameStats()}},t.makeWin=function(){console.log("makeWin: ",this.currentGame);var e=this.currentGame,t=e.suitSize,n=e.difficulty,i=this.getGameStats(t,n),a=this.calculateNewStats(i,this.currentGame,"win");switch(t){case"one":var r=(0,d.Z)({},this.oneSuitStats[n]);this.oneSuitStats[n]=(0,Hn.TS)(r,a);break;case"two":var s=(0,d.Z)({},this.twoSuitStats[n]);this.twoSuitStats[n]=(0,Hn.TS)(s,a);break;case"four":var o=(0,d.Z)({},this.fourSuitStats[n]);this.fourSuitStats[n]=(0,Hn.TS)(o,a);break;default:throw new Error("Invalid suit size")}this.postGameStats()},t.makeLose=function(e){console.log("add lose: ",this.currentGame);var t=this.currentGame,n=t.suitSize,i=t.difficulty,a=this.getGameStats(n,i),r=this.calculateNewStats(a,this.currentGame,e?"lose":"giveUp");switch(n){case"one":var s=(0,d.Z)({},this.oneSuitStats[i]);this.oneSuitStats[i]=(0,Hn.TS)(s,r);break;case"two":var o=(0,d.Z)({},this.twoSuitStats[i]);this.twoSuitStats[i]=(0,Hn.TS)(o,r);break;case"four":var c=(0,d.Z)({},this.fourSuitStats[i]);this.fourSuitStats[i]=(0,Hn.TS)(c,r);break;default:throw new Error("Invalid suit size")}this.postGameStats()},t.calculateNewStats=function(e,t,n){var i,a,r=t.score,s=t.playedTime,o=t.currentMoves,c=t.usedUndo;if("lose"===n||"giveUp"===n){var l,h,f=e.totalGame+1,p=e.wins/(e.totalGame+1)*100,g=e.targetLevelTracking.difficultyScore;if("lose"===n&&(g-=4)<0){var m=Math.abs(g);g=0;var v=t.suitSize,y=t.difficulty,E=void 0;if("medium"===y?E=this.getGameStats(v,"easy"):"hard"===y&&(E=this.getGameStats(v,"medium")),void 0!==E){var S=E.targetLevelTracking.difficultyScore;E.targetLevelTracking.difficultyScore=Math.max(0,S-m)}}var T={difficultyScore:g,win:u()(l=[]).call(l,e.targetLevelTracking.win),lose:u()(h=[]).call(h,e.targetLevelTracking.lose)};return T.lose.push(Date.now()),(0,d.Z)({},e,{totalGame:f,currentWinningStreak:0,winRate:p,targetLevelTracking:T})}var A=e.wins+1,C=A/(e.totalGame+1)*100,b=e.totalGame+1,I=e.winsWithoutUndo+(c?0:1),w=Math.max(e.bestScore,r),x=(e.averageScore*e.wins+r)/A,_=(e.averageWinningTime*e.wins+s)/A,O=Math.min(s,e.bestWinningTime)||s,P=Math.max(s,e.mostWinningTime),k=Math.min(o,e.bestWinningMoves)||o,L=Math.max(o,e.mostWinningMoves),D=e.currentWinningStreak+1,R=Math.max(D,e.longestWinningStreak),B={difficultyScore:e.targetLevelTracking.difficultyScore+4,win:u()(i=[]).call(i,e.targetLevelTracking.win),lose:u()(a=[]).call(a,e.targetLevelTracking.lose)};return B.win.push(Date.now()),{wins:A,winRate:C,totalGame:b,winsWithoutUndo:I,bestScore:w,averageScore:x,averageWinningTime:_,bestWinningTime:O,mostWinningTime:P,bestWinningMoves:k,mostWinningMoves:L,currentWinningStreak:D,longestWinningStreak:R,targetLevelTracking:B}},t.postGameStats=function(){var e={one:GameCore.Utils.Json.clone(this.oneSuitStats),two:GameCore.Utils.Json.clone(this.twoSuitStats),four:GameCore.Utils.Json.clone(this.fourSuitStats)};this.scene.player.setCustomData("gameStats",e)},t.getTotalDifficultyScore=function(e){if("one"===e){var t=0;return t+=this.oneSuitStats.easy.targetLevelTracking.difficultyScore,t+=this.oneSuitStats.medium.targetLevelTracking.difficultyScore,t+=this.oneSuitStats.hard.targetLevelTracking.difficultyScore}if("two"===e){var n=0;return n+=this.twoSuitStats.easy.targetLevelTracking.difficultyScore,n+=this.twoSuitStats.medium.targetLevelTracking.difficultyScore,n+=this.twoSuitStats.hard.targetLevelTracking.difficultyScore}if("four"===e){var i=0;return i+=this.fourSuitStats.easy.targetLevelTracking.difficultyScore,i+=this.fourSuitStats.medium.targetLevelTracking.difficultyScore,i+=this.fourSuitStats.hard.targetLevelTracking.difficultyScore}throw new Error("Invalid suit size: "+e)},t.getGameStats=function(e,t){switch(e){case"one":return this.oneSuitStats[t];case"two":return this.twoSuitStats[t];case"four":return this.fourSuitStats[t];default:throw new Error("Invalid suit size: "+e+" "+t)}},t.getTotalGameStats=function(e){var t=this.oneSuitStats;switch(e){case"two":t=this.twoSuitStats;break;case"four":t=this.fourSuitStats}var n=0;S()(t).forEach((function(e){n+=t[e].wins}));var i=0;S()(t).forEach((function(e){i+=t[e].totalGame}));var a=n/i*100,r=0;S()(t).forEach((function(e){r+=t[e].winsWithoutUndo}));var s=0;S()(t).forEach((function(e){s=Math.max(s,t[e].bestScore)}));var o=0,c=0;S()(t).forEach((function(e){t[e].averageScore>0&&(o+=t[e].averageScore,c++)})),o=c>0?o/c:0;var u=Number.MAX_SAFE_INTEGER;c=0,S()(t).forEach((function(e){t[e].bestWinningTime<=0||(c++,u=Math.min(u,t[e].bestWinningTime))})),u=c>0?u:0;var l=0;return c=0,S()(t).forEach((function(e){t[e].averageWinningTime>0&&(l+=t[e].averageWinningTime,c++)})),{wins:n,winRate:a,totalGame:i,winsWithoutUndo:r,bestScore:s,averageScore:o,bestWinningTime:u,averageWinningTime:l=c>0?l/c:0,mostWinningTime:0,bestWinningMoves:0,mostWinningMoves:0,currentWinningStreak:0,longestWinningStreak:0,targetLevelTracking:{difficultyScore:0,win:[],lose:[]}}},t.getCurrentGameStats=function(){return this.currentGame},t.updateCurrentGameStats=function(e){this.currentGame=(0,d.Z)({},this.currentGame,e)},e}(),ta=ea,na=function(){function e(e){this.scene=void 0,this.scene=e,this.loadLevels()}var t=e.prototype;return t.loadLevels=function(){},t.isLevelLoaded=function(){return!0},t.getLevelGroup=function(e){var t=this.scene.gameStats.getGameStats("one","easy"),n=this.getLevelByUserStats(t);return e?"draw3/level"+n:"draw1/level"+n},t.getLevelByUserStats=function(e){e.winRate,e.totalGame;return 1},e}(),ia=n(498),aa=function(e){function t(t){var n;return(n=e.call(this,t)||this).icon=void 0,n.label=void 0,n.value=void 0,n.setSize(271,24),n.createIcon(),n.createLabel(),n.createValue(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setIcon=function(e,t){this.icon.setTexture(e,t),this.icon.setWorldSize(24,24)},n.setLabel=function(e){this.label.setText(e)},n.setValue=function(e){this.value.setText(e)},n.createIcon=function(){var e=this.scene.add.image(0,0,"");e.setWorldSize(24,24),e.setTint(16579837),this.add(e),this.icon=e},n.createLabel=function(){var e=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"",origin:{x:0,y:.5}});e.setTint(16579837),this.add(e),this.label=e},n.createValue=function(){var e=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),text:"",origin:{x:1,y:.5}});e.setTint(16579837),e.setRightAlign(),this.add(e),this.value=e},n.alignProperties=function(){Phaser.Display.Align.In.LeftCenter(this.icon,this),Phaser.Display.Align.To.RightCenter(this.label,this.icon,12),Phaser.Display.Align.In.RightCenter(this.value,this)},t}(Phaser.GameObjects.Container),ra=N.Z.GAMEPLAY_DEFAULT,sa=ra.KEY,oa=ra.FRAME,ca=function(e){function t(t,n,i,a){var r;return void 0===n&&(n=8),void 0===i&&(i=t.lang.Text.NEW_GAME),void 0===a&&(a=oa.ADD_SQUARE),(r=e.call(this,t)||this).icon=void 0,r.text=void 0,r.iconTextPadding=void 0,r.labelText=void 0,r.iconFrame=void 0,r.iconTextPadding=n,r.labelText=i,r.iconFrame=a,r.createIcon(),r.createLabelText(),r.updateContainerSize(),r.alignIcon(),r.alignText(),r}(0,r.Z)(t,e);var n=t.prototype;return n.getIcon=function(){return this.icon},n.getText=function(){return this.text},n.clearTint=function(){this.icon.clearTint(),this.text.clearTint()},n.createIcon=function(){this.icon=this.scene.add.image(0,0,sa,this.iconFrame),this.icon.setWorldSize(20,20),this.icon.setTint(43282),this.add(this.icon)},n.alignIcon=function(){this.updateContainerSize(),Phaser.Display.Align.In.LeftCenter(this.icon,this)},n.createLabelText=function(){this.text=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.labelText,origin:{x:.5,y:.5}}),this.text.setTint(43282),this.add(this.text)},n.alignText=function(){Phaser.Display.Align.In.RightCenter(this.text,this,0,0)},n.updateContainerSize=function(){this.setSize(this.icon.width+this.iconTextPadding+this.text.width,this.icon.height>this.text.height?this.icon.height:this.text.height)},t}(Phaser.GameObjects.Container),ua=N.Z.GAMEPLAY_DEFAULT,la=ua.KEY,ha=ua.FRAME,da=143.5,fa=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createDevButtons(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setGameText=function(e,t){var n=this.scene.lang.Text.ONE+" "+this.scene.lang.Text.SUIT;switch(e){case"two":n=this.scene.lang.Text.TWO+" "+this.scene.lang.Text.SUITS;break;case"four":n=this.scene.lang.Text.FOUR+" "+this.scene.lang.Text.SUITS}var i=this.scene.lang.Text.EASY;switch(t){case"medium":i=this.scene.lang.Text.MEDIUM;break;case"hard":i=this.scene.lang.Text.HARD}var a=this.scene.lang.Text.DIFFICULTY,r=n+", ";r+=this.isNounBeforeAdjective()?a.toLowerCase()+" "+i.toLowerCase():i+" "+a,this.setDraw(r)},n.isNounBeforeAdjective=function(){var e,t=this.scene.lang.getCurrentLanguage();return Oe()(e=["es","pt","fr","id","it"]).call(e,t)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new ft(this.scene,{key:"_awesome",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.AWESOME,origin:{x:.5,y:.5}});e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Standard mode, Draw 1",origin:{x:.5,y:.5},maxWidth:this.width,maxHeight:40});t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new aa(this.scene);t.setIcon(la,ha.MEDAL_STAR),t.setLabel(this.scene.lang.Text.SCORE),t.setValue("687"),this.score=t,e.push(t);var n=new aa(this.scene);n.setIcon(la,ha.ARROW_SWAP_HORIZONTAL),n.setLabel(this.scene.lang.Text.MOVES),n.setValue("798"),this.moves=n,e.push(n);var i=new aa(this.scene);i.setIcon(la,ha.TIMER),i.setLabel(this.scene.lang.Text.TIME),i.setValue("09:48"),this.time=i,e.push(i);var a=new aa(this.scene);a.setIcon(la,ha.CUP),a.setLabel(this.scene.lang.Text.BEST_TIME),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new Ki.Z(this.scene,303,42,16,16777215);t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.scene instanceof vu)){t.next=5;break}return t.next=3,e.scene.gameplay.processFlowOnShowResult(!1);case 3:return t.next=5,e.scene.handlePlaySingle(!0);case 5:e.scene.screen.close(l.o4.VICTORY_SCREEN);case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new ca(this.scene,8,this.scene.lang.Text.NEW_GAME);t.add(n),this.add([t]),this.buttons.push(t),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),new pt.Z({targets:[t],duration:1e3,props:{scale:{from:1,to:1.05}}}).play()},n.createShareButton=function(){var e=this,t=new rt.Z(this.scene,da,48);t.onClick=function(){e.scene.storage.dispatch((0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,h,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.player,i=t.analytics,a=t.facebook,r=t.globalScene,e.prev=1,r.screen.open(l.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,duration:10,loading:!0}),e.next=5,vn(window.game.storage.getState());case 5:return s=e.sent,fn(s),c=n.getPlayer(),u=c.playerId,h=c.name,d=c.photo,e.next=10,a.shareAsync({text:"Easy! I have a new score!",intent:"SHARE",image:s||"",data:{playerId:u,playerName:h,playerPhoto:d,type:rn.W6}});case 10:i.event(He._.SHARE,{share_content_type:"CurrentScore",success:!0}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.event(He._.SHARE,{share_content_type:"CurrentScore",success:!1}),(0,dn.tO)(e.t0);case 17:return e.prev=17,r.screen.close(l.o4.NOTIFY_SCREEN),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,13,17,20]])}))))},t.setName("Share");var n=new Gi.Z(this.scene,0,0,da,48,16,16777215,.24),a=this.scene.add.graphics();a.lineStyle(1,16777215),a.strokeRoundedRect(-71.75,-24,da,48,16);var r=new ca(this.scene,8,this.scene.lang.Text.SHARE,ha.IC_SHARE);r.clearTint(),r.getIcon().setTintFill(16777215),t.add([n,a,r]).setSize(da,48),Phaser.Display.Align.In.BottomLeft(t,this.bg,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,la,ha.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(l.o4.VICTORY_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p()(t=this.buttons).call(t,(function(e){return new(ae())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){t()}})}))})),e.next=3,ae().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=p()(t).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,ae().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=p()(t=this.lines).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttons.forEach((function(e){e.setDisabled(!0),e.alpha=1})),e.next=3,this.runEntranceAnimationRowsLines();case 3:return e.next=5,this.runEntranceAnimationButtons();case 5:this.buttons.forEach((function(e){e.setDisabled(!1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),pa=fa,ga=N.Z.GAMEPLAY_DEFAULT,ma=ga.KEY,va=ga.FRAME,ya=23.5,Ea=47,Sa=68.5,Ta={AXIS:0,FIRST_FROM_LEFT:ya,SECOND_FROM_LEFT:Ea,THIRD_FROM_LEFT:Sa,FIRST_FROM_RIGHT:-ya,SECOND_FROM_RIGHT:-Ea,THIRD_FROM_RIGHT:-Sa},Aa=function(e){function t(t){var n;return(n=e.call(this,t)||this).beamAxis=void 0,n.beamFirstFromLeft=void 0,n.beamSecondFromLeft=void 0,n.beamThirdFromLeft=void 0,n.beamFirstFromRight=void 0,n.beamSecondFromRight=void 0,n.beamThirdFromRight=void 0,n.pivot=void 0,n.setSize(375,295),n.createBeamsPivot(),n.createBeams(),n.alignBeams(),n.playAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2+30);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,ma,va.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-30)},n.createBeams=function(){this.beamAxis=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamFirstFromLeft=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamSecondFromLeft=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamThirdFromLeft=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamFirstFromRight=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamSecondFromRight=this.scene.add.image(0,0,ma,va.BEAM.AXIS),this.beamThirdFromRight=this.scene.add.image(0,0,ma,va.BEAM.AXIS);var e=[this.beamAxis,this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamFirstFromRight,this.beamSecondFromRight,this.beamThirdFromRight];this.setWorldSizeImages(52,295,e),e.forEach((function(e){e.setAlpha(.6)})),this.add(e)},n.alignBeams=function(){this.rotateBeamToAngleInDegree(this.beamAxis,Ta.AXIS),this.rotateBeamToAngleInDegree(this.beamFirstFromLeft,Ta.FIRST_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamSecondFromLeft,Ta.SECOND_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamThirdFromLeft,Ta.THIRD_FROM_LEFT),this.rotateBeamToAngleInDegree(this.beamFirstFromRight,Ta.FIRST_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamSecondFromRight,Ta.SECOND_FROM_RIGHT),this.rotateBeamToAngleInDegree(this.beamThirdFromRight,Ta.THIRD_FROM_RIGHT)},n.setWorldSizeImages=function(e,t,n){n.forEach((function(n){return n.setWorldSize(e,t)}))},n.playAnimation=function(){var e=this;[this.beamFirstFromLeft,this.beamSecondFromLeft,this.beamThirdFromLeft,this.beamAxis,this.beamThirdFromRight,this.beamSecondFromRight,this.beamFirstFromRight].forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.6}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.addBackground=function(){var e="win-beams-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),Ca=n(519),ba=n.n(Ca);function Ia(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return wa(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return wa(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var xa=N.Z.GAMEPLAY_DEFAULT,_a=xa.KEY,Oa=xa.FRAME,Pa=Oa.FLAG.LEFT,ka=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(230.5,136),n.createString(),n.createFlags(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,_a,Pa+"1");t.setWorldSize(35.5,15.5),Phaser.Display.Align.In.TopLeft(t,this,-180.5,0);var n=this.scene.add.image(0,0,_a,Pa+"2");n.setWorldSize(33.5,37),Phaser.Display.Align.In.TopLeft(n,this,-153,-2);var i=this.scene.add.image(0,0,_a,Pa+"3");i.setWorldSize(32,38),Phaser.Display.Align.In.TopLeft(i,this,-124.5,-23);var a=this.scene.add.image(0,0,_a,Pa+"4");a.setWorldSize(30,38.5),Phaser.Display.Align.In.TopLeft(a,this,-94,-40.25);var r=this.scene.add.image(0,0,_a,Pa+"5");r.setWorldSize(28,38.5),Phaser.Display.Align.In.TopLeft(r,this,-63.235,-56);var s=this.scene.add.image(0,0,_a,Pa+"6");s.setWorldSize(28.5,38.5),Phaser.Display.Align.In.TopLeft(s,this,-31.07,-68.5);var o=this.scene.add.image(0,0,_a,Pa+"7");o.setWorldSize(29.5,38.5),Phaser.Display.Align.In.TopLeft(o,this,2,-79),this.flags=[t,n,i,a,r,s,o],this.add(ba()(this)),ba()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,_a,Oa.STRING.LEFT),this.string.setWorldSize(215.5,96.5),this.add(this.string),Phaser.Display.Align.In.TopLeft(this.string,this)},n.addBackground=function(){var e="lb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=Ia(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}p()(e=ba()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle;t.scene.add.tween({targets:e,duration:300,props:{x:{from:a,to:a-2},y:{from:r,to:r-1},angle:{from:s,to:s+5}},yoyo:!0,delay:50*n,repeat:-1})}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=Ia(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],ba()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container);function La(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return Da(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Da(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Ra=N.Z.GAMEPLAY_DEFAULT,Ba=Ra.KEY,Na=Ra.FRAME,Ma=Na.FLAG.RIGHT,Ga=function(e){function t(t){var n;return(n=e.call(this,t)||this).flags=[],n.string=void 0,n.tweens=[],n.flagsData=[],n.setSize(218,123.5),n.createString(),n.createFlags(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createFlags=function(){var e=this,t=this.scene.add.image(0,0,Ba,Ma+"1");t.setWorldSize(30.5,26),this.alignTopLeft(t,44.5,26);var n=this.scene.add.image(0,0,Ba,Ma+"2");n.setWorldSize(29,32.5),this.alignTopLeft(n,93,60.5);var i=this.scene.add.image(0,0,Ba,Ma+"3");i.setWorldSize(27,33),this.alignTopLeft(i,145.5,95.5);var a=this.scene.add.image(0,0,Ba,Ma+"4");a.setWorldSize(25.5,33.5),this.alignTopLeft(a,199,124.5);var r=this.scene.add.image(0,0,Ba,Ma+"5");r.setWorldSize(24,33.5),this.alignTopLeft(r,256.5,152);var s=this.scene.add.image(0,0,Ba,Ma+"6");s.setWorldSize(25,33.5),this.alignTopLeft(s,311,173.5);var o=this.scene.add.image(0,0,Ba,Ma+"7");o.setWorldSize(25.5,33),this.alignTopLeft(o,367.5,189.5);var c=this.scene.add.image(0,0,Ba,Ma+"8");c.setWorldSize(25.5,32),this.alignTopLeft(c,418,201,-3),this.flags=[t,n,i,a,r,s,o,c],this.add(ba()(this)),ba()(this).forEach((function(t){var n=t.x,i=t.y,a=t.angle;e.flagsData.push({x:n,y:i,angle:a})}))},n.createString=function(){this.string=this.scene.add.image(0,0,Ba,Na.STRING.RIGHT),this.string.setWorldSize(209,91.5),this.add(this.string),Phaser.Display.Align.In.TopRight(this.string,this)},n.alignTopLeft=function(e,t,n,i,a){void 0===i&&(i=0),void 0===a&&(a=0),Phaser.Display.Align.In.TopLeft(e,this,-(t-e.width)/2+i,-(n-e.height)/2+a)},n.addBackground=function(){var e="rb-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.playWavingAnimation=function(){var e,t=this;if(!(this.tweens.length>0)){for(var n,i=La(this.tweens);!(n=i()).done;){if(n.value.isPlaying())return}p()(e=ba()(this)).call(e,(function(e,n){var i=t.flagsData[n],a=i.x,r=i.y,s=i.angle,o=t.scene.add.tween({targets:e,duration:300,props:{x:a+2,y:r-1,angle:s-5},yoyo:!0,delay:50*n,repeat:-1});t.tweens.push(o)}))}},n.stopWavingAnimation=function(){var e=this;if(0!==this.tweens.length){for(var t,n=La(this.tweens);!(t=n()).done;){t.value.stop()}this.tweens=[],ba()(this).forEach((function(t,n){e.scene.tweens.killTweensOf(t),t.x=e.flagsData[n].x,t.y=e.flagsData[n].y,t.angle=e.flagsData[n].angle}))}},t}(Phaser.GameObjects.Container),Ua=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftBunting=void 0,n.rightBunting=void 0,n.leftBuntingInitialPosition=void 0,n.rightBuntingInitialPosition=void 0,n.setSize(375,136),n.createLeftBunting(),n.createRightBunting(),n.moveBelow(n.leftBunting,n.rightBunting),n.leftBuntingInitialPosition={x:n.leftBunting.x,y:n.leftBunting.y},n.rightBuntingInitialPosition={x:n.rightBunting.x,y:n.rightBunting.y},n}(0,r.Z)(t,e);var n=t.prototype;return n.createLeftBunting=function(){var e=new ka(this.scene);this.add(e),Phaser.Display.Align.In.TopLeft(e,this),this.leftBunting=e},n.createRightBunting=function(){var e=new Ga(this.scene);this.add(e),Phaser.Display.Align.In.TopRight(e,this),this.rightBunting=e},n.hideContent=function(){this.leftBunting.setPosition(this.leftBuntingInitialPosition.x-50,this.leftBuntingInitialPosition.y+-100),this.rightBunting.setPosition(this.rightBuntingInitialPosition.x+50,this.rightBuntingInitialPosition.y+-100)},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 50,-100,t=new(ae())((function(e){new Yi.Z({targets:[i.leftBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.leftBuntingInitialPosition.y+-100,to:i.leftBuntingInitialPosition.y},x:{from:i.leftBuntingInitialPosition.x-50,to:i.leftBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),n=new(ae())((function(e){new Yi.Z({targets:[i.rightBunting],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:i.rightBuntingInitialPosition.y+-100,to:i.rightBuntingInitialPosition.y},x:{from:i.rightBuntingInitialPosition.x+50,to:i.rightBuntingInitialPosition.x}},duration:300,onComplete:e}).play()})),e.next=6,ae().all([t,n]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.playWavingAnimation=function(){this.leftBunting.playWavingAnimation(),this.rightBunting.playWavingAnimation()},n.stopWavingAnimation=function(){this.leftBunting.stopWavingAnimation(),this.rightBunting.stopWavingAnimation()},t}(Phaser.GameObjects.Container),Fa=n(510),Za=n(503),Ha=N.Z.GAMEPLAY_DEFAULT,Wa=Ha.KEY,za=Ha.FRAME,Ya=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Wa,za.ADD_SQUARE,t.lang.Text.GAME)||this).onClick=function(){n.scene.screen.open(l.o4.RESULT_PLAY_SCREEN)},n}return(0,r.Z)(t,e),t}(Za.Z),Va=n(508),Ka=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,a))||this).newGameButton=void 0,n}(0,r.Z)(t,e);var n=t.prototype;return n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.alignButtons()},n.createNewGameButton=function(){this.settingsButton=new Ya(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},t}(Va.Z),ja=Ka,Ja=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.awesomeContainer=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e)}))},r.scene=t,r.setBackground(),r.createAwesomeContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.createBottomLogo(),r.setDepth(l.Ks.POPUP),r}(0,r.Z)(t,e);var n=t.prototype;return n.createAwesomeContainer=function(){this.awesomeContainer=new pa(this.scene),this.add(this.awesomeContainer)},n.createBeams=function(){this.beams=new Aa(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Ua(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){this.footer=new ja(this.scene,!1,l.o4.VICTORY_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.game.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.updateVictoryStats(),this.awesomeContainer.setAlpha(1),this.awesomeContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0)},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.closeWithoutAnimation=function(){this.closed=!0,this.alpha=0,this.stopConfettiAnimation(),this.scene.gameplay.confettiSmallFallDown.emitter.killAll(),e.prototype.close.call(this)},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t,i=n.score,a=n.suitSize,r=n.difficulty,s=n.currentMoves,o=n.playedTime,c=this.scene.gameStats.getGameStats(a,r).bestWinningTime;this.awesomeContainer.setScore(""+i),this.awesomeContainer.setMoves(""+s),this.awesomeContainer.setWinningTime((0,xn.F0)(o,!1)),this.awesomeContainer.setBestWinningTime((0,xn.F0)(c,!1)),this.awesomeContainer.setGameText(a,r)}},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Se.Z.POPUP_SHOW),n=this.scene.ads.getBannerHeight(),this.awesomeContainer.setAlpha(0),this.awesomeContainer.y=n,this.awesomeContainer.hideContent(),this.bunting.stopWavingAnimation(),this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.awesomeContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:n,to:-n/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.awesomeContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=13,this.bunting.runEntranceAnimation();case 13:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),Xa=Ja,qa=N.Z.GAMEPLAY_DEFAULT,Qa=qa.KEY,$a=qa.FRAME,er=143.5,tr=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.score=void 0,n.time=void 0,n.bestTime=void 0,n.moves=void 0,n.draw=void 0,n.lines=[],n.buttons=[],n.createBackground(),n.createTitle(),n.createStats(),n.createNewGameButton(),n.createReplayButton(),n.createDevButtons(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.setScore=function(e){this.score.setValue(e)},n.setWinningTime=function(e){this.time.setValue(e)},n.setBestWinningTime=function(e){this.bestTime.setValue(e)},n.setMoves=function(e){this.moves.setValue(e)},n.setGameText=function(e,t){var n=this.scene.lang.Text.ONE+" "+this.scene.lang.Text.SUIT;switch(e){case"two":n=this.scene.lang.Text.TWO+" "+this.scene.lang.Text.SUITS;break;case"four":n=this.scene.lang.Text.FOUR+" "+this.scene.lang.Text.SUITS}var i=this.scene.lang.Text.EASY;switch(t){case"medium":i=this.scene.lang.Text.MEDIUM;break;case"hard":i=this.scene.lang.Text.HARD}var a=this.scene.lang.Text.DIFFICULTY,r=n+", ";r+=this.isNounBeforeAdjective()?a.toLowerCase()+" "+i.toLowerCase():i+" "+a,this.setDraw(r)},n.isNounBeforeAdjective=function(){var e,t=this.scene.lang.getCurrentLanguage();return Oe()(e=["es","pt","fr","id","it"]).call(e,t)},n.setDraw=function(e){this.draw.setText(e)},n.createBackground=function(){this.setSize(343,374);var e=new ft(this.scene,{key:"_outOfMoves",radius:6,border:24,width:343,height:374});this.bg=e,this.add(e),this.bg.setPipeline("Grayscale")},n.createTitle=function(){var e=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.Out_Of_Moves,origin:{x:.5,y:.5}});e.setTint(16777215),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20);var t=this.scene.lang.makeText(this.scene,{font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Standard mode, Draw 1",origin:{x:.5,y:.5},maxWidth:this.width,maxHeight:40});t.setTint(16777215),this.draw=t,this.add([t]),Phaser.Display.Align.To.BottomCenter(t,e,0,8)},n.createStats=function(){var e=[],t=new aa(this.scene);t.setIcon(Qa,$a.MEDAL_STAR),t.setLabel(this.scene.lang.Text.SCORE),t.setValue("687"),this.score=t,e.push(t);var n=new aa(this.scene);n.setIcon(Qa,$a.ARROW_SWAP_HORIZONTAL),n.setLabel(this.scene.lang.Text.MOVES),n.setValue("798"),this.moves=n,e.push(n);var i=new aa(this.scene);i.setIcon(Qa,$a.TIMER),i.setLabel(this.scene.lang.Text.TIME),i.setValue("09:48"),this.time=i,e.push(i);var a=new aa(this.scene);a.setIcon(Qa,$a.CUP),a.setLabel(this.scene.lang.Text.BEST_TIME),a.setValue("05:30"),this.bestTime=a,e.push(a),this.add(e);for(var r=0;r<e.length;r++){var s=e[r];if(s.alignProperties(),Phaser.Display.Align.In.TopCenter(s,this,0,-(50*r+112)),r==e.length-1)break;var o=this.scene.add.line(0,0,0,0,271,0,16579837,.2);this.add(o),this.lines.push(o),Phaser.Display.Align.To.BottomCenter(o,s,0,12)}},n.createNewGameButton=function(){var e=this,t=new Ki.Z(this.scene,143.5,48,16,16777215);t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.scene instanceof vu)){t.next=5;break}return t.next=3,e.scene.gameplay.processFlowOnShowResult(!1);case 3:return t.next=5,e.scene.handlePlaySingle(!0);case 5:e.scene.screen.close(l.o4.NO_MORE_MOVES_SCREEN);case 6:case"end":return t.stop()}}),t)}))),t.setName("NewGame");var n=new ca(this.scene);t.add(n),Phaser.Display.Align.In.BottomRight(t,this,-16,-18),this.add([t]),this.buttons.push(t),new pt.Z({targets:[t],duration:1e3,props:{scale:"*=1.05"}}).play()},n.createReplayButton=function(){var e=this,t=new Ki.Z(this.scene,143.5,48,16,16777215);t.button.setAlpha(.24),t.button.setStrokeStyle(1,16777215),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.scene instanceof vu)){t.next=4;break}return t.next=3,e.scene.gameplay.processFlowOnShowResult(!1);case 3:e.scene.gameplay.replayGame(!0);case 4:e.scene.screen.close(l.o4.NO_MORE_MOVES_SCREEN);case 5:case"end":return t.stop()}}),t)}))),t.setName("Replay");var n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,er,48,16);var a=this.scene.lang.Text.REPLAY,r="id"===this.scene.lang.getCurrentLanguage();r&&(a=a.split(" ").join("\n"));var s=new ca(this.scene,8,a,$a.IC_REPLAY);r&&s.getText().setCenterAlign(),s.clearTint(),s.getIcon().setTintFill(16777215),t.add([n,s]).setSize(er,48),Phaser.Display.Align.In.BottomLeft(t,this.bg,-16,-18),this.add([t]),this.buttons.push(t)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,Qa,$a.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(l.o4.NO_MORE_MOVES_SCREEN)}},n.hideContent=function(){[this.score,this.moves,this.time,this.bestTime].forEach((function(e){return e.setAlpha(0)})),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){e.setAlpha(0)}))},n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p()(t=this.buttons).call(t,(function(e){return new(ae())((function(t){i.scene.add.tween({targets:[e],alpha:1,duration:200,onComplete:function(){t()}})}))})),e.next=3,ae().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRows=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.score,this.moves,this.time,this.bestTime],200,n=p()(t).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,ae().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLines=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=p()(t=this.lines).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationRowsLines=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all([this.runEntranceAnimationRows(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttons.forEach((function(e){e.setDisabled(!0),e.alpha=1})),e.next=3,this.runEntranceAnimationRowsLines();case 3:return e.next=5,this.runEntranceAnimationButtons();case 5:this.buttons.forEach((function(e){e.setDisabled(!1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),nr=tr,ir=N.Z.GAMEPLAY_DEFAULT,ar=ir.KEY,rr=ir.FRAME,sr=function(e){function t(t){var n;return(n=e.call(this,t)||this).leftLightning=void 0,n.middleLightning=void 0,n.rightLightning=void 0,n.initialLeftX=void 0,n.initialLeftY=void 0,n.initialMidX=void 0,n.initialMidY=void 0,n.initialRightX=void 0,n.initialRightY=void 0,n.setSize(374,416),n.createLightnings(),n.alignLightnings(),n.initialLeftX=n.leftLightning.x,n.initialLeftY=n.leftLightning.y,n.initialMidX=n.middleLightning.x,n.initialMidY=n.middleLightning.y,n.initialRightX=n.rightLightning.x,n.initialRightY=n.rightLightning.y,n}(0,r.Z)(t,e);var n=t.prototype;return n.createLightnings=function(){this.createLeftLightning(),this.createMiddleLightning(),this.createRightLightning();var e=[this.leftLightning,this.middleLightning,this.rightLightning];e.forEach((function(e){return e.setAlpha(.2)})),this.add(e)},n.createLeftLightning=function(){this.leftLightning=this.scene.add.image(0,0,ar,rr.LIGHTNING.LEFT),this.leftLightning.setWorldSize(182.5,180)},n.createMiddleLightning=function(){this.middleLightning=this.scene.add.image(0,0,ar,rr.LIGHTNING.MIDDLE),this.middleLightning.setWorldSize(106,125.5)},n.createRightLightning=function(){this.rightLightning=this.scene.add.image(0,0,ar,rr.LIGHTNING.RIGHT),this.rightLightning.setWorldSize(130.5,116)},n.alignLightnings=function(){Phaser.Display.Align.In.TopLeft(this.leftLightning,this,0,-60.28),Phaser.Display.Align.In.TopRight(this.middleLightning,this,-125.92,0),Phaser.Display.Align.In.TopRight(this.rightLightning,this,-9.23,-55.4)},n.hideContent=function(){var e=0,t=-300;[this.leftLightning,this.middleLightning,this.rightLightning].forEach((function(n){n.setPosition(e,t).setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={x:0,y:-300},n=new(ae())((function(e){new Yi.Z({targets:[s.leftLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialLeftX},y:{from:t.y,to:s.initialLeftY},alpha:{from:0,to:.2}},duration:150,onComplete:e}).play()})),i=new(ae())((function(e){new Yi.Z({targets:[s.rightLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialRightX},y:{from:t.y,to:s.initialRightY},alpha:{from:0,to:.2}},duration:250,onComplete:e}).play()})),a=new(ae())((function(e){new Yi.Z({targets:[s.middleLightning],ease:Phaser.Math.Easing.Cubic.Out,props:{x:{from:t.x,to:s.initialMidX},y:{from:t.y,to:s.initialMidY},alpha:{from:0,to:.2}},duration:300,onComplete:e}).play()})),e.next=6,ae().all([n,a,i]);case 6:return r=[this.leftLightning,this.middleLightning,this.rightLightning],e.next=9,new(ae())((function(e){s.scene.add.tween({targets:r,props:{alpha:.4},yoyo:!0,duration:100,onComplete:e})}));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),or=N.Z.GAMEPLAY_DEFAULT,cr=or.KEY,ur=or.FRAME,lr=10.4,hr=30.5,dr=50.5,fr={FIRST_FROM_LEFT:lr,SECOND_FROM_LEFT:hr,THIRD_FROM_LEFT:dr,FIRST_FROM_RIGHT:-lr,SECOND_FROM_RIGHT:-hr,THIRD_FROM_RIGHT:-dr},pr=function(e){function t(t){var n;return(n=e.call(this,t)||this).pivot=void 0,n.beams=[],n.setSize(375,415.5),n.createBeamsPivot(),n.createBeams(),n.playAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBeams=function(){for(var e=0,t=S()(fr);e<t.length;e++){var n=t[e],i=fr[n],a=this.scene.add.image(0,0,cr,ur.BEAM.LOSE_AXIS);a.setWorldSize(65.5,533),this.add(a),this.beams.push(a),this.rotateBeamToAngleInDegree(a,i)}},n.playAnimation=function(){var e=this;this.beams.forEach((function(t,n){e.scene.tweens.add({targets:t,props:{alpha:{from:.2,to:.4}},duration:700,delay:700*n,repeat:-1,yoyo:!0})}))},n.createBeamsPivot=function(){this.pivot=this.scene.add.image(0,0,cr,ur.ADD_SQUARE),this.add(this.pivot),this.pivot.kill(),Phaser.Display.Align.In.Center(this.pivot,this,0,-this.height/2-148.2)},n.rotateBeamToAngleInDegree=function(e,t){Phaser.Actions.RotateAroundDistance([e],this.pivot,t*Math.PI/180,e.height/2);var n=180*Math.atan2(e.y-this.pivot.y,e.x-this.pivot.x)/Math.PI;e.angle=n+90+180},t}(Phaser.GameObjects.Container),gr=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.outOfMovesContainer=void 0,r.lightnings=void 0,r.beams=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.background.setPipeline("Grayscale"),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e)}))},r.scene=t,r.setBackground(),r.createOutOfMovesContainer(),r.createLightnings(),r.createBeams(),r.createFooter(),r.createBottomLogo(),r.setDepth(l.Ks.POPUP),r}(0,r.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this.beams=new pr(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createOutOfMovesContainer=function(){this.outOfMovesContainer=new nr(this.scene),this.add(this.outOfMovesContainer)},n.createLightnings=function(){this.lightnings=new sr(this.scene),this.add(this.lightnings),Phaser.Display.Align.In.TopCenter(this.lightnings,this)},n.createFooter=function(){this.footer=new ja(this.scene,!1,l.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.updateVictoryStats(),this.outOfMovesContainer.setAlpha(1),this.outOfMovesContainer.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!0,this.runCloseAnimation()},n.closeWithoutAnimation=function(){this.closed=!0,this.alpha=0,e.prototype.close.call(this)},n.updateVictoryStats=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t,i=n.score,a=n.suitSize,r=n.difficulty,s=n.currentMoves,o=n.playedTime,c=this.scene.gameStats.getGameStats(a,r).bestWinningTime;this.outOfMovesContainer.setScore(""+i),this.outOfMovesContainer.setMoves(""+s),this.outOfMovesContainer.setWinningTime((0,xn.F0)(o,!1)),this.outOfMovesContainer.setBestWinningTime((0,xn.F0)(c,!1)),this.outOfMovesContainer.setGameText(a,r)}},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Se.Z.POPUP_SHOW),n=this.scene.ads.getBannerHeight(),this.outOfMovesContainer.setAlpha(0),this.outOfMovesContainer.y=n,this.outOfMovesContainer.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.outOfMovesContainer],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:n,to:-n/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.outOfMovesContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=12,this.lightnings.runEntranceAnimation();case 12:this.slideInAnimation.play();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),mr=gr,vr=n(500),yr=n(499),Er=n(225),Sr=n(486),Tr=n(227),Ar=vr.Z.STATUS,Cr=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.gameMode=void 0,n.handleGameModeChanged=function(){n.stop(),n.start()},n.scene=t,n.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.gameMode=ii.Z.SINGLE,Un.Z.instance.on(ct.Z.GAME_MODE_CHANGED,this.handleGameModeChanged)},n.start=function(){if(!this.isRunning()){switch(this.gameMode=Un.Z.instance.getGameMode(),console.log("\ud83e\udd16 ? Start game with mode:",this.gameMode),this.gameMode){case ii.Z.SINGLE:this.startSingleMode();break;case ii.Z.TOURNAMENT:this.startTournamentMode();break;case ii.Z.CHALLENGE_FRIENDS:this.startChallengeMode();break;default:this.stopChallengeMode(),this.stopTournamentMode()}this.setState(Ar.RUNNING)}},n.stop=function(){switch(console.log("\ud83e\udd16 ? Stop game with mode:",this.gameMode),this.gameMode){case ii.Z.SINGLE:this.stopSingleMode();break;case ii.Z.TOURNAMENT:this.stopTournamentMode();break;case ii.Z.CHALLENGE_FRIENDS:this.stopChallengeMode()}this.setState(Ar.STOPPED)},n.startSingleMode=function(){this.scene.header.useSingleInfo()},n.stopSingleMode=function(){},n.startTournamentMode=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.scene.header.useTournamentInfo(),e.next=3,this.updateTournamentInfo();case 3:return e.prev=3,n=this.scene.storage.getState(),i=(0,Tr.V)(n),a=(0,Tr.k)(n),console.log("start tournament",{leaderboardId:i,tournamentId:a}),e.next=10,(0,Er.H$)(i,{limit:7}).catch((function(e){return console.warn("get leader board",e,i),[]}));case 10:if(r=e.sent,console.log({leaders:r,leaderboardId:i}),!(r.length<1)){e.next=14;break}return e.abrupt("return");case 14:return s=p()(r).call(r,(function(e){return e.playerId})),e.next=17,this.scene.profile.requestProfiles(s).catch((function(e){console.warn("request profile ids",e)}));case 17:if(c=this.scene.profile.getProfiles(),console.log({profiles:c}),u=p()(r).call(r,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=c[t];if(!a)return null;var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}})),!((l=L()(t=w()(u).call(u,(function(e){return null!==e}))).call(t,(function(e,t){return t.score-e.score}))).length<1)){e.next=23;break}return e.abrupt("return");case 23:console.log({players:l}),this.scene.analytics.event(He._.TOURNAMENT_START,{tournament_id:a,leaderboard_id:i}),e.next=32;break;case 27:if(e.prev=27,e.t0=e.catch(3),!(e.t0 instanceof Sr.Z)){e.next=31;break}return e.abrupt("return");case 31:console.warn({error:e.t0});case 32:case"end":return e.stop()}}),e,this,[[3,27]])})));return function(){return e.apply(this,arguments)}}(),n.updateTournamentInfo=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.scene.storage.getState(),n=(0,Tr.V)(t),e.next=4,(0,Er.wF)(n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:i=e.t0,a="Your tournament",GameCore.Utils.Object.hasOwn(i,"name")&&"string"===typeof i.name&&(a=i.name),r=GameCore.Utils.String.removeDiacritics(a||"Your tournament"),console.log("update tournament title",a),this.scene.header.tournamentInfo.titleBlock.tournamentTitle.setText(r);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stopTournamentMode=function(){},n.startChallengeMode=function(){this.scene.header.useChallengeInfo();var e=this.scene.header.challengeInfo,t=e.leftBlock,n=e.rightBlock;t.updateData(0,0,0),n.updateData();var i=this.scene.storage.getState(),a=this.scene.player.getPlayer(),r=a.playerId,s=a.photo;t.avatar.loadPhoto(r,s,100);var o=(0,ln.oN)(i),c=o.playerId,u=o.photo;n.avatar.loadPhoto(c,u,100);var l=(0,ln.iq)(i),h=l.whitePlayerId,d=l.extraData,f=void 0===d?{}:d;console.warn({matchData:l});var p=r===h?f.blackPlayerData:f.whitePlayerData;if(p){var g=p.score,m=p.moves,v=p.time;n.updateData(g,v,m)}},n.stopChallengeMode=function(){},t}(yr.Z),br=Cr,Ir=n(509),wr=function(e){function t(t){var n;return(n=e.call(this,t,0,0,$e.Z.BOLD.KEY,"Tournaments",t.fontSize(oi.Z.TITLE))||this).setOrigin(.5,.5),n.setTint(15527148),n}return(0,r.Z)(t,e),t}(Phaser.GameObjects.BitmapText),xr=Ir.iD.HEADER,_r=xr.WIDTH,Or=xr.HEIGHT,Pr=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.setSize(_r,Or),n.createTopBar(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createTopBar=function(){this.createTitle()},n.createTitle=function(){var e=new wr(this.scene);this.add(e),Phaser.Display.Align.In.LeftCenter(e,this,-12)},t}(Phaser.GameObjects.Container),kr=16579837,Lr=function(e){function t(t,n,i,r){var s;return(s=e.call(this,t)||this).numOfTabs=void 0,s.tabs=void 0,s.currentIdx=0,s.callback=void 0,s.borderLineWidth=1,s.numOfTabs=r,s.setSize(n,i),s.createBg(),s.createTabs(),s.listenInput(),t.add.existing((0,a.Z)(s)),s}(0,r.Z)(t,e);var n=t.prototype;return n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,0,t+1)},n.createBg=function(){var e=this.scene.add.graphics();e.lineStyle(this.borderLineWidth,kr);var t=this.width+this.numOfTabs+this.borderLineWidth,n=this.height+2*this.borderLineWidth;e.strokeRoundedRect(-t/2,-this.height/2-this.borderLineWidth,t,n,6),this.add([e])},n.getTabRadius=function(e){if(1===this.numOfTabs)return 6;switch(e){case 0:return{tl:6,bl:6};case this.numOfTabs-1:return{tr:6,br:6};default:return 0}},n.createTabs=function(){this.tabs=[];for(var e=this.width/this.numOfTabs,t=0;t<this.numOfTabs;t++){var n=this.getTabRadius(t),i=new Gi.Z(this.scene,0,0,e+1,this.height+2,n,this.themeColor);i.setAlpha(0===t?1:0),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,0,e+1)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var r=t-(this.numOfTabs/2-.5-a)*i,s=0;s<e.length;s++)e[s].setPosition(r+s*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t!==e?0:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,Ri.Z)(t,[{key:"themeColor",get:function(){return kr}},{key:"highlightColor",get:function(){return 3774208}}]),t}(Phaser.GameObjects.Container),Dr=Lr,Rr=Ir.iD.TAB_SELECTOR,Br=Rr.WIDTH,Nr=Rr.HEIGHT,Mr=function(e){function t(t){var n,i=t.scene,a=t.tabNames;return(n=e.call(this,i,Br,Nr,a.length)||this).tournamentsContainer=void 0,n.tabNames=void 0,n.labels=void 0,n.currentIndex=0,n.tournamentsContainer=t,n.tabNames=a,n.createLabels(),n.createTabSwitchingAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createLabels=function(){var e,t=this,n=p()(e=this.tabNames).call(e,(function(e,n){var i=t.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:t.scene.fontSize(oi.Z.TAB_SELECTOR_LABEL),text:e,origin:{x:.5,y:.5}});return n>0?i.setTint(t.themeColor):i.setTint(t.highlightColor),i}));this.addLabels(n),this.labels=n},n.createTabSwitchingAnimation=function(){var e=this;this.callback=function(t){e.labels.forEach((function(n,i){n.setTint(t==i?e.highlightColor:e.themeColor)}));var n=e.currentIndex<t?40:-40;e.scene.tweens.add({targets:[e.tournamentsContainer.scrollers[e.currentIndex],e.tournamentsContainer.scrollerManagers[e.currentIndex].noTournamentBlock],x:-n,alpha:0,duration:400,ease:Phaser.Math.Easing.Sine.Out}),e.tournamentsContainer.scrollers[e.currentIndex].setEnable(!1),e.scene.tweens.add({targets:[e.tournamentsContainer.scrollers[t],e.tournamentsContainer.scrollerManagers[t].noTournamentBlock],x:{from:n,to:0},alpha:1,duration:300,ease:Phaser.Math.Easing.Sine.In}),e.tournamentsContainer.scrollers[t].setEnable(!0),e.currentIndex=t}},t}(Dr),Gr=Mr,Ur="This competition is over",Fr="Competition ends in",Zr=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,i.Z)(o().mark((function e(){var t,i,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),i=1e3*n.endTime-t,a=Math.round(Math.abs(i)/864e5),i<0&&(i=0),0!==i){e.next=7;break}return n.timerText.setText(Ur),e.abrupt("return");case 7:a>=1?(r=1===a,n.timerText.setText(Fr+" "+a+" "+(r?"day":"days"))):n.timerText.setText(Fr+" "+(0,xn.F0)(Math.abs(i),!0));case 8:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,a.Z)(n)),n}(0,r.Z)(t,e);var n=t.prototype;return n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:.5,y:.5}}),this.timerText.setTint(16579837),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(0!=this.endTime?(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown})):this.timerText.setText(Ur))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),Hr=n(493),Wr=N.Z.GAMEPLAY_DEFAULT,zr=Wr.KEY,Yr=Wr.FRAME,Vr=function(e){function t(t){var n;return(n=e.call(this,t)||this).medalNo123=void 0,n.customizedMedal=void 0,n.rankLabel=void 0,n.rank=1,n.setSize(20,20),n.createMedal123(),n.createCustomizedMedal(),n.createRankLabel(),n}(0,r.Z)(t,e);var n=t.prototype;return n.getRank=function(){return this.rank},n.setRank=function(e){var t=function(e){return e>99?"99+":0===e?"?":e.toString()}(e);switch(this.rank=e,this.rankLabel.setText(t),this.medalNo123.kill(),this.customizedMedal.kill(),t){case"1":this.medalNo123.revive(),this.medalNo123.setFrame(Yr.GOLD),this.rankLabel.setTint(16777215),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,.5,1.25);break;case"2":this.medalNo123.revive(),this.medalNo123.setFrame(Yr.SILVER),this.rankLabel.setTint(5658198),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,.5,1.25);break;case"3":this.medalNo123.revive(),this.medalNo123.setFrame(Yr.BRONZE),this.rankLabel.setTint(16777215),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,.5,1.25);break;default:this.customizedMedal.revive(),this.rankLabel.setTint(3774208),Phaser.Display.Align.In.Center(this.rankLabel,this.customizedMedal,0,.5)}},n.createMedal123=function(){this.medalNo123=this.scene.add.image(0,0,zr,Yr.GOLD),this.medalNo123.setWorldSize(19,20.5),this.add(this.medalNo123)},n.createCustomizedMedal=function(){this.customizedMedal=this.scene.add.image(0,0,zr,Yr.CUSTOM_MEDAL),this.customizedMedal.setWorldSize(20,20),this.add(this.customizedMedal)},n.createRankLabel=function(){this.rankLabel=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5},text:""+this.rank}),this.add(this.rankLabel)},t}(Phaser.GameObjects.Container);var Kr=N.Z.DEFAULT,jr=Kr.KEY,Jr=Kr.FRAME,Xr=N.Z.GAMEPLAY_DEFAULT,qr=Xr.KEY,Qr=Xr.FRAME,$r={x:0,y:.5},es=/^[A-Za-z0-9 ]*$/,ts=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.currentPlayerBackground=void 0,i.avatar=void 0,i.normalTextUsername=void 0,i.bitmapTextUsername=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.scene=t,i.setSize(303,32),i.createCurrentPlayerBackground(),i.createMedalIcon(),i.createAvatar(),i.createNormalTextUsername(),i.createBitmapTextUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.isPlayer=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.createCurrentPlayerBackground=function(){this.currentPlayerBackground=new Gi.Z(this.scene,0,0,303,44,8,0).setAlpha(.25),this.add(this.currentPlayerBackground)},n.createAvatar=function(){this.avatar=new Ti(this.scene,{key:jr,background:Jr.BLANK,width:42,height:42,loadDelay:100}),this.avatar.update(),this.avatar.background.kill(),this.avatar.loadPhoto(GameCore.Utils.String.generateObjectId(),cn.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createNormalTextUsername=function(){this.normalTextUsername=this.scene.make.text({style:{fontFamily:$e.Z.FONT_FAMILY},origin:$r}),this.normalTextUsername.setHighQuality(),this.normalTextUsername.setFontSize(16),this.add(this.normalTextUsername)},n.createBitmapTextUsername=function(){this.bitmapTextUsername=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:$r,text:"Waiting"}),this.add(this.bitmapTextUsername)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,qr,Qr.MEDAL_STAR),this.scoreIcon.setWorldSize(20,20),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new Vr(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(0===e?"?":""+e)},n.setUsername=function(e){var t=GameCore.Utils.String.getShortName(e,12),n=GameCore.Utils.String.removeDiacritics(t);es.test(n)?(this.bitmapTextUsername.setText(n),this.normalTextUsername.kill(),this.bitmapTextUsername.revive()):(this.normalTextUsername.setText(n),this.normalTextUsername.revive(),this.bitmapTextUsername.kill())},n.getTimerIcon=function(){return this.scoreIcon},n.updateData=function(e){var t,n,i=e.playerId,a=void 0===i?"10":i,r=e.name,s=void 0===r?"???":r,o=e.photo,c=void 0===o?"":o,u=e.score,l=void 0===u?0:u,h=e.rank,d=void 0===h?0:h;this.payload&&(t=e,n=this.payload,t.playerId===n.playerId&&t.photo===n.photo&&t.score===n.score&&t.rank===n.rank&&t.name===n.name)||(this.payload=e,this.isPlayer=a===this.scene.player.getPlayerId(),this.scoreIcon.setAlpha(0),this.score.setAlpha(0),this.normalTextUsername.setAlpha(0),this.bitmapTextUsername.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),0!==l||this.isPlayer?(this.setUsername(s),this.avatar.loadPhoto(a,c,100),this.medalIcon.setRank(d)):(this.setUsername("Waiting..."),this.avatar.loadPhoto(GameCore.Utils.String.generateObjectId(),cn.Z.AVATAR.FILE,100),this.medalIcon.setRank(0)),this.medalIcon.revive(),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.alignComponents=function(){var e=this;Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-8),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,6),[this.normalTextUsername,this.bitmapTextUsername].forEach((function(t){Phaser.Display.Align.To.RightCenter(t,e.avatar,3)})),Phaser.Display.Align.In.RightCenter(this.score,this,-8),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.scoreIcon,this.score,this.avatar,this.bitmapTextUsername,this.normalTextUsername],props:{alpha:{from:0,to:1}},duration:150})},(0,Ri.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer?this.currentPlayerBackground.revive():this.currentPlayerBackground.kill()}}]),t}(Phaser.GameObjects.Container);var ns=Ir.iD.MAX_LEADERS,is=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){var t=this;if(!function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=L()(n=_()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),r=L()(i=_()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),s=0;s<a.length;s++){var o=a[s],c=r[s];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0}(this.payload,e)){this.payload=L()(e).call(e,(function(e,t){return t.score-e.score}));var n=p()(e).call(e,(function(n){var i=w()(e).call(e,(function(e){return e.score>n.score})).length+1;return i===e.length&&t.scene.player.getPlayerId()===n.playerId&&i<n.rank&&(i=n.rank),(0,d.Z)({},n,{rank:i})}));console.log("updateLeaders: ",e),this.leaders.forEach((function(e,t){e.updateData(n[t])}))}},n.createLeaders=function(){for(var e=0;e<ns;e++){var t=new ts(this.scene);this.leaders.push(t),e===ns-1&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n)}this.add(this.leaders)},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+12*(t-1);this.setSize(303,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,12):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new Hr.Z(this.scene),this.loading.setScale(.8),this.add(this.loading),this.loading.kill()},n.setLoading=function(e){},n.showLeaders=function(){var e=this;this.loading.kill(),this.leaders.forEach((function(t,n){t.setAlpha(0).revive(),e.scene.tweens.add({targets:t,alpha:1,delay:100*n})}))},t}(Phaser.GameObjects.Container);function as(e,t){var n="undefined"!==typeof Be()&&Me()(e)||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"===typeof e)return rs(e,t);var i=_()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return De()(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rs(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}for(var ss=Ir.iD.MAX_LEADERS,os={playerId:"10",name:"???",photo:"",score:0,rank:0},cs=[],us=0;us<ss;us++)cs.push((0,d.Z)({},os,{rank:us+1}));for(var ls=function(){function e(e,t,n){void 0===n&&(n=ss),this.scene=void 0,this.leaderboardId=void 0,this.maxLeaderCount=ss,this.scene=e,this.leaderboardId=t,this.maxLeaderCount=n}var t=e.prototype;return t.updateLeaderboardId=function(e){this.leaderboardId=e},t.getLeaderPayloadPlaceholders=function(){var e;return u()(e=[]).call(e,cs)},t.getRawLeadersAsync=function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.leaderboardId){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,(0,Er.H$)(this.leaderboardId,{limit:this.maxLeaderCount});case 4:return t=e.sent,e.abrupt("return",w()(t).call(t,(function(e){return null!==e&&void 0!==e})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getRawLeadersProfileIds=function(e){for(var t,n=[],i=as(e);!(t=i()).done;){var a=t.value;if(a&&GameCore.Utils.Object.hasOwn(a,"playerId")){var r=a.playerId;"string"===typeof r&&n.push(r)}}return n},t.getProfilesDataAsync=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.scene.profile.requestProfiles(t);case 2:return e.abrupt("return",this.scene.profile.getProfiles());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.parseRawLeadersIntoPayloadsAsync=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u,l,h,d,f,p,g,m;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getRawLeadersProfileIds(t),e.next=3,this.getProfilesDataAsync(n);case 3:i=e.sent,a=[],r=as(t);case 6:if((s=r()).done){e.next=27;break}if(c=s.value){e.next=10;break}return e.abrupt("continue",25);case 10:if(GameCore.Utils.Object.hasOwn(c,"playerId")){e.next=12;break}return e.abrupt("continue",25);case 12:if(GameCore.Utils.Object.hasOwn(c,"score")){e.next=14;break}return e.abrupt("continue",25);case 14:if(GameCore.Utils.Object.hasOwn(c,"rank")){e.next=16;break}return e.abrupt("continue",25);case 16:if(u=c.playerId,l=c.score,h=c.rank,"string"===typeof u){e.next=19;break}return e.abrupt("continue",25);case 19:if("string"===typeof l){e.next=21;break}return e.abrupt("continue",25);case 21:if("number"===typeof h){e.next=23;break}return e.abrupt("continue",25);case 23:(d=i[u])?(f=d.name,p=d.photo,g={playerId:u,photo:p,score:parseInt(l),rank:h,name:f},a.push(g)):(m={playerId:u,photo:"",score:parseInt(l),rank:h,name:"Player"},a.push(m));case 25:e.next=6;break;case 27:return e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.isPlayerInLeaderPayloads=function(e){for(var t,n=this.scene.player.getPlayer().playerId,i=as(e);!(t=i()).done;){if(t.value.playerId===n)return!0}return!1},t.getYouLeaderPayloadPlaceholder=function(){var e=this.scene.player.getPlayer();return{playerId:e.playerId,photo:e.photo,score:0,rank:0,name:"You"}},t.getYouLeaderPayloadAsync=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.leaderboardId){e.next=2;break}return e.abrupt("return",null);case 2:return t=this.scene.player.getPlayer(),n=t.playerId,i=t.name,a=t.photo,e.next=5,(0,Er.xB)(n,this.leaderboardId);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s=r.score,c=r.rank,e.abrupt("return",{playerId:n,photo:a,score:s,rank:c,name:i});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getProcessedLeaderPayloadAsync=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,c,u,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getLeaderPayloadPlaceholders(),n=t.length,e.next=4,ae().all([this.getRawLeadersAsync(),this.getYouLeaderPayloadAsync()]);case 4:return i=e.sent,a=i[0],r=i[1],e.next=9,this.parseRawLeadersIntoPayloadsAsync(a);case 9:if(s=e.sent,c=s.length,s.forEach((function(e,n){t[n]=e})),this.isPlayerInLeaderPayloads(s));else for(t[u=c<n?c:n-1]=r||this.getYouLeaderPayloadPlaceholder(),l=u+1;l<n;l++)t[l].rank=0;return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),hs=Ir.iD.MAX_LEADERS,ds={playerId:"10",name:"???",photo:"",score:0,rank:0},fs=[],ps=0;ps<hs;ps++)fs.push((0,d.Z)({},ds,{rank:ps+1}));var gs=function(e){function t(t,n,i){var r;return(r=e.call(this,t)||this).background=void 0,r.leaderList=void 0,r.payload=void 0,r.leaderListApiService=void 0,r.setSizeContainer(n,i),r.addLeaderList(),r.createLeaderListApiService(),r.scene.add.existing((0,a.Z)(r)),r}(0,r.Z)(t,e);var n=t.prototype;return n.createLeaderListApiService=function(){this.leaderListApiService=new ls(this.scene,void 0)},n.updateInfo=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("payload: ",t),this.payload=t,e.next=5,this.fetchLeaderboardData();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("updateInfo",e.t0),this.kill();case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),n.fetchLeaderboardData=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.leaderList.setLoading(!0),e.prev=1,this.payload.payload){e.next=4;break}throw new Error("Payload is empty");case 4:if(!this.payload.payload.leaderboard){e.next=8;break}this.leaderList.updateLeaders(this.payload.payload.leaderboard),e.next=16;break;case 8:if(n=null==(t=this.payload.payload)?void 0:t.leaderboardId){e.next=11;break}throw new Error("Leaderboard ID is not defined");case 11:return this.leaderListApiService.updateLeaderboardId(n),e.next=14,this.leaderListApiService.getProcessedLeaderPayloadAsync();case 14:i=e.sent,this.leaderList.updateLeaders(i);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(1),new Error("Error while fetching leaderboard data");case 21:return e.prev=21,this.leaderList.setLoading(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[1,18,21,24]])})));return function(){return e.apply(this,arguments)}}(),n.setSizeContainer=function(e,t){var n=e||343,i=t||372;this.setSize(n,i);this.background=new ft(this.scene,{key:"block-background",radius:6,border:24,width:n,height:i}),this.add(this.background)},n.addLeaderList=function(){this.leaderList=new is(this.scene),this.add(this.leaderList)},t}(Phaser.GameObjects.Container),ms=function(e){function t(t,n,i){var a;a=e.call(this,t,n,i)||this;var r=new Gi.Z(a.scene,0,0,n,i,16,16777215,1);return a.add(r),a}return(0,r.Z)(t,e),t.prototype.playAnimation=function(){new pt.Z({targets:this.getAll(),duration:1e3,props:{scale:"*=1.05"}}).play()},t}(rt.Z),vs=N.Z.GAMEPLAY_DEFAULT.FRAME,ys=Ir.iD.LEADER_LIST,Es=function(e){return e.JOIN="join",e.CONTINUE="continue",e}({}),Ss=function(e){function t(t){var n;return(n=e.call(this,t,ys.WIDTH,42)||this)._playLabel=void 0,n._cupIcon=void 0,n._buttonState=Es.JOIN,n.joinLabel=void 0,n.continueLabel=void 0,n.setName("joinButton"),n.createJoinLabel(),n.createContinueLabel(),n.playAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createJoinLabel=function(){this.joinLabel=new ca(this.scene,8,"Join tournament",vs.CUP),this.add(this.joinLabel)},n.createContinueLabel=function(){this.continueLabel=new ca(this.scene,8,"Continue tournament",vs.CUP),this.add(this.continueLabel),this.continueLabel.kill()},n.switchState=function(e){if(e!==this._buttonState)switch(e){case Es.JOIN:this._buttonState=Es.JOIN,this.joinLabel.revive(),this.continueLabel.kill();break;case Es.CONTINUE:this._buttonState=Es.CONTINUE,this.joinLabel.kill(),this.continueLabel.revive();break;default:console.log("unhandled state")}},(0,Ri.Z)(t,[{key:"playLabel",get:function(){return this._playLabel}},{key:"cupIcon",get:function(){return this._cupIcon}},{key:"buttonState",get:function(){return this._buttonState}}]),t}(ms),Ts=N.Z.DEFAULT,As=Ts.KEY,Cs=Ts.FRAME,bs=N.Z.GAMEPLAY_DEFAULT,Is=bs.KEY,ws=bs.FRAME,xs=function(e){function t(t,n){var i;return void 0===n&&(n=!1),(i=e.call(this,t)||this).scene=void 0,i._isPlayer=!1,i.normalPlayerBackground=void 0,i.border=void 0,i.avatar=void 0,i.username=void 0,i.score=void 0,i.medalIcon=void 0,i.scoreIcon=void 0,i.payload=void 0,i.instantPlayerVisualIndicator=!1,i.scene=t,i.setSize(303,44),i.createNormalPlayerBackground(),i.createBorder(),i.createMedalIcon(),i.createAvatar(),i.createUsername(),i.createScore(),i.createScoreIcon(),i.alignComponents(),i.isPlayer=n,i}(0,r.Z)(t,e);var n=t.prototype;return n.createNormalPlayerBackground=function(){this.normalPlayerBackground=new Gi.Z(this.scene,0,0,this.width,this.height,8,16777215).setAlpha(1),this.add(this.normalPlayerBackground)},n.createBorder=function(){var e=this.scene.add.graphics();e.lineStyle(1,16777215),e.strokeRoundedRect(-this.width/2,-this.height/2,this.width,this.height,8),this.add(e),this.border=e},n.createAvatar=function(){this.avatar=new Ti(this.scene,{key:As,background:Cs.BLANK,width:42,height:42,loadDelay:100}),this.avatar.update(),this.avatar.background.kill(),this.avatar.loadPhoto(GameCore.Utils.String.generateObjectId(),cn.Z.AVATAR.FILE,100),this.add(this.avatar)},n.createUsername=function(){this.username=this.scene.make.text({style:{fontFamily:$e.Z.FONT_FAMILY},origin:{x:0,y:.5}}),this.username.setHighQuality(),this.username.setFontSize(16),this.add(this.username)},n.createScore=function(){this.score=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),origin:{x:1,y:.5}}),this.add(this.score),this.setScore(0)},n.createScoreIcon=function(){this.scoreIcon=this.scene.add.image(0,0,Is,ws.MEDAL_STAR),this.scoreIcon.setWorldSize(20,20),this.add(this.scoreIcon)},n.createMedalIcon=function(){this.medalIcon=new Vr(this.scene),this.medalIcon.kill(),this.add(this.medalIcon)},n.setScore=function(e){this.score.setText(""+e)},n.setUsername=function(e){var t=GameCore.Utils.String.getShortName(e,12),n=GameCore.Utils.String.removeDiacritics(t);this.username.setText(n)},n.getTimerIcon=function(){return this.scoreIcon},n.updateData=function(e){var t,n,i=e.playerId,a=void 0===i?"10":i,r=e.name,s=void 0===r?"???":r,o=e.photo,c=void 0===o?"":o,u=e.score,l=void 0===u?0:u,h=e.rank,d=void 0===h?0:h;this.payload&&(t=e,n=this.payload,t.playerId===n.playerId&&t.photo===n.photo&&t.score===n.score&&t.rank===n.rank&&t.name===n.name)||(this.payload=e,this.isPlayer=a===this.scene.player.getPlayerId(),this.scoreIcon.setAlpha(0),this.score.setAlpha(0),this.username.setAlpha(0),this.avatar.setAlpha(0),this.setScore(l),this.medalIcon.setRank(d),this.updateNormalPlayerBackground(d),0===l?(this.setUsername("Waiting..."),this.avatar.loadPhoto(GameCore.Utils.String.generateObjectId(),cn.Z.AVATAR.FILE,100)):(this.setUsername(s),this.avatar.loadPhoto(a,c,100)),this.medalIcon.revive(),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8),this.playRecentlyUpdatedComponentEntrancesAnimation())},n.getBackgroundColorViaRank=function(e){switch(e){case 1:return 16771094;case 2:return 16777215;case 3:return 14265494;default:return 0}},n.getBackgroundAlphaViaRank=function(e){return 1===e||2===e||3===e?.32:.25},n.updateNormalPlayerBackground=function(e){var t=this.getBackgroundColorViaRank(e),n=this.getBackgroundAlphaViaRank(e);this.normalPlayerBackground.setFillStyle(t,n)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.medalIcon,this,-8),Phaser.Display.Align.To.RightCenter(this.avatar,this.medalIcon,6),Phaser.Display.Align.To.RightCenter(this.username,this.avatar,3),Phaser.Display.Align.In.RightCenter(this.score,this,-8),Phaser.Display.Align.To.LeftCenter(this.scoreIcon,this.score,8)},n.playRecentlyUpdatedComponentEntrancesAnimation=function(){this.scene.add.tween({targets:[this.scoreIcon,this.score,this.username,this.avatar],props:{alpha:{from:0,to:1}},duration:150})},n.hideContent=function(){var e;if(this._isPlayer){this.border.kill(),this.normalPlayerBackground.revive();var t=this.getBackgroundAlphaViaRank((null==(e=this.payload)?void 0:e.rank)||1);this.normalPlayerBackground.setAlpha(t)}},n.showSpecialBackgroundAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){var n=[t.border];t.scene.add.tween({targets:n,duration:200,onStart:function(){n.forEach((function(e){return e.revive()}))},props:{alpha:{from:0,to:.25}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runScalingAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t,duration:200,ease:Phaser.Math.Easing.Cubic.In,props:{scale:.95},onComplete:function(){t.scene.add.tween({targets:t,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],props:{scale:1},onComplete:e})}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isPlayer){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ae().all([this.showSpecialBackgroundAnimation(),this.runScalingAnimation()]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"isPlayer",get:function(){return this._isPlayer},set:function(e){this._isPlayer=e,this._isPlayer&&this.instantPlayerVisualIndicator?(this.border.revive(),this.normalPlayerBackground.kill()):(this.border.kill(),this.normalPlayerBackground.revive())}}]),t}(Phaser.GameObjects.Container);var _s=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.leaders=[],n.loading=void 0,n.payload=[],n.scene=t,n.createLeaders(),n.alignLeaders(),n.createLoading(),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateLeaders=function(e){(function(e,t){var n,i;if(e.length!==t.length)return!1;for(var a=L()(n=_()(e).call(e)).call(n,(function(e,t){return e.rank-t.rank})),r=L()(i=_()(t).call(t)).call(i,(function(e,t){return e.rank-t.rank})),s=0;s<a.length;s++){var o=a[s],c=r[s];if(o.playerId!==c.playerId||o.photo!==c.photo||o.score!==c.score||o.rank!==c.rank||o.name!==c.name)return!1}return!0})(this.payload,e)||(this.payload=e,this.leaders.forEach((function(t,n){t.updateData((0,d.Z)({},e[n]))})))},n.createLeaders=function(){for(var e=0;e<4;e++){var t=new xs(this.scene);this.leaders.push(t),3===e&&(t.isPlayer=!0);var n={playerId:e.toString(),photo:"",score:0,rank:e+1,name:"player"};t.updateData(n)}this.add(this.leaders)},n.alignLeaders=function(){var e=this,t=this.leaders.length,n=t*this.leaders[0].height+8*(t-1);this.setSize(303,n),this.leaders.forEach((function(t,n){0!==n?Phaser.Display.Align.To.BottomCenter(t,e.leaders[n-1],0,8):Phaser.Display.Align.In.TopCenter(t,e)}))},n.createLoading=function(){this.loading=new Hr.Z(this.scene).setTint(12237498),this.add(this.loading)},n.hideContent=function(){this.leaders.forEach((function(e){return e.setAlpha(0)})),this.leaders.forEach((function(e){return e.hideContent()}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p()(t=this.leaders).call(t,(function(e,t){return new(ae())((function(n){r.scene.add.tween({targets:[e],duration:250,delay:250*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y},scale:{from:.85,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=3,ae().all(i);case 3:return a=p()(n=this.leaders).call(n,(function(e){return e.runEntranceAnimation()})),e.next=6,ae().all(a);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container);for(var Os=N.Z.GAMEPLAY_DEFAULT,Ps=Os.KEY,ks=Os.FRAME,Ls=Ir.iD.LEADER_LIST,Ds=oi.Z.TOURNAMENT_BLOCK.TITLE,Rs=16777215,Bs=Ls.WIDTH,Ns=143.5,Ms=48,Gs={playerId:"10",name:"???",photo:"",score:0,rank:0},Us=[],Fs=0;Fs<4;Fs++)Us.push((0,d.Z)({},Gs,{rank:Fs+1}));var Zs=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.title=void 0,n.timer=void 0,n.topLine=void 0,n.bottomLine=void 0,n.leaderList=void 0,n.rematchButton=void 0,n.newGameButton=void 0,n.lines=[],n.buttons=[],n.scene=t,n.setSize(343,418),n.createBackground(),n.createTitle(),n.createTimer(),n.createTopLine(),n.createLeaderList(),n.createBottomLine(),n.createRematchButton(),n.createNewGameButton(),n.alignComponents(),n.createCloseButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.setSize(this.width,this.height);var e=new ft(this.scene,{key:"tournament-result-container",radius:6,border:24,width:this.width,height:this.height});this.add(e)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(Ds),text:"Summer Tournament",origin:{x:.5,y:.5}}),this.add(this.title)},n.createTimer=function(){this.timer=new Zr(this.scene),this.add(this.timer)},n.createTopLine=function(){this.topLine=this.scene.add.line(0,0,0,0,Ls.WIDTH,0,Rs,.2),this.add(this.topLine),this.lines.push(this.topLine)},n.createLeaderList=function(){this.leaderList=new _s(this.scene),this.leaderList.loading.kill(),this.add(this.leaderList)},n.createBottomLine=function(){this.bottomLine=this.scene.add.line(0,0,0,0,Ls.WIDTH,0,Rs,.2),this.add(this.bottomLine),this.lines.push(this.bottomLine)},n.createRematchButton=function(){var e=this;this.rematchButton=new rt.Z(this.scene,Ns,Ms),this.rematchButton.onClick=function(){e.scene instanceof vu&&e.scene.gameplay.replayGame(!0),e.scene.screen.close(l.o4.TOURNAMENTS_RESULT_SCREEN)},this.rematchButton.setName("RetryTournament");var t=new Gi.Z(this.scene,0,0,Ns,Ms,16,16777215,.24),n=this.scene.add.graphics();n.lineStyle(1,16777215),n.strokeRoundedRect(-71.75,-24,Ns,Ms,16);var i=new ca(this.scene,8,"Try Again",ks.IC_REPLAY);i.clearTint(),i.getIcon().setTintFill(16777215),this.rematchButton.add([t,n,i]).setSize(Ns,Ms),this.add([this.rematchButton]),this.buttons.push(this.rematchButton)},n.createNewGameButton=function(){var e=this;this.newGameButton=new Ki.Z(this.scene,Ns,Ms,16,16777215),this.newGameButton.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.scene.handlePlaySingle(!0);case 2:e.scene.screen.close(l.o4.TOURNAMENTS_RESULT_SCREEN);case 3:case"end":return t.stop()}}),t)}))),this.newGameButton.setName("NewGame");var t=new ca(this.scene);this.newGameButton.add(t),this.newGameButton.setSize(Ns,Ms),this.add([this.newGameButton]),this.buttons.push(this.newGameButton)},n.createCloseButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new rt.Z(this.scene,40,40);this.add(t);var n=this.scene.add.image(0,0,Ps,ks.IC_BG_OFF);n.setWorldSize(40,40);var a=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});a.setCenterAlign(),t.add([n,a]),Phaser.Display.Align.In.TopRight(t,this,0,-0),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.scene.screen.close(l.o4.TOURNAMENTS_RESULT_SCREEN);case 1:case"end":return t.stop()}}),t)})))}},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.title,this,0,-16),Phaser.Display.Align.To.BottomCenter(this.timer,this.title,0,6),Phaser.Display.Align.To.BottomCenter(this.topLine,this.timer,0,20),Phaser.Display.Align.To.BottomCenter(this.leaderList,this.topLine,0,20),Phaser.Display.Align.To.BottomCenter(this.bottomLine,this.leaderList,0,20),Phaser.Display.Align.To.BottomLeft(this.rematchButton,this.bottomLine,0,24),Phaser.Display.Align.To.BottomRight(this.newGameButton,this.bottomLine,0,24);var e=this.rematchButton.x,t=this.newGameButton.x;Phaser.Display.Align.In.BottomCenter(this.rematchButton,this,0,-16),Phaser.Display.Align.In.BottomCenter(this.newGameButton,this,0,-16),this.rematchButton.x=e,this.newGameButton.x=t},n.updateTitle=function(e){void 0===e&&(e="Your tournament");var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),!(this.title.width<=Bs))for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>Bs){this.title.setText(t.substring(0,n-1)+"...");break}},n.updateTimer=function(e){this.timer.setCountdown(e)},n.updateLeadersViaId=function(){var e=(0,i.Z)(o().mark((function e(t,n){var i,a,r,s,c,l,h,f,g,m,v,y,E,S=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u()(i=[]).call(i,Us),this.leaderList.loading.revive(),this.leaderList.bringToTop(this.leaderList.loading),e.prev=3,r=[],void 0===t){e.next=9;break}return e.next=8,(0,Er.H$)(t,{limit:4});case 8:r=e.sent;case 9:if(console.log("update tournament result",{leaders:r}),!(r.length>0)){e.next=28;break}return c=p()(r).call(r,(function(e){return e.playerId})),e.next=14,this.scene.profile.requestProfiles(c);case 14:if(l=this.scene.profile.getProfiles(),h=!1,f=w()(s=p()(r).call(r,(function(e){var t=e.playerId,n=e.score,i=e.rank,a=l[t];if(t===S.scene.player.getPlayerId()&&(h=!0),!a)return{playerId:t,photo:"",score:n,rank:i,name:"Player"};var r=a.name;return{playerId:t,photo:a.photo,score:n,rank:i,name:r}}))).call(s,(function(e){return null!==e})),!(f.length<1)){e.next=19;break}throw new Error("Leaderboard is empty");case 19:if(this.leaderList.revive(),f.forEach((function(e,t){a[t]=e})),h||void 0===t){e.next=26;break}return e.next=24,this.getCurrentPlayerLeaderDataPayload(t);case 24:g=e.sent,a[3]=(0,d.Z)({},g);case 26:e.next=30;break;case 28:m=this.scene.player.getPlayer(),v=m.playerId,y=m.name,E=m.photo,a[0]={playerId:v,name:y,photo:E,score:n,rank:1};case 30:console.log("update tournament result",{leadersDataPayload:a}),this.leaderList.updateLeaders(a),e.next=37;break;case 34:e.prev=34,e.t0=e.catch(3),console.warn(e.t0);case 37:return e.prev=37,this.leaderList.loading.kill(),e.finish(37);case 40:case"end":return e.stop()}}),e,this,[[3,34,37,40]])})));return function(t,n){return e.apply(this,arguments)}}(),n.getCurrentPlayerLeaderDataPayload=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,a,r,s,c,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.scene.player.getPlayer(),i=n.playerId,a=n.name,r=n.photo,e.next=3,(0,Er.xB)(i,t);case 3:return s=e.sent,console.log({player:s}),c=s.score,u=s.rank,e.abrupt("return",{playerId:i,photo:r,score:c,rank:u,name:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.hideContent=function(){this.leaderList.hideContent(),this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),this.buttons.forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLines=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=p()(t=this.lines).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:[e],duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p()(t=this.buttons).call(t,(function(e){return new(ae())((function(t){i.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){e.setDisabled(!1),t(),i.newGameButton.runPulsate()}})}))})),e.next=3,ae().all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLines();case 2:return e.next=4,this.leaderList.runEntranceAnimation();case 4:if(!(this.scene instanceof vu)){e.next=7;break}return e.next=7,this.scene.gameplay.processFlowOnShowResult(!0);case 7:return e.next=9,this.runEntranceAnimationButtons();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Hs=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.container=void 0,r.beams=void 0,r.bunting=void 0,r.footer=void 0,r.closed=!1,r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e)}))},r.scene=t,r.setBackground(),r.createContainer(),r.createBeams(),r.createBuntings(),r.createFooter(),r.createBottomLogo(),r.setDepth(l.Ks.POPUP),r}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new Zs(this.scene),this.add(this.container)},n.createBeams=function(){this.beams=new Aa(this.scene),this.add(this.beams),Phaser.Display.Align.In.TopCenter(this.beams,this)},n.createBuntings=function(){this.bunting=new Ua(this.scene),this.add(this.bunting),Phaser.Display.Align.In.TopCenter(this.bunting,this)},n.createFooter=function(){this.footer=new ja(this.scene,!1,l.o4.NO_MORE_MOVES_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){var t=(0,i.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.prototype.open.call(this,n),this.updateInfo(),this.container.setAlpha(1),this.container.setInteractive(),this.background.setAlpha(1),this.runOpenAnimation(),this.closed=!1,this.scene.children.bringToTop(this.scene.gameplay.confettiSmallFallDown),this.scene.gameplay.confettiSmallFallDown.run(8,0,0);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateInfo=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bn.getData().catch((function(){return{id:0,title:"Summer tournament",endTime:2e9,contextID:""}}));case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return");case 5:return this.container.updateTitle(i.title),this.container.updateTimer(i.endTime),a=null==(t=i.payload)?void 0:t.leaderboardId,r=(null==(n=this.data)?void 0:n.list.score)||1e3,e.next=11,this.container.updateLeadersViaId(a,r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.closeWithoutAnimation=function(){this.closed=!0,this.alpha=0,this.stopConfettiAnimation(),this.scene.gameplay.confettiSmallFallDown.emitter.killAll(),e.prototype.close.call(this)},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:return this.scene.audio.playSound(Se.Z.POPUP_SHOW),n=this.scene.ads.getBannerHeight(),this.container.setAlpha(0),this.container.y=n,this.container.hideContent(),this.bunting.stopWavingAnimation(),this.container.newGameButton.stopPulsate(),this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.container],ease:Phaser.Math.Easing.Back.Out,props:{y:{from:n,to:-n/2},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),e.next=14,this.bunting.runEntranceAnimation();case 14:this.bunting.playWavingAnimation(),this.slideInAnimation.play();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play(),this.bunting.stopWavingAnimation())},n.stopConfettiAnimation=function(){this.scene.gameplay.confettiSmallFallDown.emitter.stop()},t}(GameCore.Screen),Ws=Hs,zs=Ir.iD.LEADER_LIST,Ys=oi.Z.TOURNAMENT_BLOCK.TITLE,Vs=N.Z.GAMEPLAY_DEFAULT,Ks=Vs.KEY,js=Vs.FRAME,Js=16777215,Xs=zs.WIDTH,qs=function(e){function t(t){var n;return(n=e.call(this,t)||this).button=void 0,n.timerContainer=void 0,n.title=void 0,n.topLine=void 0,n.handleJoinTournament=(0,i.Z)(o().mark((function e(){var t,i,a,r,s,c,u,h,d,f,p,g,m,v,y,E,S;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bn.setData(n.payload),a=n.payload.id,r=n.payload.endTime,s=(null==(t=n.payload.payload)?void 0:t.leaderboardId)||"",c=(null==(i=n.payload.payload)?void 0:i.level)||1,console.warn({leaderboardId:s,tournamentID:a}),e.prev=6,e.next=9,n.scene.facebook.tournament.joinAsync(a.toString());case 9:return e.next=11,n.scene.storage.dispatch((0,wn.cQ)(a.toString(),s));case 11:return e.next=13,n.scene.storage.dispatch((0,In.li)());case 13:return u={leaderboardId:s,endTime:r,level:c},n.scene.player.joinTournament(u),(h=n.scene.screen.get(l.o4.NO_MORE_MOVES_SCREEN))&&h instanceof mr&&h.visible&&h.closeWithoutAnimation(),(d=n.scene.screen.get(l.o4.VICTORY_SCREEN))&&d instanceof Xa&&d.visible&&d.closeWithoutAnimation(),(f=n.scene.screen.get(l.o4.TOURNAMENTS_RESULT_SCREEN))&&f instanceof Ws&&f.visible&&f.closeWithoutAnimation(),n.scene.screen.close(l.o4.TOURNAMENTS_SCREEN),p=n.scene,g=n.payload.payload||{suitSize:Rn.Z.suitSize,difficulty:Rn.Z.difficulty},m=g.suitSize,v=g.difficulty,y=null,e.prev=25,e.next=28,window.game.facebook.getTournamentAsync();case 28:E=e.sent,y=E.getPayload(),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(25),console.warn(e.t0);case 35:S=y?JSON.parse(y):{suitSize:m,difficulty:v},null==p||p.gameplay.startGame({type:"constant",suitSize:S.suitSize,difficulty:S.difficulty}),e.next=48;break;case 39:if(e.prev=39,e.t1=e.catch(6),console.warn("error",e.t1),bn.clearData(),!GameCore.Utils.Valid.isObject(e.t1)){e.next=47;break}if(!GameCore.Utils.Object.hasOwn(e.t1,"code")){e.next=47;break}if("USER_INPUT"!==e.t1.code){e.next=47;break}return e.abrupt("return");case 47:throw e.t1;case 48:case"end":return e.stop()}}),e,null,[[6,39],[25,32]])}))),n.createTitle(),n.addTimerContainer(),n.createTopLine(),n.createButton(),n.createBottomLine(),n.createDebugButton(),n.alignLeaderList(),n.handleInput(),t.events.on(Phaser.Scenes.Events.UPDATE,(function(){var e;null!=(e=t.screen.get(l.o4.TOURNAMENTS_SCREEN))&&e.visible&&n.updateJoinButton()})),n}(0,r.Z)(t,e);var n=t.prototype;return n.updateInfo=function(){var t=(0,i.Z)(o().mark((function t(n){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTitle(n.title),this.updateTimer(n.endTime),t.next=4,e.prototype.updateInfo.call(this,n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateTitle=function(e){var t=GameCore.Utils.String.removeDiacritics(e);if(this.title.setText(t),!(this.title.width<=Xs))for(var n=1;n<t.length;n++)if(this.title.setText(t.substring(0,n)+"..."),this.title.width>Xs){this.title.setText(t.substring(0,n-1)+"...");break}},n.updateTimer=function(e){this.timerContainer.setCountdown(e)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(Ys),text:Qs(!0)+" Tournament",origin:{x:.5,y:.5}});this.add(e),this.title=e,Phaser.Display.Align.In.TopCenter(e,this,0,-16)},n.createTopLine=function(){var e=this.scene.add.line(0,0,0,0,zs.WIDTH,0,Js,.2);this.add(e),this.topLine=e,e.y=this.timerContainer.y+this.timerContainer.height/2+20},n.createButton=function(){this.button=new Ss(this.scene),this.add(this.button),Phaser.Display.Align.In.BottomCenter(this.button,this.background,0,-16)},n.createBottomLine=function(){var e=this.scene.add.line(0,0,0,0,zs.WIDTH,0,Js,.2);this.add(e),e.y=this.button.y-this.button.height/2-24},n.addTimerContainer=function(){this.timerContainer=new Zr(this.scene),this.add(this.timerContainer),Phaser.Display.Align.In.Center(this.timerContainer,this.background),this.timerContainer.y=this.title.y+this.title.height+6},n.createDebugButton=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,Ks,js.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"PL",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.TopRight(t,this),t.onClick=function(){console.log("payload",e.payload);var t=e.isCurrentTournamentBeingPlayed();if(console.log({beingPlayed:t}),!t){var n=e.scene.storage.getState(),i=(0,Tr.k)(n);console.log({tournamentId:i,thisID:e.payload.id})}console.log("title width",e.title.width),console.log("block width",e.width),console.log("top line width",e.topLine.width)}}},n.alignLeaderList=function(){Phaser.Display.Align.In.Center(this.leaderList,this),this.leaderList.setY(this.topLine.y+17+this.leaderList.height/2)},n.handleInput=function(){var e=this;this.button.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.button.buttonState!==Es.JOIN){t.next=18;break}return t.prev=1,e.scene.game.globalScene.screen.open(l.o4.NOTIFY_SCREEN,{message:"Joining tournament...",loading:!0}),t.next=5,(0,xn.qZ)(500);case 5:return t.next=7,e.handleJoinTournament();case 7:eo(100),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),window.game.globalScene.screen.open(l.o4.NOTIFY_SCREEN,{message:"Sorry, you cannot join at this time.",duration:3e3,loading:!1});case 13:return t.prev=13,e.updateTextPlay(),t.finish(13);case 16:t.next=19;break;case 18:e.scene.screen.close(l.o4.TOURNAMENTS_SCREEN);case 19:e.updateTextPlay();case 20:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))},n.updateJoinButton=function(){0===this.timerContainer.getRemain()?this.button.setDisabled(!0):this.button.setDisabled(!1),this.updateTextPlay()},n.isThisTournamentIdIdenticalToCurrentTournament=function(){var e=this.scene.storage.getState(),t=(0,Tr.k)(e);return GameCore.Utils.Valid.isNumber(t)?t===this.payload.id:!!GameCore.Utils.Valid.isString(t)&&t===""+this.payload.id},n.isCurrentTournamentBeingPlayed=function(){return this.isThisTournamentIdIdenticalToCurrentTournament()&&Un.Z.instance.isTournamentMode()},n.updateTextPlay=function(){this.button.switchState(this.isCurrentTournamentBeingPlayed()?Es.CONTINUE:Es.JOIN)},t}(gs);function Qs(e){void 0===e&&(e=!1);var t=new Date,n=e?Phaser.Math.RND.between(0,11):t.getMonth();return n<3?"Spring":n<6?"Summer":n<9?"Autumn":"Winter"}var $s=null,eo=function(e){$s&&clearTimeout($s),$s=setTimeout((function(){window.game.globalScene.screen.close(l.o4.NOTIFY_SCREEN)}),e)},to=n(511),no=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="TournamentPayloadInvalid",i.message=t||"The tournament payload invalid",i.payload=n,i}return(0,r.Z)(t,e),t}((0,sn.Z)(Error)),io=function(e){function t(t){var n;return(n=e.call(this,t,243,42)||this).buttonLabelContainer=void 0,n.setSize(243,42),n.setName("CreateNewTournament"),n.createButtonLabel(),n.playAnimation(),n}return(0,r.Z)(t,e),t.prototype.createButtonLabel=function(){this.buttonLabelContainer=new ca(this.scene,8,"Create Tournament"),this.add(this.buttonLabelContainer)},t}(ms),ao=N.Z.GAMEPLAY_DEFAULT,ro=ao.KEY,so=ao.FRAME,oo=function(e){function t(t,n,r,s){var c;return(c=e.call(this,t,n,r)||this).illustration=void 0,c.createNewTournamentButton=void 0,c.payload=void 0,c.scrollerManager=void 0,c.handleCreateTournament=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.scene.game.globalScene,e.prev=1,n=c.scene.player.getPlayer(),i=n.playerId,a=n.name,r={playerId:i,playerName:a,score:0,autoStartGame:!0,success:!0},t.screen.open(l.o4.NOTIFY_SCREEN,{message:"Creating tournament...",loading:!0}),e.next=7,(0,xn.qZ)(500);case 7:return e.next=9,(0,In.Sl)();case 9:return e.next=11,c.scene.storage.dispatch((0,wn.lj)(r));case 11:return e.next=13,c.scene.storage.dispatch((0,In.li)());case 13:return e.next=15,c.updateTournaments();case 15:return e.next=17,c.scene.facebook.getTournamentAsync();case 17:s=e.sent,u={id:s.getID(),title:s.getTitle()||a+"'s Tournament",endTime:s.getEndTime(),contextID:s.getContextID()},bn.setData(u),c.scene.screen.close(l.o4.TOURNAMENTS_SCREEN),c.scene.gameplay.detectConfigAndStartGame(),uo(0),e.next=34;break;case 26:if(e.prev=26,e.t0=e.catch(1),!GameCore.Utils.Valid.isObject(e.t0)){e.next=33;break}if(!GameCore.Utils.Object.hasOwn(e.t0,"code")){e.next=33;break}if("USER_INPUT"!==e.t0.code){e.next=33;break}return uo(0),e.abrupt("return");case 33:t.screen.open(l.o4.NOTIFY_SCREEN,{message:"Oops!\n You are not able to create\ntournaments right now.\n\nPlease try again later.",duration:2e3,loading:!1});case 34:case"end":return e.stop()}}),e,null,[[1,26]])}))),c.updateTournaments=(0,i.Z)(o().mark((function e(){var t,n,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,a.Z)(c),n=t.scrollerManager,i=n.tournamentsContainer,n.forceLoadData=!0,e.next=5,i.updateContainer();case 5:n.scroller.setEnable(!0);case 6:case"end":return e.stop()}}),e)}))),c.scrollerManager=s,c.setSize(311,326),c.createIllustration(),c.createText(),c.createButton(),c}(0,r.Z)(t,e);var n=t.prototype;return n.createIllustration=function(){var e=this.scene.add.image(0,0,ro,so.NO_TOURNAMENT);e.setWorldSize(240,240),this.add(e),this.illustration=e,Phaser.Display.Align.In.TopCenter(e,this)},n.createText=function(){var e=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(14),text:"No tournaments found",origin:{x:.5,y:.5}}).setTint(16579837);this.add(e),this.alignUnder(e,this.illustration)},n.createButton=function(){var e=this;this.createNewTournamentButton=new io(this.scene),this.add(this.createNewTournamentButton),this.createNewTournamentButton.onClick=function(){e.handleCreateTournament()},Phaser.Display.Align.In.BottomCenter(this.createNewTournamentButton,this)},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n)},t}(Phaser.GameObjects.Container),co=null,uo=function(e){co&&clearTimeout(co),co=setTimeout((function(){window.game.globalScene.screen.close(l.o4.NOTIFY_SCREEN)}),e)},lo=function(){function e(e,t,n){var i=this;this.scene=void 0,this.name=void 0,this.scroller=void 0,this.tournamentsContainer=void 0,this.noTournamentBlock=void 0,this.loadData=!1,this.debugNoTournament=!1,this.handleNoTournaments=function(){i.noTournamentBlock.revive(),i.scroller.kill()},this.scene=e.scene,this.tournamentsContainer=e,this.scroller=t,this.name=n||"",this.createNoTournamentBlock()}var t=e.prototype;return t.createNoTournamentBlock=function(){var e=this;this.noTournamentBlock=new oo(this.scene,0,0,this),this.tournamentsContainer.add(this.noTournamentBlock),this.tournamentsContainer.bringToTop(this.noTournamentBlock),this.noTournamentBlock.kill(),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){e.noTournamentBlock.active&&Phaser.Display.Align.In.Center(e.noTournamentBlock,e.scroller)}))},t.setMask=function(e){this.scroller.setMask(e),this.noTournamentBlock.setMask(e)},t.updateScroller=function(){var e=(0,i.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getListData(),this.scroller.revive(),!(t.length<1)){e.next=6;break}return this.scroller.setEnable(!1),this.handleNoTournaments(),e.abrupt("return");case 6:this.scroller.setEnable(!0),n=this.scroller.value,this.scroller.updateConfig(t),this.scroller.value=n,this.scroller.onTouchEnd();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.parseResponsesIntoTournaments=function(){var e=[];return this.filterTournament().forEach((function(t){try{var n=t.getID(),i=t.getPayload();if(!i)return;var a=JSON.parse(i),r=a.playerName;if(!a.leaderboardId)throw new no(null,a);var s={id:n,title:t.getTitle()||r+"'s Tournament",payload:a,endTime:t.getEndTime(),contextID:t.getContextID()};e.push(s)}catch(o){console.warn("parseResponsesIntoTournaments",o)}})),e},(0,Ri.Z)(e,[{key:"forceLoadData",get:function(){return this.loadData},set:function(e){this.loadData=e}},{key:"forceNoTournament",get:function(){return this.debugNoTournament&&!this.loadData},set:function(e){this.debugNoTournament=e}}]),e}(),ho=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){if(this.forceNoTournament)return[];var e=this.tournamentsContainer.getWorldTournamentsData();return w()(e).call(e,(function(e){return!!e.payload}))},n.filterTournament=function(){var e=this.tournamentsContainer.getTournaments();return w()(e).call(e,(function(e){var t=e.getPayload();if(!t)return!1;try{var n=JSON.parse(t);if(!n.suitSize||!n.difficulty)return!1}catch(i){return!1}return!0}))},t}(lo),fo=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).noTournamentBlock.createNewTournamentButton.kill(),a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments();return w()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return!(!i.suitSize||!i.difficulty)&&(i.playerId&&e!=i.playerId)}catch(a){return!1}}))},t}(lo),po=fo,go=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this).handleShowNoTournamentBlock=function(){S()(a.scroller.getChildren()).length<1&&(a.noTournamentBlock.revive(),a.noTournamentBlock.createNewTournamentButton.revive())},a.handleNoTournaments=function(){a.noTournamentBlock.revive(),a.noTournamentBlock.createNewTournamentButton.revive(),a.scroller.kill()},a.forceNoTournament=!1,a}(0,r.Z)(t,e);var n=t.prototype;return n.getListData=function(){return this.forceNoTournament?[]:this.parseResponsesIntoTournaments()},n.filterTournament=function(){var e=this.scene.player.getPlayerId(),t=this.tournamentsContainer.getTournaments(),n=w()(t).call(t,(function(t){var n=t.getPayload();if(!n)return!1;try{var i=JSON.parse(n);return!(!i.suitSize||!i.difficulty)&&(i.playerId&&e===i.playerId)}catch(a){return!1}}));return console.log(">>>>>>>>>>>>>",{result:n,tournaments:t}),n},t}(lo),mo=go,vo=function(e){function t(t,n,i,a,r,s){var o;return(o=e.call(this,t,n,i)||this).icon=void 0,o.text=void 0,o.createIcon(a,r),o.createText(s),o.add([o.icon,o.text]),o}(0,r.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e){this.text=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(oi.Z.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979)},t}(rt.Z),yo=N.Z.GAMEPLAY_DEFAULT,Eo=yo.KEY,So=yo.FRAME,To=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Eo,So.IC_SETTINGS,t.lang.Text.SETTINGS)||this).onClick=function(){t.game.globalScene.screen.open(l.o4.SETTINGS_SCREEN)},n}return(0,r.Z)(t,e),t}(vo),Ao=N.Z.GAMEPLAY_DEFAULT,Co=Ao.KEY,bo=Ao.FRAME,Io=function(e){function t(t){var n;return(n=e.call(this,t,40,40,Co,bo.CUP,"Tournaments")||this).onClick=function(){},n}return(0,r.Z)(t,e),t}(vo),wo=N.Z.GAMEPLAY_DEFAULT,xo=wo.KEY,_o=wo.FRAME,Oo=function(e){function t(t){var n;return(n=e.call(this,t,40,40,xo,_o.IC_UNDO,"Back to Game")||this).onClick=function(){t.screen.close(l.o4.TOURNAMENTS_SCREEN)},n}return(0,r.Z)(t,e),t}(vo),Po=Ir.iD.FOOTER,ko=Po.WIDTH,Lo=Po.HEIGHT,Do=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.settingsButton=void 0,n.tournamentsButton=void 0,n.gameButton=void 0,n.buttons=[],n.background=void 0,n.scene=t,n.setSize(ko,Lo),n.createBackgroundMask(),n.createBackground(),n.createButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.theme.getCurrentThemeConfig().backgroundKey,t=this.scene.add.image(0,0,e);t.setOrigin(.5,1),this.add(t),this.background=t,this.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){t.setTexture(e)})),this.updateBackgroundMask()},n.updateBackgroundMask=function(){var e=this.scene.world.isLandscape()?20:0,t=this.scene.world.getPixelRatio(),n=this.scene.ads.getBannerHeight(),i=this.background,a=this.scene.gameZone,r=a.width,s=a.height;i.setWorldSize(r,s),i.setCrop(0,667*t-(76+n)/i.scaleY-e*t,this.width*t,s*t),i.setY(n+this.height/2+e)},n.createBackground=function(){var e=this.scene.gameZone.width>ko?20:0,t=new Gi.Z(this.scene,0,0,this.width,this.height,e,2039583,.4);this.add(t),t.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.createGameButton(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new To(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.createTournamentsButton=function(){this.tournamentsButton=new Io(this.scene),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton)},n.createGameButton=function(){this.gameButton=new Oo(this.scene),this.add(this.gameButton),this.buttons.push(this.gameButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},t}(Phaser.GameObjects.Container),Ro=Do,Bo=Ir.iD.SCREEN_WIDTH,No=Ir.iD.HEADER,Mo=Ir.Gc.FRIENDS,Go=Ir.Gc.GLOBAL,Uo=Ir.Gc.YOU,Fo=[Go,Mo,Uo],Zo=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.header=void 0,n.footer=void 0,n.tab=void 0,n.scrollers=[],n.scrollerManagers=[],n.tabNames=Fo,n.tournaments=[],n.worldTournament=[],n.loading=void 0,n.updateContainer=(0,i.Z)(o().mark((function e(){var t,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.showLoading(!0),n.scrollerManagers.forEach((function(e){e.scroller.kill(),e.noTournamentBlock.kill()})),e.next=4,n.loadTournament();case 4:return e.next=6,n.loadWorldTournament();case 6:if(n.showLoading(!1),i=n.tab.currentIdx,n.scrollerManagers.forEach((function(e){e.updateScroller()})),n.tab.selectTab(i),null==(t=n.scrollers[i])||t.setEnable(!0),!GameCore.Utils.Device.isMobile()){e.next=13;break}return e.abrupt("return");case 13:n.scrollers.forEach((function(e,t){t!==i&&e.setEnable(!1)}));case 14:case"end":return e.stop()}}),e)}))),n.setSizeContainer(),n.addBackground(),GameCore.Utils.Device.isMobile()&&n.createHeaderBackground(),n.createHeader(),n.createFooter(),n.createTabSelector(),n.createScrollers(),n.createLoading(),GameCore.Utils.Device.isMobile()||n.addMask(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createLoading=function(){this.loading=new Hr.Z(this.scene),this.add(this.loading)},n.showLoading=function(e){e?this.loading.revive():this.loading.kill()},n.createHeaderBackground=function(){var e=this,t=this.scene.world.getPixelRatio(),n=this.scene.gameZone,i=n.width,a=n.height,r=this.scene.theme.getCurrentThemeConfig().backgroundKey,s=this.scene.add.image(0,-a/2,r);s.setOrigin(.5,0),s.setWorldSize(i,a);var o=108/s.scaleY;s.setCrop(0,0,this.width*t,o),s.setAlpha(1),this.add(s),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){s.y=-e.y-a/2})),this.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){s.setTexture(e)}))},n.getWorldTournamentsData=function(){return this.worldTournament},n.getTournaments=function(){return this.tournaments},n.setSizeContainer=function(){var e=this.scene.gameZone,t=e.width,n=e.height-No.HEIGHT;this.setSize(t,n)},n.createHeader=function(){this.header=new Pr(this.scene),this.add(this.header),this.bringToTop(this.header),this.header.setInteractive(),Phaser.Display.Align.In.TopCenter(this.header,this.background,0,-10)},n.createTabSelector=function(){this.tab=new Gr(this),this.add(this.tab),this.bringToTop(this.tab),this.alignTabSelectorUnderHeader()},n.alignTabSelectorUnderHeader=function(){this.tab&&(Phaser.Display.Align.In.Center(this.tab,this.background),this.tab.y=this.header.y+this.header.height)},n.createScrollers=function(){var e=this;this.scrollers=[],this.scrollerManagers=[],Fo.forEach((function(t){e.createScroller(t)})),this.scrollers.forEach((function(e,t){e.setX(Bo*t),t>0&&e.setAlpha(0)}))},n.createScroller=function(e){var t=GameCore.Utils.Device.isMobile()?this.header.height+this.tab.height:0,n=GameCore.Utils.Device.isMobile()?this.footer.height+10:0,i=Bo,a=this.distanceBetweenTabBottomAndFooterTop()+(GameCore.Utils.Device.isMobile()?t+this.footer.height:0),r=new to.Z(this.scene,{classType:qs,listConfigs:[],width:i,height:a,padding:24,marginTop:10+t,marginBottom:10+n});this.add(r),this.sendToBack(r),r.setEnable(!0),GameCore.Utils.Device.isMobile()?Phaser.Display.Align.In.TopCenter(r,this):this.alignUnder(r,this.tab),this.scrollers.push(r);var s=this.createScrollerManager(r,e);s&&this.scrollerManagers.push(s)},n.createScrollerManager=function(e,t){switch(t){case Go:return new ho(this,e,t);case Mo:return new po(this,e,t);case Uo:return new mo(this,e,t);default:return null}},n.distanceBetweenTabBottomAndFooterTop=function(){return this.footer.y-this.tab.y-(this.footer.height+this.tab.height)/2},n.alignUnder=function(e,t){var n=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0,n)},n.loadTournament=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.scene.facebook.tournament.getTournamentsAsync();case 3:this.tournaments=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.tournaments=[];case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),n.loadWorldTournament=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Er.Iy)();case 3:this.worldTournament=e.sent,console.log("worldTournament",this.worldTournament),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.worldTournament=[];case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),n.createFooter=function(){this.footer=new Ro(this.scene),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.world.isLandscape()?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t),this.footer.updateBackgroundMask()},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.background.kill(),this.add(this.background)},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.tab.borderLineWidth,i=this.tab.x,a=(this.footer.y-this.footer.height/2+(this.tab.y+this.tab.height/2))/2,r=this.distanceBetweenTabBottomAndFooterTop()-n-8,s=i-200,o=a-r/2+n/2;t.fillRoundedRect(s,o,400,r,0),this.scrollerManagers.forEach((function(e){e.setMask(t.createGeometryMask())})),this.scene.events.on(Phaser.Scenes.Events.UPDATE,(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},t}(Phaser.GameObjects.Container),Ho=Zo,Wo=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.tournamentsContainer=void 0,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i)},r.setDepth(l.Ks.POPUP),r.tournamentsContainer=new Ho(t),r.add(r.tournamentsContainer),r.setBackground(),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,r.setBackground),r.createBottomLogo(),r}(0,r.Z)(t,e);var n=t.prototype;return n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.tournamentsContainer.setAlpha(1),this.tournamentsContainer.updateContainer(),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){this.scene.audio.playSound(Se.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),zo=function(e){return e.WIN="win",e.LOSE="lose",e.DRAW="draw",e.WAITING_FOR_OPPONENT="waiting_for_opponent",e}(zo||{}),Yo=zo,Vo=n(226),Ko=N.Z.DEFAULT,jo=Ko.KEY,Jo=Ko.FRAME,Xo=N.Z.GAMEPLAY_DEFAULT,qo=Xo.KEY,Qo=Xo.FRAME,$o=function(e){function t(t){var n;return(n=e.call(this,t)||this)._avatar=void 0,n._username=void 0,n._crownZone=void 0,n.setSize(54,94),n.createAvatarFrame(),n.createCrownZone(),n.createText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createAvatarFrame=function(){this._avatar=new Ti(this.scene,{key:jo,background:Jo.BLANK,width:64,height:64,loadDelay:100}),this._avatar.update(),this._avatar.background.kill(),this._avatar.loadPhoto("avatar",cn.Z.AVATAR.FILE,100),this.add(this._avatar)},n.createText=function(){this._username=this.scene.make.text({style:{fontFamily:$e.Z.FONT_FAMILY},origin:{x:.5,y:.5}}),this._username.setHighQuality(),this._username.setFontSize(12),this._username.setText("Name"),this.add(this._username)},n.createCrownZone=function(){this._crownZone=this.scene.add.container(),this._crownZone.setSize(20,20),this.add(this._crownZone);var e=this.scene.add.image(0,0,qo,Qo.AVATAR_CROWN);e.setWorldSize(19,14),Phaser.Display.Align.In.Center(e,this._crownZone),this._crownZone.add(e)},n.alignComponents=function(){Phaser.Display.Align.In.BottomCenter(this._username,this),Phaser.Display.Align.In.TopCenter(this._crownZone,this),Phaser.Display.Align.In.Center(this._avatar,this)},n.addBackground=function(){var e="player-avatar-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.setWinner=function(e){void 0===e&&(e=!0),this._crownZone.setVisible(e)},n.hideContent=function(){this._avatar.setScale(0),this._username.setAlpha(0),this._crownZone.setAlpha(0)},n.runEntranceAnimationAvatar=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t._avatar,duration:300,ease:Phaser.Math.Easing.Cubic.Out,props:{scale:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationUsername=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t._username,duration:300,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCrown=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t._crownZone,ease:Phaser.Math.Easing.Sine.Out,duration:100,props:{alpha:{from:0,to:1},y:{from:t._crownZone.y-t._crownZone.height/4,to:t._crownZone.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all([this.runEntranceAnimationAvatar(),this.runEntranceAnimationUsername()]);case 2:return e.next=4,this.runEntranceAnimationCrown();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"avatar",get:function(){return this._avatar}},{key:"username",get:function(){return this._username}},{key:"crownZone",get:function(){return this._crownZone}}]),t}(Phaser.GameObjects.Container),ec=16762624,tc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._youAvatar=void 0,n._opponentAvatar=void 0,n._versusText=void 0,n.setSize(231,94),n.createAvatars(),n.createVersusText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createAvatars=function(){this._youAvatar=new $o(this.scene),this._opponentAvatar=new $o(this.scene),this.add([this._youAvatar,this._opponentAvatar])},n.createVersusText=function(){this._versusText=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(18),origin:{x:.5,y:.5}}),this._versusText.setText("VS"),this.setTintVersusText(),this.add(this._versusText)},n.setTintVersusText=function(e){void 0===e&&(e=!0),e?this._versusText.setTint(11222016,ec,ec,ec):this._versusText.clearTint()},n.alignComponents=function(){Phaser.Display.Align.In.Center(this._versusText,this),Phaser.Display.Align.In.LeftCenter(this._youAvatar,this,-20),Phaser.Display.Align.In.RightCenter(this._opponentAvatar,this,-20)},n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateState=function(e){switch(e){case Yo.WIN:this._youAvatar.setWinner(!0),this._opponentAvatar.setWinner(!1),this.setTintVersusText();break;case Yo.LOSE:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!0),this.setTintVersusText(!1);break;case Yo.DRAW:default:this._youAvatar.setWinner(!1),this._opponentAvatar.setWinner(!1),this.setTintVersusText()}},n.hideContent=function(){this._youAvatar.hideContent(),this._opponentAvatar.hideContent(),this._versusText.setAlpha(0)},n.runEntranceAnimationVersusText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.versusText,duration:100,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:t.versusText.y+t.versusText.height/4,to:t.versusText.y}},onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all([this._youAvatar.runEntranceAnimation(),this._opponentAvatar.runEntranceAnimation()]);case 2:return e.next=4,this.runEntranceAnimationVersusText();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"youAvatar",get:function(){return this._youAvatar}},{key:"opponentAvatar",get:function(){return this._opponentAvatar}},{key:"versusText",get:function(){return this._versusText}}]),t}(Phaser.GameObjects.Container),nc=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t)||this).playerStat=void 0,s.opponentStat=void 0,s.setSize(231,40),s.addIcon(n),s.createLabel(i),s.createPlayerStat(a),s.createOpponentStat(r),s}(0,r.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="avatar-zone-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.addIcon=function(e){e.setWorldSize(24,24),this.add(e),Phaser.Display.Align.In.TopCenter(e,this)},n.createLabel=function(e){var t=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(12),text:e,origin:{x:.5,y:.5}});this.add(t),Phaser.Display.Align.In.BottomCenter(t,this)},n.createPlayerStat=function(e){var t=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:0,y:.5}});this.add(t),Phaser.Display.Align.In.LeftCenter(t,this),this.playerStat=t},n.createOpponentStat=function(e){var t=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(16),text:e,origin:{x:1,y:.5}});this.add(t),Phaser.Display.Align.In.RightCenter(t,this),this.opponentStat=t},n.setPlayerStat=function(e){this.playerStat.setText(e)},n.setOpponentStat=function(e){this.opponentStat.setText(e)},t}(Phaser.GameObjects.Container),ic=N.Z.GAMEPLAY_DEFAULT,ac=ic.KEY,rc=ic.FRAME,sc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scoreStat=void 0,n._movesStat=void 0,n._timeStat=void 0,n.lines=[],n.setSize(231,170),n.createScoreStatEntry(),n.createMovesStatEntry(),n.createTimeStatEntry(),n.createLines(),n}(0,r.Z)(t,e);var n=t.prototype;return n.addBackground=function(){var e="match-statistics-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.createScoreStatEntry=function(){var e=this.scene.add.image(0,0,ac,rc.MEDAL_STAR);this._scoreStat=new nc(this.scene,e,this.scene.lang.Text.SCORE,"1234","687"),this.add(this._scoreStat),Phaser.Display.Align.In.TopCenter(this._scoreStat,this)},n.createMovesStatEntry=function(){var e=this.scene.add.image(0,0,ac,rc.ARROW_SWAP_HORIZONTAL);this._movesStat=new nc(this.scene,e,this.scene.lang.Text.MOVES,"335","687"),this.add(this._movesStat),this.alignUnder(this._movesStat,this._scoreStat,0,20)},n.createTimeStatEntry=function(){var e=this.scene.add.image(0,0,ac,rc.TIMER);this._timeStat=new nc(this.scene,e,this.scene.lang.Text.TIME,"07:25","09:45"),this.add(this._timeStat),this.alignUnder(this._timeStat,this._movesStat,0,20)},n.createLines=function(){var e=this;this.list.forEach((function(t){if(t instanceof nc){var n=e.scene.add.line(0,0,0,0,231,0,16777215,.3);e.add(n),e.lines.push(n),Phaser.Display.Align.In.BottomCenter(n,t,0,10)}}))},n.alignUnder=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=(e.height+t.height)/2;Phaser.Display.Align.In.Center(e,t,0+n,a+i)},n.runEntranceAnimationLines=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 200,n=p()(t=this.lines).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,props:{alpha:{from:0,to:1},scaleX:{from:0,to:1}},onComplete:n})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationStats=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this._scoreStat,this._movesStat,this._timeStat],200,n=p()(t).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:e,duration:200,delay:200*t/2,ease:Phaser.Math.Easing.Sine.Out,props:{alpha:{from:0,to:1},y:{from:e.y+e.height/2,to:e.y}},onComplete:n})}))})),e.next=5,ae().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.hideContent=function(){this.lines.forEach((function(e){e.setAlpha(0),e.scaleX=0})),[this._scoreStat,this._movesStat,this._timeStat].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all([this.runEntranceAnimationStats(),this.runEntranceAnimationLines()]);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"scoreStat",get:function(){return this._scoreStat}},{key:"movesStat",get:function(){return this._movesStat}},{key:"timeStat",get:function(){return this._timeStat}}]),t}(Phaser.GameObjects.Container),oc=function(e){return e.NEW_GAME="new",e.CLOSE="close",e}({}),cc=function(e){function t(t){var n;return(n=e.call(this,t,143.5,48,16,16777215)||this).closeLabel=void 0,n.newGameLabel=void 0,n._buttonState=void 0,n.icon=void 0,n.setSize(143.5,48),n.setName("NewGameButton"),n.createNewGameLabel(),n.switchState(oc.NEW_GAME),n.initOnClick(),n.playPulsateAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createNewGameLabel=function(){this.newGameLabel=new ca(this.scene),this.add(this.newGameLabel)},n.initOnClick=function(){var e=this;this.onClick=(0,i.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._buttonState!==oc.NEW_GAME){t.next=6;break}return n=e.scene,t.next=4,n.handlePlaySingle(!0);case 4:t.next=7;break;case 6:e.switchState(oc.NEW_GAME);case 7:e.scene.screen.close(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);case 8:case"end":return t.stop()}}),t)})))},n.playPulsateAnimation=function(){new pt.Z({targets:[this],duration:1e3,props:{scale:"*=1.05"}}).play()},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.switchState=function(e){if(e!==this._buttonState)switch(e){case oc.CLOSE:this._buttonState=oc.CLOSE;break;case oc.NEW_GAME:this._buttonState=oc.NEW_GAME}},n.updateContainerSize=function(){this.setSize(this.icon.width+this.closeLabel.width+8,this.icon.height>this.closeLabel.height?this.icon.height:this.closeLabel.height)},t}(Ki.Z),uc=143.5,lc=function(e){function t(t){var n;return(n=e.call(this,t,uc,48)||this).background=void 0,n.border=void 0,n.labelContainer=void 0,n.setSize(uc,48),n.createBackground(),n.createBorder(),n.createLabel(),n.initOnClick(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){this.background=new Gi.Z(this.scene,0,0,uc,48,16,16777215,.24),this.add(this.background)},n.createBorder=function(){this.border=this.scene.add.graphics(),this.border.lineStyle(1,16777215).strokeRoundedRect(-71.75,-24,uc,48,16),this.add(this.border)},n.createLabel=function(){this.labelContainer=new ca(this.scene,8,this.scene.lang.Text.SHARE,N.Z.GAMEPLAY_DEFAULT.FRAME.IC_SHARE),this.labelContainer.clearTint(),this.labelContainer.getIcon().setTintFill(16777215),this.add(this.labelContainer)},n.initOnClick=function(){var e=this;this.onClick=function(){e.scene.storage.dispatch(gn())}},n.hideContent=function(){this.setDisabled(!0)},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t,alpha:1,duration:200,onStart:function(){t.setDisabled(!0)},onComplete:function(){t.setDisabled(!1),e()}})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}(rt.Z),hc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._newGameButton=void 0,n._shareButton=void 0,n._stat=void 0,n.setSize(303,244),n.createMatchStatistics(),n.createNewGameButton(),n.createShareButton(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createNewGameButton=function(){var e=new cc(this.scene);this.add(e),Phaser.Display.Align.In.BottomRight(e,this),this._newGameButton=e},n.createShareButton=function(){var e=new lc(this.scene);this.add(e),Phaser.Display.Align.In.BottomLeft(e,this),this._shareButton=e},n.createMatchStatistics=function(){var e=new sc(this.scene);this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this._stat=e},n.hideContent=function(){this._stat.hideContent(),this._newGameButton.hideContent(),this._shareButton.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stat.runEntranceAnimation();case 2:if(!(this.scene instanceof vu)){e.next=5;break}return e.next=5,this.scene.gameplay.processFlowOnShowResult(!0);case 5:return e.next=7,ae().all([this._newGameButton.runEntranceAnimation(),this._shareButton.runEntranceAnimation()]);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"newGameButton",get:function(){return this._newGameButton}},{key:"shareButton",get:function(){return this._shareButton}},{key:"stat",get:function(){return this._stat}}]),t}(Phaser.GameObjects.Container),dc="Waiting",fc=function(e){function t(t){var n;return(n=e.call(this,t)||this).winLoseText=void 0,n.modeText=void 0,n.waitingAnimationEvent=void 0,n.waitingAnimation=void 0,n.setSize(303,60),n.createWinLoseText(),n.createModeText(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createWinLoseText=function(){var e=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(24),origin:{x:.5,y:.5},text:"You win"});this.add(e),Phaser.Display.Align.In.TopCenter(e,this),this.winLoseText=e},n.createModeText=function(){var e=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5},text:"Standard mode, Draw 1"});this.add(e),Phaser.Display.Align.In.BottomCenter(e,this),this.modeText=e},n.addBackground=function(){var e="popup-header-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},n.updateWinLoseText=function(e){switch(this.stopWaitingAnimation(),e){case Yo.WIN:this.winLoseText.setText("You win");break;case Yo.LOSE:this.winLoseText.setText("You lose");break;case Yo.DRAW:this.winLoseText.setText("Draw");break;case Yo.WAITING_FOR_OPPONENT:default:this.winLoseText.setText(dc),this.playWaitingAnimation()}},n.playWaitingAnimation=function(){var e=this,t=0;this.waitingAnimationEvent=this.scene.time.addEvent({delay:500,repeat:-1,callback:function(){t=(t+1)%4;var n=Array(t+1).join(".");e.winLoseText.setText(dc+n)}}),this.waitingAnimation=this.scene.add.tween({targets:this.winLoseText,alpha:.5,repeat:-1,yoyo:!0,delay:250,ease:Phaser.Math.Easing.Sine.InOut})},n.stopWaitingAnimation=function(){if(this.waitingAnimationEvent)try{this.waitingAnimationEvent.remove(),this.waitingAnimationEvent.destroy()}catch(e){console.log("cannot remove event")}if(this.waitingAnimation)try{this.waitingAnimation.remove(),this.waitingAnimation.destroy()}catch(t){console.log("cannot remove animation")}this.winLoseText.setAlpha(1)},n.updateDrawMode=function(e,t){var n=this.scene.lang.Text.ONE+" "+this.scene.lang.Text.SUIT;switch(e){case"two":n=this.scene.lang.Text.TWO+" "+this.scene.lang.Text.SUITS;break;case"four":n=this.scene.lang.Text.FOUR+" "+this.scene.lang.Text.SUITS}var i=this.scene.lang.Text.EASY;switch(t){case"medium":i=this.scene.lang.Text.MEDIUM;break;case"hard":i=this.scene.lang.Text.HARD}this.modeText.setText(n+", "+i+" "+this.scene.lang.Text.DIFFICULTY)},t}(Phaser.GameObjects.Container),pc=function(e){function t(t,n,i){var a;return(a=e.call(this,t,n,i)||this)._header=void 0,a._avatarZone=void 0,a._popupBody=void 0,a.background=void 0,a._darkFilter=void 0,a.setSize(343,486),a.createBackground(),a.createDarkFilter(),a.createHeader(),a.createAvatarZone(),a.createBody(),a}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new ft(this.scene,{key:"play-with-friend-game-over-block-background",radius:6,border:24,width:this.width,height:this.height});this.add(e),this.background=e},n.createDarkFilter=function(){var e=Ir.uw.Texture.Challenge.POPUP;if(!this.scene.textures.exists(e)){var t=this.background,n=t.width,i=t.height,a=this.scene.add.graphics();a.fillStyle(Ir.uw.COLOR,Ir.uw.ALPHA),a.fillRoundedRect(0,0,n,i,24),a.generateTexture(e,n,i),a.destroy()}var r=this.scene.add.image(0,0,e);r.kill(),this._darkFilter=r,this.add(r)},n.createHeader=function(){this._header=new fc(this.scene),this.add(this._header),Phaser.Display.Align.In.TopCenter(this._header,this,0,-20)},n.createAvatarZone=function(){this._avatarZone=new tc(this.scene),this.add(this._avatarZone),Phaser.Display.Align.In.TopCenter(this._avatarZone,this,0,-104)},n.createBody=function(){this._popupBody=new hc(this.scene),this.add(this._popupBody),Phaser.Display.Align.In.BottomCenter(this._popupBody,this,0,-20)},n.hideContent=function(){this._avatarZone.hideContent(),this._popupBody.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._avatarZone.runEntranceAnimation();case 2:return e.next=4,this._popupBody.runEntranceAnimation();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"header",get:function(){return this._header}},{key:"avatarZone",get:function(){return this._avatarZone}},{key:"popupBody",get:function(){return this._popupBody}},{key:"darkFilter",get:function(){return this._darkFilter}}]),t}(Phaser.GameObjects.Container),gc=N.Z.GAMEPLAY_DEFAULT,mc=gc.KEY,vc=gc.FRAME,yc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popup=void 0,n.setContainerSize(),n.createPopup(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,mc,vc.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(9),text:"Play Single",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomLeft(t,this,0,-200),t.onClick=function(){e.scene.screen.close(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN)}},n.createPopup=function(){this._popup=new pc(this.scene),this.add(this._popup),Phaser.Display.Align.In.Center(this._popup,this,0,0)},n.hideContent=function(){this._popup.hideContent()},n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._popup.runEntranceAnimation();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),(0,Ri.Z)(t,[{key:"popup",get:function(){return this._popup}}]),t}(Phaser.GameObjects.Container),Ec=n(118),Sc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._bunting=void 0,n.setSize(375,295),n.createBeams(),n.createBunting(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new Aa(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createBunting=function(){this._bunting=new Ua(this.scene),this.add(this._bunting),Phaser.Display.Align.In.TopCenter(this._bunting,this)},(0,Ri.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"bunting",get:function(){return this._bunting}}]),t}(Phaser.GameObjects.Container),Tc=function(e){function t(t){var n;return(n=e.call(this,t)||this)._beams=void 0,n._lightnings=void 0,n.setSize(375,416),n.createBeams(),n.createLightnings(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBeams=function(){this._beams=new pr(this.scene),this.add(this._beams),Phaser.Display.Align.In.TopCenter(this._beams,this)},n.createLightnings=function(){this._lightnings=new sr(this.scene),this.add(this._lightnings),Phaser.Display.Align.In.TopCenter(this._lightnings,this)},(0,Ri.Z)(t,[{key:"beams",get:function(){return this._beams}},{key:"lightnings",get:function(){return this._lightnings}}]),t}(Phaser.GameObjects.Container),Ac="Waiting",Cc=new(function(){function e(){this._state=void 0,this._state=Yo.WIN}return(0,Ri.Z)(e,[{key:"state",get:function(){return this._state},set:function(e){var t=window.game.globalScene.getActiveScene().screen.get(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t instanceof bc&&t.setGameOverInfo({state:e}),this._state=e}}]),e}()),bc=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.playWithFriendGameOverContainer=void 0,r.winDecoration=void 0,r.loseDecoration=void 0,r.backgroundFilter=void 0,r.footer=void 0,r.closed=!1,r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,(function(e){r.background.setTexture(e)}))},r.handleClickTournaments=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.scene instanceof vu&&r.setBackground(),r.setDepth(l.Ks.POPUP),r.addBackgroundFilter(),r.createContainer(),r.createBanners(),r.createFooter(),r.createBottomLogo(),r}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.closed=!1,this.isGameZoneTooWide()&&(this.winDecoration.kill(),this.loseDecoration.kill()),this.background.setAlpha(1),this.runOpenAnimation(),Cc.state!==Yo.LOSE&&(this.playConfettiAnimation(),this.updateResultInfo())},n.close=function(){this.closed=!0,this.runCloseAnimation(),this.stopConfettiAnimation()},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a,r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:if(this.scene.audio.playSound(Se.Z.POPUP_SHOW),n=this.scene.ads.getBannerHeight(),a=n,this.playWithFriendGameOverContainer.setAlpha(0).setY(a).hideContent(),this.winDecoration.bunting.stopWavingAnimation(),this.loseDecoration.lightnings.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.playWithFriendGameOverContainer],props:{y:{from:a,to:-n/2-21,ease:Phaser.Math.Easing.Back.Out},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.playWithFriendGameOverContainer.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),!this.winDecoration.active){e.next=15;break}return e.next=14,this.winDecoration.bunting.runEntranceAnimation();case 14:this.winDecoration.bunting.playWavingAnimation();case 15:if(!this.loseDecoration.active){e.next=18;break}return e.next=18,this.loseDecoration.lightnings.runEntranceAnimation();case 18:this.slideInAnimation.play();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},n.createBanners=function(){this.createRibbonBanner(),this.createLightningThunderBanner()},n.createRibbonBanner=function(){this.winDecoration=new Sc(this.scene),this.winDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.winDecoration,this),this.add(this.winDecoration)},n.createLightningThunderBanner=function(){this.loseDecoration=new Tc(this.scene),this.loseDecoration.kill(),Phaser.Display.Align.In.TopCenter(this.loseDecoration,this),this.add(this.loseDecoration)},n.createContainer=function(){this.playWithFriendGameOverContainer=new yc(this.scene),this.add(this.playWithFriendGameOverContainer)},n.createFooter=function(){this.footer=new ja(this.scene,!1,l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var e=this.scene.ads.getBannerHeight(),t=this.scene.gameZone.width>375?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-e+t)},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);Phaser.Display.Align.In.BottomCenter(e,this),this.add(e)}},n.isGameZoneTooWide=function(){return this.scene.gameZone.width>450},n.playConfettiAnimation=function(){if(this.scene instanceof vu){var e=this.scene.gameplay.confettiSmallFallDown;this.scene.children.bringToTop(e),e.run(8,0,0)}},n.stopConfettiAnimation=function(){this.scene instanceof vu&&this.scene.gameplay.confettiSmallFallDown.stop()},n.updateResultInfo=function(){var e,t,n=this.scene.storage.getState(),i=(0,Vo.f)(n),a=(0,hn.J)(n),r=this.scene.player.getPlayer().playerId,s=(a[r]||{}).score,o=(0,ln.pP)(n,{playerId:r});i===Ec.ey&&(o=!0,t=!0),console.log({isPlayerFinish:o,isOpponentFinish:t});var c=(0,ln.iq)(n);console.warn({matchData:c});var u=c.whitePlayerId,l=c.blackPlayerId,h=c.whitePlayerFinish,d=c.blackPlayerFinish,f=c.extraData,p=void 0===f?{}:f,g=r===u,m=(a[g?l:u]||{}).score,v=g?p.blackPlayerData:p.whitePlayerData;t=g?d:h;var y,E=(g?p.whitePlayerData:p.blackPlayerData)||{},S=E.moves,T=E.time,A=v||{},C=A.moves,b=A.time,I=o&&t,w=I&&s>m,x=I&&s<m;console.log({isPlayerWin:w,isOpponentWin:x}),y=I?w&&x?Yo.DRAW:w?Yo.WIN:Yo.LOSE:Yo.WAITING_FOR_OPPONENT,console.log({playerScore:s,opponentScore:m});var _="one",O="easy",P=null==(e=this.data)?void 0:e.list;if(P){var k=P,L=k.suitSize,D=void 0===L?"one":L,R=k.difficulty;_=D,O=void 0===R?"easy":R}else console.error("Please open PlayWithFriendGameOverScreen with data");this.setGameOverInfo({state:y,playerScore:o?s:void 0,opponentScore:t?m:void 0,playerMoves:o?S:void 0,opponentMoves:t?C:void 0,playerTime:o?T:void 0,opponentTime:t?b:void 0,suitSize:_,difficulty:O}),this.scene.storage.dispatch((0,Jn.pP)(!1))},n.setGameOverInfo=function(e){var t=this.playWithFriendGameOverContainer.popup,n=t.header,i=t.avatarZone,a=t.popupBody,r=i.youAvatar,s=i.opponentAvatar,o=this.scene.player.getPlayer(),c=o.playerId,u=o.photo,l=o.name;r.avatar.loadPhoto(c,u,100),r.username.setText(l);var h=this.scene.storage.getState(),d=(0,ln.oN)(h),f=d.playerId,p=d.photo,g=d.name;if(s.avatar.loadPhoto(f,p,100),s.username.setText(g),e.state)switch(n.updateWinLoseText(e.state),i.updateState(e.state),e.state){case Yo.LOSE:this.winDecoration.kill(),this.loseDecoration.revive(),this.enableDarkBackground(),this.stopConfettiAnimation();break;case Yo.WIN:case Yo.DRAW:this.winDecoration.revive(),this.loseDecoration.kill(),this.enableDarkBackground(!1);break;case Yo.WAITING_FOR_OPPONENT:default:this.winDecoration.kill(),this.loseDecoration.kill(),this.stopConfettiAnimation(),this.enableDarkBackground(!1)}e.suitSize&&e.difficulty&&n.updateDrawMode(e.suitSize,e.difficulty);var m=a.stat,v=m.scoreStat,y=m.movesStat,E=m.timeStat;void 0!==e.playerScore?v.setPlayerStat(""+e.playerScore):v.setPlayerStat(Ac),void 0!==e.opponentScore?v.setOpponentStat(""+e.opponentScore):v.setOpponentStat(Ac),void 0!==e.playerMoves?y.setPlayerStat(""+e.playerMoves):y.setPlayerStat(Ac),void 0!==e.opponentMoves?y.setOpponentStat(""+e.opponentMoves):y.setOpponentStat(Ac),void 0!==e.playerTime?E.setPlayerStat((0,xn.F0)(e.playerTime,!1)):E.setPlayerStat(Ac),void 0!==e.opponentTime?E.setOpponentStat((0,xn.F0)(e.opponentTime,!1)):E.setOpponentStat(Ac)},n.enableDarkBackground=function(e){void 0===e&&(e=!0);var t=this.playWithFriendGameOverContainer.popup.darkFilter;e?(this.backgroundFilter.revive(),t.revive()):(this.backgroundFilter.kill(),t.kill())},n.addBackgroundFilter=function(){var e,t=this,n=Ir.uw.Texture.Challenge.SCREEN;if(!this.scene.textures.exists(n)){var i=this.width,a=this.height,r=this.scene.add.graphics();r.fillStyle(Ir.uw.COLOR,Ir.uw.ALPHA),r.fillRect(0,0,i,a),r.generateTexture(n,i,a),r.destroy()}this.backgroundFilter=this.scene.add.image(0,0,n),this.backgroundFilter.kill(),this.add(this.backgroundFilter);var s=H()(e=this.getAll()).call(e,(function(e){return e===t.background}));this.moveTo(this.backgroundFilter,s+1)},n.updateFinishingChallenge=function(){this.playWithFriendGameOverContainer.popup.popupBody.newGameButton.switchState(oc.CLOSE)},t}(GameCore.Screen),Ic=n(237),wc=n.n(Ic),xc=n(490),_c=n(491),Oc=n(489),Pc=function(){function e(e){this.scene=void 0,this.levelConfig=void 0,this.oneSuitLevels=void 0,this.twoSuitLevels=void 0,this.fourSuitLevels=void 0,this.dynamicGameLevels=void 0,this.journeyGameLevels=void 0,this.replayCardStatus=void 0,this.currentJourneyPlayingLevel=void 0,this.scene=e}var t=e.prototype;return t.init=function(){this.importLevels(),this.resetReplayCardStatus(),this.currentJourneyPlayingLevel=0},t.importLevels=function(){this.setupPrebuildLevels(),this.setupDynamicLevels(),this.setupJourneyLevels()},t.setupDynamicLevels=function(){var e=xc.Z.ONE_SUIT,t=xc.Z.TWO_SUIT,n=xc.Z.FOUR_SUIT,i={one:[],two:[],four:[]};i.one=e.DECOMPRESSED_DATA,i.two=t.DECOMPRESSED_DATA,i.four=n.DECOMPRESSED_DATA,this.dynamicGameLevels=i},t.setupPrebuildLevels=function(){var e=Oc.Z.ONE_SUIT,t=Oc.Z.TWO_SUIT,n=Oc.Z.FOUR_SUIT,i={1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[]},a=(0,d.Z)({},i);wc()(e).forEach((function(e,t){var n,i=e.DECOMPRESSED_DATA;a[(t+1).toString()]=u()(n=a[(t+1).toString()]).call(n,i)})),this.oneSuitLevels=a;var r=(0,d.Z)({},i);wc()(t).forEach((function(e,t){var n,i=e.DECOMPRESSED_DATA;r[(t+1).toString()]=u()(n=r[(t+1).toString()]).call(n,i)})),this.twoSuitLevels=r;var s=(0,d.Z)({},i);wc()(n).forEach((function(e,t){var n,i=e.DECOMPRESSED_DATA;s[(t+1).toString()]=u()(n=s[(t+1).toString()]).call(n,i)})),this.fourSuitLevels=s},t.setupJourneyLevels=function(){var e=_c.Z.TEST_LEVELS;this.journeyGameLevels=e.DECOMPRESSED_DATA},t.getConfigs=function(){return this.levelConfig},t.getClassicLevelConfig=function(e,t){var n=[];if(t){if("dynamic"===t){var i=this.getDynamicLevelConfig(e);return this.handleOneAndTwoSuits(i),i}n=this.getConstantPrebuiltLevels(t,e)}else n=this.getDynamicPrebuiltLevelsByScore(e);var a=Math.floor(Math.random()*n.length);if(n[a]&&!n[a].mainMissions.win&&(n[a].mainMissions.win=25),n[a]&&this.handleOneAndTwoSuits(n[a]),!n[a]){var r=this.getDynamicLevelConfig(e);return this.handleOneAndTwoSuits(r),r}return n[a]},t.getJourneyLevelConfig=function(e){var t,n=w()(t=this.journeyGameLevels).call(t,(function(t){return S()(t.mainMissions)[0]===e.missionId}));if(n.length>0)return n[Math.floor(Math.random()*n.length)];console.warn("> \ud83e\udd16 ? No level found for mission: "+e.missionId);var i=Math.floor(Math.random()*this.journeyGameLevels.length);return this.journeyGameLevels[i]},t.getJourneyLevelConfigByLevel=function(e){var t=this.scene.player.getCustomData("currentJourneyLevel");t>this.getJourneyLength()&&(t=this.getJourneyLength(),this.scene.player.setCustomData("currentJourneyLevel",t)),this.currentJourneyPlayingLevel=t;var n=this.journeyGameLevels[t-1];void 0!==e&&(this.currentJourneyPlayingLevel=e,n=this.journeyGameLevels[e-1],t<e&&this.scene.player.setCustomData("currentJourneyLevel",e));var i="one";return 2===n.suits.length?i="two":4===n.suits.length&&(i="four"),this.scene.gameStats.updateCurrentGameStats({suitSize:i}),console.log("> \ud83e\udd16 ? Use level "+t+" with "+i+" suit at journey levels"),n},t.handleOneAndTwoSuits=function(e){var t=e.suits,n=e.startingLayout;switch(t.length){case 1:for(var i=n.split(","),a=[],r=0;r<i.length;r++){var s=i[r],o=_()(s).call(s,0,s.length-1)+"s";a.push(o)}e.startingLayout=a.join(","),e.suits=["spades"];break;case 2:for(var c=t[0][0],u=t[1][0],l=n.split(","),h=[],d=0;d<l.length;d++){var f=l[d],p=_()(f).call(f,0,f.length-1),g=_()(f).call(f,f.length-1,f.length);g===c?h.push(p+"h"):g===u&&h.push(p+"s")}e.startingLayout=h.join(","),e.suits=["hearts","spades"]}},t.getDynamicLevelConfig=function(e){var t=Math.floor(Math.random()*this.dynamicGameLevels[e].length),n=this.dynamicGameLevels[e][t];return this.convertDynamicLevelConfig(n)},t.getFromToDiffNearRatio=function(e){var t,n,i=Math.floor(10*e);return Oe()(t=[0,1,2]).call(t,i)?{from:1,to:3}:Oe()(n=[8,9,10]).call(n,i)?{from:7,to:9}:{from:i-1,to:i+1}},t.getDynamicPrebuiltLevelsByScore=function(e){for(var t=this.oneSuitLevels,n=this.twoSuitLevels,i=this.fourSuitLevels,a=this.scene.gameStats.getTotalDifficultyScore(e),r=[20,40,80,160,320,640,1280,2560],s=9,o=0;o<r.length;o++){if(a<r[o]){s=o+1;break}}var c="easy";if(s>=4&&s<=6?c="medium":s>=7&&(c="hard"),this.scene.player.setSetting("difficulty",c),this.scene.gameplay.difficulty=c,this.scene.gameStats.updateCurrentGameStats({suitSize:e,difficulty:c}),console.log("> \ud83e\udd16 ? Use difficulty "+s+" from "+e+" suit"),"one"===e)return t[s.toString()];if("two"===e)return n[s.toString()];if("four"===e)return i[s.toString()];throw new Error("Invalid suit size")},t.getConstantPrebuiltLevels=function(e,t){var n=this.oneSuitLevels,i=this.twoSuitLevels,a=this.fourSuitLevels,r=1,s=9;"easy"===e?(r=1,s=3):"medium"===e?(r=4,s=6):"hard"===e&&(r=7,s=9),console.log("\ud83e\udd16 ? Use "+r+" to "+s+" "+t+" suit");var o=[];switch(t){case"one":for(var c=r;c<=s;c++)o.push.apply(o,n[c.toString()]);return o;case"two":for(var u=r;u<=s;u++)o.push.apply(o,i[u.toString()]);return o;case"four":for(var l=r;l<=s;l++)o.push.apply(o,a[l.toString()]);return o;default:throw new Error("Invalid suit size")}},t.getDynamicPrebuiltLevelsByWinRate=function(e,t){var n=this.oneSuitLevels,i=this.twoSuitLevels,a=this.fourSuitLevels,r=1,s=9;if("easy"===e?(r=1,s=3):"medium"===e?(r=4,s=6):"hard"===e&&(r=7,s=9),"dynamic"!==e&&"random"!==e){var o=this.scene.gameStats.getGameStats(t,e),c=o.targetLevelTracking.win.length+o.targetLevelTracking.lose.length;if(c>10){var u=o.targetLevelTracking.win.length/c,l=this.getFromToDiffNearRatio(u),h=l.from,d=l.to;s<h?s=Math.min(s+3,9):r>d?r=Math.max(r-3,1):r<h?s=d:r>h&&(r=h)}}console.log("\ud83e\udd16 ? Use "+r+" to "+s+" "+t+" suit");var f=[];switch(t){case"one":for(var p=r;p<=s;p++)f.push.apply(f,n[p.toString()]);return f;case"two":for(var g=r;g<=s;g++)f.push.apply(f,i[g.toString()]);return f;case"four":for(var m=r;m<=s;m++)f.push.apply(f,a[m.toString()]);return f;default:throw new Error("Invalid suit size")}},t.convertDynamicLevelConfig=function(e){return(0,d.Z)({},e,{type:"dynamic",difficulty:"dynamic"})},t.setConfig=function(e){if("replay"===e.type);else{if("journey"===e.type)return void(this.levelConfig=this.getJourneyLevelConfig(e));if("journey-level"===e.type)this.levelConfig=this.getJourneyLevelConfigByLevel();else if("journey-level-debug"===e.type)this.levelConfig=this.getJourneyLevelConfigByLevel(e.level);else if("loadPrevious"===e.type){var t=e;if(null!==t)return void(this.levelConfig=t.levelConfig);console.error("> \ud83e\udd16 ? No previous game found"),this.levelConfig=this.getClassicLevelConfig("one","easy")}else if("constant"===e.type){var n=e;this.levelConfig=this.getClassicLevelConfig(n.suitSize,n.difficulty)}else{var i=e;this.levelConfig=this.getClassicLevelConfig(i.suitSize)}}var a={settings:{gameMode:Un.Z.instance.getGameMode(),suitSize:this.scene.gameStats.getCurrentGameStats().suitSize,difficulty:this.scene.gameStats.getCurrentGameStats().difficulty,relaxedSpider:this.scene.gameplay.boardGame.getCurrentGameRelaxedSpiderSetting()},levelConfig:(0,d.Z)({},this.levelConfig)};(0,At.vk)("current-level",a)},t.clearLevelConfigLocalStorage=function(){(0,At.tL)("current-level")},t.getLevelConfigLocalStorage=function(){var e=(0,At.Th)("current-level");return e&&GameCore.Utils.Valid.isObject(e)&&e.levelConfig&&e.settings?e:null},t.testCompress=function(){var e=qt()(this.levelConfig);console.info("level binary size: ",e.length);var t=GameCore.Utils.Hash.lzwCompress(e);console.info("level compress: ",t),console.info("level compress binary size: ",t.length),console.info("compress ratio (%): ",100-t.length/e.length*100);var n=GameCore.Utils.Hash.encodeLZWCompress(t);console.info("level encode: ",n),console.info("level encode binary size: ",n.length);var i=GameCore.Utils.Hash.decodeLZWCompress(n);console.info("level decode: ",i),console.info("level decode binary size: ",i.length);var a=GameCore.Utils.Hash.lzwDecompress(i);console.info("level decompress: ",a),console.info("level decompress binary size: ",a.length)},t.getMissionShortDescription=function(e,t){var n=this.scene.lang,i=n.Text;if(A()(e).call(e,"finish")&&b()(e).call(e,"Run")){var a=parseInt(e.substring(6,e.length-3));return 1===a?i.BUILD_A_SUIT:n.getText({key:"BUILD_X_SUIT",variables:[a]})}if(A()(e).call(e,"clear")&&b()(e).call(e,"Column")){var r=parseInt(e.substring(5,e.length-6));return 1===r?i.EMPTY_A_COLUMN:n.getText({key:"EMPTY_X_COLUMN",variables:[r]})}if(A()(e).call(e,"finish")&&b()(e).call(e,"RunNoStock")){var s=parseInt(e.substring(6,e.length-10));return 1===s?i.BUILD_A_SUIT_WITHOUT:n.getText({key:"BUILD_X_SUIT_WITHOUT",variables:[s]})}return"win"===e?t?i.WIN:i.WIN_THIS_DEAL:""},t.setReplayCardStatus=function(e,t){this.replayCardStatus[e]=t},t.resetReplayCardStatus=function(){var e,t=(this.levelConfig||{}).foundations,n=void 0===t?8:t;this.replayCardStatus=m()(e=Array(13*n)).call(e,0)},t.getCurrentJourneyPlayingLevel=function(){return this.currentJourneyPlayingLevel},t.getMissionDescription=function(e){void 0===e&&(e=!1);var t=this.levelConfig.mainMissions,n=S()(t)[0],i=t[n],a=i.min,r=void 0===a?0:a,s=i.max,o=void 0===s?0:s,c=i.extra,u=c.move,l=c.time,h=this.getMissionShortDescription(n,u>0||l>0);return u>0&&(h+=" "+this.scene.lang.getText({key:"WITHIN_X_MOVES",variables:[u]})),l>0&&(h+=" "+this.scene.lang.getText({key:"WITHIN_X_SECONDS",variables:[Math.floor(l/1e3)]})),e&&(h+="\n("+r+" - "+o+")"),h},t.getCurrentMissionMeasurement=function(){var e=this.levelConfig.mainMissions,t=e[S()(e)[0]].extra,n=t.move,i=t.time,a="";if(n>0){var r=this.scene.gameplay.boardGame.getMoves();a+=this.scene.lang.Text.MOVE+": "+r+"/"+n}if(i>0){var s=i-this.scene.gameplay.boardGame.getTime();s<0&&(s=0),a+=this.scene.lang.Text.TIME+": "+(0,xn.F0)(s,!1)}return a},t.getJourneyLength=function(){return this.journeyGameLevels.length},t.getMissionDescriptionOf=function(e){if(e<1||e>this.journeyGameLevels.length)return"";var t=this.journeyGameLevels[e-1].mainMissions,n=S()(t)[0],i=t[n].extra,a=i.move,r=i.time,s=this.getMissionShortDescription(n,a>0||r>0);return a>0&&(s+=" within "+a+" moves"),r>0&&(s+=" within "+Math.floor(r/1e3)+" seconds"),s},t.getMissionId=function(){try{var e=this.levelConfig.mainMissions;return S()(e)[0]}catch(t){return""}},t.isJourneyWinMission=function(){var e=this.getConfigs().mainMissions,t=S()(e)[0];return!(!this.isInJourneyLevel()||"win"!==t)},t.isJourneyFinishRunMission=function(){var e=this.getConfigs().mainMissions,t=S()(e)[0];return!!(this.isInJourneyLevel()&&A()(t).call(t,"finish")&&Oe()(t).call(t,"Run"))},t.isInJourneyLevel=function(){return!!this.levelConfig&&"journey"===this.getConfigs().type},e}(),kc=Pc,Lc=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.foundationGroup=void 0,n.pileGroup=void 0,n.scene=t,n.init(),n}(0,r.Z)(t,e);var n=t.prototype;return n.init=function(){e.prototype.init.call(this),this.foundationGroup=[],this.pileGroup=[]},n.requestNewFoundation=function(e){var t,n=P()(t=this.foundationGroup).call(t,(function(e){return!e.active}));if(n)return n.revive(),n.setIdx(e),n;var i=new Ie(this.scene.gameplay.boardGame);return i.setIdx(e),this.foundationGroup.push(i),i},n.requestNewPile=function(e){var t,n=P()(t=this.pileGroup).call(t,(function(e){return!e.active}));if(n)return n.revive(),n.setIdx(e),n;var i=new ge(this.scene.gameplay.boardGame);return i.setIdx(e),this.pileGroup.push(i),i},t}(yr.Z),Dc=n(474),Rc=n(502),Bc=n(79),Nc=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.title=void 0,n.missionText=void 0,n.preMorphData=void 0,n.updateSize(),n.createBackground(),n.createTitle(),n.createMissionText(),n.alignComponents(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setMissionDescription=function(e){this.missionText.setText(e)},n.updateSize=function(){this.setSize(336,236)},n.createBackground=function(){var e=this.width,t=this.height;this.background=new Gi.Z(this.scene,0,0,e,t,24,16579837,1),this.add(this.background)},n.createTitle=function(){this.title=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.MISSION,origin:{x:.5,y:.5}}),this.title.setTint(2105120),this.add(this.title)},n.createMissionText=function(){this.missionText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Mission description placeholder",origin:{x:.5,y:.5}}),this.missionText.setCenterAlign(),this.missionText.setTint(3774208),this.missionText.setMaxWidth(303),this.add(this.missionText)},n.alignComponents=function(){Phaser.Display.Align.In.Center(this.title,this,0,-20),Phaser.Display.Align.To.BottomCenter(this.missionText,this.title,0,37)},n.readyContainer=function(){if(this.preMorphData){var e=this.preMorphData,t=e.title,n=e.missionText,i=e.radius,a=e.alpha,r=e.width,s=e.height,o=e.x,c=e.y;this.background.setSize(r,s),this.background.setPosition(o,c),this.background.setAlpha(a),this.background.radius=i,this.title.setAlpha(t.alpha),this.missionText.setAlpha(n.alpha),this.missionText.setPosition(n.x,n.y)}},n.morphIntoTopBanner=function(e){var t=this;return this.preMorphData={medal:{alpha:0},title:{alpha:this.title.alpha},missionText:{alpha:this.missionText.alpha,x:this.missionText.x,y:this.missionText.y,fontSize:this.missionText.fontSize},radius:this.background.radius,width:this.background.width,height:this.background.height,x:this.background.x,y:this.background.y,alpha:this.background.alpha},new(ae())((function(n){var i=t.background.getCenter(),a={x:t.missionText.x,y:t.missionText.y},r=new Vi.Z({targets:[t.title],props:{alpha:0},duration:800,onUpdate:function(e){var n=Phaser.Math.Easing.Cubic.InOut(e.progress),r=Phaser.Math.Interpolation.Linear([a.x,i.x],n),s=Phaser.Math.Interpolation.Linear([a.y,i.y],n);t.missionText.setPosition(r,s)},onComplete:function(){c.play(),f.play()}}),s=t.background.radius,o=t.missionText.fontSize,c=t.scene.tweens.add({targets:t.background,width:e.width,height:e.height,duration:800,ease:Phaser.Math.Easing.Cubic.InOut,paused:!0,onUpdate:function(n){var i=n.progress,a=Phaser.Math.Interpolation.Linear([s,16],i),r=Phaser.Math.Interpolation.Linear([o,e.getDescriptionFontSize()],i);t.background.setRadius(a),t.missionText.setFontSize(r)}}),u=e.getWorldPosition(),l=u.x,h=u.y,d=new Phaser.Math.Vector2;t.getLocalPoint(l,h,d);var f=t.scene.tweens.add({targets:t.background,x:d.x,y:d.y,duration:800,ease:Phaser.Math.Easing.Cubic.InOut,paused:!0,onUpdate:function(){Phaser.Display.Align.In.Center(t.missionText,t.background)},onComplete:function(){p.play()}}),p=new Vi.Z({targets:[t.background,t.missionText],props:{alpha:0},duration:200,onComplete:function(){n()}});r.play()}))},t}(Phaser.GameObjects.Container),Mc=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.footer=void 0,r.closed=!1,r.handleClickBackToGame=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i)},r.setDepth(l.Ks.POPUP),r.setBackground(),r.createContainer(),r.createBottomLogo(),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,r.setBackground),r}(0,r.Z)(t,e);var n=t.prototype;return n.createContainer=function(){this.container=new Nc(this.scene),this.add(this.container)},n.createFooter=function(){var e=this;this.footer=new Va.Z(this.scene,!1,l.o4.MISSION_WELCOME_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var t=this.scene.ads.getBannerHeight(),n=this.scene.world.isLandscape()?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-t+n);var i=this.footer.tournamentsButton;i.setIconFrame(N.Z.GAMEPLAY_DEFAULT.FRAME.IC_UNDO),i.setText("Back to Game"),i.onClick=function(){e.scene.events.off(ct.Z.GAME_START,e.handleClickBackToGame),e.scene.events.once(ct.Z.GAME_START,e.handleClickBackToGame),e.scene.screen.close(l.o4.MISSION_WELCOME_SCREEN)}},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(){e.prototype.open.call(this),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.container.readyContainer(),this.container.setAlpha(1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!1,this.runCloseAnimation()},n.updateData=function(){if(this.scene instanceof vu){var e=this.scene.levelHandler.getMissionDescription();this.container.setMissionDescription(e)}},n.runOpenAnimation=function(){this.scene.audio.playSound(Se.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},n.morphIntoTopBanner=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.container.morphIntoTopBanner(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(GameCore.Screen),Gc=N.Z.GAMEPLAY_DEFAULT,Uc=Gc.KEY,Fc=Gc.FRAME,Zc=287,Hc=48,Wc=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelCompletedText=void 0,n.popupBackground=void 0,n.popupHeader=void 0,n.youHaveReachText=void 0,n.levelText=void 0,n.nextButton=void 0,n.setSize(343,392),n.createLevelCompletedText(),n.createPopup(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){e<=0||this.levelText.setText(this.scene.lang.Text.LEVEL+" "+e)},n.createLevelCompletedText=function(){this.levelCompletedText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.LEVEL_COMPLETED,origin:{x:.5,y:.5}}),this.add(this.levelCompletedText)},n.createPopup=function(){this.createPopupBackground(),this.createPopupHeader(),this.createYouHaveReachText(),this.createLevelText(),this.createNextButton(),this.alignComponents()},n.createPopupBackground=function(){this.popupBackground=new ft(this.scene,{key:"mission-completed-container",radius:6,border:24,width:343,height:354}),this.add(this.popupBackground)},n.createPopupHeader=function(){this.popupHeader=this.scene.add.image(0,0,Uc,Fc.MISSION_HEADER_COMPLETED),this.popupHeader.setWorldSize(247,142),this.add(this.popupHeader)},n.createYouHaveReachText=function(){this.youHaveReachText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.YOU_HAVE_REACHED,origin:{x:.5,y:.5}}),this.add(this.youHaveReachText)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:"Level 11",origin:{x:.5,y:.5}}),this.add(this.levelText)},n.createNextButton=function(){var e=Zc,t=Hc;this.nextButton=new rt.Z(this.scene,e,t),this.add(this.nextButton);var n=new Gi.Z(this.scene,0,0,e,t,16,16777215,1),i=new ca(this.scene,8,this.scene.lang.Text.NEXT,Fc.STATS_FLASH);i.getIcon().clearTint(),this.nextButton.add([n,i]),new pt.Z({targets:[this.nextButton],duration:1e3,props:{scale:"*=1.05"}}).play(),this.add(this.nextButton)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.levelCompletedText,this),Phaser.Display.Align.In.BottomCenter(this.popupBackground,this),Phaser.Display.Align.In.TopCenter(this.popupHeader,this.popupBackground,0,-20),Phaser.Display.Align.To.BottomCenter(this.youHaveReachText,this.popupHeader,0,32),Phaser.Display.Align.To.BottomCenter(this.levelText,this.youHaveReachText,0,8),Phaser.Display.Align.In.BottomCenter(this.nextButton,this,0,-20)},n.hideContent=function(){[this.nextButton].forEach((function(e){return e.setDisabled(!0)})),[this.levelCompletedText,this.popupHeader,this.youHaveReachText,this.levelText,this.nextButton].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLevelCompleteText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.levelCompletedText,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationPopupHeader=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.popupHeader,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationYouHaveReachedText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.youHaveReachText,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLevelText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.levelText,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.nextButton],n=p()(t).call(t,(function(e){return new(ae())((function(t){i.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){t()}})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLevelCompleteText();case 2:return e.next=4,this.runEntranceAnimationPopupHeader();case 4:return e.next=6,this.runEntranceAnimationYouHaveReachedText();case 6:return e.next=8,this.runEntranceAnimationLevelText();case 8:return e.next=10,this.runEntranceAnimationButtons();case 10:this.nextButton.setDisabled(!1);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),zc=N.Z.GAMEPLAY_DEFAULT,Yc=zc.KEY,Vc=zc.FRAME,Kc=287,jc=48,Jc=function(e){function t(t){var n;return(n=e.call(this,t)||this).levelFailedText=void 0,n.popupBackground=void 0,n.popupHeader=void 0,n.levelText=void 0,n.retryButton=void 0,n.setSize(343,360),n.createLevelFailedText(),n.createPopup(),n}(0,r.Z)(t,e);var n=t.prototype;return n.setLevel=function(e){e<=0||this.levelText.setText(this.scene.lang.Text.LEVEL+" "+e)},n.createLevelFailedText=function(){this.levelFailedText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:this.scene.lang.Text.LEVEL_FAILED,origin:{x:.5,y:.5}}),this.add(this.levelFailedText)},n.createPopup=function(){this.createPopupBackground(),this.createPopupHeader(),this.createLevelText(),this.createRetryButton(),this.alignComponents()},n.createPopupBackground=function(){this.popupBackground=new ft(this.scene,{key:"mission-failed-container",radius:6,border:24,width:343,height:322}),this.add(this.popupBackground)},n.createPopupHeader=function(){this.popupHeader=this.scene.add.image(0,0,Yc,Vc.MISSION_HEADER_FAILED),this.popupHeader.setWorldSize(247,142),this.add(this.popupHeader)},n.createLevelText=function(){this.levelText=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(24),text:"Level 11",origin:{x:.5,y:.5}}),this.add(this.levelText)},n.createRetryButton=function(){var e=this,t=Kc,n=jc;this.retryButton=new rt.Z(this.scene,t,n),this.add(this.retryButton);var a=new Gi.Z(this.scene,0,0,t,n,16,16777215,1),r=new ca(this.scene,8,this.scene.lang.Text.RETRY,Vc.IC_REPLAY);r.getIcon().clearTint(),this.retryButton.add([a,r]),new pt.Z({targets:[this.retryButton],duration:1e3,props:{scale:"*=1.05"}}).play(),this.retryButton.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.scene instanceof vu)){t.next=4;break}return t.next=3,e.scene.gameplay.processFlowOnShowResult(!1);case 3:e.scene.gameplay.replayGame();case 4:e.scene.screen.close(l.o4.MISSION_COMPLETED_SCREEN);case 5:case"end":return t.stop()}}),t)}))),this.add(this.retryButton)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.levelFailedText,this),Phaser.Display.Align.In.BottomCenter(this.popupBackground,this),Phaser.Display.Align.In.TopCenter(this.popupHeader,this.popupBackground,0,-20),Phaser.Display.Align.To.BottomCenter(this.levelText,this.popupHeader,0,32),Phaser.Display.Align.In.BottomCenter(this.retryButton,this,0,-20)},n.hideContent=function(){[this.retryButton].forEach((function(e){return e.setDisabled(!0)})),[this.levelFailedText,this.popupHeader,this.levelText,this.retryButton].forEach((function(e){return e.setAlpha(0)}))},n.runEntranceAnimationLevelFailedText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.levelFailedText,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationPopupHeader=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.popupHeader,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationLevelText=function(){var e=(0,i.Z)(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(ae())((function(e){t.scene.add.tween({targets:t.levelText,alpha:1,duration:200,onComplete:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationButtons=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.retryButton],n=p()(t).call(t,(function(e){return new(ae())((function(t){i.scene.add.tween({targets:e,alpha:1,duration:200,onComplete:function(){t()}})}))})),e.next=4,ae().all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.runEntranceAnimationLevelFailedText();case 2:return e.next=4,this.runEntranceAnimationPopupHeader();case 4:return e.next=6,this.runEntranceAnimationLevelText();case 6:return e.next=8,this.runEntranceAnimationButtons();case 8:this.retryButton.setDisabled(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),Xc=N.Z.GAMEPLAY_DEFAULT,qc=Xc.KEY,Qc=Xc.FRAME,$c=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.slideInAnimation=void 0,r.completedContainer=void 0,r.failedContainer=void 0,r.footer=void 0,r.closed=!1,r.topBanner=void 0,r.completed=!0,r.closeDevButton=void 0,r.handleClickBackToGame=function(){r.scene.time.delayedCall(100,(function(){r.closed||r.close()}))},r.setBackground=function(){var e=r.scene.theme.getCurrentThemeConfig().backgroundKey;r.background.setTexture(e);var t=r.scene.gameZone,n=t.width,i=t.height;r.background.setWorldSize(n,i)},r.setDepth(l.Ks.POPUP),r.setBackground(),r.createContainers(),r.createMissionTopBanner(),r.createDevButtons(),r.createFooter(),r.createBottomLogo(),r.scene.events.on(ct.Z.BACKGROUND_CHANGED,r.setBackground),r}(0,r.Z)(t,e);var n=t.prototype;return n.createContainers=function(){this.createCompletedContainers(),this.createFailedContainer(),this.completedContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed)},n.createCompletedContainers=function(){var e=this;this.completedContainer=new Wc(this.scene),this.add(this.completedContainer),this.completedContainer.nextButton.onClick=(0,i.Z)(o().mark((function t(){var n,i,a,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null==(n=e.data)?void 0:n.list,a=i.level,r=void 0===a?1:a,!(e.scene instanceof vu)){t.next=6;break}return t.next=5,e.scene.gameplay.processFlowOnShowResult(!1);case 5:e.scene.handlePlayCustomJourneyLevel(r+1);case 6:e.scene.screen.close(l.o4.MISSION_COMPLETED_SCREEN);case 7:case"end":return t.stop()}}),t)})))},n.createFailedContainer=function(){this.failedContainer=new Jc(this.scene),this.add(this.failedContainer)},n.createMissionTopBanner=function(){this.topBanner=new Hi(this.scene,!1),this.add(this.topBanner),Phaser.Display.Align.In.TopCenter(this.topBanner,this,0,-16)},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,qc,Qc.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"Close",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),this.add(t),Phaser.Display.Align.In.BottomRight(t,this,0,-160),t.onClick=function(){e.scene.screen.close(l.o4.MISSION_COMPLETED_SCREEN)},this.closeDevButton=t},n.createFooter=function(){var t=this;this.footer=new Va.Z(this.scene,!1,l.o4.MISSION_COMPLETED_SCREEN),this.add(this.footer),this.bringToTop(this.footer),this.footer.setInteractive();var n=this.scene.ads.getBannerHeight(),i=this.scene.world.isLandscape()?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.background,0,-n+i),this.footer.createTournamentButtonForMissionCompleteScreen();var a=this.footer.tournamentsButton;a.setIconFrame(N.Z.GAMEPLAY_DEFAULT.FRAME.IC_UNDO),a.setText(this.scene.lang.Text.BACK_TO_JOURNEY),a.onClick=function(){e.prototype.close.call(t),t.scene.scene.switch(Bc.C.JOURNEY_SCENE)}},n.createBottomLogo=function(){if(!this.scene.world.isLandscape()){var e=new Fa.Z(this.scene);this.add(e),Phaser.Display.Align.In.BottomCenter(e,this)}},n.open=function(t){e.prototype.open.call(this,t),this.setBlockInputOutsideEnabled(!0),this.updateData(),this.completedContainer.setVisible(this.completed),this.failedContainer.setVisible(!this.completed),this.completedContainer.setAlpha(this.completed?1:0),this.failedContainer.setAlpha(this.completed?0:1),this.runOpenAnimation(),this.closed=!1},n.close=function(){this.closed=!1,this.runCloseAnimation()},n.updateData=function(){var e,t=null==(e=this.data)?void 0:e.list;if(t){var n=t.description,i=t.stats,a=t.completed,r=t.level;if(n&&this.topBanner.setDescription(n),i?(this.topBanner.setLimit(i),this.topBanner.enableLimit(!0)):this.topBanner.enableLimit(!1),r&&(this.completedContainer.setLevel(r),this.failedContainer.setLevel(r)),this.completed=null!=a&&a,this.completed){if(this.topBanner.enableIcon(!0),this.scene instanceof vu){var s=this.scene.levelHandler.getJourneyLength(),o=this.scene.player.getCustomData("currentJourneyLevel");r<s&&r===o&&this.scene.player.setCustomData("currentJourneyLevel",r+1)}}else this.topBanner.enableIcon(!1)}},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a,r,s,c=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Se.Z.POPUP_SHOW),a=this.scene.ads.getBannerHeight(),(r=[this.completedContainer,this.failedContainer]).forEach((function(e){e.setAlpha(0),e.y=a,e.hideContent()})),null==(n=this.closeDevButton)||n.setDisabled(!0),s=(this.topBanner.y+this.topBanner.height+(this.footer.y-this.footer.height/2))/2-15,this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:r,ease:Phaser.Math.Easing.Back.Out,props:{y:{from:a,to:s},alpha:{from:0,to:1}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae().all(p()(r).call(r,(function(e){return e.runEntranceAnimation()})));case 2:null==(t=c.closeDevButton)||t.setDisabled(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.fadeInAnimation.play(),this.slideInAnimation.play();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),eu=N.Z.GAMEPLAY_DEFAULT,tu=eu.KEY,nu=eu.FRAME,iu=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.bitmapTextsContainer=void 0,n.wellDoneLetterBitmapTexts=[],n.outOfMovesLetterBitmapTexts=[],n.cards=[],n.cardInitialProps=[],n.isPlayingAnimation=!1,n.isWellDone=!0,n.setSize(300,300),n.createBackground(),n.createTextContainer(),n.createCards(),n.alignComponents(),n.scaleTextToFitScreen(),n.createDevButtons(),n}(0,r.Z)(t,e);var n=t.prototype;return n.enableWellDone=function(e){void 0===e&&(e=!0),this.isWellDone=e},n.createBackground=function(){this.background=new Gi.Z(this.scene,0,0,this.width,this.height,20,16579837,0),this.add(this.background)},n.createTextContainer=function(){var e=this.scene.make.container({});this.add(e),this.bitmapTextsContainer=e,this.createWellDoneLetterBitmapTexts(e),this.createOutOfMovesLetterBitmapTexts(e)},n.scaleTextToFitScreen=function(){var e=this.wellDoneLetterBitmapTexts.length,t=this.wellDoneLetterBitmapTexts[0],n=this.wellDoneLetterBitmapTexts[e-1],i=n.x-t.x+t.width+n.width,a=this.outOfMovesLetterBitmapTexts.length,r=this.outOfMovesLetterBitmapTexts[0],s=this.outOfMovesLetterBitmapTexts[a-1],o=s.x-r.x+r.width+s.width,c=this.scene.game.world.getWorldSize().width/(Math.max(i,o)+50);c<1&&this.bitmapTextsContainer.setScale(c)},n.createWellDoneLetterBitmapTexts=function(e){this.wellDoneLetterBitmapTexts=this.createBitmapTextsFromString(this.scene.lang.Text.WELL_DONE),e.add(this.wellDoneLetterBitmapTexts)},n.createOutOfMovesLetterBitmapTexts=function(e){this.outOfMovesLetterBitmapTexts=this.createBitmapTextsFromString(this.scene.lang.Text.OUT_OF_MOVES),e.add(this.outOfMovesLetterBitmapTexts)},n.createBitmapTextsFromString=function(e){var t,n=this;return p()(t=e.split("")).call(t,(function(e){return n.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:n.scene.fontSize(30),origin:{x:.5,y:.5},text:e})}))},n.createCards=function(){var e=this.scene.theme.getCurrentThemeConfig().cardFaceKey,t=this.scene.add.image(0,0,e,"101"),n=this.scene.add.image(0,0,e,"201"),i=this.scene.add.image(0,0,e,"301"),a=this.scene.add.image(0,0,e,"401");this.cards.push(t,n,i,a),this.cards.forEach((function(e){return e.setWorldSize(49,72)})),this.add(this.cards)},n.alignComponents=function(){var e=this,t=this.getCharDistance();[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(n,i){var a=t*(-(e.length-1)/2)+t*i;"!"===n.text&&(a-=5),a+=8,n.setX(a)}))}));this.cards.forEach((function(t,n){Phaser.Display.Align.In.TopCenter(t,e);var i=-(e.cards.length-1)/2*80+80*n;t.setX(i),e.cardInitialProps.push({x:t.x,y:t.y,scale:t.scale})}))},n.getCharDistance=function(){switch(this.scene.lang.getCurrentLanguage()){case"zh":return 30;case"ja":return 33;default:return 25}},n.createDevButtons=function(){GameCore.Utils.Valid.isDebugger()&&this.createCloseButton()},n.createCloseButton=function(){var e=this,t=new rt.Z(this.scene,40,40),n=this.scene.add.image(0,0,tu,nu.IC_BG_OFF);n.setWorldSize(40,40);var i=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(10),text:"X",origin:{x:.5,y:.5}});i.setCenterAlign(),t.add([n,i]),Phaser.Display.Align.To.TopRight(t,this),t.onClick=function(){e.isPlayingAnimation||e.scene.screen.close(l.o4.WELL_DONE_SCREEN)},this.add(t)},n.hideContent=function(){[this.wellDoneLetterBitmapTexts,this.outOfMovesLetterBitmapTexts].forEach((function(e){e.forEach((function(e){e.setAlpha(0),e.setAngle(10)}))})),this.cards.forEach((function(e){e.setAlpha(0),e.setPosition(0,333.5)}))},n.runEntranceAnimationText=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 100,t=this.isWellDone?this.wellDoneLetterBitmapTexts:this.outOfMovesLetterBitmapTexts,n=p()(t).call(t,(function(e,t){return new(ae())((function(n){i.scene.add.tween({targets:e,duration:100,delay:100*t/2,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:1,angle:0,scale:{from:.6,to:1,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:1e3}},onComplete:n})}))})),e.next=5,ae().all(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimationCards=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,i,a,r,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=800,a=p()(t=this.cards).call(t,(function(e,t){var n=s.cardInitialProps[t],a=t*i/4,r=new(ae())((function(t){s.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Back.Out,easeParams:[2.7],props:{alpha:1,y:n.y,scale:{from:.6*n.scale,to:1.1*n.scale,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i}},onComplete:t})})),o=new(ae())((function(t){s.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})})),c=new(ae())((function(t){s.scene.add.tween({targets:e,duration:i,delay:a,ease:Phaser.Math.Easing.Quadratic.Out,props:{x:n.x},onComplete:t})}));return ae().all([r,o,c])})),e.next=4,ae().all(a);case 4:return r=p()(n=this.cards).call(n,(function(e,t){var n=s.cardInitialProps[t];return new(ae())((function(t){s.scene.add.tween({targets:e,ease:Phaser.Math.Easing.Elastic.Out,easeParams:[.1,.45],duration:i,props:{scale:n.scale},onComplete:t})}))})),e.next=7,ae().all(r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runEntranceAnimation=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPlayingAnimation){e.next=2;break}return e.abrupt("return");case 2:return this.isPlayingAnimation=!0,e.next=5,this.runEntranceAnimationText();case 5:this.isPlayingAnimation=!1;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.GameObjects.Container),au=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.container=void 0,r.setDepth(l.Ks.POPUP),r.container=new iu(t),r.add(r.container),r.background.setTint(1315862),r.background.setAlpha(.5),r}(0,r.Z)(t,e);var n=t.prototype;return n.open=function(t){e.prototype.open.call(this,t),this.container.setAlpha(1),this.background.setAlpha(.5),this.container.setInteractive();var n=(null!=t?t:{}).wellDone;this.container.enableWellDone("boolean"!==typeof n||n),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e=(0,i.Z)(o().mark((function e(){var t,n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(t=this.slideInAnimation)||null==(t=t.tween)||!t.isPlaying()){e.next=2;break}return e.abrupt("return");case 2:this.scene.audio.playSound(Se.Z.POPUP_SHOW),n=this.scene.ads.getBannerHeight(),this.container.hideContent(),this.slideInAnimation||(this.slideInAnimation=new Yi.Z({targets:[this.container],props:{y:{from:n,to:-n/2,ease:Phaser.Math.Easing.Back.Out}},duration:300,onComplete:function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.container.runEntranceAnimation();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.fadeInAnimation||(this.fadeInAnimation=new zi.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(Se.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new Vi.Z({targets:[this],ease:Phaser.Math.Easing.Linear,props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),ru=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.closeResultScreens=function(){var e=this.scene.screen.get(l.o4.VICTORY_SCREEN);e&&e instanceof Xa&&e.visible&&e.close();var t=this.scene.screen.get(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);t&&t instanceof bc&&t.visible&&t.close();var n=this.scene.screen.get(l.o4.NO_MORE_MOVES_SCREEN);n&&n instanceof mr&&n.visible&&n.close();var i=this.scene.screen.get(l.o4.TOURNAMENTS_RESULT_SCREEN);i&&i instanceof Ws&&i.visible&&i.close()},n.isFromGameOverScreen=function(){var e=this.scene.screen.get(l.o4.NO_MORE_MOVES_SCREEN);if(e&&e instanceof mr&&e.visible)return!0;var t=this.scene.screen.get(l.o4.VICTORY_SCREEN);if(t&&t instanceof Xa&&t.visible)return!0;var n=this.scene.screen.get(l.o4.TOURNAMENTS_RESULT_SCREEN);return!!(n&&n instanceof Ws&&n.visible)},n.createJourneyButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Journey"),t.onClick=function(){e.scene.screen.close(l.o4.RESULT_PLAY_SCREEN),e.closeResultScreens(),e.scene instanceof ji.Z&&e.scene.handleGoToJourneyScene()};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.JOURNEY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createChallengeButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("ChallengeFriend"),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(l.o4.RESULT_PLAY_SCREEN),!(e.scene instanceof ji.Z)){t.next=5;break}return t.next=4,e.scene.handlePlayWithFriend(e.isFromGameOverScreen());case 4:e.closeResultScreens();case 5:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:"Play With Friends",origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-60),this.add([t])},n.createNewDealButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("NewDeal"),t.onClick=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.scene.screen.close(l.o4.RESULT_PLAY_SCREEN),e.closeResultScreens(),!(e.scene instanceof ji.Z)){t.next=5;break}return t.next=5,e.scene.handlePlaySingle(e.isFromGameOverScreen());case 5:case"end":return t.stop()}}),t)})));var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.NEW_DEAL,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0),this.add([t])},n.createReplayButton=function(){var e=this,t=new rt.Z(this.scene,360,60);t.setName("Replay"),t.onClick=function(){e.scene.screen.close(l.o4.RESULT_PLAY_SCREEN),e.closeResultScreens(),e.scene instanceof ji.Z&&e.scene.gameplay.replayGame(e.isFromGameOverScreen())};var n=this.scene.make.bitmapText({font:$e.Z.PRIMARY.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.REPLAY,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.In.TopCenter(t,this.bg,0,-180),this.add([t])},n.createCloseButton=function(){var e=this,t=new Ki.Z(this.scene,360,60,16,16579837);t.setName("Cancel"),t.onClick=function(){e.scene.screen.close(l.o4.RESULT_PLAY_SCREEN)};var n=this.scene.make.bitmapText({font:$e.Z.BOLD.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.CANCEL,origin:{x:.5,y:.5}});n.setTint(31487),t.add([n]),Phaser.Display.Align.To.BottomCenter(t,this.bg,0,8),this.add([t])},t}(Xi),su=ru,ou=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.createPlayContainer=function(){this.playContainer=new su(this.scene),this.add(this.playContainer)},t}(qi),cu=ou,uu=N.Z.GAMEPLAY_DEFAULT,lu=uu.KEY,hu=uu.FRAME,du=function(e){function t(t){var n;return(n=e.call(this,t,40,45,lu,hu.JOURNEY.ICO_JOURNEY,t.lang.Text.JOURNEY,void 0,{textMaxWidth:65,textMaxHeight:20})||this).originIconY=void 0,n.createBackground(),n.icon.setWorldSize(20,23),n.icon.setY(-11),n.originIconY=n.icon.y,n.setTintText(16449487,16449487,15913325,15913325),n.runAnimation(),n}(0,r.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new Gi.Z(this.scene,0,0,this.text.width+5,this.text.height+5,6,2039583,.4);this.add(e),e.removeInteractive(),e.setY(this.text.y),this.sendToBack(e)},n.runAnimation=function(){var e=this;this.scene.time.addEvent({delay:1e4,callback:function(){e.scene.tweens.add({ease:Phaser.Math.Easing.Sine.InOut,targets:e.icon,y:e.originIconY+3,alpha:.5,duration:500,yoyo:!0,loop:2})},loop:!0})},t}(Za.Z),fu=N.Z.GAMEPLAY_DEFAULT,pu=fu.KEY,gu=fu.FRAME,mu=function(e){function t(){for(var t,n,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=e.call.apply(e,u()(t=[this]).call(t,s))||this).header=void 0,n.footer=void 0,n.gameplay=void 0,n.gameStats=void 0,n.levelLoader=void 0,n.themeHandler=void 0,n.gameModeManager=void 0,n.levelHandler=void 0,n.placementManager=void 0,n.numOfGamePlayed=0,n.isPreparingPlayInSoloCtx=!1,n.handleFinishingChallenge=function(){var e=n.storage.getState(),t=(0,ln.Uq)(e)||{},i=t.suitSize,a=void 0===i?"one":i,r=t.difficulty,s=void 0===r?"easy":r;n.screen.open(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,{suitSize:a,difficulty:s});var o=n.screen.get(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN);o.updateFinishingChallenge(),n.handleSendWaitingMessage(),o.once(Dc.Z.CLOSE,(function(){window.isFinishingFriendMatch=!1,n.gameplay.loadAndPlayGame()}))},n.handleSendWaitingMessage=function(){var e=n.storage.getState(),t=(0,ln.oN)(e).playerId;if(!(0,ln.zQ)(e,{opponentId:t})){var i=FBInstant.context.getID();if(i){var a=window.FBInstant.getEntryPointData();n.player.getPlayerId(),(0,ln.rl)(e),a.suitSize,a.difficulty}}},n.create=function(){e.prototype.create.call((0,a.Z)(n)),function(){var e=window.game.globalScene.gameZone.width,t=1.3*X.CARD_WIDTH,n=e/11>t?t:e/11,i=n/X.CARD_WIDTH>1.3?1.3:n/X.CARD_WIDTH;X.CARD_HEIGHT*=i,X.CARD_WIDTH=n,X.VERTICAL_PILE_SPACE*=i,X.MAX_HORIZONTAL_PILE_SPACE*=i,window.game.world.isLandscape()&&(X.SPACE_BETWEEN_PILE_AND_FOUNDATION=85)}(),n.themeHandler=new ia.Z((0,a.Z)(n)),n.gameModeManager=new br((0,a.Z)(n)),n.placementManager=new Lc((0,a.Z)(n)),n.gameStats=new ta((0,a.Z)(n)),n.levelLoader=new na((0,a.Z)(n)),n.levelHandler=new kc((0,a.Z)(n)),n.header=new Wi((0,a.Z)(n)),n.footer=new fi((0,a.Z)(n));var t=n.ads.getBannerHeight();console.log("bannerHeight: ",t),Phaser.Display.Align.In.TopCenter(n.header,n.gameZone,0);var i=n.world.isLandscape()?20:0;if(Phaser.Display.Align.In.BottomCenter(n.footer,n.gameZone,0,-t-i),GameCore.Utils.Valid.isDebugger()){var r=new Rc.Z((0,a.Z)(n),"Journey Test\nScene");r.onClick=function(){n.gameplay.boardGame.isDealing()||n.scene.switch(Bc.C.JOURNEY_TEST_SCENE)},Phaser.Display.Align.In.TopRight(r,n.footer,0,45)}var s=new du((0,a.Z)(n));s.onClick=function(){n.handleGoToJourneyScene()},n.world.isLandscape()?Phaser.Display.Align.In.LeftCenter(s,n.footer,75,3):Phaser.Display.Align.In.TopLeft(s,n.footer,-15,60),n.gameplay=new si((0,a.Z)(n)),n.createScreens(),n.levelHandler.init(),n.placementManager.init(),n.gameModeManager.start(),n.ads.preloadInterstitialAdAsync().catch((function(){})),n.header.alignChildren(),n.createBottomLogo(),n.ads.showBannerAdAsync().catch((function(e){console.warn(e)})),n.gameplay.boardGame.createDevTools(),n.runSceneManual()},n.setBackground=function(e){n.createBackground(e)},n.run=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.themeHandler.setBackground(),n.themeHandler.updateCardStyle();case 2:case"end":return e.stop()}}),e)}))),n.runSceneManual=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==window.isFinishingFriendMatch){e.next=3;break}return n.handleFinishingChallenge(),e.abrupt("return");case 3:return e.next=5,n.gameplay.loadAndPlayGame();case 5:case"end":return e.stop()}}),e)}))),n.handlePlayWithFriend=function(){var e=(0,i.Z)(o().mark((function e(t){var i,a,r,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,n.storage.dispatch((0,In.H)());case 3:if(window.focus(),!Un.Z.instance.isChallengeMode()){e.next=15;break}if(i=n.storage.getState(),a=(0,ln.Uq)(i)||{},console.log("extraData",a),r=a.suitSize,s=a.difficulty,!r||!s){e.next=14;break}return n.gameplay.startGame({type:"constant",suitSize:r,difficulty:s}),e.abrupt("return");case 14:console.warn("Cannot get extra data");case 15:n.gameplay.detectConfigAndStartGame(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePlaySingle=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,n.preparePlayInSoloCtx();case 3:n.gameplay.detectConfigAndStartGame(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePlayCustomJourneyLevel=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isPlayingJourneyLevel(t)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,n.preparePlayInSoloCtx();case 4:return n.gameplay.startGame({type:"journey-level-debug",level:t}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlePlayJourneyLevel=(0,i.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.player.getCustomData("currentJourneyLevel"),!n.isPlayingJourneyLevel(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.preparePlayInSoloCtx();case 5:return n.gameplay.startGame({type:"journey-level"}),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)}))),n.handlePlayJourney=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.preparePlayInSoloCtx();case 2:n.gameplay.startGame(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleGoToJourneyScene=function(){n.gameplay.boardGame.isDealing()||n.scene.switch(Bc.C.JOURNEY_SCENE)},n.handleReturnToGameSceneFromJourney=function(){var e=n.levelHandler.isInJourneyLevel();(e||!e&&n.gameplay.boardGame.isGameOver())&&n.handlePlaySingle(!0)},n}(0,r.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.activateDevTools=function(){this.gameplay.boardGame.devTools.revive()},n.createBottomLogo=function(){var e=this.world.getWorldSize().width,t=this.ads.getBannerHeight(),n=this.add.image(0,0,pu,gu.BOTTOM_BG);n.setWorldSize(e,t),Phaser.Display.Align.In.BottomCenter(n,this.gameZone),n.setDepth(Ge.Z.FOOTER_LOGO);var i=this.add.image(0,0,pu,gu.BOTTOM_LOGO),a=.7*n.height,r=325.5*a/34.5;GameCore.Utils.Device.isIOS()?i.setWorldSize(r/2,a/2):i.setWorldSize(r,a),this.game.world.isLandscape()&&(n.kill(),n.setY((this.footer.y+this.footer.height/2+this.gameZone.height)/2)),Phaser.Display.Align.In.Center(i,n,0,4),i.setDepth(Ge.Z.FOOTER_LOGO)},n.createScreens=function(){this.screen.add(l.o4.NO_MORE_MOVES_SCREEN,mr),this.screen.add(l.o4.VICTORY_SCREEN,Xa),this.screen.add(l.o4.PLAY_SCREEN,qi),this.screen.add(l.o4.RESULT_PLAY_SCREEN,cu),this.screen.add(l.o4.TOURNAMENTS_SCREEN,Wo),this.screen.add(l.o4.PLAY_WITH_FRIEND_GAME_OVER_SCREEN,bc),this.screen.add(l.o4.TOURNAMENTS_RESULT_SCREEN,Ws),this.screen.add(l.o4.MISSION_WELCOME_SCREEN,Mc),this.screen.add(l.o4.MISSION_COMPLETED_SCREEN,$c),this.screen.add(l.o4.WELL_DONE_SCREEN,au)},n.checkNewUser=function(){var e=this;(this.player.getPlayerIsNew()||GameCore.Configs.Tutorial.ForceUseTutorial)&&this.time.delayedCall(1e3,(function(){e.game.globalScene.screen.open(l.o4.HOW_TO_PLAY_SCREEN),e.scene.scene.player.incUserGuideDisplays()}))},n.isPlayingJourneyLevel=function(e){return!(!this.levelHandler.isInJourneyLevel()||this.levelHandler.getCurrentJourneyPlayingLevel()!==e||this.gameplay.boardGame.isGameOver())},n.preparePlayInSoloCtx=function(){var e=(0,i.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPreparingPlayInSoloCtx){e.next=2;break}return e.abrupt("return");case 2:return this.isPreparingPlayInSoloCtx=!0,this.preResetBoardForSmoothTransition(),e.next=6,(0,In.Sl)();case 6:return e.next=8,this.storage.dispatch((0,In.rq)());case 8:this.isPreparingPlayInSoloCtx=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.update=function(e,t){this.levelHandler.getConfigs()&&(this.gameplay.update(t),this.header.update())},n.addShortCutAfterStartGame=function(){this.numOfGamePlayed++,this.numOfGamePlayed>1&&this.facebook.attemptToAddShortcut().catch((function(){}))},n.preResetBoardForSmoothTransition=function(){this.gameplay&&this.gameplay.boardGame&&this.gameplay.boardGame.resetBoard()},t}(h.Z),vu=mu},102:function(e,t,n){"use strict";var i=n(497);t.Z=i.Z},505:function(e,t,n){"use strict";n.d(t,{Z:function(){return re}});var i=n(22),a=n(2),r=n(20),s=n.n(r),o=n(148),c=n(101),u=n(39),l=n(46),h=n(19),d=n(33),f=n.n(d),p=n(57),g=n(59),m=n(82),v=n(40),y=n(105),E=n.n(y),S=function(e){function t(t){var n;return(n=e.call(this,t)||this).columns=void 0,n.rows=void 0,n.cellWidths=void 0,n.cellHeight=void 0,n.textGroup=void 0,n.iconGroup=void 0,n.aligns=void 0,n.tableData=void 0,n.background=void 0,n.columns=0,n.rows=0,n.tableData=[],n.aligns=[],n.cellWidths=[],n.cellHeight=0,n.textGroup=n.scene.add.group(),n.iconGroup=n.scene.add.group(),t.add.existing((0,h.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.setTableSize=function(e,t,n,i,a){this.columns=t,this.rows=e,this.cellWidths=n,this.cellHeight=i,this.aligns=a,this.updateTable()},n.setTableData=function(e){this.tableData=e,this.updateTable()},n.updateTable=function(){var e;this.textGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.BitmapText&&e.kill()})),this.iconGroup.getChildren().forEach((function(e){return e instanceof Phaser.GameObjects.Image&&e.kill()}));var t=E()(e=this.cellWidths).call(e,(function(e,t){return e+t}),0),n=this.rows*this.cellHeight;this.setSize(t,n);var i=this.tableData;if(i)for(var a=0;a<this.rows;a++){var r=i[a];if(!r)break;var s=this.cellHeight*(.5+a)-this.height/2,o=-this.width/2,c=this.spawnIcon();c.setTexture(v.Z.GAMEPLAY_DEFAULT.KEY,r[2]),c.setWorldSize(24,24),c.setPosition(o-22,s);for(var u=0;u<this.columns;u++)if(r[u]){var l=this.cellWidths[u],h=this.spawnText();h.setText(r[u]),1==this.aligns[u]?(h.setOrigin(1,.5),h.setPosition(o+l,s)):0==this.aligns[u]?(h.setOrigin(.5,.5),h.setPosition(o+.5*l,s)):(h.setOrigin(0,.5),h.setPosition(o,s)),o+=l}}},n.drawBorder=function(){this.drawRowBorder(),this.drawColumnBorder();var e=this.scene.add.rectangle(0,0,0,0);e.setOrigin(.5,.5),e.setStrokeStyle(1,1907997,.2),e.setSize(this.width,this.height),e.setPosition(-this.width/2,-this.height/2),this.add(e)},n.drawRowBorder=function(){for(var e=-this.height/2,t=1;t<this.rows;t++){var n=this.scene.add.line(-15,e+this.cellHeight*t,0,0,this.width+35,0,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.drawColumnBorder=function(){for(var e=-this.width/2,t=1;t<this.rows;t++){e+=this.cellWidths[t-1]||0;var n=this.scene.add.line(e,0,0,0,0,this.height,1907997,.1);n.setLineWidth(.2),this.add(n)}},n.spawnText=function(){var e=this.textGroup.getFirstDead()||this.createText();return e.revive(),e},n.createText=function(){var e=this.scene.make.bitmapText({font:p.Z.BOLD.KEY,size:this.scene.fontSize(16),origin:{x:.5,y:.5}});return e.setTint(1907997),this.textGroup.add(e),this.add(e),e},n.spawnIcon=function(){var e=this.iconGroup.get();return e.revive(),e.clearTint(),this.add(e),e},t}(Phaser.GameObjects.Container),T=n(117),A=43282,C=15672868,b=13425357,I=303,w=24,x=12,_=24,O=66,P=1e3,k=Phaser.Math.Easing.Quadratic.Out,L=A,D=C,R=b,B=function(e){function t(t){var n;return(n=e.call(this,t)||this).emptyBar=void 0,n.winRateBar=void 0,n.loseRateBar=void 0,n.cornerRadius=void 0,n.isPlayingAnimation=!1,n.updatedLoseGraphicsWidth=-1,n.setSize(I,x),n.cornerRadius=n.height/2,n.createEmptyBar(),n.createWinRateBar(),n.createLoseRateBar(),n}(0,a.Z)(t,e);var n=t.prototype;return n.createEmptyBar=function(){var e=this.width,t=this.height;this.emptyBar=new g.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(R),this.add(this.emptyBar)},n.createWinRateBar=function(){var e=this.width,t=this.height;this.winRateBar=new g.Z(this.scene,0,0,e,t,this.cornerRadius).setFillStyle(L).setOrigin(0,.5),this.add(this.winRateBar),Phaser.Display.Align.In.LeftCenter(this.winRateBar,this)},n.createLoseRateBar=function(){var e=this.width,t=this.height;this.loseRateBar=new g.Z(this.scene,0,0,e/2,t,this.cornerRadius).setFillStyle(D).setOrigin(1,.5),this.add(this.loseRateBar),Phaser.Display.Align.In.RightCenter(this.loseRateBar,this)},n.updateWinLoseCount=function(e,t){var n=e+t;if(n<=0)return this.winRateBar.kill(),void this.loseRateBar.kill();e?this.winRateBar.revive():this.winRateBar.kill(),t?this.loseRateBar.revive():this.loseRateBar.kill(),this.bringToTop(t<e?this.loseRateBar:this.winRateBar);var i=t/n*this.width;this.updatedLoseGraphicsWidth=i},n.initAnimation=function(){this.isPlayingAnimation||(this.loseRateBar.width=2*this.cornerRadius,this.winRateBar.width=2*this.cornerRadius)},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedLoseGraphicsWidth?(this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.updatedLoseGraphicsWidth,ease:k,duration:P,onUpdate:function(t){e.loseRateBar.width=t.getValue()},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:2*this.cornerRadius,to:this.width-this.updatedLoseGraphicsWidth+2*this.cornerRadius,ease:k,duration:P,onUpdate:function(t){var n=t.getValue();e.winRateBar.width=n>e.width?e.width:n}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),N=12,M=A,G=C,U=16,F=function(e){function t(t){var n;return(n=e.call(this,t)||this).winCountLabel=void 0,n.loseCountLabel=void 0,n.setSize(I,w),n.createWinCountLabel(),n.createLoseCountLabel(),n.alignComponents(),n}(0,a.Z)(t,e);var n=t.prototype;return n.createWinCountLabel=function(){this.winCountLabel=this.scene.lang.makeText(this.scene,{font:p.Z.PRIMARY.KEY,size:this.scene.fontSize(U),text:this.scene.lang.Text.WIN+": 62",origin:{x:0,y:.5},maxHeight:35,maxWidth:150}).setTint(M),this.add(this.winCountLabel)},n.createLoseCountLabel=function(){this.loseCountLabel=this.scene.lang.makeText(this.scene,{font:p.Z.PRIMARY.KEY,size:this.scene.fontSize(U),text:this.scene.lang.Text.LOSE+": 32",origin:{x:1,y:.5},maxHeight:35,maxWidth:150}).setTint(G),this.add(this.loseCountLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winCountLabel,this),Phaser.Display.Align.In.RightCenter(this.loseCountLabel,this)},n.updateWinLoseCount=function(e,t){this.winCountLabel.setText(this.scene.lang.Text.WIN+": "+e),this.loseCountLabel.setText(this.scene.lang.Text.LOSE+": "+t)},t}(Phaser.GameObjects.Container),Z=A,H=C,W=N,z=function(e){function t(t){var n;return(n=e.call(this,t)||this).winRateLabel=void 0,n.loseRateLabel=void 0,n.isPlayingAnimation=!1,n.updatedRoundedWinPercentage=-1,n.updatedRoundedLosePercentage=-1,n.setSize(I,_),n.createWinRateLabel(),n.createLoseRateLabel(),n.alignComponents(),n}(0,a.Z)(t,e);var n=t.prototype;return n.createWinRateLabel=function(){this.winRateLabel=this.scene.make.bitmapText({font:p.Z.PRIMARY.KEY,size:this.scene.fontSize(W),text:"67%",origin:{x:0,y:.5}}).setTint(Z),this.add(this.winRateLabel)},n.createLoseRateLabel=function(){this.loseRateLabel=this.scene.make.bitmapText({font:p.Z.PRIMARY.KEY,size:this.scene.fontSize(W),text:"33%",origin:{x:1,y:.5}}).setTint(H),this.add(this.loseRateLabel)},n.alignComponents=function(){Phaser.Display.Align.In.LeftCenter(this.winRateLabel,this),Phaser.Display.Align.In.RightCenter(this.loseRateLabel,this)},n.getRoundedWinLosePercentage=function(e,t){if(0===e&&0===t)return{win:0,lose:0};var n=Math.round(100*e);return{win:n,lose:100-n}},n.updateWinLoseRate=function(e,t){var n=e+t,i=n<=0?0:e/n,a=n<=0?0:t/n,r=this.getRoundedWinLosePercentage(i,a),s=r.win,o=r.lose;this.winRateLabel.setText(s+"%"),this.loseRateLabel.setText(o+"%"),this.updatedRoundedWinPercentage=s,this.updatedRoundedLosePercentage=o},n.initAnimation=function(){this.isPlayingAnimation||(this.winRateLabel.setText("0%"),this.loseRateLabel.setText("0%"))},n.playAnimation=function(){var e=this;this.isPlayingAnimation||(this.isPlayingAnimation=!0,-1!==this.updatedRoundedWinPercentage&&-1!==this.updatedRoundedLosePercentage?(this.scene.tweens.addCounter({from:0,to:this.updatedRoundedWinPercentage,ease:k,duration:P,onUpdate:function(t){var n=Math.round(t.getValue());e.winRateLabel.setText(n+"%")},onComplete:function(){e.isPlayingAnimation=!1}}),this.scene.tweens.addCounter({from:0,to:this.updatedRoundedLosePercentage,ease:k,duration:P,onUpdate:function(t){var n=Math.round(t.getValue());e.loseRateLabel.setText(n+"%")}})):this.isPlayingAnimation=!1)},t}(Phaser.GameObjects.Container),Y=function(e){function t(t){var n;return(n=e.call(this,t)||this).countLabel=void 0,n.rateLabel=void 0,n.barChart=void 0,n.setSize(I,O),n.createCountLabel(),n.createRateLabel(),n.createBarChart(),n.alignComponents(),n}(0,a.Z)(t,e);var n=t.prototype;return n.setWinLoseCount=function(e,t){this.countLabel.updateWinLoseCount(e,t),this.barChart.updateWinLoseCount(e,t),this.rateLabel.updateWinLoseRate(e,t)},n.initAnimation=function(){this.barChart.initAnimation(),this.rateLabel.initAnimation()},n.playAnimation=function(){this.barChart.playAnimation(),this.rateLabel.playAnimation()},n.createCountLabel=function(){this.countLabel=new F(this.scene),this.add(this.countLabel)},n.createRateLabel=function(){this.rateLabel=new z(this.scene),this.add(this.rateLabel)},n.createBarChart=function(){this.barChart=new B(this.scene),this.add(this.barChart)},n.alignComponents=function(){Phaser.Display.Align.In.TopCenter(this.countLabel,this),Phaser.Display.Align.In.Center(this.barChart,this),Phaser.Display.Align.In.BottomCenter(this.rateLabel,this)},n.addBackground=function(){var e="win-lose-chart-background";if(!this.scene.textures.exists(e)){var t=this.width,n=this.height,i=this.scene.add.graphics();i.fillStyle(65280,.2),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}var a=this.scene.add.image(0,0,e);this.add(a)},t}(Phaser.GameObjects.Container),V=v.Z.GAMEPLAY_DEFAULT.FRAME,K=function(e){function t(t){var n;return(n=e.call(this,t)||this).chart=void 0,n.tableStats=void 0,n.chart=new Y(t),n.tableStats=new S(t),n.tableStats.setTableSize(6,2,[135,125],60,[-1,1]),n.tableStats.drawRowBorder(),n.setSize(340,n.chart.height+n.tableStats.height),n.add([n.chart,n.tableStats]),Phaser.Display.Align.In.TopCenter(n.chart,(0,h.Z)(n)),Phaser.Display.Align.To.BottomCenter(n.tableStats,n.chart,15),t.add.existing((0,h.Z)(n)),n}return(0,a.Z)(t,e),t.prototype.setStats=function(e){var t=e.totalGame,n=e.wins,i=e.winsWithoutUndo,a=e.bestScore,r=e.averageScore,s=e.bestWinningTime,o=e.averageWinningTime;this.chart.setWinLoseCount(n,t-n);var c=this.scene.lang.Text;this.tableStats.setTableData([[c.TOTAL_GAME,""+t,V.STATS_FLASH],[c.WINS_WITHOUT_UNDO,""+i,V.STATS_CROWN],[c.BEST_SCORE,""+a,V.STATS_MEDAL_START],[c.AVERAGE_SCORE,""+Math.round(r),V.STATS_STAR],[c.BEST_WINNING_TIME,""+(0,T.F0)(s,!1),V.STATS_CUP],[c.AVERAGE_WINNING_TIME,""+(0,T.F0)(o,!1),V.STATS_TIMER]])},t}(Phaser.GameObjects.Container),j=n(506),J=v.Z.GAMEPLAY_DEFAULT.KEY,X=400,q=20,Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.tab=void 0,n.gameStats=void 0,n.oneSuitStats=void 0,n.twoSuitsStats=void 0,n.fourSuitsStats=void 0,n.currentContainerIdx=void 0,n.createBackground(),n.createTitle(),n.createGameStats(),n.createTab(),n.createCloseButton(),t.add.existing((0,h.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new g.Z(this.scene,0,0,340,520,20,16579837),t=this.scene.add.line(0,0,0,0,340,0,3774208,1);t.setLineWidth(.6),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height),Phaser.Display.Align.In.TopCenter(t,this,0,-88)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:p.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.STATISTICS,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createTab=function(){var e,t=this,n=q,i=X;this.tab=new j.Z(this.scene,300,30,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var a=this.scene.lang.Text,r=f()(e=["1 "+a.SUIT,"2 "+a.SUITS,"4 "+a.SUITS]).call(e,(function(e){return t.scene.lang.makeText(t.scene,{font:p.Z.PRIMARY.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5},maxWidth:95,maxHeight:30})}));this.tab.addLabels(r),this.tab.callback=function(e){r.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)}));var a=[t.oneSuitStats,t.twoSuitsStats,t.fourSuitsStats],s=a[t.currentContainerIdx],o=a[e];if(s!==o){var c=a[3-t.currentContainerIdx-e];t.scene.tweens.killTweensOf(s),t.scene.tweens.killTweensOf(o),t.scene.tweens.add({targets:o,alpha:{from:0,to:1},x:{from:-n,to:0},duration:i,ease:Phaser.Math.Easing.Sine.In}),t.scene.tweens.add({targets:s,alpha:{from:1,to:0},x:{from:0,to:n},duration:i,ease:Phaser.Math.Easing.Sine.Out}),t.currentContainerIdx=e,c&&(t.scene.tweens.killTweensOf(c),c.setAlpha(0),c.setX(n))}},this.tab.selectTab(0),this.currentContainerIdx=0,this.oneSuitStats.alpha=1,this.twoSuitsStats.alpha=0,this.fourSuitsStats.alpha=0},n.createGameStats=function(){var e=this.scene.add.container(0,0);this.oneSuitStats=new K(this.scene),this.twoSuitsStats=new K(this.scene),this.twoSuitsStats.setAlpha(0),this.fourSuitsStats=new K(this.scene),this.fourSuitsStats.setAlpha(0),e.setSize(this.twoSuitsStats.width,this.twoSuitsStats.height),e.add(this.oneSuitStats),e.add(this.twoSuitsStats),e.add(this.fourSuitsStats),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-95),this.gameStats=e},n.createCloseButton=function(){var e=this,t=new m.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(u.o4.GAME_STATS_SCREEN)};var n=this.scene.add.image(0,0,J,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.gameStats.setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},t}(Phaser.GameObjects.Container),$=Q,ee=n(102),te=n(100),ne=n(79),ie=n(147),ae=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.gameStatsContainer=void 0,r.scene=t,r.setDepth(u.Ks.POPUP),r.gameStatsContainer=new $(t),r.syncScaleWithSettingsContainer(),r.add(r.gameStatsContainer),r}(0,a.Z)(t,e);var n=t.prototype;return n.syncScaleWithSettingsContainer=function(){var e=this.scene.screen.get(u.o4.SETTINGS_SCREEN);if(e&&e instanceof ie.Z){var t=e.getContainerScale();this.gameStatsContainer.setScale(t)}},n.open=function(){var t=this;e.prototype.open.call(this),this.gameStatsContainer.setAlpha(1),this.background.setAlpha(.8),this.gameStatsContainer.setInteractive(),this.updateStatistics(),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(u.o4.GAME_STATS_SCREEN)})),this.runOpenAnimation()},n.updateStatistics=function(){var e=this.gameStatsContainer,t=e.oneSuitStats,n=e.twoSuitsStats,i=e.fourSuitsStats,a=this.scene.scene.get(ne.C.GAME_SCENE);if(a instanceof ee.Z){var r=a.gameStats.getTotalGameStats("one"),s=a.gameStats.getTotalGameStats("two"),o=a.gameStats.getTotalGameStats("four");t.setStats(r),n.setStats(s),i.setStats(o)}},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e;if(null==(e=this.slideInAnimation)||null==(e=e.tween)||!e.isPlaying()){this.scene.audio.playSound(l.Z.POPUP_SHOW);var t=this.gameStatsContainer,n=[t.oneSuitStats,t.twoSuitsStats,t.fourSuitsStats];n.forEach((function(e){e.chart.initAnimation()}));var a=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new o.Z({targets:[this.gameStatsContainer],props:{y:{from:this.height/2,to:this.height/2-this.gameStatsContainer.height*this.gameStatsContainer.scaleY/2-20-a,ease:Phaser.Math.Easing.Back.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new te.Z({targets:[this],duration:300,onComplete:function(){var e=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach((function(e){e.chart.playAnimation()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(l.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new c.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),re=ae},507:function(e,t,n){"use strict";var i=n(2),a=n(101),r=n(39),s=n(46),o=n(676),c=n(100),u=n(29),l=n(147),h=function(e){function t(t,n,i,a){var s;return(s=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,s.fadeOutAnimation=void 0,s.howToPlayContainer=void 0,s.setDepth(r.Ks.POPUP),s.howToPlayContainer=new o.Z(t),s.syncScaleWithSettingsContainer(),s.add(s.howToPlayContainer),s}(0,i.Z)(t,e);var n=t.prototype;return n.syncScaleWithSettingsContainer=function(){var e=this.scene.game.globalScene.screen.get(r.o4.SETTINGS_SCREEN);if(e&&e instanceof l.Z){var t=e.getContainerScale();this.howToPlayContainer.setScale(t)}},n.open=function(){e.prototype.open.call(this),this.howToPlayContainer.setAlpha(1),this.background.setAlpha(.8),this.howToPlayContainer.selectStep(0),this.scene.analytics.event(u._.TUTORIAL_BEGIN),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e;null!=(e=this.slideInAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(s.Z.POPUP_SHOW),this.slideInAnimation||(this.slideInAnimation=new c.Z({targets:[this],duration:300})),this.slideInAnimation.play())},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(s.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new a.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen);t.Z=h},147:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(2),a=n(100),r=n(148),s=n(101),o=n(39),c=n(46),u=n(19),l=n(57),h=n(59),d=n(29),f=n(82),p=n(40),g=p.Z.GAMEPLAY_DEFAULT.KEY,m=function(e){function t(t,n){var i;return(i=e.call(this,t,60,50)||this).options=void 0,i.button=void 0,i.getBackgroundByStatus=function(){var e=i.options,t=e.enable,n=e.backgroundOn,a=e.backgroundOff;return t?n:a},i.createButton=function(e){var t=i.getBackgroundByStatus();i.button=i.scene.add.image(0,0,e,t),i.add(i.button)},i.button=t.add.image(0,0,g,"ic_switch_off"),i.button.setWorldSize(40,25),i.add(i.button),i.options={enable:n,backgroundOn:"ic_switch_on",backgroundOff:"ic_switch_off"},i.updateStatus(n),i}(0,i.Z)(t,e);var n=t.prototype;return n.processCallback=function(e){var t=this.options.enable;this.updateStatus(!t),e(!t)},n.updateStatus=function(e){this.options.enable=e;var t=this.getBackgroundByStatus();this.button.setFrame(t)},n.logButtonEvent=function(){var e=this.getParentName(),t=this.name,n=!this.options.enable;this.scene.analytics.event(d._.BUTTON_CLICK,{button_name:t,screen_name:e,enable:n})},t}(f.Z),v=n(28),y=p.Z.GAMEPLAY_DEFAULT,E=y.KEY,S=y.FRAME,T=function(e){function t(t,n,i){var a;return(a=e.call(this,t,60,50)||this).options=void 0,a.buttons=void 0,a.callback=void 0,a.createButton=function(e,t){var n=new f.Z(a.scene,40,40),i=a.scene.add.image(0,0,E,S.IC_SQUARE_OFF);i.setName("bg"),i.setWorldSize(32,32);var r=a.scene.make.bitmapText({font:l.Z.BOLD.KEY,size:a.scene.fontSize(16),text:t,origin:{x:.5,y:.5}});return a.add(n),n.add([i,r]),Phaser.Display.Align.In.Center(r,i),Phaser.Display.Align.In.Center(i,n),n.x=40*e,n},a.handleSelectOption=function(e){return function(){a.options.checked=e,a.updateSelectedOption(),a.callback&&a.callback(e)}},a.options={checked:n,options:i},a.buttons={},a.createButtons(),a.updateSelectedOption(),a.scene.add.existing((0,u.Z)(a)),a}(0,i.Z)(t,e);var n=t.prototype;return n.createButtons=function(){var e=this;this.options.options.forEach((function(t,n){var i=e.createButton(n,t);e.buttons[t]=i,i.onClick=e.handleSelectOption(t)}))},n.updateStatus=function(e){this.options.checked=e,this.updateSelectedOption()},n.updateSelectedOption=function(){var e=this,t=this.options,n=t.options,i=t.checked;n.forEach((function(t){e.buttons[t].getByName("bg").setFrame(S.IC_SQUARE_OFF)})),this.buttons[i].getByName("bg").setFrame(S.IC_SQUARE_ON)},(0,v.Z)(t,[{key:"onClick",set:function(e){this.callback=e}}]),t}(Phaser.GameObjects.Container),A=n(79),C=n(497),b=p.Z.GAMEPLAY_DEFAULT,I=b.KEY,w=b.FRAME,x=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.relaxedSpiderBtn=void 0,n.suitSizeCheckBoxBtn=void 0,n.soundEffectsBtn=void 0,n.tapToMoveBtn=void 0,n.autoHintsBtn=void 0,n.autoCompleteBtn=void 0,n.smartClickBtn=void 0,n.triggerSequence=void 0,n.isSequenceStarted=void 0,n.createBackground(),n.createContent(),n.createCloseButton(),t.add.existing((0,u.Z)(n)),n.triggerSequence="",n.isSequenceStarted=!1,n}(0,i.Z)(t,e);var n=t.prototype;return n.resetDevToolSequence=function(){this.triggerSequence="",this.isSequenceStarted=!1},n.checkIfSequenceStarted=function(){if(this.soundEffectsBtn&&this.tapToMoveBtn&&this.autoHintsBtn&&this.autoCompleteBtn&&this.relaxedSpiderBtn&&!this.isSequenceStarted){var e=[this.soundEffectsBtn,this.tapToMoveBtn,this.autoHintsBtn,this.autoCompleteBtn,this.relaxedSpiderBtn],t=!0;e.forEach((function(e){e.options.enable||(t=!1)})),t&&(this.isSequenceStarted=!0,this.triggerSequence="")}},n.addToSequence=function(e){if(this.isSequenceStarted&&(this.triggerSequence+=e,"1232343425"===this.triggerSequence)){var t=this.scene.scene.get(A.C.GAME_SCENE);t instanceof C.Z&&t.activateDevTools()}},n.createBackground=function(){var e=new h.Z(this.scene,0,0,340,462,20,16579837);this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:l.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.SETTINGS,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-16);var t=this.scene.player.getPlayerSettings(),n=t.sound,i=void 0===n||n,a=t.tapToMove,r=void 0===a||a,s=t.autoHints,o=void 0===s||s,c=t.autoComplete,u=void 0===c||c,h=t.relaxedSpider,d=void 0===h||h,f=t.suitSize,p=void 0===f?"one":f,g="1";"one"===p?g="1":"two"===p?g="2":"four"===p&&(g="4");var m=this.scene.lang.Text,v=[this.createThemeButton(),this.createCheckboxButton("suitSize",m.SUIT_SIZE,g,["1","2","4"],w.IC_SUIT_SIZE),this.createToggleButton("sound",m.SOUND_EFFECTS,i,w.IC_SOUND),this.createToggleButton("tapToMove",m.TAP_TO_MOVE,r,w.IC_MOVE),this.createToggleButton("autoHints",m.AUTO_HINTS,o,w.IC_AUTO_HINT),this.createToggleButton("autoComplete",m.AUTO_COMPLETE,u,w.IC_AUTO_COMPLETE),this.createToggleButton("relaxedSpider",m.RELAXED_SPIDER,d,w.IC_RELAX),this.createHowToPlayButton()],y=e.y+55,E=this.scene.add.line(0,+y-27,0,0,340,0,3774208,1);E.setLineWidth(.6),this.add(E);for(var S=0;S<v.length;S++)if(v[S].setY(50*S+y),S<v.length-1){var T=this.scene.add.line(0,50*S+y+25,0,0,300,0,1907997,.2);T.setLineWidth(.4),this.add(T)}this.add(v)},n.createToggleButton=function(e,t,n,i){var a=this,r=this.scene.add.container(0,0);r.setSize(340,50);var s=new m(this.scene,n);switch(s.setName(e),e){case"sound":this.soundEffectsBtn=s;break;case"tapToMove":this.tapToMoveBtn=s;break;case"autoHints":this.autoHintsBtn=s;break;case"autoComplete":this.autoCompleteBtn=s}s.onClick=function(t){if(a.scene.player.setSetting(e,t),a.scene.events.emit("settings-changed",e,t),"sound"==e?a.handleSoundChanged(t):"relaxedSpider"===e&&a.scene.game.globalScene.screen.open(o.o4.NOTIFICATION_SCREEN,{message:a.scene.lang.Text.NEW_SET_WILL_TAKE}),a.isSequenceStarted)switch(e){case"sound":a.addToSequence("1");break;case"tapToMove":a.addToSequence("2");break;case"autoHints":a.addToSequence("3");break;case"autoComplete":a.addToSequence("4");break;case"relaxedSpider":a.addToSequence("5")}else a.checkIfSequenceStarted()},"relaxedSpider"===e&&(this.relaxedSpiderBtn=s);var c=this.scene.lang.makeText(this.scene,{font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5},maxHeight:50,maxWidth:230}),u=this.scene.add.image(0,0,I,i);return u.setWorldSize(24,24),c.setTint(1907997),r.add([s,c,u]),Phaser.Display.Align.In.LeftCenter(u,r,-20,0),Phaser.Display.Align.In.LeftCenter(c,r,-50,0),Phaser.Display.Align.In.RightCenter(s,r,-10,0),r},n.createCheckboxButton=function(e,t,n,i,a){var r=this,s=this.scene.add.container(0,0);s.setSize(340,50);var c=new T(this.scene,n,i);c.setName(e),c.onClick=function(t){var n;"suitSize"==e&&("1"==t?n="one":"2"==t?n="two":"4"==t&&(n="four"),r.scene.player.setSetting(e,n),r.scene.game.globalScene.screen.open(o.o4.NOTIFICATION_SCREEN,{message:r.scene.lang.Text.NEW_SET_WILL_TAKE}))},this.suitSizeCheckBoxBtn=c;var u=this.scene.lang.makeText(this.scene,{font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:t,origin:{x:.5,y:.5},maxHeight:50,maxWidth:150}),h=this.scene.add.image(0,0,I,a);return h.setWorldSize(24,24),u.setTint(1907997),s.add([c,u,h]),Phaser.Display.Align.In.LeftCenter(h,s,-20,0),Phaser.Display.Align.In.LeftCenter(u,s,-50,0),Phaser.Display.Align.In.RightCenter(c,s,-115,0),s},n.createThemeButton=function(){var e=this,t=new f.Z(this.scene,300,50);t.setName("Theme"),t.onClick=function(){e.scene.screen.close(o.o4.SETTINGS_SCREEN),e.scene.screen.open(o.o4.THEME_SCREEN)};var n=this.scene.lang.makeText(this.scene,{font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.THEME,origin:{x:.5,y:.5},maxHeight:50,maxWidth:230});n.setTint(1907997);var i=this.scene.add.image(0,0,I,"ic_theme");i.setWorldSize(24,24);var a=this.scene.add.image(0,0,I,w.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.RightCenter(a,t),Phaser.Display.Align.In.LeftCenter(i,t),t.add([n,i,a]),t},n.createHowToPlayButton=function(){var e=this,t=new f.Z(this.scene,300,50);t.setName("HowToPlay"),t.onClick=function(){e.scene.screen.close(o.o4.SETTINGS_SCREEN),e.scene.screen.open(o.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.lang.makeText(this.scene,{font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.HOW_TO_PLAY+"?",origin:{x:.5,y:.5},maxHeight:50,maxWidth:230});n.setTint(1907997);var i=this.scene.add.image(0,0,I,w.IC_BOOK);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,I,w.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.createInviteButton=function(){var e=new f.Z(this.scene,300,50);e.setName("Invite"),e.onClick=function(){};var t=this.scene.make.bitmapText({font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.INVITE_FRIENDS,origin:{x:.5,y:.5}});t.setTint(1907997);var n=this.scene.add.image(0,0,I,w.IC_INVITE);return n.setWorldSize(24,24),e.add([t,n]),Phaser.Display.Align.In.LeftCenter(n,e),Phaser.Display.Align.In.LeftCenter(t,e,-32),e},n.createStatisticsButton=function(){var e=this,t=new f.Z(this.scene,300,50);t.setName("Statistics"),t.onClick=function(){e.scene.screen.close(o.o4.SETTINGS_SCREEN),e.scene.screen.open(o.o4.GAME_STATS_SCREEN)};var n=this.scene.lang.makeText(this.scene,{font:l.Z.BOLD.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.STATISTICS,origin:{x:.5,y:.5},maxHeight:50,maxWidth:230});n.setTint(1907997);var i=this.scene.add.image(0,0,I,w.IC_STATISTICS);i.setWorldSize(24,24);var a=this.scene.add.image(0,0,I,w.IC_NEXT);return a.setWorldSize(16,16),Phaser.Display.Align.In.LeftCenter(n,t,-30),Phaser.Display.Align.In.LeftCenter(i,t),Phaser.Display.Align.In.RightCenter(a,t),t.add([n,i,a]),t},n.handleSoundChanged=function(e){this.scene.player.setSetting("sound",e)},n.createCloseButton=function(){var e=this,t=new f.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(o.o4.SETTINGS_SCREEN)};var n=this.scene.add.image(0,0,I,"ic_close_gray");n.setWorldSize(24,24),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-6),this.add([t])},n.updateSettings=function(){var e=this.scene.player.getPlayerSettings(),t=e.relaxedSpider,n=e.suitSize;this.relaxedSpiderBtn.updateStatus(!0===t);var i="1";"two"===n?i="2":"four"===n&&(i="4"),this.suitSizeCheckBoxBtn.updateStatus(i)},t}(Phaser.GameObjects.Container),_=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.settingsContainer=void 0,r.setDepth(o.Ks.POPUP),r.settingsContainer=new x(t),r.resizeSettingsContainer(),r.add(r.settingsContainer),r}(0,i.Z)(t,e);var n=t.prototype;return n.resizeSettingsContainer=function(){var e=this.scene.gameZone,t=this.scene.ads.getBannerHeight(),n=e.width,i=e.height,a=this.settingsContainer,r=a.width,s=a.height,o=Math.min(.8*n/r,.8*(i-t)/s,1);1!==o&&this.settingsContainer.setScale(o)},n.getContainerScale=function(){return this.settingsContainer.scale},n.open=function(){var t=this;e.prototype.open.call(this),this.settingsContainer.updateSettings(),this.settingsContainer.resetDevToolSequence(),this.settingsContainer.checkIfSequenceStarted(),this.settingsContainer.setAlpha(1),this.background.setAlpha(.8),this.settingsContainer.setInteractive(),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(o.o4.SETTINGS_SCREEN)})),this.runOpenAnimation()},n.close=function(){this.settingsContainer.resetDevToolSequence(),this.runCloseAnimation()},n.runOpenAnimation=function(){var e;if(null==(e=this.slideInAnimation)||null==(e=e.tween)||!e.isPlaying()){this.scene.audio.playSound(c.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new r.Z({targets:[this.settingsContainer],props:{y:{from:this.height/2,to:this.height/2-this.settingsContainer.height*this.settingsContainer.scaleY/2-20-t,ease:Phaser.Math.Easing.Back.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new a.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(c.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new s.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen)},676:function(e,t,n){"use strict";var i=n(19),a=n(2),r=n(57),s=n(59),o=n(82),c=n(39),u=n(40),l=n(229),h=n(29),d=u.Z.HOW_TO_PLAY,f=u.Z.GAMEPLAY_DEFAULT,p=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.stepBtnText=void 0,n.currentStep=void 0,n.stepContainers=void 0,n.howToPlayData=void 0,n.handleNextStep=function(){n.currentStep==n.howToPlayData.length-1?(n.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN),n.scene.analytics.event(h._.TUTORIAL_COMPLETE)):(n.selectStep(n.currentStep+1),n.scene.analytics.event(h._.TUTORIAL_STEP,{step:n.currentStep}))},n.currentStep=0,n.howToPlayData=[{description:t.lang.Text.WIN_SPIDER_BY,frame:"how_to_play_1"},{description:t.lang.Text.UNWEAVE_CARDS_BY,frame:"how_to_play_2"},{description:t.lang.Text.USE_STOCKPILE_TO,frame:"how_to_play_3"}],n.createBackground(),n.createContent(),n.createGetStartedButton(),n.createCloseButton(),n.selectStep(0),t.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.selectStep=function(e){e>=this.howToPlayData.length&&(e=this.howToPlayData.length-1),e==this.howToPlayData.length-1?this.stepBtnText.setText(this.scene.lang.Text.DONE):this.stepBtnText.setText(this.scene.lang.Text.NEXT),this.stepContainers.forEach((function(e){return e.kill()})),this.stepContainers[e].revive(),this.currentStep=e},n.createBackground=function(){var e=new s.Z(this.scene,0,0,340,420,20,16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-60),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height)},n.createContent=function(){var e=this.scene.make.bitmapText({font:r.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.HOW_TO_PLAY,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-20),this.stepContainers=[];for(var t=0;t<this.howToPlayData.length;t++){var n=this.howToPlayData[t],i=n.description,a=n.frame,s=this.createStepContainer(i,a);this.stepContainers.push(s),Phaser.Display.Align.In.TopCenter(s,this,0,-75)}this.add(this.stepContainers)},n.createStepContainer=function(e,t){var n=this.scene.add.container();n.setSize(300,270);var i=this.scene.make.bitmapText({font:r.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:e,origin:{x:.5,y:.5}});i.setTint(1907997),i.setCenterAlign();var a=this.scene.add.image(0,0,d.KEY,t);if(a.setWorldSize(300,200),n.add([i,a]),i.setY(-111),Phaser.Display.Align.In.BottomCenter(a,n,0,-8),"how_to_play_3"===t){var s=this.scene.lang.makeText(this.scene,{font:r.Z.BOLD.KEY,size:this.scene.fontSize(12),text:this.scene.lang.Text.STOCK_PILE,origin:{x:1,y:.5},maxWidth:200,maxHeight:30});n.add(s),s.setPosition(21,-49)}return n},n.createGetStartedButton=function(){var e=new l.Z(this.scene,192,40,16,3774208);e.setName("GetStated"),e.onClick=this.handleNextStep;var t=this.scene.lang.makeText(this.scene,{font:r.Z.BOLD.KEY,size:this.scene.fontSize(18),text:this.scene.lang.Text.NEXT,origin:{x:.5,y:.5},maxWidth:180,maxHeight:30});t.setTint(16579837),e.add([t]),Phaser.Display.Align.In.BottomCenter(e,this.bg,0,-20),this.add([e]),this.stepBtnText=t},n.createCloseButton=function(){var e=this,t=new o.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(c.o4.HOW_TO_PLAY_SCREEN)};var n=this.scene.add.image(0,0,f.KEY,"ic_close");n.setWorldSize(30,30),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-6,-9),this.add([t])},t}(Phaser.GameObjects.Container);t.Z=p},506:function(e,t,n){"use strict";var i=n(28),a=n(19),r=n(2),s=n(59),o=function(e){function t(t,n,i,r,s){var o;return void 0===s&&(s=10),(o=e.call(this,t)||this).borderRadius=void 0,o.numOfTabs=void 0,o.tabs=void 0,o.currentIdx=void 0,o.callback=void 0,o.borderRadius=s,o.numOfTabs=r,o.setSize(n,i),o.createBg(),o.createTabs(),o.listenInput(),t.add.existing((0,a.Z)(o)),o}(0,r.Z)(t,e);var n=t.prototype;return n.addLabels=function(e){this.add(e);var t=this.width/this.numOfTabs;this.placeCenter(e,0,0,t+1)},n.createBg=function(){var e=new s.Z(this.scene,0,0,this.width+this.numOfTabs+1,this.height+2,this.borderRadius,this.themeColor);this.add([e])},n.createTabs=function(){this.tabs=[];for(var e=this.width/this.numOfTabs,t=0;t<this.numOfTabs;t++){var n=0==t?{tl:this.borderRadius,bl:this.borderRadius}:t==this.numOfTabs-1?{tr:this.borderRadius,br:this.borderRadius}:0,i=new s.Z(this.scene,0,0,e,this.height,n,this.backgroundColor);0==t&&i.setAlpha(0),this.tabs.push(i)}this.add(this.tabs),this.placeCenter(this.tabs,0,0,e+1)},n.placeCenter=function(e,t,n,i,a){void 0===a&&(a=0);for(var r=t-(this.numOfTabs/2-.5-a)*i,s=0;s<e.length;s++)e[s].setPosition(r+s*i,n)},n.getIdx=function(e){var t=this.width/this.tabs.length;return Math.floor((e+this.width/2)/t)},n.listenInput=function(){var e=this,t=!1;this.setInteractive({useHandCursor:!0}).on(Phaser.Input.Events.POINTER_DOWN,(function(){t=!0})).on(Phaser.Input.Events.POINTER_OUT,(function(){t=!1})).on(Phaser.Input.Events.POINTER_UP,(function(n){if(t){var i=e.getLocalPoint(n.worldX,n.worldY).x;e.selectTab(e.getIdx(i))}t=!1}))},n.selectTab=function(e){if(e!=this.currentIdx){this.currentIdx=e,this.callback&&this.callback(e);for(var t=0;t<this.tabs.length;t++)this.scene.tweens.add({targets:this.tabs[t],alpha:t!==e?1:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut})}},(0,i.Z)(t,[{key:"themeColor",get:function(){return 3774208}},{key:"backgroundColor",get:function(){return 16579837}}]),t}(Phaser.GameObjects.Container);t.Z=o},510:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(19),a=n(2),r=n(81),s=n(40).Z.GAMEPLAY_DEFAULT,o=s.KEY,c=s.FRAME,u=function(e){function t(t){var n;(n=e.call(this,t)||this).bottomBg=void 0,n.bottomLogo=void 0;var a=n.scene.ads.getBannerHeight();return n.setSize(375,a),n.createBackground(),n.createLogo(),n.scene.add.existing((0,i.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.world.getWorldSize().width,t=this.scene.ads.getBannerHeight();this.bottomBg=this.scene.add.image(0,0,o,c.BOTTOM_BG),this.bottomBg.setWorldSize(e,t),Phaser.Display.Align.In.BottomCenter(this.bottomBg,this),this.bottomBg.setDepth(r.Z.FOOTER_LOGO),this.add(this.bottomBg)},n.createLogo=function(){this.bottomLogo=this.scene.add.image(0,0,o,c.BOTTOM_LOGO);var e=.8*this.bottomBg.height,t=325.5*e/34.5;GameCore.Utils.Device.isIOS()?this.bottomLogo.setWorldSize(t/2,e/2):this.bottomLogo.setWorldSize(t,e),Phaser.Display.Align.In.Center(this.bottomLogo,this.bottomBg,0,4),this.bottomLogo.setDepth(r.Z.FOOTER_LOGO),this.add(this.bottomLogo)},t}(Phaser.GameObjects.Container)},508:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var i=n(19),a=n(2),r=n(509),s=n(119),o=n(59),c=n(40),u=n(39),l=n(503),h=c.Z.GAMEPLAY_DEFAULT,d=h.KEY,f=h.FRAME,p=function(e){function t(t){var n;return(n=e.call(this,t,40,40,d,f.IC_SETTINGS,t.lang.Text.SETTINGS)||this).onClick=function(){t.game.globalScene.screen.open(u.o4.SETTINGS_SCREEN)},n}return(0,a.Z)(t,e),t}(l.Z),g=c.Z.GAMEPLAY_DEFAULT,m=g.KEY,v=g.FRAME,y=function(e){function t(t){return e.call(this,t,40,40,m,v.CUP,"Tournaments")||this}return(0,a.Z)(t,e),t}(l.Z),E=r.iD.FOOTER,S=E.WIDTH,T=E.HEIGHT,A=function(e){function t(t,n,a){var r;return void 0===n&&(n=!1),void 0===a&&(a=u.o4.TOURNAMENTS_SCREEN),(r=e.call(this,t)||this).scene=void 0,r.settingsButton=void 0,r.tournamentsButton=void 0,r.buttons=[],r.parentScreenKeys=void 0,r.scene=t,r.parentScreenKeys=a,r.setSize(S,T),n&&r.createBackgroundMask(),r.createBackground(),r.createButtons(),r.scene.add.existing((0,i.Z)(r)),r}(0,a.Z)(t,e);var n=t.prototype;return n.createBackgroundMask=function(){var e=this.scene.world.getPixelRatio(),t=this.scene.gameZone,n=t.width,i=t.height,a=this.scene.ads.getBannerHeight(),r=this.scene.theme.getCurrentThemeConfig().backgroundKey,o=this.scene.add.image(0,a+this.height/2,r);o.setOrigin(.5,1),o.setWorldSize(n,i),o.setCrop(0,667*e-(76+a)/o.scaleY,this.width*e,i*e),o.setAlpha(1),this.add(o),this.scene.events.on(s.Z.BACKGROUND_CHANGED,(function(e){o.setTexture(e)}))},n.createBackground=function(){var e=this.scene.gameZone.width>S?20:0,t=new o.Z(this.scene,0,0,this.width,this.height,e,2039583,.4);this.add(t),t.removeInteractive()},n.createButtons=function(){this.buttons=[],this.createSettingsButton(),this.alignButtons()},n.createSettingsButton=function(){this.settingsButton=new p(this.scene),this.add(this.settingsButton),this.buttons.push(this.settingsButton)},n.alignButtons=function(){if(0!==this.buttons.length)for(var e=this.width/this.buttons.length,t=0;t<this.buttons.length;++t)this.buttons[t].setX((t-this.buttons.length/2+.5)*e),this.buttons[t].setY(2)},n.createTournamentButtonForMissionCompleteScreen=function(){this.tournamentsButton=new y(this.scene),this.add(this.tournamentsButton),this.buttons.push(this.tournamentsButton),this.alignButtons()},t}(Phaser.GameObjects.Container)},503:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(2),a=n(82),r=n(504),s=n(501),o=n(57),c=function(e){function t(t,n,i,a,r,s,c,u){var l;return void 0===c&&(c=o.Z.PRIMARY.KEY),(l=e.call(this,t,n,i)||this).icon=void 0,l.text=void 0,l.createIcon(a,r),l.createText(s,c,u),l.add([l.icon,l.text]),l}(0,i.Z)(t,e);var n=t.prototype;return n.createIcon=function(e,t){this.icon=this.scene.add.image(0,-10,e,t).setTint(16579837),this.icon.setWorldSize(28,28)},n.createText=function(e,t,n){n?(this.text=new r.Z(this.scene,{font:t,size:this.scene.fontSize(s.Z.FOOTER),maxWidth:n.textMaxWidth,maxHeight:n.textMaxHeight}),this.text.setText(e),this.text.setTintText(13355979),this.text.setDropShadow(0,this.scene.fontSize(1),0),this.text.setY(14)):this.text=this.scene.make.bitmapText({font:t,size:this.scene.fontSize(s.Z.FOOTER),text:e,origin:{x:.5,y:.5},y:14}).setTint(13355979)},n.setIconFrame=function(e){this.icon.setFrame(e)},n.setText=function(e){this.text.setText(e)},n.setTintText=function(e,t,n,i){this.text instanceof r.Z?this.text.setTintText(e,t,n,i):this.text.setTint(e,t,n,i)},t}(a.Z)},492:function(e,t,n){"use strict";n.d(t,{Z:function(){return ue}});var i=n(28),a=n(2),r=n(66),s=n.n(r),o=n(100),c=n(101),u=n(40),l=n(79),h=n(39),d=n(478),f=(0,n(78).P1)([function(e){return e.scene.currentSceneKey}],(function(e){return e})),p=n(56),g=n(149),m=n(102),v=n(505),y=n(507),E=n(46),S=n(19),T=n(229),A=n(57),C=n(59),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).bg=void 0,n.message=void 0,n.createBackground(),n.createMessage(),n.createOKButton(),t.add.existing((0,S.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.setMessage=function(e){this.message.setText(e)},n.createBackground=function(){var e=new C.Z(this.scene,0,0,340,160,20,16579837);e.setAlpha(.95),this.add(e),this.bg=e,this.setSize(e.width,e.height)},n.createMessage=function(){var e=this.scene.make.bitmapText({font:A.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:"Hello, world!",origin:{x:.5,y:.5}});e.setCenterAlign(),e.setTint(1907997),this.add(e),Phaser.Display.Align.In.Center(e,this,0,-24),this.message=e,this.add([e])},n.createOKButton=function(){var e=this,t=new T.Z(this.scene,300,40,12,3774208);t.setName("OK"),t.onClick=function(){e.scene.screen.close(h.o4.NOTIFICATION_SCREEN)};var n=this.scene.make.bitmapText({font:A.Z.PRIMARY.KEY,size:this.scene.fontSize(16),text:this.scene.lang.Text.OK,origin:{x:.5,y:.5}});n.setTint(16579837),Phaser.Display.Align.In.Center(n,t,0),t.add([n]),Phaser.Display.Align.In.BottomCenter(t,this.bg,0,-16),this.add([t])},t}(Phaser.GameObjects.Container),I=b,w=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.notificationContainer=void 0,r.setDepth(h.Ks.POPUP),r.notificationContainer=new I(t),r.add(r.notificationContainer),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n=this;e.prototype.open.call(this,t);var i=this.data.list.message,a=void 0===i?"":i;this.notificationContainer.setMessage(a),this.notificationContainer.setAlpha(1),this.background.setAlpha(.8),this.notificationContainer.setInteractive();var r=function(){n.scene.screen.close(n.name)};this.background.off(Phaser.Input.Events.POINTER_DOWN,r),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,r),this.runOpenAnimation()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e;null!=(e=this.fadeInAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.scene.audio.playSound(E.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new o.Z({targets:[this],duration:300})),this.fadeInAnimation.play())},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(E.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new c.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),x=w,_=n(147),O=n(148),P=n(33),k=n.n(P),L=n(506),D=n(82),R=function(e){function t(t,n,i,a,r){var s;(s=e.call(this,t,n,i)||this).border=void 0;var o=s.scene.add.image(0,0,a,r);return o.setWorldSize(n,i),s.add([o]),s.createBorder1(),s.createBorder(),s}(0,a.Z)(t,e);var n=t.prototype;return n.createBorder1=function(){var e=new C.Z(this.scene,0,0,this.width+4,this.height+4,10,16579837,0);e.setStrokeStyle(4,16579837),this.add(e)},n.createBorder=function(){var e=new C.Z(this.scene,0,0,this.width+2,this.height+2,10,16579837,0);e.setStrokeStyle(2,3774208),this.add(e),e.kill(),this.border=e},n.showBorder=function(){this.border.revive()},n.hideBorder=function(){this.border.kill()},t}(D.Z),B=R,N=function(e){function t(t,n,i,a,r,s){var o;return void 0===r&&(r=0),void 0===s&&(s=0),(o=e.call(this,t)||this).margin=void 0,o.viewContainer=void 0,o.items=void 0,o.currentItemInteractive=void 0,o.itemsLength=void 0,o.currentX=void 0,o.offsetLeft=void 0,o.offsetRight=void 0,o.pointerDownX=void 0,o.pointerDownY=void 0,o.lastPointerX=void 0,o.canClickItem=void 0,o.pointerDown=void 0,o.handlePointerDown=function(e){var t=e.worldX,n=e.worldY;o.pointerDown=!0,o.pointerDownX=e.worldX,o.pointerDownY=e.worldY,o.lastPointerX=e.worldX,o.canClickItem=!0,o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,e),o.currentItemInteractive={item:a,onClick:r})}))},o.handlePointerMove=function(e){if(o.pointerDown){var t=e.worldX,n=e.worldY;if(Phaser.Math.Distance.Between(o.pointerDownX,o.pointerDownY,t,n)>15&&(o.canClickItem=!1),!o.canClickItem){o.viewContainer.x+=t-o.lastPointerX,o.viewContainer.x>0&&(o.viewContainer.x=0);var i=o.itemsLength-o.width+o.offsetLeft+o.offsetRight;o.viewContainer.x<-i&&(o.viewContainer.x=-i)}if(o.currentItemInteractive){var a=o.currentItemInteractive,r=a.item;a.onClick&&!r.getBounds().contains(t,n)&&(r.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,e),o.currentItemInteractive={item:a,onClick:r})})),o.lastPointerX=t}},o.handlePointerUp=function(e){o.pointerDown=!1;var t=e.worldX,n=e.worldY;o.items.forEach((function(i){var a=i.item,r=i.onClick;r&&a.getBounds().contains(t,n)&&(a.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,e),o.canClickItem&&GameCore.Utils.Valid.isFunction(r)&&r())})),o.currentItemInteractive=void 0},o.handlePointerOut=function(e){if(o.pointerDown=!1,o.currentItemInteractive){var t=o.currentItemInteractive,n=t.item;t.onClick&&(n.emit(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,e),o.currentItemInteractive=void 0)}o.currentItemInteractive=void 0},o.setSize(n,i),o.margin=a,o.items=[],o.canClickItem=!0,o.pointerDown=!1,o.itemsLength=0,o.offsetLeft=r,o.offsetRight=s,o.currentX=-n/2+r,o.viewContainer=t.make.container({}),o.add(o.viewContainer),o.setInteractive(),o.listenEvents(),o}(0,a.Z)(t,e);var n=t.prototype;return n.addDebug=function(){var e=new C.Z(this.scene,0,0,this.width,this.height,0,0);this.add(e)},n.listenEvents=function(){this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handlePointerDown),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_MOVE,this.handlePointerMove),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handlePointerUp),this.on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handlePointerOut)},n.addItem=function(e,t){this.items.push({item:e,onClick:t}),this.viewContainer.add(e);var n=this.currentX+e.width/2+this.margin;e.x=n,this.itemsLength+=e.width+2*this.margin,this.currentX=n+e.width/2+this.margin},t}(Phaser.GameObjects.Container),M=N,G=u.Z.GAMEPLAY_DEFAULT.KEY,U=u.Z.THEME_PREVIEW,F=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.bg=void 0,n.tab=void 0,n.chooseContainers=void 0,n.currentIdx=0,n.backgroundPreView=void 0,n.cardFacePreView=void 0,n.cardBackPreview=void 0,n.scene=t,n.createBackground(),n.createTitle(),n.createTab(),n.createChooseContainer(),n.scene.world.isLandscape()&&n.addMask(),n.createBgMask(),n.createCloseButton(),t.add.existing((0,S.Z)(n)),n}(0,a.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=new C.Z(this.scene,0,0,375,250,{tl:20,tr:20,bl:20,br:20},16579837),t=this.scene.add.line(0,0,0,0,e.width,0,3774208);t.setLineWidth(.5),Phaser.Display.Align.In.TopCenter(t,e,0,-90),this.add([e,t]),this.bg=e,this.setSize(e.width,e.height)},n.createTitle=function(){var e=this.scene.make.bitmapText({font:A.Z.BOLD.KEY,size:this.scene.fontSize(20),text:this.scene.lang.Text.THEME,origin:{x:.5,y:.5}});e.setTint(1907997),this.add(e),Phaser.Display.Align.In.TopCenter(e,this,0,-12)},n.createTab=function(){var e,t=this;this.tab=new L.Z(this.scene,303,30,3),this.add(this.tab),Phaser.Display.Align.In.TopCenter(this.tab,this,0,-45);var n=this.scene.lang.Text,i=k()(e=[n.BACKGROUND,n.CARD_FACE,n.CARD_BACK]).call(e,(function(e,n){var i=t.scene.lang.makeText(t.scene,{font:A.Z.PRIMARY.KEY,size:t.scene.fontSize(14),text:e,origin:{x:.5,y:.5},maxHeight:30,maxWidth:95});return n>0&&i.setTint(3774208),i})),a=14;i.forEach((function(e){e.fontSize<a&&(a=e.fontSize)})),i.forEach((function(e){e.setFontSize(a)})),this.tab.addLabels(i),this.tab.callback=function(e){i.forEach((function(t,n){return t.setTint(e==n?16579837:3774208)}));var n=t.currentIdx<e?375:-375;t.scene.tweens.add({targets:t.chooseContainers[t.currentIdx],x:t.currentIdx<e?-375:375,alpha:0,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.scene.tweens.add({targets:t.chooseContainers[e],x:{from:n,to:0},alpha:1,duration:200,ease:Phaser.Math.Easing.Sine.InOut}),t.currentIdx=e}},n.createChooseContainer=function(){this.chooseContainers=[],this.createBackgroundChoose(),this.createCardFaceChoose(),this.createCardBackChoose(),this.chooseContainers[1].setAlpha(0),this.chooseContainers[2].setAlpha(0)},n.createBackgroundChoose=function(){var e=this,t=new M(this.scene,375,180,10,20,20);t.setPosition(0,40),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().Background,a=0;a<5;a++){var r=i[a]||"blank",s=new B(this.scene,72,112,U.KEY,r);s.name="Background",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive()),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene.changeBackgroundOnChangeSettings(r)}))})),this.chooseContainers.push(t),this.backgroundPreView=n},n.createCardFaceChoose=function(){var e=this,t=new M(this.scene,375,180,10,20,20);t.setPosition(0,40),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardFace,a=0;a<4;a++){var r=i[a]||"blank",s=new B(this.scene,108,112,U.KEY,r);s.name="CardFace",n.push(s)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene.changeCardFaceOnChangeSettings(r)})))})),this.chooseContainers.push(t),this.cardFacePreView=n},n.createCardBackChoose=function(){var e=this,t=new M(this.scene,375,180,10,20,20);t.setPosition(0,40),this.add(t);for(var n=[],i=this.scene.theme.getThemePreview().CardBack,a=i.length,r=0;r<a;r++){var s=i[r]||"blank",o=new B(this.scene,72,112,U.KEY,s);o.name="CardBack",n.push(o)}n.forEach((function(a,r){r<i.length&&(a.onClick=function(){},a.disableInteractive(),t.addItem(a,(function(){n.forEach((function(e){return e.hideBorder()})),a.showBorder(),e.scene.changeCardBackOnChangeSettings(r)})))})),this.chooseContainers.push(t),this.cardBackPreview=n},n.addMask=function(){var e=this,t=this.scene.make.graphics({fillStyle:{color:255,alpha:0},visible:!1});t.setName("MaskGraphics");var n=this.width,i=this.height;t.fillRoundedRect(-(n-10)/2,-i/2,n-10,i,0),this.chooseContainers[0].setMask(t.createGeometryMask()),this.chooseContainers[1].setMask(t.createGeometryMask()),this.chooseContainers[2].setMask(t.createGeometryMask()),this.scene.events.on("update",(function(){var n=e.getWorldPosition(),i=n.x,a=n.y;t.setPosition(i,a)}))},n.createBgMask=function(){var e=this.scene.add.rectangle(-this.width/2+10,20,20,this.height-80,16777215),t=this.scene.add.rectangle(this.width/2-10,20,20,this.height-80,16777215);this.add(e),this.add(t)},n.createCloseButton=function(){var e=this,t=new D.Z(this.scene,40,40);t.setName("Close"),t.onClick=function(){e.scene.screen.close(h.o4.THEME_SCREEN)};var n=this.scene.add.image(0,0,G,"ic_close_gray");n.setWorldSize(24,24),n.setTint(8750210),t.add(n),Phaser.Display.Align.In.TopRight(t,this.bg,-4,-4),this.add([t])},t}(Phaser.GameObjects.Container),Z=F,H=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).scene=void 0,r.slideInAnimation=void 0,r.fadeInAnimation=void 0,r.fadeOutAnimation=void 0,r.themeContainer=void 0,r.scene=t,r.setDepth(h.Ks.POPUP),r.themeContainer=new Z(t),r.add(r.themeContainer),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(){var t=this;e.prototype.open.call(this),this.themeContainer.setAlpha(1),this.background.setAlpha(0),this.updateSelected(),this.background.setInteractive().once(Phaser.Input.Events.POINTER_DOWN,(function(){return t.scene.screen.close(h.o4.GAME_STATS_SCREEN)})),this.runOpenAnimation()},n.updateSelected=function(){var e=this.scene.theme.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.themeContainer.backgroundPreView[t].showBorder(),this.themeContainer.cardFacePreView[n].showBorder(),this.themeContainer.cardBackPreview[i].showBorder()},n.close=function(){this.runCloseAnimation()},n.runOpenAnimation=function(){var e;if(null==(e=this.slideInAnimation)||null==(e=e.tween)||!e.isPlaying()){this.scene.audio.playSound(E.Z.POPUP_SHOW);var t=this.scene.ads.getBannerHeight();this.slideInAnimation||(this.slideInAnimation=new O.Z({targets:[this.themeContainer],props:{y:{from:this.height/2,to:this.height/2-this.themeContainer.height*this.themeContainer.scaleY/2-10-t,ease:Phaser.Math.Easing.Sine.Out}},duration:300})),this.fadeInAnimation||(this.fadeInAnimation=new o.Z({targets:[this],duration:300})),this.slideInAnimation.play(),this.fadeInAnimation.play()}},n.runCloseAnimation=function(){var t,n=this;null!=(t=this.fadeOutAnimation)&&null!=(t=t.tween)&&t.isPlaying()||(this.scene.audio.playSound(E.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new c.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){e.prototype.close.call(n)}})),this.fadeOutAnimation.play())},t}(GameCore.Screen),W=H,z=n(512),Y=n(81),V=u.Z.DEFAULT,K=V.KEY,j=V.FRAME,J=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).fps=0,n.fpsString="FPS: %1",n.fpsText=void 0,n.background=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<800)){n.lastUpdate=e;var t=Math.floor(n.scene.game.loop.actualFps);n.setFps(t)}},n.createFps(),n.setDepth(Y.Z.DEBUG),n.scene.add.existing((0,S.Z)(n)),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.setFps=function(e){this.fps=e;var t=Phaser.Utils.String.Format(this.fpsString,[e]);this.fpsText.setText(t)},n.createFps=function(){this.background=this.scene.make.image({key:K,frame:j.BLANK}),this.background.setName("BG"),this.background.setTint(13801480),this.background.setWorldSize(45,25),this.fpsText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.fpsString,font:A.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.fpsText.setName("FPS Meter"),Phaser.Display.Align.In.Center(this.fpsText,this.background),this.add([this.background,this.fpsText]),this.setFps(0)},t}(Phaser.GameObjects.Container),X=J,q=function(e){function t(t){var n;if((n=e.call(this,t,0,0)||this).performance=void 0,n.memory=0,n.maxMemoryLimit=void 0,n.maxPercentThreshold=void 0,n.normalColor=3459162,n.warningColor=16768343,n.alarmColor=15812200,n.memoryString="Memory: %1MB / %2MB",n.memoryText=void 0,n.lastUpdate=void 0,n.update=function(e){if(!(e-n.lastUpdate<1e3)){n.lastUpdate=e;var t=n.performance.memory.usedJSHeapSize,i=1048576*n.maxMemoryLimit,a=Math.round(t/1048576);n.setMemory(a),n.memoryText.setTint(n.normalColor),t>n.maxPercentThreshold/100*i&&n.memoryText.setTint(n.warningColor),t>i&&n.memoryText.setTint(n.alarmColor)}},n.performance=window.performance,n.createMemory(),n.setDepth(Y.Z.DEBUG),n.scene.add.existing((0,S.Z)(n)),!n.isSupport())return n.memoryText.setText("Memory: not supported!"),(0,S.Z)(n);var i=n.performance.memory.jsHeapSizeLimit;return n.maxPercentThreshold=90,n.setMaxMemory(i/1048576),n.scene.events.on(Phaser.Scenes.Events.UPDATE,n.update),n}(0,a.Z)(t,e);var n=t.prototype;return n.isSupport=function(){var e;return this.performance&&!(null==(e=this.performance)||!e.memory)},n.setMaxMemory=function(e){this.maxMemoryLimit=Math.round(e)},n.setMemory=function(e){this.memory=e;var t=Phaser.Utils.String.Format(this.memoryString,[e,this.maxMemoryLimit]);this.memoryText.setText(t)},n.createMemory=function(){this.memoryText=this.scene.make.bitmapText({size:this.scene.fontSize(14),text:this.memoryString,font:A.Z.PRIMARY.KEY,depth:2e3}),this.memoryText.setName("Memory Meter"),this.add(this.memoryText),this.setMemory(0)},t}(Phaser.GameObjects.Container),Q=q,$=n(80),ee={targets:[],duration:300,ease:n(494).Z,props:{scale:{from:1.2,to:1}}},te=function(e){function t(t){return e.call(this,ee,t)||this}return(0,a.Z)(t,e),t}($.Z),ne=n(493),ie=function(e){function t(t,n,i,a){var r;return(r=e.call(this,t,n,i,a)||this).loadingIcon=void 0,r.messageText=void 0,r.openAnimation=void 0,r.closeTimerEvent=void 0,r.addLoadingIcon(),r.addMessageText(),r.setDepth(h.Ks.PRIORITY),r.background.setAlpha(.8),r}(0,a.Z)(t,e);var n=t.prototype;return n.open=function(t){var n,i=this;e.prototype.open.call(this,t);var a=this.getData(["message","duration","loading"]),r=a[0],s=void 0===r?"":r,o=a[1],c=void 0===o?0:o,u=a[2],l=void 0!==u&&u;this.setMessage(s),this.showLoading(l),null==(n=this.closeTimerEvent)||n.remove(),c>0&&(this.closeTimerEvent=this.scene.time.addEvent({delay:c,callback:function(){i.visible&&i.scene.screen.close(i.name)}})),this.runOpenAnimation()},n.addLoadingIcon=function(){this.loadingIcon=new ne.Z(this.scene),this.add(this.loadingIcon),Phaser.Display.Align.In.Center(this.loadingIcon,this.zone)},n.addMessageText=function(){this.messageText=this.scene.make.bitmapText({size:this.scene.fontSize(16),font:A.Z.PRIMARY.KEY,origin:{x:.5,y:.5}}),this.messageText.setCenterAlign(),this.add(this.messageText)},n.setMessage=function(e){this.messageText.setText(e)},n.showLoading=function(e){this.loadingIcon.setVisible(e);var t=!1===e?15:40;Phaser.Display.Align.In.Center(this.messageText,this.zone,0,t)},n.runOpenAnimation=function(){var e,t;null==(e=this.openAnimation)||e.stop(),null==(t=this.openAnimation)||t.remove();var n=[this.messageText,this.loadingIcon];this.scene.tweens.killTweensOf(n),n.forEach((function(e){e.setScale(1)})),this.openAnimation=new te({targets:n,props:{scale:{getStart:function(e){return e.scale-.3},getEnd:function(e){return e.scale}}}}),this.openAnimation.play()},n.logPageviewOnOpen=function(){},n.logPageviewOnClose=function(){},t}(GameCore.Screen),ae=ie,re=u.Z.DEFAULT,se=re.KEY,oe=re.FRAME,ce=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,s()(t=[this]).call(t,a))||this).mask=void 0,n.fadeInAnim=void 0,n.fadeOutAnim=void 0,n.fpsMeter=void 0,n.memoryMeter=void 0,n.switchScene=function(e){n.currentScene.switch(e)},n.emitGameEventStartScene=function(e){var t=e.scene.key;console.info("%cScene start","color: #D27D2D",t),n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.START,t),(0,p.sw)("scene","Start scene: "+t)},n.emitGameEventSleepScene=function(e){var t=e.scene.scene.key;console.info("%cScene sleep","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.runMaskFadeInAnimation(),n.game.events.emit(Phaser.Scenes.Events.SLEEP,t))},n.emitGameEventWakeScene=function(e){var t=e.scene.scene.key;console.info("%cScene wake","color: #D27D2D",t),t!==l.C.LOAD_SCENE&&(n.updateSceneState(),n.runMaskFadeOutAnimation(),n.updateActiveSceneKey(t),n.game.events.emit(Phaser.Scenes.Events.WAKE,t))},n.emitGameEventPauseScene=function(e){var t=e.scene.scene.key;console.info("%cScene pause","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.PAUSE,t)},n.emitGameEventResumeScene=function(e){var t=e.scene.key;console.info("%cScene resume","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.RESUME,t)},n.emitGameEventShutdownScene=function(e){var t=e.scene.scene.key;console.info("%cScene shutdown","color: #D27D2D",t),n.game.events.emit(Phaser.Scenes.Events.SHUTDOWN,t)},n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){this.listenScenesEvents(),this.game.globalScene=this},n.setup=function(){this.scaleGame(),this.addMask(),this.addNotifyScreen(),this.addFPS(),this.addMemory()},n.addNotifyScreen=function(){var e=this.screen.add(h.o4.NOTIFY_SCREEN,ae);Phaser.Display.Align.In.Center(e,this.gameZone),this.screen.add(h.o4.NOTIFICATION_SCREEN,x),this.screen.add(h.o4.SETTINGS_SCREEN,_.Z),this.screen.add(h.o4.GAME_STATS_SCREEN,v.Z),this.screen.add(h.o4.HOW_TO_PLAY_SCREEN,y.Z),this.screen.add(h.o4.THEME_SCREEN,W)},n.changeBackgroundOnChangeSettings=function(e){var t=this.getActiveScene();(t instanceof m.Z||t instanceof z.Z)&&t.themeHandler.changeBackground(e)},n.changeCardFaceOnChangeSettings=function(e){var t=this.getActiveScene();(t instanceof m.Z||t instanceof z.Z)&&t.themeHandler.changeCardFace(e)},n.changeCardBackOnChangeSettings=function(e){var t=this.getActiveScene();(t instanceof m.Z||t instanceof z.Z)&&t.themeHandler.changeCardBack(e)},n.addMask=function(){this.mask=this.make.image({key:se,frame:oe.BLANK});var e=this.gameZone,t=e.width,n=e.height;this.mask.setAlpha(0),this.mask.setOrigin(0,0),this.mask.setTint(859421),this.mask.setWorldSize(t,n)},n.addFPS=function(){GameCore.Configs.Statistics.ShowFPSInGame&&(this.fpsMeter=new X(this),Phaser.Display.Align.In.TopLeft(this.fpsMeter,this.gameZone,-20,-10))},n.addMemory=function(){GameCore.Configs.Statistics.ShowMemoryInGame&&(this.memoryMeter=new Q(this),Phaser.Display.Align.In.TopLeft(this.memoryMeter,this.gameZone,-45,-3))},n.updateSceneState=function(){this.setGlobalSceneOnTop()},n.setGlobalSceneOnTop=function(){this.scene.bringToTop(this)},n.runMaskFadeInAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeInAnim=new o.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.In,props:{alpha:{start:0,from:0,to:.6}}}),this.mask.setAlpha(0),this.fadeInAnim.play())},n.runMaskFadeOutAnimation=function(){var e,t;this.mask&&GameCore.Configs.EnableEffectSceneTransition&&(null==(e=this.fadeInAnim)||e.remove(),null==(t=this.fadeOutAnim)||t.remove(),this.fadeOutAnim=new c.Z({targets:[this.mask],duration:400,ease:Phaser.Math.Easing.Cubic.Out,props:{alpha:{start:.6,from:.6,to:0}}}),this.mask.setAlpha(1),this.fadeOutAnim.play())},n.listenScenesEvents=function(){var e=this;this.scene.manager.getScenes(!1).forEach((function(t){t.events.on(Phaser.Scenes.Events.CREATE,e.emitGameEventStartScene),t.events.on(Phaser.Scenes.Events.SLEEP,e.emitGameEventSleepScene),t.events.on(Phaser.Scenes.Events.WAKE,e.emitGameEventWakeScene),t.events.on(Phaser.Scenes.Events.PAUSE,e.emitGameEventPauseScene),t.events.on(Phaser.Scenes.Events.RESUME,e.emitGameEventResumeScene),t.events.on(Phaser.Scenes.Events.SHUTDOWN,e.emitGameEventShutdownScene)})),this.events.on(l.K.SWITCH,this.switchScene)},n.getActiveScene=function(){return this.scene.manager.getScenes(!0)[0]},n.getCurrentScene=function(){return this.currentScene},n.updateActiveSceneKey=function(e){e!==l.C.GLOBAL_SCENE&&this.storage.dispatch((0,d.I)(e))},n.logEventOpen=function(){},n.logPageviewOnOpen=function(){},(0,i.Z)(t,[{key:"currentScene",get:function(){var e=this.storage.getState(),t=f(e);return(t?this.scene.manager.getScene(t):this.getActiveScene()).scene}}]),t}(g.Z),ue=ce},512:function(e,t,n){"use strict";n.d(t,{Z:function(){return te}});var i=n(2),a=n(66),r=n.n(a),s=n(100),o=n(101),c=n(40),u=n(79),l=n(39),h=n(46),d=n(498),f=n(149),p=n(102),g=n(510),m=n(508),v=n(22),y=n(20),E=n.n(y),S=n(511),T=n(496),A=n(230),C=n(504),b=n(57),I=c.Z.GAMEPLAY_DEFAULT,w=I.KEY,x=I.FRAME,_=function(e){function t(t){var n;return(n=e.call(this,t,w,x.JOURNEY.LV_PASSED_BG,47.5,48)||this).payload=void 0,n.overlay=void 0,n.text=void 0,n.levelRoundContainer=void 0,n.levelRoundTween=void 0,n.handleClick=function(){var e;n.payload.enable&&null!=(e=n.payload.config)&&e.level},n.payload={enable:!1,config:{level:0}},n.scene=t,n.setName("Level"),n.createUI(),n.align(),n}(0,i.Z)(t,e);var n=t.prototype;return n.createUI=function(){this.createLevelRound(),this.createButtonOverlay(),this.createText(),this.sendToBack(this.levelRoundContainer)},n.createButtonOverlay=function(){this.overlay=this.scene.make.image({key:w,frame:x.JOURNEY.LV_ACTIVE}),this.overlay.setWorldSize(78,82),this.overlay.kill(),this.add(this.overlay)},n.createText=function(){this.text=new C.Z(this.scene,{size:this.scene.fontSize(23),font:b.Z.BOLD.KEY}),this.text.setDropShadow(0,this.scene.fontSize(1.5),0,.5),this.text.kill(),this.add(this.text)},n.createLevelRound=function(){this.levelRoundContainer=this.scene.add.container();var e=this.scene.make.image({key:w,frame:x.JOURNEY.LV_ACTIVE_FX,alpha:1});e.setWorldSize(80.5,80.5),this.levelRoundContainer.add([e]),this.add(this.levelRoundContainer)},n.align=function(){Phaser.Display.Align.In.Center(this.text,this.button)},n.setConfig=function(e){this.payload.config=e},n.setEnable=function(e){this.payload.enable=e},n.setPayload=function(e,t){void 0===t&&(t=!0),this.setConfig(e),this.setEnable(t)},n.updateOverlay=function(){var e,t,n=this.scene.player.getCustomData("currentJourneyLevel");if(this.overlay.revive(),this.payload.enable)if(n==(null==(e=this.payload.config)?void 0:e.level)){var i;switch(null==(i=this.payload.config)?void 0:i.key){case"two-cards":this.overlay.setFrame(x.JOURNEY.LV_TWO_CARDS_PASS),this.overlay.setWorldSize(86,95),this.levelRoundContainer.setPosition(this.overlay.x+8,this.overlay.y+5);break;case"king":this.overlay.setFrame(x.JOURNEY.ICO_KING_PASS),this.overlay.setWorldSize(93,89.5),this.levelRoundContainer.setPosition(this.overlay.x,this.overlay.y-2);break;default:this.overlay.setFrame(x.JOURNEY.LV_ACTIVE),this.overlay.setWorldSize(78,82),this.levelRoundContainer.setPosition(this.overlay.x,this.overlay.y-2)}this.payload.config.key?this.text.kill():this.text.revive()}else{var a;switch(null==(a=this.payload.config)?void 0:a.key){case"two-cards":this.overlay.setFrame(x.JOURNEY.LV_TWO_CARDS_PASS_TICK),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(x.JOURNEY.ICO_KING_PASS_TICK),this.overlay.setWorldSize(93,92.5);break;default:this.overlay.setFrame(x.JOURNEY.LV_PASSED),this.overlay.setWorldSize(38,37.5)}}else switch(null==(t=this.payload.config)?void 0:t.key){case"two-cards":this.overlay.setFrame(x.JOURNEY.LV_TWO_CARDS_LOCK),this.overlay.setWorldSize(86,95);break;case"king":this.overlay.setFrame(x.JOURNEY.ICO_KING_LOCKED),this.overlay.setWorldSize(91,80.5),this.overlay.setWorldSize(93,92.5);break;default:this.overlay.setFrame(x.JOURNEY.ICO_LOCK),this.overlay.setWorldSize(36.5,36.38)}},n.updateLevelButton=function(){var e,t;this.scene.player.getCustomData("currentJourneyLevel")===(null==(e=this.payload.config)?void 0:e.level)?(this.levelRoundContainer.revive(),this.button.setVisible(!1),this.runAnimation(),this.text.revive()):(this.text.kill(),this.button.setVisible(!0),this.levelRoundContainer.kill(),null==(t=this.levelRoundTween)||t.remove(),this.levelRoundTween=void 0);this.updateOverlay(),this.payload.config?this.text.setText(""+this.payload.config.level):(this.button.setSize(36.5,35),this.text.kill()),this.align()},n.updateEnable=function(e){this.setEnable(e),this.updateLevelButton()},n.runAnimation=function(){var e,t=1/this.scene.world.getPixelRatio();null==(e=this.levelRoundTween)||e.remove(),this.levelRoundTween=void 0,this.levelRoundTween=this.scene.tweens.add({targets:this.levelRoundContainer,scale:{start:t,from:t,to:1.4,delay:30,duration:1e3,ease:T.Z},alpha:{start:1,from:1,to:0,delay:100,duration:930},loop:-1})},t}(A.Z),O=n(32),P=n(19),k=c.Z.GAMEPLAY_DEFAULT.KEY,L=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0,k)||this).options=void 0,i.options=n,i.setEnable(n.enable),i}return(0,i.Z)(t,e),t.prototype.setEnable=function(e){this.options.enable=e,e?(this.setFrame(this.options.frameOn),this.setWorldSize(this.options.sizeOn.width,this.options.sizeOn.height)):(this.setFrame(this.options.frameOff),this.setWorldSize(this.options.sizeOff.width,this.options.sizeOff.height))},t}(Phaser.GameObjects.Image),D=[{x:28.625,y:36,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}},{x:95,y:0,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:95,y:-80,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:0,y:-115,sizeOff:{width:114.5,height:9.5},sizeOn:{width:114.5,height:8}},{x:-98,y:-151,sizeOff:{width:81,height:80},sizeOn:{width:81,height:80}},{x:-98,y:-233,sizeOff:{width:82,height:79.5},sizeOn:{width:82,height:79.5}},{x:-28.625,y:-268,sizeOff:{width:57.25,height:9.5},sizeOn:{width:57.25,height:8}}],R=function(e){function t(t){var n;return(n=e.call(this,t)||this).paths=[],n.setSize(208.5,304),n.createPaths(),n.scene.add.existing((0,P.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createPaths=function(){for(var e,t=0;t<D.length;t++){var n=t==D.length-1||t%3==0?3:t%3,i=new L(this.scene,{enable:!1,frameOff:"journey/path g"+n,frameOn:"journey/path y"+n,sizeOff:D[t].sizeOff,sizeOn:D[t].sizeOn});i.setVisible(!1),i.setPosition(D[t].x,D[t].y+this.height/2),i.flipX=t>=3,this.paths.push(i)}this.add(r()(e=[]).call(e,this.paths))},n.updatePathStart=function(e){e?(this.paths[1].options=(0,O.Z)({},this.paths[1].options,{frameOff:"journey/path g0",frameOn:"journey/path y0",sizeOff:{width:135,height:80},sizeOn:{width:135,height:80}}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(68,152),this.paths[0].setVisible(!1)):(this.paths[1].options=(0,O.Z)({},this.paths[1].options,{frameOff:"journey/path g1",frameOn:"journey/path y1",sizeOff:D[1].sizeOff,sizeOn:D[1].sizeOn}),this.paths[1].setEnable(this.paths[1].options.enable),this.paths[1].setPosition(D[1].x,D[1].y+this.height/2),this.paths[0].setVisible(!0))},t}(Phaser.GameObjects.Container),B=[{x:47,y:-10},{x:132,y:-75},{x:47,y:-156},{x:-45,y:-158},{x:-132,y:-217},{x:-56,y:-300}],N=function(e){function t(t){var n;return(n=e.call(this,t)||this).background=void 0,n.buttons=[],n.payload=void 0,n.pathContainer=void 0,n.heightContainer=0,n.init(),n}(0,i.Z)(t,e);var n=t.prototype;return n.init=function(){this.payload={index:-1,payloadLevelButtons:[]},this.createPathContainers(),this.setSize(208.5,this.heightContainer),this.addNewButtons(GameCore.Configs.LevelScroller.limitLevelButtonInContainer)},n.clear=function(){this.buttons=[]},n.createPathContainers=function(){this.pathContainer=new R(this.scene),this.pathContainer.setPosition(0,this.heightContainer),this.heightContainer=this.pathContainer.height;var e=-this.heightContainer/5;this.pathContainer.setPosition(0,e),this.add(this.pathContainer)},n.addNewButtons=function(e){for(var t=0;t<e;t++){var n=new _(this.scene);this.buttons.push(n),this.add(n)}},n.setButtons=function(e){this.removeAll(),this.add(this.buttons),this.buttons=e},n.updateButtons=function(){var e=this;if(-1!==this.payload.index){for(var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,n=this.heightContainer/2-22.5,i=function(){if(!e.buttons[a]||!B[a])return 0;e.buttons[a].setPosition(B[a].x,B[a].y+n),0==a&&e.isIncludeLevel1()&&e.buttons[a].setPosition(0,n);var t=e.payload.payloadLevelButtons;if(a>=t.length)return 1;var i=e.scene.player.getCustomData("currentJourneyLevel"),r=t[a].config.level;r<=i?e.buttons[a].onClick=(0,v.Z)(E().mark((function t(){var n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.scene.game.scene.getScene(u.C.GAME_SCENE))instanceof p.Z){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.handlePlayCustomJourneyLevel(r);case 5:!1===t.sent&&e.scene.scene.switch(u.C.GAME_SCENE);case 7:case"end":return t.stop()}}),t)}))):e.buttons[a].disableButtonInteraction()},a=0;a<this.buttons.length&&0!==i();a++);for(var r=0;r<this.buttons.length;r++)this.buttons[r].kill();for(var s=0;s<this.pathContainer.paths.length;s++)this.pathContainer.paths[s].setVisible(!1);for(var o=0;o<this.payload.payloadLevelButtons.length;o++){var c=this.payload.payloadLevelButtons[o];this.buttons[o].revive(),this.buttons[o].setPayload(c.config,c.enable),this.buttons[o].updateLevelButton(),this.pathContainer.paths[o].setEnable(c.enable),this.pathContainer.paths[o].setVisible(!0)}this.payload.payloadLevelButtons.length==t&&this.pathContainer.paths[6].setVisible(!0),this.isLastItem()&&(this.pathContainer.paths[6].visible=!1);var l=this.scene.player.getCustomData("currentJourneyLevel");this.pathContainer.paths[6].setEnable(this.getMaxLevel()<l),this.pathContainer.updatePathStart(1==this.payload.index&&this.isIncludeLevel1())}},n.updateInfo=function(e){this.payload=e,this.updateButtons()},n.setVisible=function(t){return e.prototype.setVisible.call(this,t),this},n.isIncludeLevel1=function(){for(var e=this.payload.payloadLevelButtons,t=0;t<e.length;t++)if(1==e[t].config.level)return!0;return!1},n.isLastItem=function(){var e=this.payload.payloadLevelButtons,t=[],n=this.scene.scene.get(u.C.GAME_SCENE);n instanceof p.Z&&(t=n.levelHandler.journeyGameLevels);var i=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return e.length>0&&Math.ceil(e[0].config.level/i)==Math.ceil(t.length/i)},n.getMaxLevel=function(){var e=this.payload.payloadLevelButtons;return e[e.length-1].config.level||1},t}(Phaser.GameObjects.Container),M=function(e){function t(t,n,i,a,r){var s;return(s=e.call(this,t,{classType:N,listConfigs:[],width:n,height:i,marginTop:a,marginBottom:r})||this).levelConfigMap=[],s.levelEnableMax=void 0,s.levelStars=void 0,s.isFastScroll=!1,s}(0,i.Z)(t,e);var n=t.prototype;return n.setLevelEnableMax=function(e){this.levelEnableMax=e||1},n.updateLevelScroller=function(){var e=this.scene.scene.get(u.C.GAME_SCENE);e instanceof p.Z&&(this.levelConfigMap=e.levelHandler.journeyGameLevels),this.clearItem(),this.updateLevelButtonContainers(this.levelConfigMap),this.setEnable(!0),this.value=this.getCorrectValue(),this.updateMinValue(),this.value>-this.minValue&&(this.value=-this.minValue),this.value<-this.maxValue&&(this.value=-this.maxValue)},n.clearItem=function(){this.reset(),this.objects.clear(!1,!1)},n.updateLevelButtonContainers=function(e){var t=this.getConfigButtonContainers(e,this.levelEnableMax);this.updateConfig(t)},n.getConfigButtonContainers=function(e,t){for(var n=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,i=[],a=[],s=1;s<=e.length;s++){var o=!0;t&&(o=s<=t);var c,u={config:{level:s,key:s%10===0?"king":s%5===0?"two-cards":void 0},enable:o};if(a.push(u),s%n===0)i.unshift({index:s/n,payloadLevelButtons:r()(c=[]).call(c,a)}),a=[]}return a.length>0&&(i.unshift({index:s,payloadLevelButtons:a}),s++),i},n.getIndexButtonContainer=function(e){var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer;return Math.ceil(e/t)},n.getCorrectValue=function(e){void 0===e&&(e=!1);var t=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,n=this.objHeight,i=this.padding,a=this.scene.player.getCustomData("currentJourneyLevel"),r=e?this.levelEnableMax:a,s=this.listObjects.length-this.getIndexButtonContainer(r),o=r%t,c=-(s*n)-35*(t/2-(o=0===o?12:o));return c-=0!==s?i*s:0},n.enableAllLevel=function(){var e=this.value,t=1,n=this.scene.scene.get(u.C.GAME_SCENE);n instanceof p.Z&&(t=n.levelHandler.getCurrentJourneyPlayingLevel());var i=this.getConfigButtonContainers(this.levelConfigMap,t);this.updateConfig(i),this.setEnable(!0),this.value=e},n.updateMinValue=function(){var e=GameCore.Configs.LevelScroller.limitLevelButtonInContainer,t=-170,n=this.levelConfigMap.length;t+=this.objHeight*((this.listObjects.length*e-n)/e),this.minValue=t},n.fastScroll=function(e){this.isScrollingBack||(this.isScrolling=!0,this.isScrollingSmooth=!0,this.isFastScroll=!0,this.velocity=2500*e)},n.stopFastScroll=function(e){this.isFastScroll&&(this.isFastScroll=!1,this.velocity=50*e)},t}(S.Z),G=n(82),U=n(119),F=c.Z.GAMEPLAY_DEFAULT,Z=F.KEY,H=F.FRAME,W=function(e){function t(t){var n;return(n=e.call(this,t)||this).journeyName=void 0,n.settingButton=void 0,n.backButton=void 0,n.background=void 0,n.setSize(375,49),n.createBackground(),n.createSettingButton(),n.createBackButton(),n.createJourneyName(),n.setInteractive(),n}(0,i.Z)(t,e);var n=t.prototype;return n.setJourneyName=function(e){this.journeyName.setText(e)},n.createBackground=function(){var e=this.scene.gameZone,t=e.width,n=e.height,i=this.scene.theme.getCurrentThemeConfig().backgroundKey,a=this.scene.make.image({key:i,x:0,y:-this.height/2});a.setOrigin(.5,0),a.setWorldSize(t,n),a.setCrop(0,0,t*(1/a.scaleX),this.height*(1/a.scaleY)),a.setAlpha(1),this.add(a),this.background=a,this.scene.events.on(U.Z.BACKGROUND_CHANGED,(function(e){a.setTexture(e)}));var r=this.scene.make.graphics({});r.fillStyle(0,.1),r.fillRect(-t/2,-this.height/2,t,this.height+3),this.add(r),this.sendToBack(r)},n.createSettingButton=function(){var e=this;this.settingButton=new G.Z(this.scene,26.5,27);var t=this.scene.make.image({key:Z,frame:H.JOURNEY.IC_SETTINGS});t.setWorldSize(this.settingButton.width,this.settingButton.height),this.settingButton.add(t),this.add(this.settingButton),Phaser.Display.Align.In.RightCenter(this.settingButton,this,-17.3),this.settingButton.onClick=function(){e.scene.game.globalScene.screen.open(l.o4.SETTINGS_SCREEN)}},n.createBackButton=function(){var e=this;this.backButton=new G.Z(this.scene,29.5,27);var t=this.scene.make.image({key:Z,frame:H.JOURNEY.IC_BACK});t.setWorldSize(this.backButton.width,this.backButton.height),this.backButton.add(t),this.add(this.backButton),Phaser.Display.Align.In.LeftCenter(this.backButton,this,-13),this.backButton.onClick=function(){e.scene.game.globalScene.screen.close(l.o4.MISSION_COMPLETED_SCREEN);var t=e.scene.scene.get(u.C.GAME_SCENE);t.events.once(Phaser.Scenes.Events.WAKE,(function(){t instanceof p.Z&&t.handleReturnToGameSceneFromJourney()})),e.scene.scene.switch(u.C.GAME_SCENE)}},n.createJourneyName=function(){this.journeyName=new C.Z(this.scene,{font:b.Z.BOLD.KEY,size:this.scene.fontSize(21),maxWidth:250,maxHeight:30}),this.journeyName.setText(this.scene.lang.Text.JOURNEY_UPPER),this.journeyName.setDropShadow(0,this.scene.fontSize(1),0),this.journeyName.setTintText(16449487,16449487,15913325,15913325),this.add(this.journeyName)},t}(Phaser.GameObjects.Container),z=c.Z.GAMEPLAY_DEFAULT,Y=z.KEY,V=z.FRAME,K=function(e){function t(t){var n;return(n=e.call(this,t)||this).endTime=void 0,n.countdownTimer=void 0,n.timerText=void 0,n.updateCountdown=(0,v.Z)(E().mark((function e(){var t,i,a,r,s,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Date.now(),i=1e3*n.endTime-t,a=Math.floor(Math.abs(i)/864e5),i-=864e5*a,r=Math.floor(Math.abs(i)/36e5),i-=36e5*r,s=Math.floor(Math.abs(i)/6e4),i-=6e4*s,o=Math.round(Math.abs(i)/1e3),i<0&&(i=0),n.timerText.setText("Time left: "+a+"d "+r+"h "+s+"m "+o+"s");case 11:case"end":return e.stop()}}),e)}))),n.setSize(375,30),n.createBackground(),n.createTimerContainer(),n.createCountdownTimer(),t.add.existing((0,P.Z)(n)),n}(0,i.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.add.image(0,0,Y,V.JOURNEY.BG_BAR_TIME);e.setInteractive(),e.setWorldSize(367.5,24.5),this.setSize(e.width,e.height),this.add(e)},n.createTimerContainer=function(){this.timerText=this.scene.make.bitmapText({font:b.Z.PRIMARY.KEY,size:this.scene.fontSize(15.5),origin:{x:0,y:.5},text:"Time left: 2d 8h 28m 8s"}),this.timerText.setTint(14602143),Phaser.Display.Align.In.Center(this.timerText,this),this.add([this.timerText])},n.createCountdownTimer=function(){var e;void 0!=this.endTime&&(null==(e=this.countdownTimer)||e.destroy(),this.countdownTimer=this.scene.time.addEvent({loop:!0,delay:1e3,startAt:1e3,callback:this.updateCountdown}))},n.setCountdown=function(e){this.endTime=e,this.createCountdownTimer()},n.getRemain=function(){if(void 0!=this.endTime){var e=Date.now(),t=1e3*this.endTime-e;return t<0?0:t}},t}(Phaser.GameObjects.Container),j=c.Z.GAMEPLAY_DEFAULT,J=j.KEY,X=j.FRAME,q=function(e){function t(t){var n;return(n=e.call(this,t,198.5,62)||this).icon=void 0,n.levelText=void 0,n.setName("JourneyPlayButton"),n.createBackground(),n.createContent(),n}(0,i.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.make.image({key:J,frame:X.JOURNEY.BTN_PLAY});e.setWorldSize(this.width,this.height),this.add(e)},n.setLevel=function(e){this.levelText.setText(this.scene.lang.Text.LEVEL+" "+e),this.align()},n.createContent=function(){this.icon=this.scene.add.image(0,0,J,X.JOURNEY.ICN_PLAY),this.icon.setWorldSize(16,27),this.levelText=new C.Z(this.scene,{font:b.Z.BOLD.KEY,size:this.scene.fontSize(27),maxWidth:130,maxHeight:40}),this.levelText.setDropShadow(0,this.scene.fontSize(1.5),0),this.add([this.icon,this.levelText])},n.align=function(){var e=-2;"ru"===this.scene.lang.getCurrentLanguage()&&(e=-5),Phaser.Display.Align.In.Center(this.levelText,this,13,e),this.levelText.x-=this.x,this.levelText.y-=this.y,Phaser.Display.Align.In.LeftCenter(this.icon,this.levelText,22,-1)},t}(G.Z),Q=function(e){function t(t){var n;return(n=e.call(this,t)||this).playButton=void 0,n.background=void 0,n.setSize(375,95),n.createBackground(),n.createPlayButton(),n.setInteractive(),n}(0,i.Z)(t,e);var n=t.prototype;return n.createBackground=function(){var e=this.scene.theme.getCurrentThemeConfig().backgroundKey,t=this.scene.make.image({key:e,origin:{x:.5,y:1}}),n=this.scene.ads.getBannerHeight();t.y=this.height/2+n,this.scene.events.on(U.Z.BACKGROUND_CHANGED,(function(e){t.setTexture(e)}));var i=this.scene.gameZone,a=i.width,r=i.height;t.setWorldSize(a,r);var s=this.height+n,o=t.frame.source.height,c=s*(1/t.scaleY),u=o-c;t.setCrop(0,u,a*(1/t.scaleX),c),this.add(t),this.background=t;var l=this.scene.make.graphics({});l.fillStyle(0,.1),l.fillRect(-a/2,-this.height/2-3,a,this.height),this.add(l),this.sendToBack(l)},n.createPlayButton=function(){this.playButton=new q(this.scene),this.add(this.playButton),this.playButton.setY(4)},n.setLevel=function(e){this.playButton.setLevel(e)},t}(Phaser.GameObjects.Container),$=function(e){function t(t){var n;return(n=e.call(this,t)||this).scene=void 0,n.levelScroller=void 0,n.header=void 0,n.timeCounter=void 0,n.footer=void 0,n.scene=t,n.setContainerSize(),n.createHeader(),n.createTimerCounter(),n.createFooter(),n.createLevelScroller(),n}(0,i.Z)(t,e);var n=t.prototype;return n.updateData=function(e,t){Number.isInteger(e)&&(this.footer.setLevel(e),this.levelScroller.setLevelEnableMax(e),this.levelScroller.updateLevelScroller(),this.timeCounter.setCountdown(t))},n.createHeader=function(){this.header=new W(this.scene),this.add(this.header),Phaser.Display.Align.In.TopCenter(this.header,this)},n.createTimerCounter=function(){this.timeCounter=new K(this.scene),this.add(this.timeCounter),Phaser.Display.Align.In.TopCenter(this.timeCounter,this,0,-46),this.timeCounter.kill()},n.createFooter=function(){var e=this;this.footer=new Q(this.scene),this.add(this.footer);var t=this.scene.ads.getBannerHeight();Phaser.Display.Align.In.BottomCenter(this.footer,this,0,-t),this.footer.playButton.onClick=(0,v.Z)(E().mark((function t(){var n;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.scene.scene.get(u.C.GAME_SCENE))instanceof p.Z)){t.next=6;break}return t.next=4,n.handlePlayJourneyLevel();case 4:!1===t.sent&&e.scene.scene.switch(u.C.GAME_SCENE);case 6:case"end":return t.stop()}}),t)})))},n.createLevelScroller=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.levelScroller=new M(this.scene,t,n,this.header.height,this.footer.height+this.scene.ads.getBannerHeight()+60),this.add(this.levelScroller);var i=this.scene.player.getCustomData("currentJourneyLevel");this.levelScroller.setLevelEnableMax(i),this.levelScroller.updateLevelScroller(),this.sendToBack(this.levelScroller)},n.setContainerSize=function(){var e=this.scene.gameZone,t=e.width,n=e.height;this.setSize(t,n)},t}(Phaser.GameObjects.Container),ee=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,r()(t=[this]).call(t,a))||this).fadeInAnimation=void 0,n.fadeOutAnimation=void 0,n.container=void 0,n.themeHandler=void 0,n.footer=void 0,n.run=function(){n.themeHandler.setBackground(),n.container.setAlpha(1);var e=n.player.getCustomData("currentJourneyLevel"),t=n.game.scene.getScene(u.C.GAME_SCENE);if(t instanceof p.Z){var i=t.levelHandler.getJourneyLength();e>i&&(e=i,n.player.setCustomData("currentJourneyLevel",e))}n.container.setAlpha(1);var a=Date.now()+1e5;n.container.updateData(e,a)},n.setBackground=function(e){n.createBackground(e)},n}(0,i.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.create=function(){e.prototype.create.call(this),this.themeHandler=new d.Z(this),this.createContainer(),this.createBottomLogo()},n.createContainer=function(){this.container=new $(this),Phaser.Display.Align.In.Center(this.container,this.gameZone),this.add.existing(this.container)},n.createFooter=function(){var e=this;this.footer=new m.Z(this,!1,u.C.JOURNEY_SCENE),this.footer.setInteractive();var t=this.ads.getBannerHeight(),n=this.world.isLandscape()?-20:0;Phaser.Display.Align.In.BottomCenter(this.footer,this.gameZone,0,-t+n);var i=this.footer.tournamentsButton;i.setIconFrame(c.Z.GAMEPLAY_DEFAULT.FRAME.IC_UNDO),i.setText("Back to Game"),i.onClick=function(){e.game.globalScene.screen.close(l.o4.MISSION_COMPLETED_SCREEN);var t=e.scene.get(u.C.GAME_SCENE);t.events.once(Phaser.Scenes.Events.WAKE,(function(){t instanceof p.Z&&t.handleReturnToGameSceneFromJourney()})),e.scene.switch(u.C.GAME_SCENE)}},n.createBottomLogo=function(){if(!this.world.isLandscape()){var e=new g.Z(this);Phaser.Display.Align.In.BottomCenter(e,this.gameZone)}},n.close=function(){},n.runOpenAnimation=function(){this.audio.playSound(h.Z.POPUP_SHOW),this.fadeInAnimation||(this.fadeInAnimation=new s.Z({targets:[this],duration:300})),this.fadeInAnimation.play()},n.runCloseAnimation=function(){var e,t=this;null!=(e=this.fadeOutAnimation)&&null!=(e=e.tween)&&e.isPlaying()||(this.audio.playSound(h.Z.POPUP_OFF),this.fadeOutAnimation||(this.fadeOutAnimation=new o.Z({targets:[this],props:{alpha:0},duration:300,onComplete:function(){t.scene.switch(u.C.GAME_SCENE)}})),this.fadeOutAnimation.play())},t}(f.Z),te=ee},502:function(e,t,n){"use strict";var i=n(19),a=n(2),r=n(230),s=n(57),o=n(40).Z.GAMEPLAY_DEFAULT,c=o.KEY,u=o.FRAME,l=function(e){function t(t,n){var a;return t.world.isLandscape()?(a=e.call(this,t,c,u.DEV_TOOLS_BUTTON,122,33)||this).label=void 0:(a=e.call(this,t,c,u.DEV_TOOLS_BUTTON,90,33)||this).label=void 0,a.createLabel(n),(0,i.Z)(a)}(0,a.Z)(t,e);var n=t.prototype;return n.createLabel=function(e){this.label=this.scene.make.bitmapText({text:e,font:s.Z.BOLD.KEY,size:this.scene.fontSize(10),origin:{x:.5,y:.5}}),this.add(this.label),Phaser.Display.Align.In.Center(this.label,this,0,0)},n.setText=function(e){this.label.setText(e)},n.setLabelTint=function(e){this.label.setTint(e)},t}(r.Z);t.Z=l},631:function(e,t,n){"use strict";var i=n(674),a=n(32),r=n(22),s=n(2),o=n(58),c=n.n(o),u=n(20),l=n.n(u),h=n(672),d=0,f=0,p=function(){function e(e){this.game=void 0,this.progressFbTimeEvent=void 0,this.game=e}var t=e.prototype;return t.loadingProgressFbBootScene=function(){var e=this,t=100;f=30;!function n(){t<=0?clearTimeout(e.progressFbTimeEvent):e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=30/t,t--,n()}),50)}()},t.finishLoadingProgressFbBootScene=function(){clearTimeout(this.progressFbTimeEvent)},t.loadingProgressFbLoadScene=function(){var e=this;(!f||f<30)&&(f=60),d=f;!function t(){e.progressFbTimeEvent=setTimeout((function(){e.game.facebook.setLoadingProgress(Math.round(f)),f+=.1,t()}),50)}()},t.onProgress=function(e){var t=100-f,n=Math.round(e*t+f);n>d&&clearTimeout(this.progressFbTimeEvent),this.game.facebook.setLoadingProgress(n)},e}(),g=function(){function e(e){this.game=void 0,this.game=e}var t=e.prototype;return t.addKillRevive=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Shape,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Particles.ParticleEmitter,Phaser.GameObjects.Particles.ParticleEmitterManager].forEach((function(t){t.prototype.kill=e.kill,t.prototype.revive=e.revive}))},t.addKillReviveGroup=function(){Phaser.GameObjects.Group.prototype.killGroup=this.killGroup,Phaser.GameObjects.Group.prototype.reviveGroup=this.reviveGroup},t.addSetWorldSize=function(){var e=this;[Phaser.GameObjects.Image,Phaser.GameObjects.Sprite].forEach((function(t){t.prototype.setWorldSize=e.setWorldSize}))},t.addSetWorldSizeForContainer=function(){var e=this;[Phaser.GameObjects.Container].forEach((function(t){t.prototype.setWorldSize=e.setWorldSizeForContainer}))},t.addGetWorldPosition=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Shape,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText].forEach((function(t){t.prototype.getWorldPosition=e.getWorldPosition}))},t.addDrawDebugBox=function(){var e=this;[Phaser.GameObjects.Container,Phaser.GameObjects.Image,Phaser.GameObjects.Sprite,Phaser.GameObjects.Graphics,Phaser.GameObjects.Shape,Phaser.GameObjects.Text,Phaser.GameObjects.BitmapText,Phaser.GameObjects.Zone].forEach((function(t){t.prototype.drawDebugBox=e.drawDebugBox}))},t.addHighQuality=function(){var e=this;[Phaser.GameObjects.Text].forEach((function(t){t.prototype.setHighQuality=e.setHighQuality}))},t.addSetLineHeightForBitmapText=function(){Phaser.GameObjects.BitmapText.prototype.setLineHeight=function(e){this.lineHeight=e,this.updateDisplayOrigin()}},t.kill=function(){this.setActive(!1),this.setVisible(!1)},t.revive=function(){this.setActive(!0),this.setVisible(!0)},t.killGroup=function(){this.getChildren().forEach((function(e){e.setActive(!1),e.setVisible(!1)}))},t.reviveGroup=function(){this.getChildren().forEach((function(e){e.setActive(!0),e.setVisible(!0)}))},t.setWorldSize=function(e,t){this.setSize(e,t),this.setDisplaySize(e,t)},t.setWorldSizeForContainer=function(e,t,n){void 0===n&&(n=2),this.setSize(e*n,t*n),this.setDisplaySize(e,t)},t.getWorldPosition=function(){var e=this.getWorldTransformMatrix().decomposeMatrix();return{x:e.translateX,y:e.translateY}},t.drawDebugBox=function(e,t){var n=this.x,i=this.y,a=this.width,r=this.height,s=this.depth,o=this.originX,c=this.originY,u=this.scene.add.rectangle(n,i,a,r,e,t);u.setName("Debug Box"),u.setDepth(s);var l=GameCore.Utils.Valid.isNumber;return l(o)&&l(c)&&u.setOrigin(o,c),u},t.setHighQuality=function(){return this.renderer instanceof Phaser.Renderer.WebGL.WebGLRenderer?this.setResolution(2*this.scene.game.world.getZoomRatio()):this},e}(),m=n(66),v=n.n(m),y=n(47),E=n.n(y),S=[{url:"./assets/images/others/mock1.jpg",title:"Buy lottery tickets on behalf",description:"\ud83d\udca5\ud83d\udca5\ud83d\udca5 Place an order for lottery tickets from 3 regions!!! \u2705 Fast - Convenient - Safe \u2705 Diverse products \u2705 Payment...",buttonName:"Discover more"},{url:"./assets/images/others/mock2.jpg",title:"SYSTEM-WIDE SALE UP TO 50%",description:'\ud83d\udd25 \ud835\uddec\ud835\uddd8\ud835\uddd4\ud835\udde5 \ud835\uddd8\ud835\udde1\ud835\uddd7 \ud835\udde6\ud835\uddd4\ud835\udddf\ud835\uddd8 | \ud835\udde8\ud835\udde3 \ud835\udde7\ud835\udde2 \ud835\udff1\ud835\udfec% "BIG PARTY" AUTHENTIC SPORTSWEAR SHOCKINGLY REDUCED PRICES! \ud83c\udf81 From...',buttonName:"Discover more"},{url:"./assets/images/others/mock3.jpg",title:"Register now",description:"Play safe, play fun, play 9club!",buttonName:"Register"}],T=function(){function e(){}return e.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,s,o,u,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIdx=(this.currentIdx+1)%S.length,this.hideBannerAdAsync(),e.next=4,new(c())((function(e){setTimeout((function(){e()}),2e3)}));case 4:if(!document.getElementById("mock-banner-ads")){e.next=16;break}return t=S[this.currentIdx],n=t.url,i=t.buttonName,a=t.title,r=t.description,(s=document.getElementById("banner-content-text1"))&&(s.innerHTML=a),(o=document.getElementById("banner-content-text2"))&&(o.innerHTML=r),(u=document.getElementById("mock-banner-ads-avatar"))&&(u.style.background="url("+n+") center center/contain no-repeat"),(h=document.getElementById("banner-content-button"))&&(h.innerHTML=i),e.abrupt("return");case 16:d=GameCore.Utils.Device.isDesktop(),50,d?this.createDesktopBannerAd(50):this.createMobileBannerAd(50);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.createDesktopBannerAd=function(e){var t=this,n=S[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="flex",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.width="100%",c.style.height="100%",c.style.background="#323436 center center/auto no-repeat",c.style.borderRadius="10px",c.style.marginLeft="4px",c.style.marginRight="4px",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.paddingLeft="4px",u.style.paddingRight="4px",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.marginLeft="10px",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat",l.style.borderRadius="50%";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#E4E6EB",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 2;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.width="120px",f.style.height=e-20+"px",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.borderRadius="5px",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginRight="10px",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="2px",f.style.paddingLeft="2px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity};var p=document.createElement("button");p.type="button",p.style.width=e-20+"px",p.style.height=e-20+"px",p.style.fontWeight="1000",p.style.backgroundColor="#5a5c5c",p.style.border="none",p.style.color="white",p.style.borderRadius="50%",p.style.textAlign="center",p.style.display="inline-block",p.style.cursor="pointer",p.style.marginRight="10px",p.style.marginLeft="10px",p.style.flexShrink="0",p.style.boxSizing="border-box",p.style.paddingRight="2px",p.style.paddingLeft="2px",p.innerHTML="...",document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(f),h.appendChild(p)},e.createMobileBannerAd=function(e){var t=this,n=S[this.currentIdx],i=n.url,a=n.buttonName,r=n.title,s=n.description,o=document.createElement("div");o.id="mock-banner-ads",o.style.width="100%",o.style.height=e+"px",o.style.bottom="var(--sab)",o.style.display="block",o.style.position="absolute",o.style.opacity=this.currentOpacity;var c=document.createElement("div");c.id="mock-banner-ads-display-area",c.style.background="#ffffff center center/auto no-repeat",c.style.display="block",c.style.alignContent="center";var u=document.createElement("div");u.id="mock-banner-ads-content",u.style.boxSizing="border-box",u.style.flexDirection="row",u.style.display="flex",u.style.position="relative",u.style.alignItems="stretch",u.style.justifyContent="space-between";var l=document.createElement("div");l.id="mock-banner-ads-avatar",l.style.width=e+"px",l.style.minWidth=e+"px",l.style.height=e+"px",l.style.display="flex",l.style.flexDirection="column",l.style.position="relative",l.style.background="url("+i+") center center/contain no-repeat";var h=document.createElement("div");h.id="mock-banner-ads-right-content",h.style.width="100%",h.style.paddingLeft="10px",h.style.display="flex",h.style.flexDirection="row",h.style.position="relative",h.style.color="#000",h.style.wordWrap="break-word",h.style.textAlign="left",h.style.alignContent="center",h.style.alignItems="center",h.style.fontSize="12px",h.style.fontFamily="Helvetica, Arial, sans-serif, Roboto, Helvetica, Arial, sans-serif",l.style.boxSizing="border-box";var d=document.createElement("div");d.style.flexDirection="column",d.style.display="flex",d.style.justifyContent="center",d.style.flexShrink="1",d.style.flexGrow="1",d.style.flexBasis="0",d.style.boxSizing="border-box",d.style.minWidth="0",d.innerHTML="\n            <div id='banner-content-text1' style=\"font-weight:600;line-height: 1.3333;font-size: .9375rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+r+"</div>\n            <div id='banner-content-text2' style=\"font-weight:400;line-height: 1.2308;font-size: .8125rem;text-overflow: ellipsis;-webkit-line-clamp: 1;overflow: hidden;display: -webkit-box;-webkit-box-orient: vertical;\">"+s+"</div>";var f=document.createElement("button");f.id="banner-content-button",f.type="button",f.style.height="100%",f.style.fontWeight="600",f.style.backgroundColor="#3963fc",f.style.border="none",f.style.color="white",f.style.textAlign="center",f.style.display="inline-block",f.style.cursor="pointer",f.style.marginLeft="10px",f.style.flexShrink="1",f.style.boxSizing="border-box",f.style.paddingRight="7px",f.style.paddingLeft="7px",f.innerHTML=a,f.onclick=function(){"0.2"===t.currentOpacity?o.style.opacity="1":o.style.opacity="0.2",t.currentOpacity=o.style.opacity},document.body.appendChild(o),o.appendChild(c),c.appendChild(u),u.appendChild(l),u.appendChild(h),h.appendChild(d),h.appendChild(f)},e.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("mock-banner-ads")){e.next=3;break}return e.abrupt("return");case 3:t.remove();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e}();T.currentIdx=-1,T.currentOpacity="1";var A={LOADED:"loaded",DISPLAYED:"displayed"},C=function(e){return e.IDLE="idle",e.LOADING="loading",e.FILLED="filled",e.SHOWING="showing",e}(C||{}),b=C,I=function(e){return e.REWARDED="rewarded",e.PRE_ROLL="pre-roll",e.INTERSTITIAL="interstitial",e}(I||{}),w=I,x=n(55),_=function(e){function t(t,n){var i;return(i=e.call(this,n)||this).code=void 0,i.code=t,i.message=n,i}return(0,s.Z)(t,e),t}((0,x.Z)(Error)),O=function(e){this.type=void 0,this.status=void 0,this.type=e,this.status=b.IDLE};GameCore.Ads={Types:w,Status:b,Events:A,AdError:_,AdInstance:O};var P=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).events=void 0,n.enabled=void 0,n.config=void 0,n.lastInterAdShownTime=void 0,n.lastInterAdLoadedTime=void 0,n.lastRewardAdShownTime=void 0,n.interstitial=void 0,n.rewardedVideo=void 0,n.preRoll=void 0,n.safeAreaBottom=void 0,n.showingBannerAd=void 0,n.reloadBannerAdIntervals=void 0,n.bannerAdConfig=void 0,n.isHaveBannerAdOptions=void 0,n}(0,s.Z)(t,e);var n=t.prototype;return n.init=function(){this.events=new Phaser.Events.EventEmitter,this.safeAreaBottom=0,this.lastInterAdShownTime=0,this.lastInterAdLoadedTime=0,this.lastRewardAdShownTime=0,this.showingBannerAd={},this.reloadBannerAdIntervals={},this.isHaveBannerAdOptions=!0},n.calculateSafeAreaBottom=function(){try{if(!this.config.calculateSafeAreaBottom)return;this.safeAreaBottom=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sab")),isNaN(this.safeAreaBottom)&&(this.safeAreaBottom=0)}catch(e){this.safeAreaBottom=0}},n.configure=function(e,t){this.enabled=t.enabled,this.config=t,0===this.config.bannerAdOptions.length&&(this.isHaveBannerAdOptions=!1),this.setAdInstance(e),this.calculateSafeAreaBottom()},n.setAdInstance=function(e){var t=this.config,n=t.rewardAdOptions,i=t.interstitialAdOptions;this.interstitial=new e(w.INTERSTITIAL,i.pID),this.rewardedVideo=new e(w.REWARDED,n.pID),this.preRoll=new e(w.PRE_ROLL,i.pID)},n.preloadInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(w.INTERSTITIAL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showInterstitialAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowInterstitialAdByTime()){e.next=2;break}throw new _("INTERSTITIAL_AD_CAN_NOT_SHOW","Can't show interstitial ad");case 2:return e.next=4,this.showAdAsync(w.INTERSTITIAL);case 4:this.lastInterAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(w.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showPreRollAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.showAdAsync(w.PRE_ROLL);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.preloadRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preloadAdAsync(w.REWARDED);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.showRewardedVideoAsync=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.canbeShowRewardAd()){e.next=2;break}throw new _("REWARDED_VIDEO_CAN_NOT_SHOW","Can't show rewarded video");case 2:return e.next=4,this.showAdAsync(w.REWARDED);case 4:this.lastRewardAdShownTime=window.performance.now()/1e3;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getRemainingRewardTime=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions.secondsBetweenAds,n=e-this.lastRewardAdShownTime;return n<t?t-n:0},n.preloadAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new _("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new _("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==w.INTERSTITIAL&&t!==w.PRE_ROLL||(this.lastInterAdLoadedTime=window.performance.now()/1e3),e.next=8,n.loadAsync();case 8:this.events.emit(A.LOADED,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.showAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}throw new _("ADS_NOT_ENABLED","Ads is't enabled");case 2:if(null!==(n=this.getAdInstanceByType(t))){e.next=5;break}throw new _("AD_INSTANCE_NOT_INITIATED","The instance ads not yet initiated");case 5:return t!==w.INTERSTITIAL&&t!==w.PRE_ROLL||(this.lastInterAdShownTime=window.performance.now()/1e3),t===w.REWARDED&&(this.lastRewardAdShownTime=window.performance.now()/1e3,this.config.enableRewardVideoResetInterstitial&&(this.lastInterAdShownTime=this.lastRewardAdShownTime)),e.next=9,n.showAsync();case 9:this.events.emit(A.DISPLAYED,t);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAdStatus=function(e){var t=this.getAdInstanceByType(e);return t?t.getStatus():null},n.getAdInstanceByType=function(e){switch(e){case w.INTERSTITIAL:return this.interstitial;case w.REWARDED:return this.rewardedVideo;case w.PRE_ROLL:return this.preRoll;default:return null}},n.canbeShowInterstitialAd=function(){var e=this.canbeLoadInterstitialAdByTime();return e&&(e=this.canbeShowInterstitialAdByTime()),e},n.canbeLoadInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdLoadedTime);return this.lastInterAdLoadedTime>0?a>=i:a>=n},n.canbeShowInterstitialAdByTime=function(){var e=window.performance.now()/1e3,t=this.config.interstitialAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastInterAdShownTime);return this.lastInterAdShownTime>0?a>=i:a>=n},n.canbeShowRewardAd=function(){var e=window.performance.now()/1e3,t=this.config.rewardAdOptions,n=t.secondsFirstTime,i=t.secondsBetweenAds,a=Math.floor(e-this.lastRewardAdShownTime);return this.lastRewardAdShownTime>0?a>=i:a>=n},n.canShowBannerAd=function(){if(!this.isHaveBannerAdOptions)return!1;for(var e=this.config.bannerAdOptions,t=GameCore.Utils.Device.isDesktop(),n=0;n<e.length;n++){var i=e[n],a=i.platform;if("ALL"==a||"DESKTOP"==a&&t||"MOBILE"==a&&!t)return this.bannerAdConfig=i,!0}return!1},n.disableBannerAds=function(){this.config.bannerAdOptions=[]},n.showBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.canShowBannerAd()){e.next=4;break}return e.abrupt("return");case 4:if(this.reloadBannerAdIntervals=this.reloadBannerAdIntervals||{},t=this.bannerAdConfig,n=t.placementId,i=t.secondsReload,n&&""!=n){e.next=8;break}return e.abrupt("return");case 8:if(!(i>0)){e.next=14;break}if(!this.reloadBannerAdIntervals[n]){e.next=11;break}return e.abrupt("return");case 11:return this.loadBannerAdAsync(n,this.bannerAdConfig),this.reloadBannerAdIntervals[n]=setInterval((function(){a.loadBannerAdAsync(n,a.bannerAdConfig)}),1e3*i),e.abrupt("return");case 14:return this.loadBannerAdAsync(n,this.bannerAdConfig),e.abrupt("return");case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.loadBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,!GameCore.Configs.Ads.Mockup.Enable){e.next=9;break}return e.next=7,T.loadBannerAdAsync();case 7:e.next=11;break;case 9:return e.next=11,GameSDK.loadBannerAdAsync(t,n);case 11:this.showingBannerAd[t]=!0,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),n.hideBannerAdAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(this.isHaveBannerAdOptions){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,!GameCore.Configs.Ads.Mockup.Enable){e.next=11;break}return e.next=9,T.hideBannerAdAsync();case 9:e.next=15;break;case 11:return this.config.bannerAdOptions.forEach((function(e){var n=e.placementId,i=t.reloadBannerAdIntervals[n];i&&(clearInterval(i),t.reloadBannerAdIntervals[n]=null),t.showingBannerAd[n]=!1})),e.next=15,GameSDK.hideBannerAdAsync();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0);case 20:case"end":return e.stop()}}),e,this,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),n.getBannerHeight=function(){var e;if(!this.canShowBannerAd())return 0;if(!E()(e=this.bannerAdConfig.position).call(e,"bottom"))return 0;var t=(this.bannerAdConfig||{}).bannerHeight,n=(void 0===t?0:t)+this.safeAreaBottom+20;if(this.game.world){var i=this.game.world,a=i.getPixelRatio(),r=i.getZoomRatio();return this.game.world.getPhysicPixels(n,a/r)}return n},t}(Phaser.Plugins.BasePlugin),k=P,L=function(){function e(e,t,n){this.name=void 0,this.color=void 0,this.selfLog=void 0,this.options=void 0,this.name=e,this.color=n||"#FFF",this.options=t,this.selfLog=!0,console.info("%c"+this.name+": init","color: "+this.color,this.options)}var t=e.prototype;return t.event=function(e,t,n){this.processEvent(e,t,n),this.selfLog&&console.info("%c"+this.name+": event","color: "+this.color,{name:e,value:n,payload:t})},t.pageview=function(e){var t=this.getPageByKey(e);this.processPageView(t),this.selfLog&&console.info("%c"+this.name+": pageview","color: "+this.color,{page:t})},t.levelStart=function(e){this.processLevelStart(e),this.selfLog&&console.info("%c"+this.name+": level start","color: "+this.color,e)},t.loadPreRollAd=function(e){this.processLoadPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": load pre-roll ad","color: "+this.color,{placement:e})},t.showPreRollAd=function(e){this.processShowPreRollAd(e),this.selfLog&&console.info("%c"+this.name+": show pre-roll","color: "+this.color,{placement:e})},t.loadInterstitialAd=function(e){this.processLoadInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": load interstitial ad","color: "+this.color,{placement:e})},t.showInterstitialAd=function(e){this.processShowInterstitialAd(e),this.selfLog&&console.info("%c"+this.name+": show interstitial ad","color: "+this.color,{placement:e})},t.loadRewardedVideoAd=function(e){this.processLoadRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": load rewarded video ad","color: "+this.color,{placement:e})},t.showRewardedVideoAd=function(e){this.processShowRewardedVideoAd(e),this.selfLog&&console.info("%c"+this.name+": show rewarded video ad","color: "+this.color,{placement:e})},t.receiveReward=function(e){this.processReceiveReward(e),this.selfLog&&console.info("%c"+this.name+": receive reward","color: "+this.color,{placement:e})},t.loadAdFail=function(e,t,n){this.processLoadAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": load ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.showAdFail=function(e,t,n){this.processShowAdFail(e,t,n),this.selfLog&&console.info("%c"+this.name+": show ad fail","color: "+this.color,{type:e,placement:t,reason:n})},t.getPageByKey=function(e){var t=e.replace(/_/g,"-");return t=t.toLowerCase()},t.processLevelStart=function(e){},t.processLevelFail=function(e,t,n){},t.processLevelRescue=function(e,t,n){},t.processLevelComplete=function(e,t,n){},t.processLoadInterstitialAd=function(e){},t.processShowInterstitialAd=function(e){},t.processLoadPreRollAd=function(e){},t.processShowPreRollAd=function(e){},t.processLoadRewardedVideoAd=function(e){},t.processShowRewardedVideoAd=function(e){},t.processReceiveReward=function(e){},t.processLoadAdFail=function(e,t,n){},t.processShowAdFail=function(e,t,n){},e}();GameCore.Analytics={BaseAnalytics:L};var D=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).analytics=void 0,n.pageview=function(e){n.isActive()&&n.analytics.forEach((function(t){t.pageview(e)}))},n}(0,s.Z)(t,e);var n=t.prototype;return n.init=function(){this.analytics=[]},n.add=function(e){this.analytics.push(e)},n.event=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.event(e,t,n)}))},n.levelStart=function(e){this.isActive()&&this.analytics.forEach((function(t){t.levelStart(e)}))},n.loadPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadPreRollAd(e)}))},n.showPreRollAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showPreRollAd(e)}))},n.loadInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadInterstitialAd(e)}))},n.showInterstitialAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showInterstitialAd(e)}))},n.loadRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.loadRewardedVideoAd(e)}))},n.showRewardedVideoAd=function(e){this.isActive()&&this.analytics.forEach((function(t){t.showRewardedVideoAd(e)}))},n.receiveReward=function(e){this.isActive()&&this.analytics.forEach((function(t){t.receiveReward(e)}))},n.loadAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.loadAdFail(e,t,n)}))},n.showAdFail=function(e,t,n){this.isActive()&&this.analytics.forEach((function(i){i.showAdFail(e,t,n)}))},n.isActive=function(){return this.analytics.length>=1},t}(Phaser.Plugins.BasePlugin),R=D,B=n(513),N=n.n(B),M={BACKGROUND:{KEY:"background",FILE:"./assets/music/bg_music.mp3"},EFFECTS:{KEY:"effects",FILE:"./assets/sounds/effects.mp3",JSON:"./assets/sounds/effects.json",PATH:"./assets/sounds/"}},G=function(){function e(e){var t=this;this.game=void 0,this.audios=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!t.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!t.game.player.getPlayerSetting("sound")},this.game=e,this.audios=new(N())}var t=e.prototype;return t.play=function(e,t){var n=this,i=(0,a.Z)({volume:this.volume},t||{});i.volume!==this.volume&&(i.volume*=this.volume);var r=this.audios.get(e);r?r.play(void 0,i):(this.game.globalScene.load.audio(e,[M.EFFECTS.PATH+e+".ogg",M.EFFECTS.PATH+e+".mp3"]),this.game.globalScene.load.on(Phaser.Loader.Events.FILE_KEY_COMPLETE+"audio-"+e,(function(){var t=n.game.sound.add(e);n.audios.set(e,t),t.play(void 0,i)})),this.game.globalScene.load.start())},t.pause=function(e){var t=this.audios.get(e);t&&t.pause()},t.stop=function(e){var t=this.audios.get(e);t&&t.stop()},t.setVolume=function(e){this.volume=e},t.pauseAll=function(){this.audios.forEach((function(e){e.pause()}))},t.resumeAll=function(){this.audios.forEach((function(e){e.resume()}))},e}(),U=G,F=function(){function e(e,t){var n=this;this.name=void 0,this.game=void 0,this.isSprite=void 0,this.audio=void 0,this.markers=void 0,this.volume=void 0,this.isMusicEnabled=function(){return!!n.game.player.getPlayerSetting("music")},this.isSoundEnabled=function(){return!!n.game.player.getPlayerSetting("sound")},this.name=t,this.game=e,this.markers={},this.isSprite=!1,this.isSprite||(this.audio=this.game.sound.add(this.name))}var t=e.prototype;return t.play=function(e,t){var n,i,r,s=(0,a.Z)({volume:this.volume},t||{});if(s.volume!==this.volume&&(s.volume*=this.volume),!this.isSprite)return(null==(i=this.audio)?void 0:i.seek)>0?void this.audio.resume():void(null==(r=this.audio)||r.play(e,s));this.createMaker(e),null==(n=this.markers[e])||n.play(e,s)},t.pause=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.pause():null==(n=this.audio)||n.pause()},t.stop=function(e){var t,n;this.isSprite?null==(t=this.markers[e])||t.stop():null==(n=this.audio)||n.stop()},t.setVolume=function(e){this.volume=e},t.createMaker=function(e){if(!this.markers[e])try{this.markers[e]=this.game.sound.addAudioSprite(this.name)}catch(t){console.warn("createMaker",t)}},e}(),Z=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).soundManager=void 0,n.musicManager=void 0,n.isMuteAll=void 0,n.initMusic=function(e){n.musicManager=new F(n.game,e),n.setMusicVolume(1)},n.initSound=function(){n.soundManager=new U(n.game),n.setSoundVolume(.7)},n}(0,s.Z)(t,e);var n=t.prototype;return n.playSound=function(e,t){try{if(!this.soundManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.soundManager.isSoundEnabled())return;this.soundManager.play(e,t)}catch(n){}},n.stopSound=function(e){try{this.soundManager.stop(e)}catch(t){}},n.playMusic=function(e){void 0===e&&(e={});try{if(!this.musicManager||this.isMuteAll||!this.game.visibility.isGameVisible())return;if(!this.musicManager.isMusicEnabled())return;this.musicManager.play("",(0,a.Z)({loop:!0,volume:.2},e))}catch(t){}},n.pauseMusic=function(){try{if(!this.musicManager)return;this.musicManager.pause("")}catch(e){}},n.stopMusic=function(){try{if(!this.musicManager)return;this.musicManager.stop("")}catch(e){}},n.pauseAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.pauseAll()}catch(e){}},n.resumeAllSounds=function(){try{if(!this.soundManager)return;this.soundManager.resumeAll()}catch(e){}},n.setSoundVolume=function(e){try{if(!this.soundManager)return;this.soundManager.setVolume(e)}catch(t){console.warn("setSoundVolume",t)}},n.setMusicVolume=function(e){try{if(!this.musicManager)return;this.musicManager.setVolume(e)}catch(t){console.warn("setMusicVolume",t)}},n.muteAll=function(){this.isMuteAll=!0,this.game.sound.mute=!0},n.unmuteAll=function(){this.isMuteAll=!1,this.game.sound.mute=!1},t}(Phaser.Plugins.BasePlugin),H=Z,W=n(28),z=n(56),Y="AUTH_TOKEN_REQUEST",V="AUTH_TOKEN_RECEIVED",K=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="RequestTokenFail",i.message=t||"Request token fail",i.payload=n||{},i}return(0,s.Z)(t,e),t}((0,x.Z)(Error)),j=n(78),J="auth",X=(0,j.P1)([function(e){return e[J].token}],(function(e){return e})),q=(0,j.P1)([function(e){return e[J].isRequesting}],(function(e){return e})),Q=function(e){return{type:V,payload:{token:e}}},$=function(e){function t(){return e.apply(this,arguments)||this}(0,s.Z)(t,e);var n=t.prototype;return n.requestToken=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i=window.game.facebook,a=n(),r=X(a),!q(a)&&""===r){e.next=7;break}return e.abrupt("return");case 7:return t({type:Y,payload:{}}),e.next=10,i.getPlayerToken();case 10:s=e.sent,t(Q(s)),e.next=25;break;case 14:if(e.prev=14,e.t0=e.catch(0),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"code"))){e.next=19;break}if("PENDING_REQUEST"!==e.t0.code){e.next=19;break}return e.abrupt("return");case 19:if(t(Q("")),!(e.t0 instanceof Object&&GameCore.Utils.Object.hasOwn(e.t0,"message"))){e.next=24;break}if("string"!==typeof e.t0.message){e.next=24;break}return(0,z.tO)(new Error(e.t0.message)),e.abrupt("return");case 24:(0,z.tO)(new K);case 25:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getToken=function(){return X(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),ee=$,te=n(104),ne=n.n(te),ie=function(e,t){void 0===t&&(t=1);var n=new Image;n.onload=function(){var n,i,a=(n=this.width*t,i=this.height*t,{string:"+",style:"font-size: 1px; padding: "+Math.floor(i/2)+"px "+Math.floor(n/2)+"px;"});console.info("%c "+a.string,a.style+" background: transparent url("+e+") no-repeat center center; background-size: "+this.width*t+"px "+this.height*t+"px;")},n.src=e},ae=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).width=void 0,n.height=void 0,n.renderOptions=void 0,n.canvas=void 0,n}(0,s.Z)(t,e);var n=t.prototype;return n.preload=function(e){var t=this,n=ne()(e);n.length<1||(n.forEach((function(n){t.scene.load.image(n,e[n])})),this.scene.load.start())},n.capture=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,i=t.height,a=t.renderOptions,this.width=n,this.height=i,this.renderOptions=a,this.createCanvas(),e.next=7,this.loadImages();case 7:return this.drawObjects(),e.abrupt("return",this.snapshotFrame());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.createCanvas=function(){this.canvas||(this.canvas=this.game.textures.createCanvas("FrameCaptureCanvas")),this.canvas.clear(),this.canvas.setSize(this.width,this.height)},n.loadImages=function(){var e=this;return new(c())((function(t,n){for(var i in e.renderOptions){var a=e.renderOptions[i],r=a.name,s=a.image;if(s)e.scene.textures.get(r).key!==r&&e.scene.load.image(r,s)}e.scene.load.on(Phaser.Loader.Events.COMPLETE,t),e.scene.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(){var e=new Error("Load image failed");n(e)})),e.scene.load.start()}))},n.drawObjects=function(){for(var e in this.renderOptions){var t=this.renderOptions[e];switch(t.type){case"text":this.drawText(t);break;case"image":this.drawImage(t)}}},n.drawText=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.font,r=e.text,s=e.fillStyle,o=e.lineWidth,c=e.textAlign;t.font=a+' "Be Vietnam Pro",nunito,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif',t.fillStyle=s||"#ffffff",o&&(t.lineWidth=o),c&&(t.textAlign=c),t.fillText(r,n,i)},n.drawImage=function(e){var t=this.canvas.context,n=e.x,i=e.y,a=e.name,r=e.frame,s=e.width,o=e.height,c=e.fallbackWithImage,u=this.scene.textures.get(a),l=u.getSourceImage(r);"__MISSING"===u.key&&c&&(l=(u=this.scene.textures.get(c)).getSourceImage()),t.drawImage(l,n,i,s,o)},n.snapshotFrame=function(){var e=this.canvas.getCanvas().toDataURL("image/jpeg",.85);return GameCore.Utils.Valid.isDebugger()&&ie(e),e},t}(Phaser.Plugins.ScenePlugin),re=ae,se=function(e){function t(t,n,i){var a;return(a=e.call(this)||this).game=void 0,a.options=void 0,a.performance=void 0,a.isRunning=!1,a.checkTimer=void 0,a.fpsHistory=void 0,a.start=function(){if(!a.isRunning){a.isRunning=!0;var e=a.options.checkInterval;a.checkTimer=e,a.fpsHistory=[],a.game.events.on(Phaser.Core.Events.POST_STEP,a.onPostStep)}},a.stop=function(){a.isRunning&&(a.isRunning=!1,a.game.events.off(Phaser.Core.Events.POST_STEP,a.onPostStep),a.options.onlyUpdateWhenSwitchScene&&a.checkFps())},a.onPostStep=function(e,t){if(a.checkTimer-=t,!(a.checkTimer>0)){var n=a.options,i=n.checkInterval,r=n.onlyUpdateWhenSwitchScene;a.checkTimer+=i,a.fpsHistory.push(a.game.loop.actualFps),!1===r&&a.fpsHistory.length>=5&&a.checkFps()}},a.game=t,a.options=i,a.performance=n,a}(0,s.Z)(t,e);var n=t.prototype;return n.checkFps=function(){if(0!==this.fpsHistory.length){var e=this.options.autoUpgradeQuality,t=!1;this.isLowFps()?t=this.performance.downgradeGraphicsQuality():e&&this.isHighFps()&&(t=this.performance.upgradeGraphicsQuality()),t&&(this.fpsHistory=[])}},n.getFpsMedian=function(){return Phaser.Math.Median(this.fpsHistory)},n.isLowFps=function(){return this.getFpsMedian()<this.options.fpsThreshold},n.isHighFps=function(){return this.getFpsMedian()>1.2*this.options.fpsThreshold},t}(Phaser.Events.EventEmitter),oe=se,ce=["pixelRatio","minQuality","maxQuality","qualityAdjustStep","trackingSceneKeys"],ue=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).fpsTracker=void 0,n.pixelRatio=void 0,n.minQuality=void 0,n.maxQuality=void 0,n.qualityAdjustStep=void 0,n.trackingSceneKeys=[],n.trackingScene=function(e){var t;if(E()(t=n.trackingSceneKeys).call(t,e)){var i=n.game.scene.getScene(e);i.events.once(Phaser.Scenes.Events.UPDATE,n.fpsTracker.start),i.events.once(Phaser.Scenes.Events.SLEEP,n.fpsTracker.stop)}},n}(0,s.Z)(t,e);var n=t.prototype;return n.configure=function(e){var t=e.pixelRatio,n=e.minQuality,a=e.maxQuality,r=e.qualityAdjustStep,s=e.trackingSceneKeys,o=(0,i.Z)(e,ce);this.pixelRatio=t,this.minQuality=n,this.maxQuality=a,this.qualityAdjustStep=r,this.trackingSceneKeys=s,this.fpsTracker=new oe(this.game,this,o)},n.active=function(){this.game.events.on(Phaser.Scenes.Events.WAKE,this.trackingScene),this.game.events.on(Phaser.Scenes.Events.START,this.trackingScene)},n.downgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e<=this.minQuality)return!1;var t=+(e-this.qualityAdjustStep).toFixed(2);return!(t<this.minQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\udcab Graphics quality was downgraded! ("+e+" -> "+t+")"),!0)},n.upgradeGraphicsQuality=function(){var e=this.pixelRatio;if(e>=this.maxQuality)return!1;var t=+(e+this.qualityAdjustStep).toFixed(2);return!(t>this.maxQuality)&&(this.pixelRatio=t,this.game.world.resize(this.pixelRatio),console.warn("\ud83d\ude80 Graphics quality was upgraded! ("+e+" -> "+t+")"),!0)},t}(Phaser.Plugins.BasePlugin),le=ue,he=n(153),de=n.n(he),fe=n(142),pe=n(103),ge=n.n(pe),me=n(33),ve=n.n(me),ye=n(473),Ee=n(144),Se=GameCore.Configs.ApiHost,Te=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ee.v)("players?platform=ms-games",t,{},Se,10);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ee.v)("players/"+t+"/user-guide-displays/inc",{},{},Se);case 2:return n=e.sent,e.abrupt("return",(null==n?void 0:n.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce="PLAYER_RECEIVED",be="PLAYER_DATA_UPDATE",Ie="PLAYER_SCORE_UPDATE",we="PLAYER_PROFILE_UPDATE",xe="PLAYER_SETTING_UPDATE",_e="PLAYER_CONNECTED_PLAYERS_UPDATE",Oe=n(219),Pe=function(e){function t(t,n){var i;return(i=e.call(this,t)||this).payload=void 0,i.name="PlayerDataNameNotSupport",i.message=t||"The name of player data is not supported",i.payload=n||{},i}return(0,s.Z)(t,e),t}((0,x.Z)(Error)),ke=n(67),Le=n.n(ke),De="player",Re=(0,j.P1)([function(e){return e[De]}],(function(e){return e})),Be=(0,j.P1)([Re],(function(e){return e.playerId})),Ne=(0,j.P1)([Re],(function(e){return e.ASID})),Me=(0,j.P1)([function(e){return e[De].data}],(function(e){return e})),Ge=(0,j.P1)([function(e){return e[De].connectedPlayers}],(function(e){return e})),Ue=(0,j.P1)([Ge,function(e,t){return t.limit},function(e,t){return t.offset}],(function(e,t,n){if("number"!==typeof t)return[];if("number"!==typeof n)return[];var i=ne()(e);return Le()(i).call(i,n,t+n)||[]})),Fe=(0,j.P1)([Me],(function(e){return e.score})),Ze=(0,j.P1)([Me],(function(e){return e.customFields})),He=(0,j.P1)([Ze],(function(e){return void 0===(null==e?void 0:e.tournaments)?[]:e.tournaments})),We=GameCore.Configs,ze=We.AppId,Ye=We.Tutorial,Ve=function(e,t){return function(n){var i=e.playerId,a=e.name,r=e.photo,s=e.locale;n({type:Ce,payload:{playerId:i,name:a,photo:r,locale:s,data:t||{}}})}},Ke=function(e){return{type:_e,payload:{connectedPlayers:e}}},je=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(i,a){var r,s,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i({type:xe,payload:{name:e,value:t}});case 3:r=a(),s=Me(r),o=new ye.Z({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,z.tO)(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},Je=function(e,t){return function(){var n=(0,r.Z)(l().mark((function n(i,a){var r,s,o,c,u;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s={customFields:(r={},r[e]=t,r)},n.next=4,i(qe(s));case 4:o=a(),c=Me(o),u=new ye.Z({}).convertToFacebookData(c),FBInstant.player.setDataAsync(u),n.next=15;break;case 10:if(n.prev=10,n.t0=n.catch(0),!(n.t0 instanceof Pe)){n.next=14;break}return n.abrupt("return");case 14:(0,z.tO)(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},Xe=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,i){var a,r,s,o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={customFields:e},t.next=4,n(qe(a));case 4:r=i(),s=Me(r),o=new ye.Z({}).convertToFacebookData(s),FBInstant.player.setDataAsync(o),t.next=16;break;case 10:if(t.prev=10,t.t0=t.catch(0),console.log("\ud83e\udd16 ? error",t.t0),!(t.t0 instanceof Pe)){t.next=15;break}return t.abrupt("return");case 15:(0,z.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},qe=function(e){return{type:be,payload:{data:e}}},Qe=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,i){var a,r,s;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:Ie,payload:{score:e}});case 3:Te({score:e}),a=i(),r=Me(a),s=new ye.Z({}).convertToFacebookData(r),FBInstant.player.setDataAsync(s),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),(0,z.tO)(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},$e=function(e){function t(){return e.apply(this,arguments)||this}(0,s.Z)(t,e);var n=t.prototype;return n.incUserGuideDisplays=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ye.ForceUseTutorial){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(qe({userGuideDisplays:1}));case 5:i=n(),a=Be(i),r=Me(i),s=new ye.Z({}).convertToFacebookData(r),FBInstant.player.setDataAsync(s),Ae(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,z.tO)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.receiveData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Ve(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.updateData=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,a,r,s,o,c,u,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=n(),a=Re(i),r=a.playerId,s=a.name,o=a.photo,c=a.locale,e.next=6,FBInstant.player.getASIDAsync();case 6:return u=e.sent,h={appId:ze,playerId:r,name:s,photo:o,locale:c,ASID:u},e.next=10,t({type:we,payload:{profile:h}});case 10:return e.next=12,Te(h);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,z.tO)(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setBestScore=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Qe(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setSetting=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(je(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setCustomData=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.game.storage,e.next=3,i.dispatch(Je(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setMultiCustomData=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Xe(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.requestConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.game.storage,e.next=3,t.dispatch(function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,FBInstant.player.getConnectedPlayersAsync();case 3:if(i=e.sent,a=function(e){return!!e},r=ge()(n=ve()(i).call(i,(function(e){var t=e.getID(),n=e.getName(),i=e.getPhoto();return t&&n&&i?new Oe.Z(t,n,i).toObject():null}))).call(n,a),!(r.length<1)){e.next=8;break}return e.abrupt("return");case 8:t(Ke(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,z.tO)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.updateConnectedPlayers=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(Ke(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.joinTournament=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.getTournaments(),!de()(i).call(i,(function(e){return e.leaderboardId===t.leaderboardId}))){e.next=3;break}return e.abrupt("return");case 3:return a=v()(n=[]).call(n,i,[t]),e.next=6,this.setMultiCustomData({tournaments:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlayer=function(){return Re(this.state)},n.getPlayerId=function(){return this.getPlayer().playerId},n.getPlayerASID=function(){return Ne(this.state)},n.getPlayerData=function(){return this.getPlayer().data},n.getPlayerSetting=function(e){var t=this.getPlayerSettings();return"string"!==typeof e?null:GameCore.Utils.Object.hasOwn(t,e)?t[e]:GameCore.Utils.Object.hasOwn(fe.Z,e)?fe.Z[e]:null},n.getPlayerSettings=function(){return this.getPlayerData().settings},n.getPlayerIsNew=function(){return this.getPlayer().isUserNew},n.getBestScore=function(){return Fe(this.state)},n.getCustomData=function(e){var t=Ze(this.state);return GameCore.Utils.Valid.isObject(t)&&GameCore.Utils.Object.hasOwn(t,e)?t[e]:null},n.getConnectedPlayers=function(){return Ge(this.state)},n.getConnectedPlayerIds=function(e,t){return Ue(this.state,{limit:e,offset:t})},n.getTournaments=function(){return He(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),et=$e,tt=n(60),nt=n.n(tt),it=GameCore.Configs.ApiHost,at=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GameCore.Utils.String.params(t),e.next=3,(0,Ee.U)("players?"+n,{},it);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||[]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt="PROFILES_DATA_UPDATE",st="profile",ot=(0,j.P1)([function(e){return e[st].data}],(function(e){return e})),ct=(0,j.P1)([function(e){return e[st].profileIds}],(function(e){return e})),ut=GameCore.Configs,lt=ut.Tournament,ht=ut.LeadersBoard,dt=function(e){return function(){var t=(0,r.Z)(l().mark((function t(n,i){var a,r,s,o,c,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=i(),r=ct(a),!((s=GameCore.Utils.Array.difference(e,r)).length<1)){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,at({playerIds:s});case 8:o=t.sent,lt.UseMock&&ht.UseMock&&(o=ve()(c=nt()(u=new Array(s.length)).call(u,null)).call(c,(function(e,t){var n=t+1;return{playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png",rank:n,score:Math.floor(17*Math.random()*100/n)}})),console.log("tournament mock data: ",o)),n({type:rt,payload:{data:o}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),(0,z.tO)(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()},ft=function(e){function t(){return e.apply(this,arguments)||this}(0,s.Z)(t,e);var n=t.prototype;return n.requestProfiles=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.game.storage,e.next=3,n.dispatch(dt(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProfiles=function(){return ot(this.state)},(0,W.Z)(t,[{key:"state",get:function(){return this.game.storage.getState()}}]),t}(Phaser.Plugins.BasePlugin),pt=ft,gt=n(48),mt=n.n(gt),vt=n(83),yt=n.n(vt),Et=n(241),St=n.n(Et),Tt=["player","match"],At="null",Ct=GameCore.Utils,bt=Ct.Valid,It=Ct.Object,wt=GameCore.Configs.Rollbar,xt=wt.UseMockup,_t=wt.FilterError,Ot=function(e){function t(){for(var t,n,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=e.call.apply(e,v()(t=[this]).call(t,r))||this).enable=void 0,n.rollbar=void 0,n.events=[],n.beforeSend=function(e,t,i){xt&&n.showPopupError(i)},n.checkIgnore=function(e,t,i){try{return!!n.isErrorIgnore(t)&&(console.warn(t),!0)}catch(a){return!1}},n.showPopupError=function(e){var t,i,a,r=null==e||null==(t=e.body)||null==(t=t.trace)?void 0:t.exception;r&&n.events.push(r);var s=(null==e||null==(i=e.body)||null==(i=i.trace)?void 0:i.frames)||[];(a=n.events).push.apply(a,s);var o=document.getElementById("popup-error");o||((o=document.createElement("div")).id="popup-error",document.body.appendChild(o)),o.innerHTML='<div style="color: #fff; display: flex; flex-flow: column; align-items: center; ">\n      <pre id="json" style="overflow: auto; background-color: rgb(195 112 97 / 80%); padding: 10px; max-height: 80vh; max-width: 90vw; border: 5px solid #545454;">'+mt()(n.events,null,2)+'</pre>\n      <button id="close" style="cursor: pointer; padding: 10px 20px; border-radius: 100px;">Close</button>\n      </div>',o.style="top: 0px; z-index: 10000; width: 100vw; max-height: 100vh; position: absolute; display: flex; align-items: center; justify-content: center;";var c=document.getElementById("close");c&&(c.onclick=n.closePopup)},n.closePopup=function(){n.events=[{}];var e=document.getElementById("popup-error");null==e||e.remove()},n.isNoneErrorEvent=function(e){if(!e||0===e.length)return!1;if(!e[0].message)return!1;return"Non-Error promise rejection captured with keys: code, message"===e[0].message},n.isErrorIgnore=function(e){if(!e||0===e.length)return!1;var t=!1,i=e[0];return i instanceof Object&&(t=n.isIgnoreByCode(i)||n.isIgnoreByMessage(i)),t},n.isIgnoreByCode=function(e){if(It.hasOwn(e,"code")){var t=e.code,n=_t.Codes,i=n.accepted,a=n.ignored;if("string"===typeof t){if(yt()(i).call(i,t)>=0)return!1;if(yt()(a).call(a,t)>=0)return!0}}if(It.hasOwn(e,"name")){var r=e.name,s=_t.Codes,o=s.accepted,c=s.ignored;if("string"===typeof r){if(yt()(o).call(o,r)>=0)return!1;if(yt()(c).call(c,r)>=0)return!0}}return!1},n.isIgnoreByMessage=function(e){if(It.hasOwn(e,"message")){var t=e.message,n=_t.Messages,i=n.accepted,a=n.ignored;if("string"===typeof t){if(yt()(i).call(i,t)>=0)return!1;if(yt()(a).call(a,t)>=0)return!0}}return!1},n.addExtraState=function(){try{if(!It.hasOwn(window,"game"))return;if(!It.hasOwn(window.game,"storage"))return;if(!It.hasOwn(window.game.storage,"getState"))return;var e=(0,window.game.storage.getState)()||{},t=e.player,a=e.match,r=(0,i.Z)(e,Tt);n.rollbar.configure({payload:{player:t,match:a,other:r}})}catch(s){console.warn("%c addExtraState: ","font-size:12px;background-color: #42b983;color:#fff;",s)}},n}(0,s.Z)(t,e);var n=t.prototype;return n.setup=function(){this.rollbar=new(St())({accessToken:At,checkIgnore:this.checkIgnore,onSendCallback:this.beforeSend,captureUncaught:!0,scrubTelemetryInputs:!0,captureUnhandledRejections:!0,autoInstrument:{dom:!1,navigation:!1},payload:{environment:"production",client:{javascript:{code_version:"0"}},server:{root:"webpack:///./",branch:"master"}}}),this.enable=!0,this.sendTestException()},n.configure=function(e){this.rollbar&&this.rollbar.configure(e)},n.sendTestException=function(){if(!bt.isDebugger()){var e=FBInstant.player.getID();e&&this.rollbar.debug(new Error("Test rollbar"),{playerID:e})}},n.sendException=function(e,t){e&&(this.enable?this.rollbar&&(this.addExtraState(),this.rollbar.error(e,t)):console.error(e))},t}(Phaser.Plugins.BasePlugin),Pt=Ot,kt=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.emit=function(t,n){return e.prototype.emit.call(this,t,n)},t}(Phaser.Events.EventEmitter),Lt=kt,Dt=n(29),Rt=n(472),Bt=function(e){function t(t,n,i,a){var r;(r=e.call(this,t)||this).zone=void 0,r.background=void 0,r.setName(n),r.setVisible(!1);var s=r.scene.world.getWorldSize(),o=s.width,c=s.height;return r.setSize(i||o,a||c),r.addZone(),r.addBackground(),r.registerEvents(),r}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(e){GameCore.Utils.Valid.isObject(e)&&(this.setDataEnabled(),this.setData(e)),this.setBlockInputOutsideEnabled(!0),this.scene.screen.bringToTop(this.name),this.visible||(this.setVisible(!0),this.logPageviewOnOpen(),this.logEventOpen(),this.handleResize())},n.close=function(){this.visible&&(this.setVisible(!1),this.logPageviewOnClose())},n.incY=function(e){this.y+=e,this.background.y-=e},n.incX=function(e){this.x+=e,this.background.x-=e},n.incScale=function(e){this.scale+=e,this.background.scale-=e^e*(100/e)},n.setBlockInputOutsideEnabled=function(e){this.scene.input.setTopOnly(e)},n.addZone=function(){this.zone=this.scene.add.zone(0,0,this.width,this.height),this.zone.setInteractive({}),this.add(this.zone)},n.addBackground=function(){var e="screen-background";if(!this.scene.textures.exists(e)){var t=this.width+2,n=this.height+2,i=this.scene.add.graphics();i.fillStyle(859421,1),i.fillRect(0,0,t,n),i.generateTexture(e,t,n),i.destroy()}this.background=this.scene.add.image(0,0,e),this.add(this.background)},n.registerEvents=function(){this.scene.world.events.on(Rt.Z.RESIZE,this.handleResize,this)},n.handleResize=function(){var e=this.scene.world.getWorldSize(),t=e.width,n=e.height;this.setSize(t,n).setPosition(t/2,n/2),this.zone.setSize(this.width,this.height),this.background.setDisplaySize(this.width,this.height)},n.logPageviewOnOpen=function(){this.scene.analytics.pageview(this.name)},n.logPageviewOnClose=function(){this.scene.analytics.pageview(this.scene.scene.key)},n.logEventOpen=function(){this.scene.analytics.event(Dt._.SCREEN_OPEN,{screen_name:this.getScreenName()})},n.getScreenName=function(){return GameCore.Utils.String.toUpperCamelCase(this.name.toLowerCase())},t}(Phaser.GameObjects.Container),Nt=Bt,Mt=n(474);GameCore.Screen=Nt,GameCore.Screens={Events:Mt.Z};var Gt=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).events=void 0,n}(0,s.Z)(t,e);var n=t.prototype;return n.boot=function(){this.events=new Lt,this.registryScreenFactory()},n.get=function(e){var t=this.scene.children.getByName(e);return null===t?null:t},n.add=function(e,t,n,i){var a=this.get(e);return a||(a=this.scene.add.screen(e,t,n,i),this.events.emit(GameCore.Screens.Events.CREATED,a),a)},n.open=function(e,t){var n=this.get(e);return!!n&&(n.open(t),n.emit(GameCore.Screens.Events.OPEN,n),this.events.emit(GameCore.Screens.Events.OPEN,n),console.log("Screen open",e,t),!0)},n.close=function(e){var t=this.get(e);return!!t&&(t.close(),t.emit(GameCore.Screens.Events.CLOSE,t),this.events.emit(GameCore.Screens.Events.CLOSE,t),console.log("Screen close",e),!0)},n.bringToTop=function(e){var t=this.scene.children.getByName(e);t&&this.scene.children.bringToTop(t)},n.registryScreenFactory=function(){Phaser.GameObjects.GameObjectFactory.register("screen",this.createScreen)},n.createScreen=function(e,t,n,i){var a=new t(this.scene,e,n,i);return Phaser.Display.Align.In.Center(a,this.scene.gameZone),this.existing(a),a},t}(Phaser.Plugins.ScenePlugin),Ut=Gt,Ft=n(426),Zt=n.n(Ft),Ht=n(465),Wt=n(221),zt=n(466),Yt={currentSceneKey:"",prevSceneKey:""};(0,zt.pV)();var Vt,Kt,jt,Jt,Xt,qt,Qt,$t={processed:!1,contextId:"",contextType:"SOLO",entryPointData:{},currentGameMode:""},en=$t,tn={data:{}},nn={token:"",isRequesting:!1},an=((Vt={})[J]=function(e,t){return void 0===e&&(e=nn),(0,zt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.token;switch(t.type){case Y:e.isRequesting=!0;break;case V:e.token=i,e.isRequesting=!1}}}))},Vt),rn=n(116),sn={ASID:"",playerId:"",name:"",photo:"",locale:"",connectedPlayers:{},data:{score:0,settings:fe.Z,userGuideDisplays:0,customFields:{coins:0,gameStats:{},tournaments:[],currentJourneyLevel:1,newUserEasyGameCount:-1}},isUserNew:!0},on=((Kt={})[De]=function(e,t){return void 0===e&&(e=sn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.name,r=i.value,s=i.data,o=void 0===s?{}:s,c=i.score,u=i.connectedPlayers,l=void 0===u?[]:u,h=i.profile;switch(t.type){case Ce:var d=i.playerId,f=i.name,p=i.photo,g=i.locale,m=i.data;if(n.playerId=d,n.name=f,n.photo=p,n.locale=g,GameCore.Utils.Valid.isObject(m)){var v=m;n.data=(0,rn.TS)(e.data,v)}m.userGuideDisplays>0&&(n.isUserNew=!1);break;case we:var y=h.playerId,E=h.name,S=h.photo,T=h.locale,A=h.ASID;n.ASID=A,n.playerId=y,n.name=E,n.photo=S,n.locale=T;break;case Ie:n.data.score=c;break;case xe:if(!GameCore.Utils.Object.hasOwn(n.data.settings,a))break;n.data.settings[a]=r;break;case be:n.data=(0,rn.TS)(e.data,o),o.userGuideDisplays>0&&(n.isUserNew=!1);break;case _e:if(l.length<=0)break;var C=GameCore.Utils.Object.keyBy(l,"playerId");n.connectedPlayers=(0,rn.TS)(e.connectedPlayers,C)}}}))},Kt),cn=n(658),un=n.n(cn),ln={data:{},profileIds:[]},hn=((jt={})[st]=function(e,t){return void 0===e&&(e=ln),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.data,s=void 0===r?[]:r;if(t.type===rt){var o,c,u=GameCore.Utils.Object.keyBy(s,"playerId"),l=ne()(u);n.data=(0,rn.TS)((0,a.Z)({},e.data),u),n.profileIds=v()(o=[]).call(o,new(un())(v()(c=[]).call(c,e.profileIds,l)))}}}))},jt),dn=n(467),fn=n(143),pn=n(468),gn={mode:"",status:pn.ys,rescued:0,startAt:0,finishAt:0},mn={single:{_id:"",data:{fen:""},playerId:"",status:pn.ys},group:{status:pn.ys,opponentInfo:{playerId:"",name:"",photo:""}},challenge:{_id:"",status:pn.ys,whitePlayerId:"",blackPlayerId:"",opponentInfo:{playerId:"",name:"",photo:""}},online:{_id:"",status:pn.ys,players:{}},updateAt:0,isRequesting:!1},vn={current:{updateAt:0},data:{updateAt:0},isRequesting:!1},yn=((Jt={})[dn.L]=(0,Ht.UY)({gameplay:function(e,t){return void 0===e&&(e=gn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.mode,r=i.status;switch(t.type){case fn.Er:n.status=pn.ys,n.mode=gn.mode,n.rescued=gn.rescued,n.startAt=gn.startAt,n.finishAt=gn.finishAt,n.opponentInfo=gn.opponentInfo;break;case fn.tk:n.mode=a,n.status=pn.kR,n.rescued=gn.rescued,n.startAt=Date.now();break;case fn.qm:n.mode="string"===typeof a?a:e.mode,n.status=r||e.status;break;case fn.Mg:n.status=pn.o3,n.finishAt=Date.now();break;case fn.XW:n.rescued+=1}}}))},match:function(e,t){return void 0===e&&(e=mn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.match,s=i.opponentInfo,o=i.players;switch(t.type){case fn.xm:case fn.AJ:case fn.Qi:case fn.DI:case fn.ar:n.isRequesting=!0;break;case fn.T7:n.single=(0,a.Z)({},e.single,r),n.updateAt=Date.now();break;case fn.Uo:n.isRequesting=!1,n.single=r||mn.single;break;case fn.zu:n.isRequesting=!1,n.single=mn.single;break;case fn.tU:case fn.f3:n.isRequesting=!0,n.challenge.opponentInfo=s;break;case fn.AO:n.isRequesting=!1,n.challenge=(0,a.Z)({},r||mn.challenge),n.challenge.opponentInfo=e.challenge.opponentInfo;break;case fn.Un:n.isRequesting=!1,n.challenge=mn.challenge;break;case fn.Vj:n.group.status=pn.kR,s&&(n.group.opponentInfo=s);break;case fn.Sl:n.group.status=pn.o3;break;case fn.UK:n.online.status=mn.online.status,n.online.players=mn.online.players;break;case fn.li:n.online.status=pn.kR,n.online.players=o;break;case fn.NW:n.online.status=pn.o3}}}))},stats:function(e,t){return void 0===e&&(e=vn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.playerId,s=i.stats,o=i.match,c=i.current,u=i.players,l=i.leaders;switch(t.type){case fn.VY:delete n.data[r],n.current=vn.current;break;case fn.go:n.data=vn.data,n.isRequesting=!0;break;case fn.PM:n.data=s,n.isRequesting=!1;break;case fn.HV:n.data[r]=s;break;case fn.DP:n.current=(0,rn.TS)((0,a.Z)({},e.current),s);break;case fn.li:ne()(u).forEach((function(e){n.data[e]={score:0}}));break;case fn.Ly:l.forEach((function(e){var t=e.playerId,i=e.score,a=e.rank;n.data[t]={score:i,rank:a}}));break;case fn.AO:var h=o||{},d=h.blackPlayerId,f=h.blackPlayerScore,p=h.whitePlayerId,g=h.whitePlayerScore,m=h.whitePlayerLevel,v=h.blackPlayerLevel;if(!d||!p)break;c&&(n.current=c),n.data[d]={score:f,level:v},n.data[p]={score:g,level:m}}}}))}}),Jt),En=n(469),Sn=n(470),Tn={active:!1,tournamentId:null,leaderboardId:null,bestSessionScore:0,isRequesting:!1},An=((Xt={})[En.L]=function(e,t){return void 0===e&&(e=Tn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.score,r=void 0===a?0:a,s=i.tournamentId,o=i.leaderboardId;switch(t.type){case Sn.Cg:n.active=!0,n.tournamentId=s,n.leaderboardId=o;break;case Sn.DK:n.isRequesting=!0;break;case Sn.ge:n.isRequesting=!1,r>e.bestSessionScore&&(n.bestSessionScore=r)}}}))},Xt),Cn=n(237),bn=n.n(Cn),In=n(152),wn=n.n(In),xn={leaderboardId:"",type:"",limit:0,offset:0,leaders:{},isRequesting:!1},_n=((qt={}).leaderboards=function(e,t){return void 0===e&&(e=xn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var r=i.leaderboardId,s=i.type,o=i.limit,c=i.offset,u=i.leaders;switch(t.type){case"LEADERBOARD_DATA_REQUEST":e.type!==s&&0===c&&(n.leaders=xn.leaders),n.isRequesting=!0,n.leaderboardId=r,n.type=s,n.limit=o,n.offset=c;break;case"LEADERBOARD_DATA_UPDATE":if(n.isRequesting=!1,e.type!==s)break;var l=GameCore.Utils.Json.clone((0,a.Z)({},e.leaders,u)),h=bn()(l),d=ge()(h).call(h,(function(e){return!!e.name&&!!e.photo}));wn()(d).call(d,(function(e,t){return+t.score-+e.score})),d.forEach((function(t,i){t.rank=i+1,e.leaders[t.playerId]||(n.leaders[t.playerId]=t)}));break;case"LEADERBOARD_DATA_CLEAR":n.isRequesting=!1,n.type=xn.type,n.limit=xn.limit,n.offset=xn.offset,n.leaders=xn.leaders,n.leaderboardId=xn.leaderboardId}}}))},qt),On={mission:null,missions:null,isRequesting:!1},Pn=((Qt={}).missions=function(e,t){return void 0===e&&(e=On),(0,zt.ZP)(e,(function(n){var i,a,r=t.payload;if(r){var s=r.name,o=r.type,c=r.value,u=r.missions;switch(t.type){case"MISSIONS_DATA_REQUEST":n.isRequesting=!0;break;case"MISSIONS_DATA_RECEIVE":if(n.isRequesting=!1,u.length<1)return;n.missions={},u.forEach((function(e){n.missions[e.name]=e}));break;case"MISSION_START":if(null===e.missions)break;var l=e.missions[s];n.mission={name:s,process:{},require:l.require,reward:l.reward},ne()(l.require).forEach((function(e){n.mission.process[e]=0}));break;case"MISSION_UPDATE":if((null==(i=e.mission)?void 0:i.name)!==s)break;n.mission.process[o]+=c;break;case"MISSION_COMPLETED":if((null==(a=e.mission)?void 0:a.name)!==s)break;n.mission=null}}}))},Qt),kn=(0,Ht.UY)((0,a.Z)({scene:function(e,t){return void 0===e&&(e=Yt),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.sceneKey;if(t.type===Wt.DW)n.currentSceneKey=a,n.prevSceneKey=e.currentSceneKey}}))},context:function(e,t){return void 0===e&&(e=$t),(0,zt.ZP)(e,(function(e){var n=t.payload;if(n){var i=n.gameMode,a=n.contextId,r=n.contextType,s=n.entryPointData;switch(t.type){case Wt.kL:e.contextId=a,e.contextType=r,e.entryPointData=s;break;case Wt.fJ:e.contextId=a,e.contextType=r,e.processed=!0;break;case Wt.EH:e.currentGameMode=i}}}))},messages:function(e,t){return void 0===e&&(e=tn),(0,zt.ZP)(e,(function(n){var i=t.payload;if(i){var a=i.opponentId;if("string"===typeof a)switch(t.type){case Wt.qj:e.data[a]?n.data[a].sent=!0:n.data[a]={sent:!0};break;case Wt.rh:e.data[a]?n.data[a].sent=!1:n.data[a]={sent:!1}}}}))}},an,on,hn,yn,An,_n,Pn)),Ln=n(673),Dn=function(e){return(0,Ln.xC)({reducer:kn,preloadedState:e,devTools:!0})},Rn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).store=void 0,n.initiator=void 0,n.dispatch=function(e){return n.store.dispatch(e)},n.getState=function(){return n.store.getState()},n.subscribe=function(e){return n.store.subscribe(e)},n.watch=function(e,t){var i=Zt()((function(){var t=n.getState();return e(t)}));return n.subscribe(i((function(e){t(e)})))},n}(0,s.Z)(t,e);var n=t.prototype;return n.init=function(){this.store=Dn({})},n.setInitiator=function(e){this.initiator=e},n.syncStore=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.initiator.initContext(),e.next=3,this.initiator.initPlayer();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(Phaser.Plugins.BasePlugin),Bn=Rn,Nn=n(662),Mn=n.n(Nn),Gn=function(e){function t(t,n){var i;return(i=e.call(this,t,{type:"webfont",key:n.type})||this).payload=void 0,i.payload=n,i}(0,s.Z)(t,e);var n=t.prototype;return n.load=function(){var e;switch(this.payload.type){case"google":e=this.getGoogleFontConfig(this.payload);break;case"local":e=this.getLocalFontConfig(this.payload)}Mn().load(e)},n.getGoogleFontConfig=function(e){var t=this,n=e.character,i=e.fontName,a=e.fontWeight;return{google:{families:[i+":"+(void 0===a?400:a)],text:n},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},n.getLocalFontConfig=function(e){var t=this,n=e.fontName,i=e.fontType,a=document.createElement("style");document.head.appendChild(a);var r=a.sheet;if(r){var s="";switch(i){case"opentype":case"woff":s=".woff";break;case"truetype":s=".ttf"}var o='@font-face { font-family: "'+n+'"; src: url("assets/fonts/'+n+s+'") format("'+i+'"); }';r.insertRule(o,0)}return{custom:{families:[n]},active:function(){t.loader.nextFile(t,!0)},timeout:15e3}},t}(Phaser.Loader.File),Un=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.addFont=function(e){var t=new Gn(this.scene.load,e);this.scene.load.addFile(t)},t}(Phaser.Plugins.ScenePlugin),Fn=Un,Zn=n(462),Hn=n(471),Wn=GameCore.Utils.Image.getImageScale(),zn={Background:{File:"./assets/images/"+Wn+"x/{}.jpg"},CardFaceAtlas:{Texture:"./assets/textures/"+Wn+"x/{}.png",JSON:"./assets/textures/"+Wn+"x/{}.json"}},Yn=zn.Background,Vn=zn.CardFaceAtlas,Kn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).events=void 0,n.device=void 0,n.backgroundIdx=void 0,n.cardFaceIdx=void 0,n.cardBackIdx=void 0,n}(0,s.Z)(t,e);var n=t.prototype;return n.init=function(t){e.prototype.init.call(this,t),this.events=new Phaser.Events.EventEmitter,this.device=GameCore.Utils.Device.isDesktop()?"desktop":"mobile"},n.getCurrentThemeResources=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx;return this.getThemeResources(t,n)},n.getThemeResources=function(e,t){var n="desktop"===this.device?Hn.Z.Desktop:Hn.Z.Mobile,i=n.Background[e]||n.Background[0],a=(0,Zn.Z)(Yn.File,[i]),r=n.CardFace[t]||n.CardFace[0];return{backgroundKey:i,backgroundFile:a,cardFaceKey:r,cardFaceTexture:(0,Zn.Z)(Vn.Texture,[r]),cardFaceJSON:(0,Zn.Z)(Vn.JSON,[r])}},n.getBackgroundConfigs=function(){var e,t="desktop"===this.device?Hn.Z.Desktop:Hn.Z.Mobile;return ve()(e=t.Background).call(e,(function(e){return{key:e,url:(0,Zn.Z)(Yn.File,[e])}}))},n.getCardStyleAtlasConfigs=function(){var e,t="desktop"===this.device?Hn.Z.Desktop:Hn.Z.Mobile;return ve()(e=t.CardFace).call(e,(function(e){return{key:e,textureURL:(0,Zn.Z)(Vn.Texture,[e]),atlasURL:(0,Zn.Z)(Vn.JSON,[e])}}))},n.getCurrentThemeConfig=function(){var e=this.backgroundIdx,t=this.cardFaceIdx,n=this.cardBackIdx;return"desktop"==this.device?{backgroundKey:Hn.Z.Desktop.Background[e],cardFaceKey:Hn.Z.Desktop.CardFace[t],cardBackFrame:Hn.Z.Desktop.CardBack[n]}:{backgroundKey:Hn.Z.Mobile.Background[e],cardFaceKey:Hn.Z.Mobile.CardFace[t],cardBackFrame:Hn.Z.Mobile.CardBack[n]}},n.getCurrentIdxConfig=function(){var e=this.game.player.getPlayerSettings();return{backgroundIdx:e.backgroundIdx,cardFaceIdx:e.cardFaceIdx,cardBackIdx:e.cardBackIdx}},n.getThemePreview=function(){return"desktop"===this.device?Hn.Z.Desktop:Hn.Z.Mobile},n.changeBackground=function(e){this.game.player.setSetting("backgroundIdx",e),this.backgroundIdx=e},n.changeCardFace=function(e){this.game.player.setSetting("cardFaceIdx",e),this.cardFaceIdx=e},n.changeCardBack=function(e){this.game.player.setSetting("cardBackIdx",e),this.cardBackIdx=e},n.updateCurrentCardStyle=function(){var e=this.getCurrentIdxConfig(),t=e.backgroundIdx,n=e.cardFaceIdx,i=e.cardBackIdx;this.setCurrentStyle(t,n,i)},n.setCurrentStyle=function(e,t,n){this.backgroundIdx=e,this.cardFaceIdx=t,this.cardBackIdx=n},t}(Phaser.Plugins.BasePlugin),jn=Kn,Jn=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).isVisible=!0,n.browserPrefixes=["moz","ms","o","","webkit"],n.visibleCallbacks=[],n.hiddenCallbacks=[],n.handleVisibilityChange=function(e){if("boolean"===typeof e)return e?n.onVisibleEvent():n.onHiddenEvent();var t=n.getBrowserPrefix(),i=n.getHiddenPropertyName(t);return document[i]?n.onHiddenEvent():n.onVisibleEvent()},n}(0,s.Z)(t,e);var n=t.prototype;return n.configure=function(){var e=this,t=this.getBrowserPrefix(),n=this.getVisibilityEvent(t);document.addEventListener(n,this.handleVisibilityChange,!1),document.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),document.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1),window.addEventListener("focus",(function(){e.handleVisibilityChange(!0)}),!1),window.addEventListener("blur",(function(){e.handleVisibilityChange(!1)}),!1)},n.addEventVisible=function(e){this.visibleCallbacks.push(e)},n.addEventHidden=function(e){this.hiddenCallbacks.push(e)},n.isGameVisible=function(){return this.isVisible},n.getHiddenPropertyName=function(e){return e?e+"Hidden":"hidden"},n.getVisibilityEvent=function(e){return(e||"")+"visibilitychange"},n.getBrowserPrefix=function(){for(var e=0;e<this.browserPrefixes.length;e++)if(this.getHiddenPropertyName(this.browserPrefixes[e])in document)return this.browserPrefixes[e];return""},n.onVisibleEvent=function(){this.isVisible||(this.isVisible=!0,this.visibleCallbacks.forEach((function(e){e()})))},n.onHiddenEvent=function(){this.isVisible&&(this.isVisible=!1,this.hiddenCallbacks.forEach((function(e){e()})))},t}(Phaser.Plugins.BasePlugin),Xn=Jn,qn=n(218),Qn=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.emit=function(t){return e.prototype.emit.call(this,t)},t}(Phaser.Events.EventEmitter),$n=Qn,ei=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).events=void 0,n.previousLayout=void 0,n.resizeEventData=void 0,n.portraitRatio=void 0,n.portraitWidth=void 0,n.portraitHeight=void 0,n.landscapeRatio=void 0,n.landscapeWidth=void 0,n.landscapeHeight=void 0,n.worldWidth=void 0,n.worldHeight=void 0,n.worldRatio=void 0,n.autoResize=void 0,n.disableLandscape=void 0,n.fullSizeOnLandscape=void 0,n.currentLayout=void 0,n.forcePixelRatio=void 0,n.handleResize=(0,qn.D)((function(){n.previousLayout=""+n.currentLayout,n.resize()}),300),n}(0,s.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.events=new $n;var t=e.autoResize,n=e.portraitRatio,i=e.portraitWidth,a=e.portraitHeight,r=e.landscapeWidth,s=e.landscapeHeight,o=e.landscapeRatio,c=e.disableLandscape,u=e.fullSizeOnLandscape;this.autoResize=t,this.disableLandscape=c,this.fullSizeOnLandscape=u,this.portraitRatio=n,this.portraitWidth=i,this.portraitHeight=a,this.landscapeRatio=o,this.landscapeWidth=r,this.landscapeHeight=s,this.initWorldSize(),this.addEventResize()},n.resize=function(e){var t=this;e&&e>0&&(this.forcePixelRatio=e);var n=this.getCanvasSizeFixedRatio(this.worldRatio),i=n.width,a=n.height;this.resizeCanvas(i,a),this.game.scene.scenes.forEach((function(e){var n=e.cameras.main;if(n){var i=t.getZoomRatio(),a=t.getWorldSize(),r=a.width,s=a.height;n.setZoom(i),n.centerOn(r/2,s/2)}}));var r={width:this.worldWidth,height:this.worldHeight,isLayoutChanged:!1,newLayout:this.currentLayout};this.previousLayout!==this.currentLayout&&(r.isLayoutChanged=!0,r.newLayout=this.currentLayout),this.resizeEventData=r,this.events.emit(Rt.Z.RESIZE,r)},n.getResizeEventData=function(){return this.resizeEventData},n.resizeCanvas=function(e,t){this.game.canvas.width=e,this.game.canvas.height=t,this.game.scale.resize(e,t)},n.getWorldSize=function(){return{width:this.worldWidth,height:this.worldHeight}},n.initWorldSize=function(){if(this.worldWidth=this.portraitWidth,this.worldHeight=this.portraitHeight,this.isScreenSmallerRatio(this.portraitRatio))this.worldHeight=this.worldWidth/this.getScreenRatio(),this.currentLayout="portrait";else if(!this.disableLandscape&&(this.worldWidth=this.landscapeWidth,this.worldHeight=this.landscapeHeight,this.currentLayout="landscape",this.fullSizeOnLandscape)){this.worldRatio=this.worldWidth/this.worldHeight,this.landscapeRatio=this.getScreenRatio();var e=this.getCanvasSizeFixedRatio(this.landscapeRatio),t=e.width,n=e.height,i=this.getZoomRatio();this.worldWidth=t/i,this.worldHeight=n/i}this.worldRatio=this.worldWidth/this.worldHeight,console.info("\ud83d\ude80 > this.worldRatio",this.worldRatio)},n.getZoomRatio=function(){var e=this.getWorldSize().width;return this.getCanvasSizeFixedRatio(this.worldRatio).width/e},n.getPixelRatio=function(){if(this.forcePixelRatio>0)return this.forcePixelRatio;if(GameCore.Utils.Device.isDesktop())return 2;var e=GameCore.Utils.Device.pixelRatio();return e>2&&(e=2),e},n.getPhysicPixels=function(e,t){return e*t},n.getCanvasSizeFixedRatio=function(e){var t=this.getPixelRatio(),n=this.getScreenWidth()*t,i=this.getScreenHeight()*t;return this.isScreenSmallerRatio(e)?i=n/e:n=i*e,{width:n,height:i}},n.getScreenRatio=function(){return this.getScreenWidth()/this.getScreenHeight()},n.getScreenHeight=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientHeight,a=n.clientHeight;return Math.max(a,i)||0},n.getScreenWidth=function(){var e=document,t=e.body,n=e.documentElement,i=t.clientWidth,a=n.clientWidth;return Math.max(a,i)||0},n.isScreenSmallerRatio=function(e){return this.getScreenRatio()<e},n.addEventResize=function(){this.autoResize&&window.addEventListener("resize",this.handleResize)},n.isLandscape=function(){return!this.disableLandscape&&this.worldRatio>this.portraitRatio},t}(Phaser.Plugins.BasePlugin),ti=ei,ni=function(){function e(e,t,n){this.contextId=void 0,this.contextType=void 0,this.entryPointData=void 0,this.contextId=e||en.contextId,this.contextType=t||en.contextType,this.entryPointData=n||en.entryPointData}return e.prototype.toObject=function(){return{contextId:this.contextId,contextType:this.contextType,entryPointData:this.entryPointData}},e}(),ii=n(482),ai=n(475),ri={score:"score",settings:"settings",gameData:"gameData",userGuideDisplays:"userGuideDisplays"},si=GameCore.Configs.SyncProfileFromAPI,oi=function(e){var t=this;this.game=void 0,this.initContext=function(){var e=window.GameSDK.context.getID(),n=window.GameSDK.context.getType(),i=window.GameSDK.getEntryPointData(),a=new ni(e,n,i).toObject(),r=a.contextId,s=a.contextType,o=a.entryPointData;t.game.storage.dispatch((0,ai.U1)(r,s,o))},this.initPlayer=(0,r.Z)(l().mark((function e(){var n,i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.game.player,i=t.getPlayerInfo(),a=bn()(ri),e.next=5,FBInstant.player.getDataAsync(a);case 5:return r=e.sent,console.info("\ud83d\ude80 > rawData",r),s=new ye.Z(r),console.info("\ud83d\ude80 > playerData",s),e.next=11,t.maintainDataStructure(s);case 11:return s=e.sent,!0===s.toObject().settings.music&&window.game.audio.playMusic(),e.next=16,n.receiveData(i,s.convertToPlayerData());case 16:case"end":return e.stop()}}),e)}))),this.maintainDataStructure=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,si){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,FBInstant.player.getDataAsync(["isSynced","customFields"]);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(n=e.t0,!0!==(n.isSynced||!1)){e.next=12;break}return e.abrupt("return",t);case 12:if(i=n.customFields||!1){e.next=15;break}return e.abrupt("return",t);case 15:return(r=t.convertToPlayerData()).customFields=i,s=new ye.Z({}).convertToFacebookData(r),e.next=20,FBInstant.player.setDataAsync((0,a.Z)({},s,{isSynced:!0}));case 20:return e.abrupt("return",new ye.Z(s));case 23:return e.prev=23,e.t1=e.catch(0),console.warn(e.t1),e.abrupt("return",t);case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),this.getPlayerInfo=function(){try{var e=window.GameSDK.player.getID(),t=window.GameSDK.player.getName(),n=window.GameSDK.player.getPhoto(),i=window.GameSDK.getLocale();if(!GameCore.Utils.Valid.isString(e))throw new ii.Z(null,{playerId:e});return GameCore.Utils.Valid.isString(t)||(t="You"),new Oe.Z(e,t,n,i).toObject()}catch(a){return new Oe.Z("123","You").toObject()}},this.game=e},ci=n(632),ui=n(79),li=function(e){function t(t){var n;return(n=e.call(this,{game:t,fragShader:"\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\nuniform float gray;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying vec4 outTint;\nvarying vec2 fragCoord;\n\nvoid main()\n{\n    vec4 texture;\n\n    %forloop%\n\n    gl_FragColor = texture;\n    gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126 * gl_FragColor.r + 0.7152 * gl_FragColor.g + 0.0722 * gl_FragColor.b), gray);\n}",uniforms:["uProjectionMatrix","uMainSampler","gray"]})||this).gray=void 0,n.gray=.8,n}return(0,s.Z)(t,e),t.prototype.onPreRender=function(){this.set1f("gray",this.gray)},t}(Phaser.Renderer.WebGL.Pipelines.MultiPipeline),hi=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).Text=void 0,n.Texture=void 0,n.currentLocale=void 0,n.supportedLanguages=void 0,n.data=void 0,n.options=void 0,n}(0,s.Z)(t,e);var n=t.prototype;return n.configure=function(e){this.applyOptions(e)},n.getCurrentLanguage=function(){return this.currentLocale},n.switchLanguage=function(e){void 0===e&&(e="en");var t=this.getCorrectLocale(e);this.currentLocale=t,this.Text=this.data[t].Text,this.Texture=this.data[t].Texture},n.getText=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Text[t];return this.replaceVariables(o,i)}return this.Text[e]},n.getTexture=function(e){if("object"==typeof e){var t=e.key,n=e.variables,i=void 0===n?[]:n,a=e.locale,r=void 0===a?this.currentLocale:a,s=this.getCorrectLocale(r),o=this.data[s].Texture[t];return this.replaceVariables(o,i)}return this.Texture[e]},n.isSupportLanguage=function(e){var t;return yt()(t=this.supportedLanguages).call(t,e)>=0},n.applyOptions=function(e){this.options=(0,a.Z)({},e);var t=e.data,n=e.locale,i=void 0===n?"en":n,r=e.upperCaseText,s=void 0!==r&&r;this.data=t,this.supportedLanguages=ne()(t);var o=this.getCorrectLocale(i);if(this.currentLocale=o,this.Text=t[o].Text,this.Texture=t[o].Texture,s)for(var c in this.Text)this.Text[c]=this.Text[c].toUpperCase()},n.makeText=function(e,t){var n=t.maxWidth,i=void 0===n?Phaser.Math.MAX_SAFE_INTEGER:n,a=t.maxHeight,r=void 0===a?Phaser.Math.MAX_SAFE_INTEGER:a,s=t.align,o=void 0===s?"center":s,c=t.drawMaxBoxDebug,u=void 0!==c&&c,l=e.make.bitmapText(t);for("center"===o?l.setCenterAlign():"left"===o?l.setLeftAlign():"right"===o&&l.setRightAlign();l.width>i||l.height>=r;)l.setFontSize(.95*l.fontSize),console.log({t:t.text,w:l.width,h:l.height});if(u&&GameCore.Utils.Valid.isDebugger()){var h=e.game.globalScene.add.graphics({lineStyle:{width:2,color:16711680}});h.setDepth(Phaser.Math.MAX_SAFE_INTEGER),e.game.globalScene.events.on(Phaser.Scenes.Events.UPDATE,(function(){if(h.clear(),l&&l.visible&&l.active){var e=l.getWorldPosition(),t=e.x,n=e.y;h.strokeRect(t-.5*i+(.5-l.originX)*l.width,n-.5*r+(.5-l.originY)*l.height,i,r)}}))}return l},n.setFontSize=function(e,t,n){for(var i=t||Phaser.Math.MAX_SAFE_INTEGER,a=n||Phaser.Math.MAX_SAFE_INTEGER;e.width>i||e.height>=a;)e.setFontSize(.95*e.fontSize)},n.replaceVariables=function(e,t){var n=t.length;if(0==n)return e;var i=0;return e.replace(/{.*}/,(function(){return String(t[Math.min(i++,n-1)])}))},n.getCorrectLocale=function(e){var t=e;return this.isSupportLanguage(e)||(t="en"),t},t}(Phaser.Plugins.BasePlugin),di={en:JSON.parse('{"Text":{"NEXT":"Next","DONE":"Done","SETTINGS":"Settings","INVITE_FRIENDS":"Invite Friends","SOUND_EFFECTS":"Sound Effects","VIBRATION":"Vibration","TAP_TO_MOVE":"Tap To Move","AUTO_HINTS":"Auto Hints","AUTO_COMPLETE":"Auto Complete","STATISTICS":"Statistics","WIN":"Win","LOSS":"Loss","MATCHES":"Matches","MATCH":"match","WINS_WITHOUT_UNDO":"Wins Without Undo","BEST_SCORE":"Best Score","AVERAGE_SCORE":"Average Score","BEST_WINNING_TIME":"Best Winning Time","AVERAGE_WINNING_TIME":"Average Winning Time","AWESOME":"Awesome!","MOVES":"Moves","TIME":"Time","BEST_TIME":"Best time","Out_Of_Moves":"Out Of Moves!","OUT_OF_MOVES":"OUT OF MOVES!","SCORE":"Score","NEW_GAME":"New Game","GAME":"Game","HINT":"Hint","UNDO":"Undo","NEW_SET_WILL_TAKE":"New settings will take effect\\nin the next deal!","OK":"OK","NEW_DEAL":"New Deal","REPLAY":"Replay","CANCEL":"Cancel","LOADING_ADS":"Loading ads...","LOADING":"Loading...","THEME":"Theme","BACKGROUND":"Background","CARD_FACE":"Card Face","CARD_BACK":"Card Back","HOW_TO_PLAY":"How To Play","WIN_SPIDER_BY":"Win Solitaire Spider Master by\\nforming runs, King to Ace.","UNWEAVE_CARDS_BY":"Unweave the cards by moving them\\nonto cards ranked one higher.","USE_STOCKPILE_TO":"Use the stockpile to add new cards\\nto the board.","STOCK_PILE":"Stock Pile","SUIT_SIZE":"Suit Size","RELAXED_SPIDER":"Relaxed Spider","ONE":"One","TWO":"Two","FOUR":"Four","EASY":"easy","MEDIUM":"medium","HARD":"hard","SUIT":"suit","DIFFICULTY":"difficulty","CLOSE":"Close","SHARE":"Share","GREAT_JOB_":"Great job! Rest up for a bit...","TOTAL_GAME":"Total game","LOSE":"Lose","SUITS":"suits","CONTINUE_GAME_WITH":"Continue a game with old settings","ON":"On","OFF":"Off","WELL_DONE":"WELL DONE!","MISSION":"Mission","BUILD_A_SUIT":"Build a complete suit of cards","BUILD_X_SUIT":"Build {X} complete suits of cards","EMPTY_A_COLUMN":"Empty a full column of cards","EMPTY_X_COLUMN":"Empty {X} columns of cards","BUILD_A_SUIT_WITHOUT":"Build a complete suit of cards without taking any additional cards","BUILD_X_SUIT_WITHOUT":"Build {X} complete suits of cards without taking any additional cards","WIN_THIS_DEAL":"Win this deal","WITHIN_X_MOVES":"within {X} moves","WITHIN_X_SECONDS":"within {X} seconds","JOURNEY":"Journey","JOURNEY_UPPER":"JOURNEY","LEVEL_COMPLETED":"Level completed","YOU_HAVE_REACHED":"You\'ve reached","BACK_TO_JOURNEY":"Back to Journey","LEVEL_FAILED":"Level failed","RETRY":"Retry","LEVEL":"Level","MOVE":"Move"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),ru:JSON.parse('{"Text":{"NEXT":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439","DONE":"\u0421\u0434\u0435\u043b\u0430\u043d\u043d\u044b\u0439","SETTINGS":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438","INVITE_FRIENDS":"\u041f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u044c \u0414\u0440\u0443\u0437\u0435\u0439","SOUND_EFFECTS":"\u0417\u0432\u0443\u043a","VIBRATION":"\u0412\u0438\u0431\u0440\u0430\u0446\u0438\u044f","TAP_TO_MOVE":"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0427\u0442\u043e\u0431\u044b \u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c","AUTO_HINTS":"\u0410\u0432\u0442\u043e\u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438","AUTO_COMPLETE":"\u0410\u0432\u0442\u043e\u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435","STATISTICS":"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430","WIN":"\u0412\u044b\u0438\u0433\u0440\u0430\u0439\u0442\u0435","LOSS":"\u041f\u0440\u043e\u0438\u0433\u0440\u044b\u0448","MATCHES":"\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f","MATCH":"\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435","WINS_WITHOUT_UNDO":"\u041f\u043e\u0431\u0435\u0434\u044b \u0411\u0435\u0437 \u041e\u0442\u043c\u0435\u043d\u044b","BEST_SCORE":"\u041b\u0443\u0447\u0448\u0438\u0439 \u0421\u0447\u0435\u0442","AVERAGE_SCORE":"\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0411\u0430\u043b\u043b","BEST_WINNING_TIME":"\u041b\u0443\u0447\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","AVERAGE_WINNING_TIME":"\u0421\u0440\u0435\u0434\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f","AWESOME":"\u041f\u043e\u0442\u0440\u044f\u0441\u0430\u044e\u0449\u0435!","MOVES":"\u0425\u043e\u0434\u044b","TIME":"\u0412\u0440\u0435\u043c\u044f","BEST_TIME":"\u041b\u0443\u0447\u0448\u0435\u0435 \u0412\u0440\u0435\u043c\u044f","Out_Of_Moves":"\u041d\u0435\u0442 \u0425\u043e\u0434\u043e\u0432!","OUT_OF_MOVES":"\u041d\u0415\u0422 \u0425\u041e\u0414\u041e\u0412!","SCORE":"\u0421\u0447\u0435\u0442","NEW_GAME":"\u041d\u043e\u0432\u0430\u044f \u0418\u0433\u0440\u0430","GAME":"\u0418\u0433\u0440\u0430","HINT":"\u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430","UNDO":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c","NEW_SET_WILL_TAKE":"\u041d\u043e\u0432\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u0441\u0442\u0443\u043f\u044f\u0442 \u0432 \u0441\u0438\u043b\u0443\\n\u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0440\u0430\u0437\u0434\u0430\u0447\u0435!","OK":"\u0414\u0430","NEW_DEAL":"\u041d\u043e\u0432\u0430\u044f \u0420\u0430\u0437\u0434\u0430\u0447\u0430","REPLAY":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c","CANCEL":"\u041e\u0442\u043c\u0435\u043d\u0430","LOADING_ADS":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u041e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0438\u0439...","LOADING":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...","THEME":"\u0422\u0435\u043c\u0430","BACKGROUND":"\u0424\u043e\u043d","CARD_FACE":"\u041b\u0438\u0446\u043e \u041a\u0430\u0440\u0442\u044b","CARD_BACK":"\u0420\u0443\u0431\u0430\u0448\u043a\u0430 \u041a\u0430\u0440\u0442\u044b","HOW_TO_PLAY":"\u041a\u0410\u041a \u0418\u0413\u0420\u0410\u0422\u042c","WIN_SPIDER_BY":"\u0421\u043b\u043e\u0436\u0438\u0442\u0435 Solitaire Spider Master,\\n\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044f \u0446\u0435\u043f\u043e\u0447\u043a\u0438 \u043e\u0442 \u043a\u043e\u0440\u043e\u043b\u044f \u0434\u043e \u0442\u0443\u0437\u0430.","UNWEAVE_CARDS_BY":"\u0420\u0430\u0437\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0440\u0442\u044b, \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u044f \u0438\u0445\\n\u043d\u0430 \u043a\u0430\u0440\u0442\u0443 \u0440\u0430\u043d\u0433\u043e\u043c \u043d\u0430 \u043e\u0434\u0438\u043d \u0432\u044b\u0448\u0435.","USE_STOCKPILE_TO":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0438\u043a\u0443\u043f, \u0447\u0442\u043e\u0431\u044b\\n\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u043a\u0430\u0440\u0442\u044b \u043d\u0430 \u0434\u043e\u0441\u043a\u0443.","STOCK_PILE":"\u041f\u0440\u0438\u043a\u0443\u043f","SUIT_SIZE":"\u0420\u0430\u0437\u043c\u0435\u0440 \u043c\u0430\u0441\u0442\u0438","RELAXED_SPIDER":"\u0420\u0430\u0441\u0441\u043b\u0430\u0431\u043b\u044f\u044e\u0449\u0438\u0439 \u041f\u0430\u0443\u043a","ONE":"\u041e\u0434\u043d\u0430","TWO":"\u0414\u0432\u0435","FOUR":"\u0427\u0435\u0442\u044b\u0440\u0435","EASY":"\u043b\u0435\u0433\u043a\u0430\u044f","MEDIUM":"\u0441\u0440\u0435\u0434\u043d\u044f\u044f","HARD":"\u0432\u044b\u0441\u043e\u043a\u0430\u044f","SUIT":"\u043c\u0430\u0441\u0442\u044c","DIFFICULTY":"\u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c","CLOSE":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c","SHARE":"\u041f\u041e\u0414\u0415\u041b\u0418\u0422\u042c\u0421\u042f","GREAT_JOB_":"\u041e\u0442\u043b\u0438\u0447\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430! \u041e\u0442\u0434\u043e\u0445\u043d\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e...","TOTAL_GAME":"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0438\u0433\u0440","LOSE":"\u041f\u043e\u0440\u0430\u0436\u0435\u043d\u0438\u0435","SUITS":"\u043c\u0430\u0441\u0442\u0438","CONTINUE_GAME_WITH":"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0438\u0433\u0440\u0443 \u0441\u043e\\n\u0441\u0442\u0430\u0440\u044b\u043c\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c\u0438","ON":"\u0412\u041a\u041b.","OFF":"\u0412\u042b\u041a\u041b.","WELL_DONE":"\u041e\u0422\u041b\u0418\u0427\u041d\u0410\u042f \u0420\u0410\u0411\u041e\u0422\u0410!","MISSION":"\u041c\u0438\u0441\u0441\u0438\u044f","BUILD_A_SUIT":"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u0443\u044e \u043c\u0430\u0441\u0442\u044c \u043a\u0430\u0440\u0442","BUILD_X_SUIT":"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 {X} \u043f\u043e\u043b\u043d\u044b\u0435 \u043c\u0430\u0441\u0442\u0438 \u043a\u0430\u0440\u0442","EMPTY_A_COLUMN":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u0443\u044e \u043a\u043e\u043b\u043e\u043d\u043a\u0443 \u043a\u0430\u0440\u0442","EMPTY_X_COLUMN":"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0435 {X} \u043a\u043e\u043b\u043e\u043d\u043a\u0438 \u043a\u0430\u0440\u0442","BUILD_A_SUIT_WITHOUT":"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u043d\u0443\u044e \u043c\u0430\u0441\u0442\u044c \u043a\u0430\u0440\u0442, \u043d\u0435 \u0431\u0435\u0440\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u0430\u0440\u0442","BUILD_X_SUIT_WITHOUT":"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 {X} \u043f\u043e\u043b\u043d\u044b\u0435 \u043c\u0430\u0441\u0442\u0438 \u043a\u0430\u0440\u0442, \u043d\u0435 \u0431\u0435\u0440\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u0430\u0440\u0442","WIN_THIS_DEAL":"\u0412\u044b\u0438\u0433\u0440\u0430\u0439\u0442\u0435 \u044d\u0442\u0443 \u0440\u0430\u0437\u0434\u0430\u0447\u0443","WITHIN_X_MOVES":"\u043a\u0430\u0440\u0442 \u0437\u0430 {X} \u0445\u043e\u0434\u043e\u0432","WITHIN_X_SECONDS":"\u043a\u0430\u0440\u0442 \u0437\u0430 {X} \u0441\u0435\u043a\u0443\u043d\u0434","JOURNEY":"\u0422\u0443\u0440","JOURNEY_UPPER":"\u0422\u0423\u0420","LEVEL_COMPLETED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041f\u0420\u041e\u0419\u0414\u0415\u041d","YOU_HAVE_REACHED":"\u0412\u044b \u0434\u043e\u0441\u0442\u0438\u0433\u043b\u0438","BACK_TO_JOURNEY":"\u041d\u0430\u0437\u0430\u0434 \u0432 \u043f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435","LEVEL_FAILED":"\u0423\u0420\u041e\u0412\u0415\u041d\u042c \u041f\u0420\u041e\u0412\u0410\u041b\u0415\u041d","RETRY":"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0421\u043d\u043e\u0432\u0430","LEVEL":"\u0423\u0440\u043e\u0432\u0435\u043d\u044c","MOVE":"\u0425\u043e\u0434\u044b"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),es:JSON.parse('{"Text":{"NEXT":"Siguiente","DONE":"Hecho","SETTINGS":"Configuraci\xf3n","INVITE_FRIENDS":"Invita a amigos","SOUND_EFFECTS":"Efectos de sonido","VIBRATION":"Vibraci\xf3n","TAP_TO_MOVE":"Toca para mover","AUTO_HINTS":"Sugerencias autom\xe1ticas","AUTO_COMPLETE":"Autocompletar","STATISTICS":"Estad\xedsticas","WIN":"Victoria","LOSS":"Derrota","MATCHES":"partidas","MATCH":"partido","WINS_WITHOUT_UNDO":"Victorias sin deshacer","BEST_SCORE":"Mejor puntuaci\xf3n","AVERAGE_SCORE":"Puntuaci\xf3n media","BEST_WINNING_TIME":"Mejor tiempo ganador","AVERAGE_WINNING_TIME":"Tiempo medio de victoria","AWESOME":"\xa1Alucinante!","MOVES":"Movimientos","TIME":"Tiempo","BEST_TIME":"Mejor tiempo","Out_Of_Moves":"\xa1No quedan movimientos!","OUT_OF_MOVES":"\xa1NO QUEDAN MOVIMIENTOS!","SCORE":"Puntuaci\xf3n","NEW_GAME":"Nueva partida","GAME":"Juego","HINT":"Pista","UNDO":"Deshacer","NEW_SET_WILL_TAKE":"Los nuevos ajustes entrar\xe1n en vigor\\nen el pr\xf3ximo reparto.","OK":"OK","NEW_DEAL":"Nuevo reparto","REPLAY":"Repetici\xf3n","CANCEL":"Cancelar","LOADING_ADS":"Cargando anuncios...","LOADING":"Cargando...","THEME":"Tema","BACKGROUND":"Fondo","CARD_FACE":"Cara de la carta","CARD_BACK":"Dorso de la carta","HOW_TO_PLAY":"C\xf3mo jugar","WIN_SPIDER_BY":"Gana Solitaire Spider Master\\nformando secuencias, de Rey a As.","UNWEAVE_CARDS_BY":"Deshaz las cartas movi\xe9ndolas\\nsobre cartas de un rango superior.","USE_STOCKPILE_TO":"Usa el mont\xf3n de reserva\\npara a\xf1adir nuevas cartas al tablero.","STOCK_PILE":"Mont\xf3n de Reserva","SUIT_SIZE":"Tama\xf1o de Palo","RELAXED_SPIDER":"Spider Relajado","ONE":"Uno","TWO":"Dos","FOUR":"Cuatro","EASY":"F\xe1cil","MEDIUM":"media","HARD":"dif\xedcil","SUIT":"palo","DIFFICULTY":"dificultad","CLOSE":"Cerrar","SHARE":"Compartir","GREAT_JOB_":"\xa1Gran trabajo! Descansa un momento...","TOTAL_GAME":"Juego total","LOSE":"Pierde","SUITS":"palos","CONTINUE_GAME_WITH":"Continuar un juego\\ncon configuraciones antiguas","ON":"Activado","OFF":"Desactivado","WELL_DONE":"\xa1BIEN HECHO!","MISSION":"Misi\xf3n","BUILD_A_SUIT":"Construir un palo completo de cartas","BUILD_X_SUIT":"Construir {X} palos completos de cartas","EMPTY_A_COLUMN":"Vaciar una columna completa de cartas","EMPTY_X_COLUMN":"Vaciar {X} columnas de cartas","BUILD_A_SUIT_WITHOUT":"Construir un palo completo de cartas sin tomar cartas adicionales","BUILD_X_SUIT_WITHOUT":"Construir {X} palos completos de cartas sin tomar cartas adicionales","WIN_THIS_DEAL":"Gana esta partida","WITHIN_X_MOVES":"en {X} movimientos","WITHIN_X_SECONDS":"en {X} segundos","JOURNEY":"Viaje","JOURNEY_UPPER":"VIAJE","LEVEL_COMPLETED":"Nivel completado","YOU_HAVE_REACHED":"Has alcanzado","BACK_TO_JOURNEY":"Volver al Viaje","LEVEL_FAILED":"Nivel fallido","RETRY":"Reintentar","LEVEL":"Nivel","MOVE":"Movimiento"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),pt:JSON.parse('{"Text":{"NEXT":"Pr\xf3ximo","DONE":"Pronto","SETTINGS":"Defini\xe7\xf5es","INVITE_FRIENDS":"Convidar amigos","SOUND_EFFECTS":"Efeitos de som","VIBRATION":"Vibra\xe7\xe3o","TAP_TO_MOVE":"Toque para Mover","AUTO_HINTS":"Sugest\xf5es autom\xe1ticas","AUTO_COMPLETE":"Preenchimento autom\xe1tico","STATISTICS":"Estat\xedsticas","WIN":"Vit\xf3ria","LOSS":"Derrota","MATCHES":"partidas","MATCH":"partida","WINS_WITHOUT_UNDO":"Vit\xf3rias sem desfazer","BEST_SCORE":"Melhor pontua\xe7\xe3o","AVERAGE_SCORE":"Pontua\xe7\xe3o m\xe9dia","BEST_WINNING_TIME":"Melhor tempo vencedor","AVERAGE_WINNING_TIME":"Tempo m\xe9dio de vit\xf3ria","AWESOME":"Espantoso!","MOVES":"Movimentos","TIME":"Tempo","BEST_TIME":"Melhor tempo","Out_Of_Moves":"N\xe3o ficam movimentos!","OUT_OF_MOVES":"N\xc3O FICAM MOVIMENTOS!","SCORE":"Pontua\xe7\xe3o","NEW_GAME":"Novo jogo","GAME":"Jogo","HINT":"Dica","UNDO":"Desfazer","NEW_SET_WILL_TAKE":"As novas defini\xe7\xf5es entrar\xe3o em vigor\\nna pr\xf3xima reparti\xe7\xe3o!","OK":"OK","NEW_DEAL":"Nova reparti\xe7\xe3o","REPLAY":"Repeti\xe7\xe3o","CANCEL":"Cancelar","LOADING_ADS":"A carregar an\xfancios...","LOADING":"A carregar...","THEME":"Tema","BACKGROUND":"Fundo","CARD_FACE":"Face da carta","CARD_BACK":"Verso da carta","HOW_TO_PLAY":"Como jogar","WIN_SPIDER_BY":"Ven\xe7a o Solitaire Spider Master\\nformando sequ\xeancias, Rei at\xe9 \xc1s.","UNWEAVE_CARDS_BY":"Desfa\xe7a as cartas movendo-as\\npara cartas com um valor um ponto maior.","USE_STOCKPILE_TO":"Use o monte de compra para\\nadicionar novas cartas ao tabuleiro.","STOCK_PILE":"Monte de Compra","SUIT_SIZE":"Tamanho do Naipe","RELAXED_SPIDER":"Spider Relaxado","ONE":"Um","TWO":"Dois","FOUR":"Quatro","EASY":"F\xe1cil","MEDIUM":"m\xe9dia","HARD":"dif\xedcil","SUIT":"naipe","DIFFICULTY":"dificuldade","CLOSE":"Fechar","SHARE":"Partilhar","GREAT_JOB_":"Bom trabalho! Descanse um pouco...","TOTAL_GAME":"Jogo total","LOSE":"Derrota","SUITS":"naipes","CONTINUE_GAME_WITH":"Continuar um jogo\\ncom as configura\xe7\xf5es antigas","ON":"Ligado","OFF":"Desligado","WELL_DONE":"BEM FEITO!","MISSION":"Miss\xe3o","BUILD_A_SUIT":"Construir um naipe completo de cartas","BUILD_X_SUIT":"Construir {X} naipes completos de cartas","EMPTY_A_COLUMN":"Esvaziar uma coluna completa de cartas","EMPTY_X_COLUMN":"Esvaziar {X} colunas de cartas","BUILD_A_SUIT_WITHOUT":"Construir um naipe completo de cartas sem pegar cartas adicionais","BUILD_X_SUIT_WITHOUT":"Construir {X} naipes completos de cartas sem pegar cartas adicionais","WIN_THIS_DEAL":"Vencer esta partida","WITHIN_X_MOVES":"em {X} movimentos","WITHIN_X_SECONDS":"em {X} segundos","JOURNEY":"Viagem","JOURNEY_UPPER":"VIAGEM","LEVEL_COMPLETED":"N\xedvel completo","YOU_HAVE_REACHED":"Voc\xea alcan\xe7ou","BACK_TO_JOURNEY":"Voltar \xe0 Jornada","LEVEL_FAILED":"N\xedvel falhado","RETRY":"Tentar novamente","LEVEL":"N\xedvel","MOVE":"Movimento:"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),zh:JSON.parse('{"Text":{"NEXT":"\u4e0b\u4e00\u4e2a","DONE":"\u5b8c\u6210","SETTINGS":"\u8bbe\u7f6e","INVITE_FRIENDS":"\u9080\u8bf7\u597d\u53cb","SOUND_EFFECTS":"\u58f0\u6548","VIBRATION":"\u9707\u52a8","TAP_TO_MOVE":"\u70b9\u51fb\u79fb\u52a8","AUTO_HINTS":"\u81ea\u52a8\u63d0\u793a","AUTO_COMPLETE":"\u81ea\u52a8\u5b8c\u6210","STATISTICS":"\u7edf\u8ba1\u6570\u636e","WIN":"\u80dc\u5229","LOSS":"\u5931\u8d25","MATCHES":"\u5bf9\u5c40","MATCH":"\u5bf9\u5c40","WINS_WITHOUT_UNDO":"\u4e0d\u7528\u8fd8\u539f\u8d62\u5f97\u80dc\u5229","BEST_SCORE":"\u6700\u9ad8\u5206\u6570","AVERAGE_SCORE":"\u5e73\u5747\u5206","BEST_WINNING_TIME":"\u6700\u4f73\u80dc\u5229\u65f6\u95f4","AVERAGE_WINNING_TIME":"\u5e73\u5747\u80dc\u5229\u65f6\u95f4","AWESOME":"\u592a\u68d2\u4e86\uff01","MOVES":"\u6b65\u6570","TIME":"\u65f6\u95f4","BEST_TIME":"\u6700\u4f73\u5b9e\u8df5","Out_Of_Moves":"\u6ca1\u6709\u53ef\u7528\u6b65\u6570\uff01","OUT_OF_MOVES":"\u6ca1\u6709\u53ef\u7528\u6b65\u6570\uff01","SCORE":"\u5206\u6570","NEW_GAME":"\u65b0\u6e38\u620f","GAME":"\u6e38\u620f","HINT":"\u63d0\u793a","UNDO":"\u8fd8\u539f","NEW_SET_WILL_TAKE":"\u65b0\u8bbe\u7f6e\u4f1a\u5728\u4e0b\u6b21 \u53d1\u724c\u65f6\u751f\u6548\uff01","OK":"\u786e\u5b9a","NEW_DEAL":"\u65b0\u724c","REPLAY":"\u91cd\u65b0\u5f00\u59cb","CANCEL":"\u53d6\u6d88","LOADING_ADS":"\u52a0\u8f7d\u5e7f\u544a\u4e2d\u2026\u2026","LOADING":"\u6b63\u5728\u8f7d\u5165\u2026\u2026","THEME":"\u4e3b\u9898","BACKGROUND":"\u80cc\u666f","CARD_FACE":"\u5361\u724c\u6b63\u9762","CARD_BACK":"\u5361\u724c\u80cc\u9762","HOW_TO_PLAY":"\u5982\u4f55\u6e38\u73a9","WIN_SPIDER_BY":"Solitaire Spider Master\uff0c\\n\u4eceK\u5230A\u5f62\u6210\u987a\u5e8f\u83b7\u80dc\u3002","UNWEAVE_CARDS_BY":"\u5c06\u5361\u7247\u79fb\u81f3\u6bd4\u5b83\u9ad8\u4e00\u7ea7\u7684\u5361\\n\u7247\u4e0a\u4ee5\u89e3\u5f00\u7eb8\u724c\u3002","USE_STOCKPILE_TO":"\u4f7f\u7528\u724c\u5e93\u6dfb\u52a0\u65b0\u5361\u7247\u5230\u68cb\u76d8\u4e0a\u3002","STOCK_PILE":"\u724c\u5e93","SUIT_SIZE":"\u82b1\u8272\u5927\u5c0f","RELAXED_SPIDER":"\u4f11\u95f2\u8718\u86db","ONE":"\u4e00","TWO":"\u4e8c","FOUR":"\u56db","EASY":"\u7b80\u5355","MEDIUM":"\u4e2d\u7b49","HARD":"\u56f0\u96be","SUIT":"\u79cd\u82b1\u8272","DIFFICULTY":"\u96be\u5ea6","CLOSE":"\u5173\u95ed","SHARE":"\u5206\u4eab","GREAT_JOB_":"\u5e72\u5f97\u597d\uff01\u4f11\u606f\u4e00\u4e0b...","TOTAL_GAME":"\u5168\u573a\u6bd4\u8d5b","LOSE":"\u60a8\u8f93\u4e86","SUITS":"\u79cd\u82b1\u8272","CONTINUE_GAME_WITH":"\u4ee5\u65e7\u8bbe\u7f6e\u7ee7\u7eed\u6e38\u620f","ON":"\u5f00","OFF":"\u5173","WELL_DONE":"\u5e72\u7684\u6f02\u4eae\uff01","MISSION":"\u4efb\u52a1","BUILD_A_SUIT":"\u5efa\u7acb\u4e00\u6574\u5957\u82b1\u8272\u7684\u5361\u7247","BUILD_X_SUIT":"\u5efa\u7acb{X}\u6574\u5957\u82b1\u8272\u7684\u5361\u7247","EMPTY_A_COLUMN":"\u6e05\u7a7a\u4e00\u5217\u5361\u7247","EMPTY_X_COLUMN":"\u6e05\u7a7a{X}\u5217\u5361\u7247","BUILD_A_SUIT_WITHOUT":"\u4e0d\u62bd\u53d6\u65b0\u5361\u7247\u5efa\u7acb\\n\u4e00\u6574\u5957\u82b1\u8272\u7684\u5361\u7247","BUILD_X_SUIT_WITHOUT":"\u4e0d\u62bd\u53d6\u65b0\u5361\u7247\u5efa\u7acb\\n{X}\u6574\u5957\u82b1\u8272\u7684\u5361\u7247","WIN_THIS_DEAL":"\u8d62\u5f97\u6b64\u5c40","WITHIN_X_MOVES":"\u5728{X}\u6b65\u5185","WITHIN_X_SECONDS":"\u5728{X}\u79d2\u5185","JOURNEY":"\u65c5\u7a0b","JOURNEY_UPPER":"\u65c5\u7a0b","LEVEL_COMPLETED":"\u5173\u5361\u5b8c\u6210","YOU_HAVE_REACHED":"\u4f60\u5df2\u8fbe\u5230","BACK_TO_JOURNEY":"\u8fd4\u56de\u65c5\u7a0b","LEVEL_FAILED":"\u5173\u5361\u5931\u8d25","RETRY":"\u91cd\u8bd5","LEVEL":"\u7b49\u7ea7","MOVE":"\u79fb\u52a8"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),fr:JSON.parse('{"Text":{"NEXT":"Suivant","DONE":"Effectu\xe9","SETTINGS":"Param\xe8tres","INVITE_FRIENDS":"Inviter des amis","SOUND_EFFECTS":"Effets sonores","VIBRATION":"Vibration","TAP_TO_MOVE":"Appuyez pour bouger","AUTO_HINTS":"Indices automatiques","AUTO_COMPLETE":"Compl\xe9ter automatiquement","STATISTICS":"Statistiques","WIN":"Victoire","LOSS":"D\xe9faite","MATCHES":"matchs","MATCH":"match","WINS_WITHOUT_UNDO":"Victoires sans annulation","BEST_SCORE":"Meilleur score","AVERAGE_SCORE":"Score moyen","BEST_WINNING_TIME":"Meilleur temps de victoire","AVERAGE_WINNING_TIME":"Temps moyen de victoire","AWESOME":"G\xe9nial !","MOVES":"D\xe9placements","TIME":"Temps","BEST_TIME":"Meilleurs temps","Out_Of_Moves":"\xc0 court de d\xe9placements !","OUT_OF_MOVES":"\xc0 COURT DE D\xc9PLACEMENTS !","SCORE":"Score","NEW_GAME":"Nouveau jeu","GAME":"Jeu","HINT":"Indice","UNDO":"Annuler","NEW_SET_WILL_TAKE":"Les param\xe8tres prendront effet\\nlors de la prochaine distribution !","OK":"OK","NEW_DEAL":"Nouvelle distribution","REPLAY":"Rejouer","CANCEL":"Annuler","LOADING_ADS":"Chargement des publicit\xe9s...","LOADING":"Chargement...","THEME":"Th\xe8me","BACKGROUND":"Arri\xe8re-plan","CARD_FACE":"Recto des cartes","CARD_BACK":"Verso des cartes","HOW_TO_PLAY":"Comment jouer","WIN_SPIDER_BY":"Gagnez au Solitaire Spider Master\\nen formant des suites, du Roi \xe0 l\'As.","UNWEAVE_CARDS_BY":"D\xe9m\xealez les cartes en les d\xe9pla\xe7ant\\nsur des cartes d\'un rang sup\xe9rieur.","USE_STOCKPILE_TO":"Utilisez la pioche pour ajouter\\nde nouvelles cartes au plateau.","STOCK_PILE":"Pioche","SUIT_SIZE":"Taille de la couleur","RELAXED_SPIDER":"Spider d\xe9tendu","ONE":"Un","TWO":"Deux","FOUR":"Quatre","EASY":"Facile","MEDIUM":"moyenne","HARD":"difficile","SUIT":"couleur","DIFFICULTY":"difficult\xe9","CLOSE":"Fermer","SHARE":"Partager","GREAT_JOB_":"Beau travail ! Reposez-vous un peu...","TOTAL_GAME":"Jeu total","LOSE":"Perdu","SUITS":"couleurs","CONTINUE_GAME_WITH":"Continuer une partie\\navec les anciens r\xe9glages","ON":"Activ\xe9","OFF":"D\xe9sactiv\xe9","WELL_DONE":"BIEN JOU\xc9 !","MISSION":"Mission","BUILD_A_SUIT":"Construisez une couleur compl\xe8te de cartes","BUILD_X_SUIT":"Construisez {X} couleurs compl\xe8tes de cartes","EMPTY_A_COLUMN":"Videz une colonne enti\xe8re de cartes","EMPTY_X_COLUMN":"Videz {X} colonnes de cartes","BUILD_A_SUIT_WITHOUT":"Construisez une couleur compl\xe8te de cartes sans prendre de cartes suppl\xe9mentaires","BUILD_X_SUIT_WITHOUT":"Construisez {X} couleurs compl\xe8tes de cartes sans prendre de cartes suppl\xe9mentaires","WIN_THIS_DEAL":"Gagnez cette donne","WITHIN_X_MOVES":"en {X} mouvements","WITHIN_X_SECONDS":"en {X} secondes","JOURNEY":"Voyage","JOURNEY_UPPER":"VOYAGE","LEVEL_COMPLETED":"Niveau compl\xe9t\xe9","YOU_HAVE_REACHED":"Vous avez atteint","BACK_TO_JOURNEY":"Retour au voyage","LEVEL_FAILED":"Niveau \xe9chou\xe9","RETRY":"R\xe9essayer","LEVEL":"Niveau","MOVE":"Mouvement"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),de:JSON.parse('{"Text":{"NEXT":"Weiter","DONE":"Fertig","SETTINGS":"Einstellungen","INVITE_FRIENDS":"Freunde einladen","SOUND_EFFECTS":"Toneffekte","VIBRATION":"Vibration","TAP_TO_MOVE":"Tippen zum Bewegen","AUTO_HINTS":"Automatische Tipps","AUTO_COMPLETE":"Auto-Vervollst\xe4ndigen","STATISTICS":"Statistiken","WIN":"Sieg","LOSS":"Niederlage","MATCHES":"Matches","MATCH":"Match","WINS_WITHOUT_UNDO":"Siege ohne R\xfcckg\xe4ngig","BEST_SCORE":"Bestes Ergebnis","AVERAGE_SCORE":"Durchschnittliches\\nErgebnis","BEST_WINNING_TIME":"Beste Siegzeit","AVERAGE_WINNING_TIME":"Durchschnittliche\\nSiegzeit","AWESOME":"Super!","MOVES":"Z\xfcge","TIME":"Zeit","BEST_TIME":"Beste Zeit","Out_Of_Moves":"Keine Z\xfcge mehr!","OUT_OF_MOVES":"KEINE Z\xdcGE MEHR!","SCORE":"Punktzahl","NEW_GAME":"Neues Spiel","GAME":"Spiel","HINT":"Tipp","UNDO":"R\xfcckg\xe4ngig","NEW_SET_WILL_TAKE":"Die neuen Einstellungen\\nwerden beim n\xe4chsten Deal wirksam!","OK":"OK","NEW_DEAL":"Neuer Deal","REPLAY":"Wiederholen","CANCEL":"Abbrechen","LOADING_ADS":"Lade Werbung ...","LOADING":"Laden \u2026","THEME":"Thema","BACKGROUND":"Hintergrund","CARD_FACE":"Kartenvorderseite","CARD_BACK":"Kartenr\xfcckseite","HOW_TO_PLAY":"Spielanleitung","WIN_SPIDER_BY":"Gewinne Solitaire Spider Master,\\nindem du Sequenzen bildest,\\nvom K\xf6nig zum Ass.","UNWEAVE_CARDS_BY":"Entwirre die Karten, indem du sie auf\\nKarten einen Rang h\xf6her legst.","USE_STOCKPILE_TO":"Benutze den Stapel, um neue\\nKarten zum Brett hinzuzuf\xfcgen.","STOCK_PILE":"Stapel","SUIT_SIZE":"Farbengr\xf6\xdfe","RELAXED_SPIDER":"Entspanntes Spider","ONE":"Un","TWO":"Zwei","FOUR":"Vier","EASY":"Einfach","MEDIUM":"mittlere","HARD":"hohe","SUIT":"Farbspiel","DIFFICULTY":"Schwierigkeit","CLOSE":"Schlie\xdfen","SHARE":"Teilen","GREAT_JOB_":"Gro\xdfartige Arbeit! Ruhe dich ein wenig aus...","TOTAL_GAME":"Gesamtspiel","LOSE":"Verloren","SUITS":"Farbspiele","CONTINUE_GAME_WITH":"Spiel mit alten\\nEinstellungen fortsetzen","ON":"An","OFF":"Aus","WELL_DONE":"GUT GEMACHT!","MISSION":"Mission","BUILD_A_SUIT":"Baue ein komplettes Farbspiel auf","BUILD_X_SUIT":"Baue {X} komplette Farbspiele auf","EMPTY_A_COLUMN":"Leere eine ganze Spalte von Karten","EMPTY_X_COLUMN":"Leere {X} Spalten von Karten","BUILD_A_SUIT_WITHOUT":"Baue ein komplettes Farbspiel auf, ohne zus\xe4tzliche Karten zu nehmen","BUILD_X_SUIT_WITHOUT":"Baue {X} komplette Farbspiele auf, ohne zus\xe4tzliche Karten zu nehmen","WIN_THIS_DEAL":"Gewinne diesen Deal","WITHIN_X_MOVES":"innerhalb von {X} Z\xfcgen","WITHIN_X_SECONDS":"innerhalb von {X} Sekunden","JOURNEY":"Reise","JOURNEY_UPPER":"REISE","LEVEL_COMPLETED":"Level abgeschlossen","YOU_HAVE_REACHED":"Du hast erreicht","BACK_TO_JOURNEY":"Zur\xfcck zur Reise","LEVEL_FAILED":"Level gescheitert","RETRY":"Wiederholen","LEVEL":"Niveau","MOVE":"Bewegung"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),id:JSON.parse('{"Text":{"NEXT":"Berikutnya","DONE":"Selesai","SETTINGS":"Pengaturan","INVITE_FRIENDS":"Undang Teman","SOUND_EFFECTS":"Efek Suara","VIBRATION":"Getaran","TAP_TO_MOVE":"Ketuk untuk Bergerak","AUTO_HINTS":"Petunjuk Otomatis","AUTO_COMPLETE":"Selesai Otomatis","STATISTICS":"Statistik","WIN":"Menang","LOSS":"Kalah","MATCHES":"pertandingan","MATCH":"pertandingan","WINS_WITHOUT_UNDO":"Menangi tanpa Undo","BEST_SCORE":"Skor Terbaik","AVERAGE_SCORE":"Skor Rata-Rata","BEST_WINNING_TIME":"Waktu Menang Terbaik","AVERAGE_WINNING_TIME":"Waktu Menang Rata-Rata","AWESOME":"Istimewa!","MOVES":"Langkah","TIME":"Waktu","BEST_TIME":"Waktu terbaik","Out_Of_Moves":"Langkah habis!","OUT_OF_MOVES":"LANGKAH HABIS!","SCORE":"Skor","NEW_GAME":"Game Baru","GAME":"Game","HINT":"Petunjuk","UNDO":"Undo","NEW_SET_WILL_TAKE":"Pengaturan baru akan berlaku\\ndi transaksi berikutnya!","OK":"OK","NEW_DEAL":"Transaksi baru","REPLAY":"Ulangi permainan","CANCEL":"Batalkan","LOADING_ADS":"Memuat iklan ...","LOADING":"Memuat...","THEME":"Tema","BACKGROUND":"Latar Belakang","CARD_FACE":"Bagian Depan Kartu","CARD_BACK":"Bagian Belakang Kartu","HOW_TO_PLAY":"Cara Bermain","WIN_SPIDER_BY":"Menangkan Solitaire Spider Master\\ndengan membentuk run, dari Raja ke As.","UNWEAVE_CARDS_BY":"Buka anyaman kartu\\ndengan memindahkannya ke kartu yang\\nperingkatnya satu tingkat lebih tinggi.","USE_STOCKPILE_TO":"Gunakan tumpukan stok untuk\\nmenambah kartu baru ke papan.","STOCK_PILE":"Tumpukan Stok","SUIT_SIZE":"Ukuran Setelan","RELAXED_SPIDER":"Spider Santai","ONE":"Satu","TWO":"Dua","FOUR":"Empat","EASY":"Mudah","MEDIUM":"sedang","HARD":"kesulitan","SUIT":"setelan","DIFFICULTY":"kesulitan","CLOSE":"Tutup","SHARE":"Bagikan","GREAT_JOB_":"Kerja bagus! Istirahat sebentar...","TOTAL_GAME":"Permainan total","LOSE":"Kalah","SUITS":"setelan","CONTINUE_GAME_WITH":"Lanjutkan permainan\\ndengan pengaturan lama","ON":"Hidup","OFF":"Mati","WELL_DONE":"SELESAI!","MISSION":"Misi","BUILD_A_SUIT":"Bangun setelan kartu lengkap","BUILD_X_SUIT":"Bangun {X} setelan kartu lengkap","EMPTY_A_COLUMN":"Kosongkan satu kolom penuh kartu","EMPTY_X_COLUMN":"Kosongkan {X} kolom kartu","BUILD_A_SUIT_WITHOUT":"Bangun setelan kartu lengkap tanpa mengambil kartu tambahan","BUILD_X_SUIT_WITHOUT":"Bangun {X} setelan kartu lengkap tanpa mengambil kartu tambahan","WIN_THIS_DEAL":"Menangkan tawaran ini","WITHIN_X_MOVES":"dalam {X} gerakan","WITHIN_X_SECONDS":"dalam {X} detik","JOURNEY":"Perjalanan","JOURNEY_UPPER":"PERJALANAN","LEVEL_COMPLETED":"Level selesai","YOU_HAVE_REACHED":"Anda telah mencapai","BACK_TO_JOURNEY":"Kembali ke Perjalanan","LEVEL_FAILED":"Level gagal","RETRY":"Coba lagi","LEVEL":"Level","MOVE":"Gerak"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),it:JSON.parse('{"Text":{"NEXT":"Avanti","DONE":"Fatto","SETTINGS":"Impostazioni","INVITE_FRIENDS":"Invita gli amici","SOUND_EFFECTS":"Effetti sonori","VIBRATION":"Vibrazione","TAP_TO_MOVE":"Tocca per muoverti","AUTO_HINTS":"Suggerimenti automatici","AUTO_COMPLETE":"Completamento automatico","STATISTICS":"Statistiche","WIN":"Vittoria","LOSS":"Sconfitta","MATCHES":"partite","MATCH":"partita","WINS_WITHOUT_UNDO":"Vittorie senza\\nannulla mossa","BEST_SCORE":"Miglior punteggio","AVERAGE_SCORE":"Punteggio medio","BEST_WINNING_TIME":"Miglior tempo","AVERAGE_WINNING_TIME":"Tempo medio di vittoria","AWESOME":"Fantastico!","MOVES":"Mosse","TIME":"Tempo","BEST_TIME":"Miglior tempo","Out_Of_Moves":"Mosse esaurite!","OUT_OF_MOVES":"MOSSE ESAURITE","SCORE":"Punteggio","NEW_GAME":"Nuova partita","GAME":"Partita","HINT":"Suggerimento","UNDO":"Annulla","NEW_SET_WILL_TAKE":"Le nuove impostazioni avranno\\neffetto nella prossima partita!","OK":"OK","NEW_DEAL":"Nuova partita","REPLAY":"Rigioca","CANCEL":"Annulla","LOADING_ADS":"Caricamento annunci...","LOADING":"Caricamento\u2026","THEME":"Tema","BACKGROUND":"Sfondo","CARD_FACE":"Faccia della carta","CARD_BACK":"Retro della carta","HOW_TO_PLAY":"Come si gioca","WIN_SPIDER_BY":"Vinci Solitaire Spider Master\\nformando sequenze, dal Re all\'Asso.","UNWEAVE_CARDS_BY":"Disfa le carte spostandole\\nsu carte di rango superiore.","USE_STOCKPILE_TO":"Usa la riserva per aggiungere\\nnuove carte alla board.","STOCK_PILE":"Riserva","SUIT_SIZE":"Dimensione del Seme","RELAXED_SPIDER":"Spider Rilassato","ONE":"Uno","TWO":"Due","FOUR":"Quattro","EASY":"Facile","MEDIUM":"media","HARD":"difficile","SUIT":"seme","DIFFICULTY":"difficolt\xe0","CLOSE":"Chiudi","SHARE":"Condividi","GREAT_JOB_":"Ottimo lavoro! Riposati un po\'...","TOTAL_GAME":"Gioco totale","LOSE":"Perdi","SUITS":"semi","CONTINUE_GAME_WITH":"Continua un gioco con\\nle impostazioni precedenti","ON":"Acceso","OFF":"Spento","WELL_DONE":"BEN FATTO!","MISSION":"Missione","BUILD_A_SUIT":"Costruisci un seme completo di carte","BUILD_X_SUIT":"Costruisci {X} semi completi di carte","EMPTY_A_COLUMN":"Svuota una colonna intera di carte","EMPTY_X_COLUMN":"Svuota {X} colonne di carte","BUILD_A_SUIT_WITHOUT":"Costruisci un seme completo di carte senza prendere carte aggiuntive","BUILD_X_SUIT_WITHOUT":"Costruisci {X} semi completi di carte senza prendere carte aggiuntive","WIN_THIS_DEAL":"Vinci questa partita","WITHIN_X_MOVES":"in {X} mosse","WITHIN_X_SECONDS":"in {X} secondi","JOURNEY":"Viaggio","JOURNEY_UPPER":"VIAGGIO","LEVEL_COMPLETED":"Livello completato","YOU_HAVE_REACHED":"Hai raggiunto","BACK_TO_JOURNEY":"Ritorna al Viaggio","LEVEL_FAILED":"Livello fallito","RETRY":"Riprova","LEVEL":"Livello","MOVE":"Mossa"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),ja:JSON.parse('{"Text":{"NEXT":"\u6b21\u3078","DONE":"\u7d42\u4e86","SETTINGS":"\u8a2d\u5b9a","INVITE_FRIENDS":"\u30d5\u30ec\u30f3\u30c9\u3092\u62db\u5f85","SOUND_EFFECTS":"\u52b9\u679c\u97f3","VIBRATION":"\u632f\u52d5","TAP_TO_MOVE":"\u30bf\u30c3\u30d7\u3057\u3066\u79fb\u52d5","AUTO_HINTS":"\u81ea\u52d5\u3067\u30d2\u30f3\u30c8","AUTO_COMPLETE":"\u81ea\u52d5\u3067\u5b8c\u4e86","STATISTICS":"\u7d71\u8a08","WIN":"\u52dd\u5229","LOSS":"\u6557\u5317","MATCHES":"\u30de\u30c3\u30c1","MATCH":"\u30de\u30c3\u30c1","WINS_WITHOUT_UNDO":"\u300c\u5143\u306b\u623b\u3059\u300d\u306a\u3057\u306e\u52dd\u5229\u6570","BEST_SCORE":"\u30d9\u30b9\u30c8\u30b9\u30b3\u30a2","AVERAGE_SCORE":"\u5e73\u5747\u30b9\u30b3\u30a2","BEST_WINNING_TIME":"\u30d9\u30b9\u30c8\u306e\u52dd\u5229\u30bf\u30a4\u30e0","AVERAGE_WINNING_TIME":"\u5e73\u5747\u306e\u52dd\u5229\u30bf\u30a4\u30e0","AWESOME":"\u512a\u79c0\u3060\u306d\uff01","MOVES":"\u30e0\u30fc\u30d6","TIME":"\u30bf\u30a4\u30e0","BEST_TIME":"\u30d9\u30b9\u30c8\u30bf\u30a4\u30e0","Out_Of_Moves":"\u624b\u8a70\u307e\u308a\uff01","OUT_OF_MOVES":"\u624b\u8a70\u307e\u308a\uff01","SCORE":"\u30b9\u30b3\u30a2","NEW_GAME":"\u65b0\u3057\u3044\u30b2\u30fc\u30e0","GAME":"\u30b2\u30fc\u30e0","HINT":"\u30d2\u30f3\u30c8","UNDO":"\u5143\u306b\u623b\u3059","NEW_SET_WILL_TAKE":"\u65b0\u3057\u3044\u8a2d\u5b9a\u306f\u6b21\u306e\u30b2\u30fc\u30e0\u304b\u3089\\n\u9069 \u7528\u3055\u308c\u307e\u3059\uff01","OK":"OK","NEW_DEAL":"\u65b0\u3057\u3044\u30b2\u30fc\u30e0","REPLAY":"\u30ea\u30d7\u30ec\u30a4","CANCEL":"\u30ad\u30e3\u30f3\u30bb\u30eb","LOADING_ADS":"\u5e83\u544a\u3092\u8aad\u307f\u8fbc\u307f\u4e2d...","LOADING":"\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059...","THEME":"\u30c6\u30fc\u30de","BACKGROUND":"\u80cc\u666f","CARD_FACE":"\u30ab\u30fc\u30c9\u8868","CARD_BACK":"\u30ab\u30fc\u30c9\u88cf","HOW_TO_PLAY":"\u904a\u3073\u65b9","WIN_SPIDER_BY":"\u30ad\u30f3\u30b0\u304b\u3089\u30a8\u30fc\u30b9\u307e\u3067\u306e\u30e9\u30f3\u3092\u5f62\u6210\u3057\u3066\\nSolitaire Spider Master\u30af\u30e9\u30b7\u30c3\u30af\u306b\u52dd\u3064\u3002","UNWEAVE_CARDS_BY":"\u4e00\u3064\u9ad8\u3044\u30e9\u30f3\u30af\u306e\u30ab\u30fc\u30c9\u306b\\n\u79fb\u52d5\u3055\u305b\u3066\u30ab\u30fc\u30c9\u3092\u89e3\u4f53\u3059\u308b\u3002","USE_STOCKPILE_TO":"\u30b9\u30c8\u30c3\u30af\u304b\u3089\u65b0\u3057\u3044\u30ab\u30fc\u30c9\u3092\u30dc\u30fc\u30c9\u306b\\n\u8ffd\u52a0\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3002","STOCK_PILE":"\u30b9\u30c8\u30c3\u30af\u30d1\u30a4\u30eb","SUIT_SIZE":"\u30b9\u30fc\u30c4\u306e\u30b5\u30a4\u30ba","RELAXED_SPIDER":"\u30ea\u30e9\u30c3\u30af\u30b9\u30b9\u30d1\u30a4\u30c0\u30fc","ONE":"\u4e00","TWO":"\u4e8c","FOUR":"\u56db","EASY":"\u7c21\u5358","MEDIUM":"\u666e\u901a","HARD":"\u96e3\u3057\u3044","SUIT":"\u30b9\u30fc\u30c4","DIFFICULTY":"\u96e3\u6613\u5ea6","CLOSE":"\u9589\u3058\u308b","SHARE":"\u30b7\u30a7\u30a2","GREAT_JOB_":"\u3088\u304f\u3084\u3063\u305f\uff01\u5c11\u3057\u4f11\u3093\u3067...","TOTAL_GAME":"\u30c8\u30fc\u30bf\u30eb\u30b2\u30fc\u30e0","LOSE":"\u8ca0\u3051","SUITS":"\u30b9\u30fc\u30c4","CONTINUE_GAME_WITH":"\u53e4\u3044\u8a2d\u5b9a\u3067\u30b2\u30fc\u30e0\u3092\u7d9a\u3051\u308b","ON":"\u30aa\u30f3","OFF":"\u30aa\u30d5","WELL_DONE":"\u7d20\u6674\u3089\u3057\u3044\uff01","MISSION":"\u30df\u30c3\u30b7\u30e7\u30f3","BUILD_A_SUIT":"\u5b8c\u5168\u306a\u30b9\u30fc\u30c4\u306e\u30ab\u30fc\u30c9\u3092\u7d44\u307f\u7acb\u3066\u308b","BUILD_X_SUIT":"{X}\u3064\u306e\u5b8c\u5168\u306a\u30b9\u30fc\u30c4\u306e\u30ab\u30fc\u30c9\\n\u3092\u7d44\u307f\u7acb\u3066\u308b","EMPTY_A_COLUMN":"\u30ab\u30fc\u30c9\u306e\u5b8c\u5168\u306a\u30b3\u30e9\u30e0\u3092\u7a7a\u306b\u3059\u308b","EMPTY_X_COLUMN":"\u30ab\u30fc\u30c9\u306e{X}\u5217\u3092\u7a7a\u306b\u3059\u308b","BUILD_A_SUIT_WITHOUT":"\u8ffd\u52a0\u306e\u30ab\u30fc\u30c9\u3092\u53d6\u3089\u305a\u306b\\n\u5b8c\u5168\u306a\u30b9\u30fc\u30c4\u306e\u30ab\u30fc\u30c9\u3092\u7d44\u307f\u7acb\u3066\u308b","BUILD_X_SUIT_WITHOUT":"\u8ffd\u52a0\u306e\u30ab\u30fc\u30c9\u3092\u53d6\u3089\u305a\u306b{X}n\u3064\u306e\\n\u5b8c\u5168\u306a\u30b9\u30fc\u30c4\u306e\u30ab\u30fc\u30c9\u3092\u7d44\u307f\u7acb\u3066\u308b","WIN_THIS_DEAL":"\u3053\u306e\u30c7\u30a3\u30fc\u30eb\u306b\u52dd\u3064","WITHIN_X_MOVES":"{X}\u624b\u4ee5\u5185\u306b","WITHIN_X_SECONDS":"{X}\u79d2\u4ee5\u5185\u306b","JOURNEY":"\u65c5\u884c","JOURNEY_UPPER":"\u65c5\u884c","LEVEL_COMPLETED":"\u30ec\u30d9\u30eb\u5b8c\u4e86","YOU_HAVE_REACHED":"\u3042\u306a\u305f\u306f\u5230\u9054\u3057\u307e\u3057\u305f","BACK_TO_JOURNEY":"\u65c5\u306b\u623b\u308b","LEVEL_FAILED":"\u30ec\u30d9\u30eb\u5931\u6557","RETRY":"\u518d\u6311\u6226","LEVEL":"\u30ec\u30d9\u30eb","MOVE":"\u30e0\u30fc\u30d6"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}'),tr:JSON.parse('{"Text":{"NEXT":"\u0130leri","DONE":"Bitti!","SETTINGS":"Ayarlar","INVITE_FRIENDS":"Arkada\u015flar\u0131n\u0131 Davet Et","SOUND_EFFECTS":"Ses Efektleri","VIBRATION":"Titre\u015fim","TAP_TO_MOVE":"Dokunarak Hareket Et","AUTO_HINTS":"Otomatik \u0130pu\xe7lar\u0131","AUTO_COMPLETE":"Otomatik Tamamlama","STATISTICS":"\u0130statistikler","WIN":"Galibiyet","LOSS":"Ma\u011flubiyet","MATCHES":"ma\xe7lar","MATCH":"ma\xe7","WINS_WITHOUT_UNDO":"Geri Almadan Galibiyetler","BEST_SCORE":"En \u0130yi Skor","AVERAGE_SCORE":"Ortalama Puan","BEST_WINNING_TIME":"En iyi Kazanma S\xfcresi","AVERAGE_WINNING_TIME":"Ortalama Kazanma S\xfcresi","AWESOME":"M\xfcthi\u015f!","MOVES":"Hamleler","TIME":"S\xfcre","BEST_TIME":"En iyi s\xfcre","Out_Of_Moves":"Hamle kalmad\u0131!","OUT_OF_MOVES":"HAMLE KALMADI!","SCORE":"Skor","NEW_GAME":"Yeni Oyun","GAME":"Oyun","HINT":"\u0130pucu","UNDO":"Geri al","NEW_SET_WILL_TAKE":"Yeni ayarlar bir sonraki turda uygulanacak!","OK":"TAMAM","NEW_DEAL":"Yeni Tur","REPLAY":"Yeniden\\noynat","CANCEL":"\u0130ptal","LOADING_ADS":"Reklam y\xfckleniyor...","LOADING":"Y\xfckleniyor...","THEME":"Tema","BACKGROUND":"Arka plan","CARD_FACE":"Kart \xf6n\xfc","CARD_BACK":"Kart arkas\u0131","HOW_TO_PLAY":"Nas\u0131l Oynan\u0131r","WIN_SPIDER_BY":"Kraldan Aasa diziler olu\u015fturarak\\nSolitaire Spider Master\'i kazan.","UNWEAVE_CARDS_BY":"Kartlar\u0131 bir \xfcst r\xfctbeli kartlar\u0131n\\n\xfczerine ta\u015f\u0131yarak kartlar\u0131 \xe7\xf6z.","USE_STOCKPILE_TO":"Yeni kartlar\u0131 tahtaya\\neklemek i\xe7in stok y\u0131\u011f\u0131n\u0131n\u0131 kullan.","STOCK_PILE":"Stok Y\u0131\u011f\u0131n\u0131","SUIT_SIZE":"Elbise Boyutu","RELAXED_SPIDER":"Rahat Spider","ONE":"Bir","TWO":"Iki","FOUR":"D\xf6rt","EASY":"Kolay","MEDIUM":"orta","HARD":"zor","SUIT":"elbise","DIFFICULTY":"zorluk","CLOSE":"Kapat","SHARE":"Payla\u015f","GREAT_JOB_":"Harika i\u015f! Biraz dinlen...","TOTAL_GAME":"Toplam oyun","LOSE":"Yenilgi","SUITS":"elbise","CONTINUE_GAME_WITH":"Eski ayarlarla oyunu s\xfcrd\xfcr","ON":"A\xe7\u0131k","OFF":"Kapal\u0131","WELL_DONE":"TEBR\u0130KLER!","MISSION":"G\xf6rev","BUILD_A_SUIT":"Tam bir elbise kartlar\u0131 in\u015fa et","BUILD_X_SUIT":"{X} tam elbise kartlar\u0131 in\u015fa et","EMPTY_A_COLUMN":"Bir s\xfctun dolusu kart\u0131 bo\u015falt","EMPTY_X_COLUMN":"{X} s\xfctun dolusu kart\u0131 bo\u015falt","BUILD_A_SUIT_WITHOUT":"Ekstra kart almadan tam bir elbise kartlar\u0131 in\u015fa et","BUILD_X_SUIT_WITHOUT":"Ekstra kart almadan {X} tam elbise kartlar\u0131 in\u015fa et","WIN_THIS_DEAL":"Bu anla\u015fmay\u0131 kazan","WITHIN_X_MOVES":"{X} hamle i\xe7inde","WITHIN_X_SECONDS":"{X} saniye i\xe7inde","JOURNEY":"Yolculuk","JOURNEY_UPPER":"YOLCULUK","LEVEL_COMPLETED":"Seviye tamamland\u0131","YOU_HAVE_REACHED":"Ula\u015ft\u0131n","BACK_TO_JOURNEY":"Yolculu\u011fa Geri D\xf6n","LEVEL_FAILED":"Seviye ba\u015far\u0131s\u0131z","RETRY":"Yeniden dene","LEVEL":"Seviye","MOVE":"Hamle"},"Texture":{"empty_2_{abc}":"empty_2_{abc}"}}')},fi=function(e){function t(){return e.apply(this,arguments)||this}return(0,s.Z)(t,e),t.prototype.configure=function(t){e.prototype.configure.call(this,(0,a.Z)({data:di,locale:"en",upperCaseText:!1},t))},t}(hi),pi=fi,gi=n(476),mi=GameCore.Ads.Types,vi=[Dt._.SCREEN_OPEN],yi=(function(e){function t(t,n){var i;(i=e.call(this,"GoogleAnalytics",(0,a.Z)({},n),"#E35335")||this).game=void 0,i.trackingId=void 0,i.currentPath="/";var r=n.trackingId;i.game=t;var s=(GameCore.Configs.Analytics.GoogleAnalytics||{}).consoleLog;return i.selfLog=!!s,i.trackingId=r,i}(0,s.Z)(t,e);var n=t.prototype;n.processEvent=function(e,t,n){if(!(yt()(vi).call(vi,e)>=0)){var i=this.formatEventName(e),r=t?(0,a.Z)({},t):{};r=n?(0,a.Z)({},r,{value:n}):r,r=(0,a.Z)({},r,{page_path:this.currentPath,send_to:"GA"}),gtag("event",i,r)}},n.processLevelStart=function(e){this.processEvent(Dt._.LEVEL_START,e)},n.processLoadPreRollAd=function(e){var t=this.getEdaType(mi.PRE_ROLL);this.processEvent(Dt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowPreRollAd=function(e){var t=this.getEdaType(mi.PRE_ROLL);this.processEvent(Dt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:t})},n.processLoadInterstitialAd=function(e){var t=this.getEdaType(mi.INTERSTITIAL);this.processEvent(Dt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowInterstitialAd=function(e){var t=this.getEdaType(mi.INTERSTITIAL);this.processEvent(Dt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:"Interstitial"})},n.processLoadRewardedVideoAd=function(e){var t=this.getEdaType(mi.REWARDED);this.processEvent(Dt._.AD_LOAD,{ad_type:t,screen_name:""+e})},n.processShowRewardedVideoAd=function(e){var t=this.getEdaType(mi.REWARDED);this.processEvent(Dt._.AD_SHOW,{ad_type:t,screen_name:""+e}),this.processEvent(Dt._.AD_IMPRESSION,{ad_format:"Rewarded"})},n.processLoadAdFail=function(e,t){var n=this.getEdaType(e);this.processEvent(Dt._.AD_LOAD_FAILED,{ad_type:n,screen_name:""+t})},n.processShowAdFail=function(e,t,n){var i=(null==n?void 0:n.code)||"unknown",a=this.getEdaType(e);this.processEvent(Dt._.AD_SHOW_FAILED,{ad_type:a,screen_name:""+t,code:i})},n.processPageView=function(e){var t=this.getGameplayMode(),n="/"+t+"/"+e;this.currentPath=n,document.title=this.formatPageTitle(t,e),gtag("event","page_view",{page_path:this.currentPath,send_to:["GA",this.trackingId]})},n.getGameplayMode=function(){var e=this.game.storage.getState();return(0,gi.F)(e)},n.formatEventName=function(e){return e.toLowerCase().replace(/:/g,"_")},n.formatPageTitle=function(e,t){return this.toUpperCamelCaseWithSpace(e)+"::"+this.toUpperCamelCaseWithSpace(t)},n.toUpperCamelCaseWithSpace=function(e){var t=e.replace(/[-_\s.]+(.)?/g,(function(e,t){return t?" "+t.toUpperCase():""}));return t.substr(0,1).toUpperCase()+t.substr(1)},n.getEdaType=function(e){switch(e){case mi.INTERSTITIAL:return"interstitial";case mi.PRE_ROLL:return"pre_roll";case mi.REWARDED:return"rewarded_video";default:return"unknown"}}}(GameCore.Analytics.BaseAnalytics),function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).startGame=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.auth.requestToken();case 3:return e.next=5,n.storage.syncStore();case 5:return n.configureRollbar(),e.next=8,n.detectGameMode();case 8:n.initGoogleAnalytics(),n.analytics.event(Dt._.LOAD_START),n.scene.launch(ui.C.GLOBAL_SCENE),n.scene.start(ui.C.LOAD_SCENE),n.analytics.pageview(ui.C.LOAD_SCENE),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("BootScene: ",e.t0);case 18:return e.prev=18,n.facebook.progressLoading.finishLoadingProgressFbBootScene(),n.scene.sleep(ui.C.BOOT_SCENE),e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[0,15,18,22]])}))),n}(0,s.Z)(t,e);var n=t.prototype;return n.create=function(){this.facebook.progressLoading.loadingProgressFbBootScene(),this.startGame()},n.configureRollbar=function(){if(this.rollbar){var e=this.player.getPlayer();this.rollbar.configure({payload:{person:{id:e.playerId,name:e.name}}})}},n.detectGameMode=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.dispatch((0,ai.qF)());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.initGoogleAnalytics=function(){},t}(Phaser.Scene)),Ei=yi,Si=n(149),Ti=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).run=function(){n.scene.switch(ui.C.GAME_SCENE)},n}(0,s.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on("wake",this.run),this.events.on("resume",this.run),this.events.on("create",this.run)},n.create=function(){e.prototype.create.call(this)},t}(Si.Z),Ai=Ti,Ci=n(102),bi=n(492),Ii=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="LoadResourceFail",i.message=t||"Load resource fail",i.payload=n,i}return(0,s.Z)(t,e),t}((0,x.Z)(Error)),wi=n(40),xi=n(146),_i=n(145),Oi=n(479),Pi=n(228),ki=n(118),Li=function(e){try{var t=(0,gi.f)(e),n=window.game.player,i=t.entryPointData||{},a=i.playerId,r=i.playerName,s=i.playerPhoto;return n.getPlayer().playerId===a?_i.U:new Oe.Z(a,r,s).toObject()}catch(o){return console.warn(o),_i.U}},Di=function(){return function(e){try{window.game.facebook.getTournamentAsync().then((function(t){e((0,Oi.li)(t))})).catch((function(e){console.warn(e)}))}catch(t){console.warn(t)}}},Ri=function(){return function(e,t){try{var n=t(),i=(0,gi.f)(n),a=window.game.player,r=a.getPlayer(),s=i.contextId,o=(i.entryPointData||{}).playerId,c=r.playerId===o,u=Li(n);c||a.updateConnectedPlayers([u]);var l=u.playerId;e((0,Oi.hJ)(s,l,!0))}catch(h){throw new Error("processInviteMode: "+h)}}},Bi=function(){return function(e,t){try{var n=t(),i=(0,gi.f)(n),a=window.game.player.getPlayer(),r=i.entryPointData||{},s=r.matchId,o=r.opponentId,c=r.playerId;e(a.playerId===c?(0,Oi.Lq)(s,o):(0,Oi.Lq)(s,c))}catch(u){throw new Error("processChallengeFriendMode: "+u)}}},Ni=function(){return function(e,t){try{var n=t(),i=(0,gi.f)(n).entryPointData||{},r=i.playerId,s=i.playerScore,o={score:s,level:0};e((0,Pi.Q0)(r,o));var c=Li(n),u=(0,a.Z)({},c,{score:s});e((0,Oi.b6)(u))}catch(l){throw new Error("processMatchingGroupMode: "+l)}}},Mi=function(){return function(e){try{e((0,Oi.rq)())}catch(t){throw new Error("processNewUserMode: "+t)}}},Gi=n(478),Ui=n(57),Fi=n(46),Zi=n(464),Hi="How about diving into the game for a relaxing experience?",Wi=GameCore.Configs.Notification.DailyNotificationMessages,zi=void 0===Wi?{}:Wi,Yi=function(){function e(){}e.sendNewUserNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendNewUserNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendDailyNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getInstance(),e.abrupt("return",t.sendDailyNotificationInstance());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e.sendTestDailyNotification=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getInstance();case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.sendNewUserNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.game,n=t.player,i=t.facebook,a=t.rollbar,e.prev=1,n.getPlayerIsNew()){e.next=5;break}return e.abrupt("return");case 5:if(n.getPlayerASID()){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,FBInstant.player.getDataAsync(["isNotificationFirstSent"]);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:if(r=e.t0,!0!==r.isNotificationFirstSent){e.next=17;break}return e.abrupt("return");case 17:return s={message:Hi,delayTime:14400,type:Zi.Z.NEW_USER_NOTIFICATION},e.next=20,i.sendNotificationAsync(s);case 20:FBInstant.player.setDataAsync({isNotificationFirstSent:!0}),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(1),a.sendException(e.t1);case 26:case"end":return e.stop()}}),e,null,[[1,23]])})));return function(){return e.apply(this,arguments)}}(),t.sendDailyNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=window.game.rollbar,e.prev=1,n=new Date,i=n.getDay(),e.t0=i,e.next=0===e.t0?7:1===e.t0?10:2===e.t0?13:3===e.t0?16:4===e.t0?19:22;break;case 7:return e.next=9,this.sendMondayNotification();case 9:return e.abrupt("break",22);case 10:return e.next=12,this.sendTuesdayNotification();case 12:return e.abrupt("break",22);case 13:return e.next=15,this.sendWednesdayNotification();case 15:return e.abrupt("break",22);case 16:return e.next=18,this.sendThursdayNotification();case 18:return e.abrupt("break",22);case 19:return e.next=21,this.sendFridayNotification();case 21:return e.abrupt("break",22);case 22:return e.next=24,this.sendSaturdayNotification();case 24:return e.next=26,this.sendSundayNotification();case 26:e.next=31;break;case 28:e.prev=28,e.t1=e.catch(1),t.sendException(e.t1);case 31:case"end":return e.stop()}}),e,this,[[1,28]])})));return function(){return e.apply(this,arguments)}}(),t.sendMondayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=zi.MONDAY)?a:Hi,delayTime:86400,type:Zi.Z.MONDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendTuesdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=zi.TUESDAY)?a:Hi,delayTime:86400,type:Zi.Z.TUESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendWednesdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=zi.WEDNESDAY)?a:Hi,delayTime:86400,type:Zi.Z.WEDNESDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendThursdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=zi.THURSDAY)?a:Hi,delayTime:86400,type:Zi.Z.THURSDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendFridayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r={message:null!=(a=zi.FRIDAY)?a:Hi,delayTime:86400,type:Zi.Z.FRIDAY_NOTIFICATION},e.next=5,n.sendNotificationAsync(r);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),i.sendException(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t.sendSaturdayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(6,10),s={message:null!=(a=zi.SATURDAY)?a:Hi,delayTime:r,type:Zi.Z.SATURDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.sendSundayNotification=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,a,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.game,n=t.facebook,i=t.rollbar,e.prev=1,r=this.findDelayTimeForNextDay(0,10),s={message:null!=(a=zi.SUNDAY)?a:Hi,delayTime:r,type:Zi.Z.SUNDAY_NOTIFICATION},e.next=6,n.sendNotificationAsync(s);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i.sendException(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),t.findDelayTimeForNextDay=function(e,t){if(e<0||e>6)throw new Error("Invalid day for notification");if(t<0||t>23)throw new Error("Invalid hour for notification");var n=Date.now(),i=new Date(n).getDay(),a=new Date(n).getHours(),r=e,s=t;if(i===r&&a>=s){var o=3600*(168-a+s);if(o>604800)throw new Error("Notification delay time is more than 7 days");return o}var c=r<i?7-i+r:r-i;s<a&&c--;var u=3600*(24*c+(s<a?24-a+s:s-a));if(u>604800)throw new Error("Notification delay time is more than 7 days");return u},t.sendTestDailyNotificationInstance=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,a,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={0:"SUNDAY",1:"MONDAY",2:"TUESDAY",3:"WEDNESDAY",4:"THURSDAY",5:"FRIDAY",6:"SATURDAY"},e.prev=1,a=Hi,!(t<0||t>6)){e.next=5;break}throw new Error("Invalid day for notification. Day must be between 0 (Sunday) and 6 (Saturday)");case 5:return a=null!=(i=zi[n[t]])?i:Hi,r={message:a,delayTime:300,type:Zi.Z.GENERIC_NOTIFICATION},e.next=9,window.game.facebook.sendNotificationAsync(r);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),e}();Yi._instance=void 0;var Vi=Yi,Ki=GameCore.Configs.Notification.ApiUrl,ji=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.playerId,e.next=3,(0,Ee.v)("players/"+n,t,{},Ki,10);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ji=n(489),Xi=n(490),qi=n(491),Qi=GameCore.Configs,$i=Qi.AppId,ea=Qi.Notification,ta=Qi.Gameplay,na=GameCore.Utils.Hash,ia=na.decodeLZWCompress,aa=na.lzwDecompress,ra=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).handleFBInstantGameStarted=function(){window.__fbGameReady=!0,window.__fbPlatform=FBInstant.getPlatform(),n.player.requestConnectedPlayers()},n.processAfterUpdatePlayerProfile=function(){ea.Enable&&(n.updatePlayerProfileToNotificationService(),Vi.sendNewUserNotification(),Vi.sendDailyNotification())},n.startGame=function(){n.analytics.event(Dt._.APP_READY),n.storage.dispatch((0,Gi.I)(ui.C.LOAD_SCENE)),n.storage.dispatch((function(e,t){var n=window.game,i=n.player,a=n.analytics,r=n.globalScene;try{var s=t(),o=(0,gi.f)(s),c=(0,gi.F)(s),u=i.getPlayer(),l=(o.entryPointData||{}).type;if(u.isUserNew&&a.event(Dt._.NEW_USER),c===ki.kC)return void e(Di());if(c===ki.jt){if(l===xi.W6)return void e(Ri());if(l===xi.Sb)return void e(Bi())}if(c===ki.ey)return void e(Ni());if(u.isUserNew)return void e(Mi());if(c===ki.oN)return void e((0,Oi.rq)());r.events.emit(ui.K.SWITCH,ui.C.DASHBOARD_SCENE)}catch(h){r.events.emit(ui.K.SWITCH,ui.C.DASHBOARD_SCENE),console.warn(h)}}))},n.handleLoadMusicCompleted=function(){n.audio.initMusic(M.BACKGROUND.KEY),!!n.game.player.getPlayerSetting("music")&&n.audio.playMusic()},n}(0,s.Z)(t,e);var n=t.prototype;return n.preload=function(){var e=this;this.facebook.progressLoading.loadingProgressFbLoadScene(),this.analytics.event(Dt._.SCREEN_OPEN,{screen_name:"LoadScene"}),this.load.on("progress",(function(t){e.facebook.progressLoading.onProgress(t)})),this.load.on(Phaser.Loader.Events.FILE_LOAD_ERROR,(function(e){var t=new Ii("Load resources at LoadScene failed.");console.warn("LoadScene: ",t,e)}));var t=this.theme.getCurrentThemeResources(),n=t.backgroundKey,i=t.backgroundFile,a=t.cardFaceKey,r=t.cardFaceTexture,s=t.cardFaceJSON;this.theme.updateCurrentCardStyle(),this.load.image(n,i),this.load.atlas({key:a,textureURL:r,atlasURL:s}),this.load.atlas({key:wi.Z.DEFAULT.KEY,textureURL:wi.Z.DEFAULT.TEXTURE,atlasURL:wi.Z.DEFAULT.JSON}),this.load.multiatlas({key:wi.Z.EFFECTS.KEY,path:wi.Z.EFFECTS.PATH,atlasURL:wi.Z.EFFECTS.JSON});var o=this.lang.getCurrentLanguage();this.load.atlas({key:wi.Z.GAMEPLAY_DEFAULT.KEY,textureURL:wi.Z.GAMEPLAY_DEFAULT[o].TEXTURE,atlasURL:wi.Z.GAMEPLAY_DEFAULT[o].JSON}),this.load.atlas({key:wi.Z.CARD_BACK.KEY,textureURL:wi.Z.CARD_BACK.TEXTURE,atlasURL:wi.Z.CARD_BACK.JSON}),this.load.atlas({key:wi.Z.HOW_TO_PLAY.KEY,textureURL:wi.Z.HOW_TO_PLAY.TEXTURE,atlasURL:wi.Z.HOW_TO_PLAY.JSON}),this.load.atlas({key:wi.Z.THEME_PREVIEW.KEY,textureURL:wi.Z.THEME_PREVIEW.TEXTURE,atlasURL:wi.Z.THEME_PREVIEW.JSON}),this.loadPrebuiltLevels(),this.loadDynamicLevels(),this.loadJourneyLevels(),this.textStyler.addFont({type:"local",fontType:"woff",fontName:Ui.Z.FONT_FAMILY}),this.load.atlas({key:Ui.Z.ATLAS.KEY,textureURL:Ui.Z.ATLAS.TEXTURE,atlasURL:Ui.Z.ATLAS.JSON}),this.load.bitmapFont(Ui.Z.PRIMARY.KEY,Ui.Z.PRIMARY[o].TEXTURE,Ui.Z.PRIMARY[o].DATA),this.load.bitmapFont(Ui.Z.BOLD.KEY,Ui.Z.BOLD[o].TEXTURE,Ui.Z.BOLD[o].DATA),this.player.updateData().then(this.processAfterUpdatePlayerProfile).catch((function(e){console.warn("player.updateData: ",e)}))},n.loadBitmapFontFromAtlas=function(e,t,n,i,a,r){var s=this,o=e+"_data";return this.load.xml(o,i),this.load.once(Phaser.Loader.Events.COMPLETE,(function(){!1===Phaser.GameObjects.BitmapText.ParseFromAtlas(s,e,t,n,o,a,r)&&console.warn("Can't add bitmap font "+e)})),this.load},n.loadPrebuiltLevels=function(){var e=this,t=Ji.Z.ONE_SUIT,n=Ji.Z.TWO_SUIT,i=Ji.Z.FOUR_SUIT;bn()(t).forEach((function(t){e.load.text(t.KEY,t.PATH)})),bn()(n).forEach((function(t){e.load.text(t.KEY,t.PATH)})),bn()(i).forEach((function(t){e.load.text(t.KEY,t.PATH)}))},n.loadDynamicLevels=function(){var e=Xi.Z.ONE_SUIT,t=Xi.Z.TWO_SUIT,n=Xi.Z.FOUR_SUIT;this.load.text(e.KEY,e.PATH),this.load.text(t.KEY,t.PATH),this.load.text(n.KEY,n.PATH)},n.loadJourneyLevels=function(){var e=qi.Z.TEST_LEVELS;this.load.text(e.KEY,e.PATH)},n.initNewUserEasyGame=function(){-1===this.player.getCustomData("newUserEasyGameCount")&&(this.player.setMultiCustomData({newUserEasyGameCount:ta.NewUserEasyGameCount}),console.log("Init new user's easy game count"))},n.create=function(){this.audio.initSound(),this.analytics.event(Dt._.LOAD_COMPLETE),this.facebook.on("startgame",this.handleFBInstantGameStarted),this.facebook.gameStarted(),this.decompressPrebuiltLevels(),this.decompressDynamicLevels(),this.decompressJourneyLevels(),this.setupGlobalScene(),this.lazyLoadResource(),this.handleShowAdWhenStartGame(),this.initNewUserEasyGame(),this.startGame()},n.updatePlayerProfileToNotificationService=function(){var e=this.player.getPlayer(),t=e.playerId,n=e.name,i=e.photo,a=e.locale,r=e.ASID,s={appId:$i,playerId:t,name:n,photo:i,locale:a,ASID:r};console.info("\ud83d\ude80 > profileData",s),ji(s)},n.setupGlobalScene=function(){var e=this.scene.get(ui.C.GLOBAL_SCENE);e instanceof bi.Z&&e.setup()},n.lazyLoadResource=function(){var e=this;setTimeout((function(){e.scene.wake(),e.loadAllBackgrounds(),e.loadAllCardAtlas(),e.load.start(),e.load.once(Phaser.Loader.Events.COMPLETE,(function(){e.scene.sleep()}))}),500)},n.loadSounds=function(){var e=Phaser.Loader.Events.FILE_KEY_COMPLETE;this.load.once(e+"audio-"+M.BACKGROUND.KEY,this.handleLoadMusicCompleted);for(var t=Fi.Z,n=0,i=ne()(Fi.Z);n<i.length;n++){var a=t[i[n]];""!=a&&this.load.audio(a,[M.EFFECTS.PATH+a+".ogg",M.EFFECTS.PATH+a+".mp3"])}this.load.start()},n.loadAllCardAtlas=function(){var e=this;this.theme.getCardStyleAtlasConfigs().forEach((function(t){var n=t.key,i=t.textureURL,a=t.atlasURL;e.textures.exists(n)||e.load.atlas(n,i,a)}))},n.loadAllBackgrounds=function(){var e=this;this.theme.getBackgroundConfigs().forEach((function(t){var n=t.key,i=t.url;e.textures.exists(n)||e.load.image(n,i)}))},n.decompressPrebuiltLevels=function(){var e=this,t=Ji.Z.ONE_SUIT,n=Ji.Z.TWO_SUIT,i=Ji.Z.FOUR_SUIT;bn()(t).forEach((function(t){var n=e.cache.text.get(t.KEY),i=ia(n),a=aa(i);t.DECOMPRESSED_DATA=JSON.parse(a)})),bn()(n).forEach((function(t){var n=e.cache.text.get(t.KEY),i=ia(n),a=aa(i);t.DECOMPRESSED_DATA=JSON.parse(a)})),bn()(i).forEach((function(t){var n=e.cache.text.get(t.KEY),i=ia(n),a=aa(i);t.DECOMPRESSED_DATA=JSON.parse(a)}))},n.decompressDynamicLevels=function(){var e=Xi.Z.ONE_SUIT,t=Xi.Z.TWO_SUIT,n=Xi.Z.FOUR_SUIT,i=this.cache.text.get(e.KEY),a=ia(i),r=aa(a);e.DECOMPRESSED_DATA=JSON.parse(r);var s=this.cache.text.get(t.KEY),o=ia(s),c=aa(o);t.DECOMPRESSED_DATA=JSON.parse(c);var u=this.cache.text.get(n.KEY),l=ia(u),h=aa(l);n.DECOMPRESSED_DATA=JSON.parse(h)},n.decompressJourneyLevels=function(){var e=qi.Z.TEST_LEVELS,t=this.cache.text.get(e.KEY),n=ia(t),i=aa(n);e.DECOMPRESSED_DATA=JSON.parse(i)},n.handleShowAdWhenStartGame=function(){var e=this;if(GameCore.Configs.Ads.InterstitialAdOptions.showWhenStartGame){var t={en:"Initializing...",ru:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f...",pt:"Inicializando...",es:"Inicializando...",ar:"\u062a\u0647\u064a\u0626\u0629...",hi:"\u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930 \u0930\u0939\u093e \u0939\u0948...",zh:"\u521d\u59cb\u5316\u4e2d...",tr:"Ba\u015flat\u0131l\u0131yor...",ja:"\u521d\u671f\u5316\u4e2d...",fr:"Initialisation en cours...",id:"Menginisialisasi...",de:"Initialisierung...",it:"Inizializzazione..."}[this.lang.getCurrentLanguage()||""]||"",n=document.createElement("div");n.id="wait-ads-mask";var i=document.createElement("div");i.id="wait-ads-content",n.appendChild(i);var a=document.createElement("div");a.id="wait-ads-dual-ring",i.appendChild(a);var s=document.createElement("div");s.id="wait-ads-text",s.innerHTML=t,i.appendChild(s),document.body.appendChild(n),this.audio.muteAll(),setTimeout((0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.audio.stopMusic(),e.audio.muteAll(),t.next=5,e.ads.preloadInterstitialAdAsync();case 5:return t.next=7,e.ads.showInterstitialAdAsync();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:return t.prev=11,n.remove(),e.audio.unmuteAll(),e.audio.playMusic(),t.finish(11);case 16:case"end":return t.stop()}}),t,null,[[0,9,11,16]])}))),0)}},t}(Phaser.Scene),sa=ra,oa=n(677),ca=n(502),ua=n(19),la=function(e){function t(t,n){var i;return(i=e.call(this,t,0,0)||this).scene=void 0,i.config=void 0,i.mainButton=void 0,i.subButtons=void 0,i.isEnabled=void 0,i.scene=t,i.config=n,i.subButtons=[],i.isEnabled=!1,i.createMainButton(),i.createSubButtons(),i.alignButtons(),i}(0,s.Z)(t,e);var n=t.prototype;return n.createMainButton=function(){var e=this;this.mainButton=new ca.Z(this.scene,this.config.main.label),this.mainButton.onClick=function(){e.isEnabled=!e.isEnabled,e.alignButtons(),e.config.main.callback()},this.mainButton.setPosition(0,.5*this.mainButton.button.height),this.add(this.mainButton)},n.createSubButtons=function(){var e=this;this.config.subButtons.forEach((function(t){var n=new ca.Z(e.scene,t.label.text);n.setPosition(0,0),n.onClick=function(){t.callback(),n.setText(t.label.text)},e.add(n),e.subButtons.push(n)}))},n.alignButtons=function(){for(var e=this.mainButton,t=e.x,n=e.y,i=this.mainButton.button,a=i.height,r=i.width,s=0;s<this.subButtons.length;s++){var o=this.subButtons[s];o.setPosition(t+r/4,n+a*(s+1)),o.setDisabled(!this.isEnabled),o.setVisible(this.isEnabled)}},n.getHeight=function(){if(!this.isEnabled)return this.mainButton.button.height;var e=this.mainButton.button.height;return e+e*this.subButtons.length},t}(Phaser.GameObjects.Container),ha=la,da=function(e){function t(t){var n;return(n=e.call(this,t,0,0)||this).scene=void 0,n.groupButtons=void 0,n.missionConfigs=[],n.scene=t,n.createGroups(),n.alignGroups(),n.scene.add.existing((0,ua.Z)(n)),n}(0,s.Z)(t,e);var n=t.prototype;return n.createGroups=function(){var e=this;this.groupButtons=[];["finishRun","clearColumn","finishRunNoStock","win"].forEach((function(t){var n={name:t,targetValue:1,suitSize:"one",difficulty:"easy"};e.missionConfigs.push(n)})),this.missionConfigs.forEach((function(t){var n={text:"Target: "+t.targetValue},i={text:"SuitSize: "+t.suitSize},a={text:"Difficulty: "+t.difficulty},r=[];"win"!==t.name&&r.push({label:n,callback:function(){t.targetValue+=1,t.targetValue>5&&(t.targetValue=1),n.text="Target: "+t.targetValue}}),r.push({label:i,callback:function(){"one"===t.suitSize?t.suitSize="two":"two"===t.suitSize?t.suitSize="four":t.suitSize="one",i.text="SuitSize: "+t.suitSize}},{label:a,callback:function(){"easy"===t.difficulty?t.difficulty="medium":"medium"===t.difficulty?t.difficulty="hard":t.difficulty="easy",a.text="Difficulty: "+t.difficulty}},{label:{text:"Start"},callback:function(){e.scene.scene.switch(ui.C.GAME_SCENE);var n=e.scene.scene.get(ui.C.GAME_SCENE);n.events.once(Phaser.Scenes.Events.WAKE,(function(){var e="clear1Column";"clearColumn"===t.name?e="clear"+t.targetValue+"Column":"finishRun"===t.name?e="finish"+t.targetValue+"Run":"finishRunNoStock"===t.name?e="finish"+t.targetValue+"RunNoStock":"win"===t.name&&(e="win"),n.handlePlayJourney({type:"journey",missionId:e,suitSize:t.suitSize,difficulty:t.difficulty})}))}});var s=new ha(e.scene,{main:{label:t.name,callback:function(){return e.alignGroups()}},subButtons:r});e.add(s),e.groupButtons.push(s)}))},n.alignGroups=function(){var e=0;this.groupButtons.forEach((function(t){t.setPosition(0,e),e+=t.getHeight()}))},t}(Phaser.GameObjects.Container),fa=da,pa=function(e){function t(){for(var t,n,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=e.call.apply(e,v()(t=[this]).call(t,a))||this).journeyTools=void 0,n.backToGameScene=void 0,n.run=function(){},n}(0,s.Z)(t,e);var n=t.prototype;return n.preload=function(){this.events.on(Phaser.Scenes.Events.WAKE,this.run),this.events.on(Phaser.Scenes.Events.CREATE,this.run)},n.create=function(){var t=this;e.prototype.create.call(this),this.journeyTools=new fa(this),Phaser.Display.Align.In.TopCenter(this.journeyTools,this.gameZone),this.backToGameScene=new ca.Z(this,"Back to Game Scene"),this.backToGameScene.onClick=function(){t.scene.switch(ui.C.GAME_SCENE)},Phaser.Display.Align.In.BottomLeft(this.backToGameScene,this.gameZone)},t}(Si.Z),ga=pa,ma=n(512),va=["Enable"],ya=function(e){function t(){return e.apply(this,arguments)||this}(0,s.Z)(t,e);var o=t.prototype;return o.boot=function(){var t=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.prototype.boot.call(this),this.addExtraGameObjectMethods(),this.addExtraFBInstantFunctions(),this.addPlugins(),t.next=6,this.addDevPlugins();case 6:return t.next=8,this.initAdsAsync();case 8:this.addScenes(),this.addDevScenes(),this.initWorld(),this.initStorage(),this.initLanguage(),this.initVisibilityChangeHandler(),this.initUtils(),this.initRollbar(),this.initConsole(),this.initDebugger(),this.initStatistics(),this.initParticleEditor(),this.initProfilerPlugin(),this.initAdaptivePerformance(),this.initCanvasRecorderPlugin();case 23:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.start=function(){e.prototype.start.call(this)},o.addExtraGameObjectMethods=function(){var e=new g(this);e.addKillRevive(),e.addKillReviveGroup(),e.addDrawDebugBox(),e.addSetWorldSize(),e.addSetWorldSizeForContainer(),e.addGetWorldPosition(),e.addHighQuality(),e.addSetLineHeightForBitmapText()},o.addExtraFBInstantFunctions=function(){var e=new h.Z(this.facebook);this.facebook.getLocale=e.getLocale,this.facebook.shareAsync=e.shareAsync,this.facebook.inviteAsync=e.inviteAsync,this.facebook.switchAsync=e.switchAsync,this.facebook.chooseAsync=e.chooseAsync,this.facebook.createAsync=e.createAsync,this.facebook.sendMessage=e.sendMessage,this.facebook.getContextID=e.getContextID,this.facebook.getPlayerToken=e.getPlayerToken,this.facebook.matchPlayerAsync=e.matchPlayerAsync,this.facebook.getContextPlayers=e.getContextPlayers,this.facebook.setLoadingProgress=e.setLoadingProgress,this.facebook.attemptToAddShortcut=e.attemptToAddShortcut,this.facebook.attemptToSubscribeBot=e.attemptToSubscribeBot,this.facebook.postSessionScoreAsync=e.postSessionScoreAsync,this.facebook.getRewardedVideoAsync=e.getRewardedVideoAsync,this.facebook.sendNotificationAsync=e.sendNotificationAsync,this.facebook.getInterstitialAdAsync=e.getInterstitialAdAsync,this.facebook.isSupportedAPI=e.isSupportedAPI,e.injectTournament(),this.facebook.progressLoading=new p(this)},o.addPlugins=function(){this.plugins.install("Storage",Bn,!0,"storage"),this.plugins.install("Rollbar",Pt,!0,"rollbar"),this.plugins.install("AdsManager",k,!0,"ads"),this.plugins.install("AuthManager",ee,!0,"auth"),this.plugins.install("AudioManager",H,!0,"audio"),this.plugins.install("ThemeManager",jn,!0,"theme"),this.plugins.install("WorldManager",ti,!0,"world"),this.plugins.install("PlayerManager",et,!0,"player"),this.plugins.install("ProfileManager",pt,!0,"profile"),this.plugins.install("LanguageManager",pi,!0,"lang"),this.plugins.install("AnalyticsManager",R,!0,"analytics"),this.plugins.install("AdaptivePerformance",le,!0,"performance"),this.plugins.install("VisibilityChangeHandler",Xn,!0,"visibility"),this.plugins.installScenePlugin("textStyler",Fn,"textStyler"),this.plugins.installScenePlugin("ScreenManager",Ut,"screen"),this.plugins.installScenePlugin("FrameCapture",re,"frameCapture"),window.SpinePlugin&&this.plugins.installScenePlugin("SpinePlugin",SpinePlugin,"spine"),this.storage=this.plugins.get("Storage"),this.rollbar=this.plugins.get("Rollbar"),this.ads=this.plugins.get("AdsManager"),this.auth=this.plugins.get("AuthManager"),this.audio=this.plugins.get("AudioManager"),this.world=this.plugins.get("WorldManager"),this.player=this.plugins.get("PlayerManager"),this.lang=this.plugins.get("LanguageManager"),this.profile=this.plugins.get("ProfileManager"),this.analytics=this.plugins.get("AnalyticsManager"),this.performance=this.plugins.get("AdaptivePerformance"),this.visibility=this.plugins.get("VisibilityChangeHandler"),this.plugins.install("KawaseBlurFilterPlugin",ci.Z)},o.addDevPlugins=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,a,r,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([n.e(7),n.e(942)]).then(n.bind(n,678));case 4:return t=e.sent.default,e.next=7,Promise.all([n.e(498),n.e(739),n.e(530)]).then(n.bind(n,679));case 7:return i=e.sent.default,e.next=10,n.e(401).then(n.bind(n,680));case 10:return a=e.sent.default,e.next=13,Promise.all([n.e(498),n.e(123)]).then(n.bind(n,681));case 13:return r=e.sent.default,e.next=16,Promise.all([n.e(498),n.e(803)]).then(n.bind(n,682));case 16:return s=e.sent.default,e.next=19,Promise.all([n.e(498),n.e(616),n.e(613)]).then(n.bind(n,683));case 19:o=e.sent.default,this.plugins.install("Console",t,!0,"console"),this.plugins.install("Debugger",i,!0,"debugger"),this.plugins.install("Statistics",a,!0,"statistics"),this.plugins.install("Profiler",r,!0,"profiler"),this.plugins.install("ParticleEditor",s,!0,"particle-editor"),this.plugins.install("CanvasRecorder",o,!0,"canvasRecorder"),this.eruda=this.plugins.get("Console"),this.debugger=this.plugins.get("Debugger"),this.statistics=this.plugins.get("Statistics"),this.profiler=this.plugins.get("Profiler"),this.particleEditor=this.plugins.get("ParticleEditor"),this.canvasRecorder=this.plugins.get("CanvasRecorder");case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.addScenes=function(){this.scene.add(ui.C.BOOT_SCENE,Ei,!0),this.scene.add(ui.C.LOAD_SCENE,sa,!1),this.scene.add(ui.C.GAME_SCENE,Ci.Z,!1),this.scene.add(ui.C.DASHBOARD_SCENE,Ai,!1),this.scene.add(ui.C.JOURNEY_TEST_SCENE,ga,!1),this.scene.add(ui.C.JOURNEY_SCENE,ma.Z,!1),this.scene.add(ui.C.GLOBAL_SCENE,bi.Z,!1)},o.addDevScenes=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(GameCore.Utils.Valid.isDebugger()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(638).then(n.bind(n,684));case 4:t=e.sent.default,this.scene.add(ui.C.TEST_SCENE,t,!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.initAdsAsync=function(){var e=(0,r.Z)(l().mark((function e(){var t,i,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=GameCore.Configs.Ads,oa.Z.setGame(this),i=oa.Z,!t.Mockup.Enable){e.next=8;break}return e.next=6,n.e(131).then(n.bind(n,685));case 6:r=e.sent.default,i=r;case 8:s=(0,a.Z)({},t.InterstitialAdOptions),this.ads.configure(i,{enabled:t.Enabled,calculateSafeAreaBottom:t.CalculateSafeAreaBottom,enableRewardVideoResetInterstitial:t.EnableRewardVideoResetInterstitial,interstitialAdOptions:s,rewardAdOptions:t.RewardAdOptions,bannerAdOptions:t.BannerAdOptions});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.initWorld=function(){var e=GameCore.Configs.Game,t=e.AutoResize,n=e.PortraitRatio,i=e.PortraitWidth,a=e.PortraitHeight,r=e.LandscapeRatio,s=e.LandscapeWidth,o=e.LandscapeHeight,c=t,u=e.DisableLandscape,l=e.FullSizeOnLandscape,h=n,d=i,f=a,p=r,g=s,m=o;console.info("\ud83d\ude80 > portraitRatio",h),console.info("\ud83d\ude80 > landscapeRatio",p),this.world.configure({autoResize:c,portraitRatio:h,portraitWidth:d,portraitHeight:f,landscapeRatio:p,landscapeWidth:g,landscapeHeight:m,disableLandscape:u,fullSizeOnLandscape:l}),this.world.resize(e.ForcePixelRatio)},o.initStorage=function(){var e=new oi(this);this.storage.setInitiator(e)},o.initLanguage=function(){var e=this.facebook.getLocale();this.lang.configure({locale:e,upperCaseText:!1})},o.initVisibilityChangeHandler=function(){this.visibility.configure()},o.initUtils=function(){this.handlePauseAudio(),this.addPipelines(),this.removeUnusedPipelines()},o.initConsole=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Debugger.ShowConsole&&this.eruda.configure({tool:["console","info"],defaults:{theme:"Dark"}}))},o.initDebugger=function(){if(GameCore.Utils.Valid.isDebugger()){var e=GameCore.Configs.Debugger,t=e.ShowInspector,n=e.ShowMonitoring;(t||n)&&this.debugger.configure(GameCore.Configs.Debugger)}},o.initStatistics=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.Statistics.Enable&&this.statistics.configure(GameCore.Configs.Statistics))},o.initParticleEditor=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ParticleEditor.Enable&&this.particleEditor.configure(GameCore.Configs.ParticleEditor))},o.initProfilerPlugin=function(){GameCore.Utils.Valid.isDebugger()&&(GameCore.Configs.ProfilerPlugin.Enable&&this.profiler.configure())},o.initAdaptivePerformance=function(){var e=GameCore.Configs.Performance,t=e.Enable,n=(0,i.Z)(e,va);if(t){var r=this.world.getPixelRatio();this.performance.configure((0,a.Z)({pixelRatio:r},n)),this.performance.active()}},o.initCanvasRecorderPlugin=function(){var e=this;if(GameCore.Utils.Valid.isDebugger()){var t=GameCore.Configs.CanvasRecorder;if(t.Enable){var n=t.Options,i=n.Type,a=n.Quality,s=n.RecordFps,o=n.SyncFps;this.canvasRecorder.configure({type:i,quality:a,syncFps:o,recordFps:s});var u=document.querySelector("canvas");if(!u)return console.error("Canvas not found");this.canvasRecorder.setCanvas(u);var h=this.canvasRecorder.getOptions(),d=this.canvasRecorder.waitNextFrame;this.canvasRecorder.waitNextFrame=(0,r.Z)(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.syncFps){t.next=5;break}return e.loop.sleep(),t.abrupt("return",new(c())((function(t){e.events.once(Phaser.Core.Events.POST_RENDER,t),e.loop.lastTime=1e3/h.recordFps,e.loop.step()})));case 5:return e.loop.wake(),t.abrupt("return",d.call(e.canvasRecorder));case 7:case"end":return t.stop()}}),t)})))}}},o.initRollbar=function(){var e=GameCore.Configs.Rollbar.Enable;console.warn({isRollbarEnabled:e}),e&&this.rollbar.setup()},o.handlePauseAudio=function(){var e=this;this.sound.pauseOnBlur=!1,this.visibility.addEventVisible((function(){e.audio.playMusic(),e.audio.resumeAllSounds()})),this.visibility.addEventHidden((function(){e.audio.pauseMusic(),e.audio.pauseAllSounds()}))},o.addPipelines=function(){var e=this.renderer;e instanceof Phaser.Renderer.WebGL.WebGLRenderer&&e.pipelines.add("Grayscale",new li(this))},o.removeUnusedPipelines=function(){var e=this.renderer;if(e instanceof Phaser.Renderer.WebGL.WebGLRenderer){var t=e.pipelines,n=Phaser.Renderer.WebGL.Pipelines;if(n)[n.ROPE_PIPELINE,n.LIGHT_PIPELINE,n.POSTFX_PIPELINE,n.POINTLIGHT_PIPELINE,n.BITMAPMASK_PIPELINE].forEach((function(e){var n;null==(n=t.get(e))||n.destroy(),t.remove(e)}))}},t}(Phaser.Game),Ea=ya,Sa=GameCore.Configs.Debugger.ShowInspector,Ta={parent:"app",type:Phaser.AUTO,width:0,height:0,scale:{autoRound:!0},dom:{createContainer:!1},loader:{maxParallelDownloads:6,crossOrigin:"no-cros"},input:{gamepad:!1,keyboard:Sa,touch:{capture:!0},smoothFactor:1,activePointers:1,windowEvents:!1},disableContextMenu:!0,render:{pixelArt:!1,antialias:!0,antialiasGL:!0,transparent:!0,desynchronized:!1,powerPreference:"high-performance",clearBeforeRender:!1,roundPixels:!1},plugins:{global:[]}},Aa=setInterval((function(){window.__analyticsInitiated&&(window.__fbGameReady=!1,clearInterval(Aa),clearInterval(window.__fbInstantLoadingTimer),GameSDK.setLoadingProgress(30),gtag("event","app_initialize",{send_to:["GA"]}),function(){try{var e=new Ea(Ta);window.game=e}catch(t){console.warn("initGame: ",t)}}())}),50)},488:function(e,t,n){"use strict";n.d(t,{tu:function(){return x},aV:function(){return L}});var i=n(32),a=n(22),r=n(20),s=n.n(r),o=n(33),c=n.n(o),u=n(58),l=n.n(u),h=n(144),d="global",f="friend",p=GameCore.Configs,g=p.ApiHost,m=p.OtherHost,v=p.LeadersBoard,y=v.Prefix,E=v.LeaderboardId,S=v.Name,T=y+"/"+E+"/leaders",A=y+"/"+E+"/players",C=function(e){var t="";return E?(e===d?t=T:e===f&&(t=A),t):t},b=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a,r,o,u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c()(t).call(t,(function(e){return e.playerId})),r=GameCore.Utils.Object.keyBy(t,"playerId"),o=GameCore.Utils.String.params({playerIds:a}),e.next=5,(0,h.U)("players?"+o,{},g);case 5:return u=e.sent,l=c()(n=u.data).call(n,(function(e){var t=r[e.playerId];return(0,i.Z)({},e,{score:t.score,rank:t.rank,getScore:function(){return t.score},getFormattedScore:function(){return""},getTimestamp:function(){return(new Date).valueOf()},getRank:function(){return t.rank},getExtraData:function(){return t.extraData},getPlayer:function(){return{getName:function(){return e.name},getPhoto:function(){return e.photo},getID:function(){return e.playerId}}}})})),e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=(function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==E){e.next=3;break}return e.abrupt("return",I(t));case 3:return e.abrupt("return",w(t));case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=C(d)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,h.U)(i+"?"+a,{},m);case 8:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",b(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(S);case 4:return r=e.sent,e.next=7,r.getEntriesAsync(i,a);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),null==E){e.next=3;break}return e.abrupt("return",_(t));case 3:return e.abrupt("return",O(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),n=[],i=C(f)){e.next=5;break}return e.abrupt("return",n);case 5:return a=GameCore.Utils.String.params(t),e.next=8,(0,h.U)(i+"?"+a,{},m);case 8:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=12;break}return e.abrupt("return",n);case 12:return n=o,e.abrupt("return",b(n));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),i=(n=t).limit,a=n.offset,e.next=4,window.GameSDK.getLeaderboardAsync(S);case 4:return r=e.sent,e.next=7,r.getConnectedPlayerEntriesAsync(i,a);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=(function(){var e=(0,a.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==E){e.next=2;break}return e.abrupt("return",P(t));case 2:return e.abrupt("return",k());case 3:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,t){e.next=3;break}return e.abrupt("return",n);case 3:if(i=C(f)){e.next=6;break}return e.abrupt("return",n);case 6:return a=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(i+"?"+a,{},m);case 9:if(r=e.sent,!((o=(null==r?void 0:r.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",n);case 13:return e.next=15,b(o);case 15:return n=e.sent[0],e.abrupt("return",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),k=function(){var e=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(S);case 2:return t=e.sent,e.next=5,t.getPlayerEntryAsync();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,a.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.GameSDK.submitGameResultsAsync(n).catch((function(e){console.log(e)})),null==E){e.next=5;break}if(""!==window.game.auth.getToken()){e.next=4;break}return e.abrupt("return",l().reject("Not logged in"));case 4:return e.abrupt("return",D(t,n));case 5:return e.abrupt("return",R(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=(0,a.Z)(s().mark((function e(t,n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+E+"/players/"+t,{score:n},{},m);case 2:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=(0,a.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.GameSDK.getLeaderboardAsync(S);case 2:return n=e.sent,e.next=5,n.setScoreAsync(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},479:function(e,t,n){"use strict";n.d(t,{Lq:function(){return K},RM:function(){return j},b6:function(){return V},hJ:function(){return z},H:function(){return Y},rq:function(){return H},li:function(){return Z},Sl:function(){return Q}});var i=n(32),a=n(22),r=n(83),s=n.n(r),o=n(103),c=n.n(o),u=n(47),l=n.n(u),h=n(58),d=n.n(h),f=n(20),p=n.n(f),g=n(29),m=n(145),v=n(2),y=n(55),E=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidContextId",i.message=t||"This contextId is not valid",i.payload=n,i}return(0,v.Z)(t,e),t}((0,y.Z)(Error)),S=n(79),T=n(39),A=n(488),C=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="NewScoreIsBad",i.message=t||"The new score is bad",i.payload=n,i}return(0,v.Z)(t,e),t}((0,y.Z)(Error)),b=n(485),I=n(475),w=n(56),x=n(143),_=n(118),O=n(481),P=n(226),k=n(223),L=n(487),D=n(480),R=n(228),B=n(222),N=n(227),M=n(225),G=function(e){var t=e.contextId;if(""===t||"string"!==typeof t)throw new E(null,{contextId:t})},U=null,F=function(e){clearTimeout(U),U=setTimeout((function(){window.game.globalScene.screen.close(T.o4.NOTIFY_SCREEN)}),e)},Z=function(e){return function(t){try{if(t((0,D.Tb)()),e){var n=e.getPayload(),i=e.getID();if(n){var a=JSON.parse(n).leaderboardId;t((0,b.cQ)(i.toString(),a))}}t(X(_.kC))}catch(r){(0,w.tO)(r)}}},H=function(){return function(){var e=(0,a.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t((0,D.Tb)()),t(X(_.oN))}catch(n){(0,w.tO)(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(e,t){return void 0===e&&(e="10"),void 0===t&&(t=!1),function(n){try{n(z("reset",e,t))}catch(i){(0,w.tO)(i)}}},z=function(e,t,n){return void 0===t&&(t="10"),void 0===n&&(n=!1),function(){var i=(0,a.Z)(p().mark((function i(a){var r,s,o,c,u,l,h,d,f,g,v,y,A,C,b,x,O,P;return p().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,r=window.game,s=r.player,o=r.facebook,(c=r.globalScene).screen.open(T.o4.NOTIFY_SCREEN,{message:c.lang.Text.LOADING,loading:!0}),u=e,l=o.contextType,t||(h=GameCore.Configs.PlayerIdMock,d=GameCore.Configs.PlayerIdMock2,t=s.getPlayerId()===h?d:h),e){i.next=30;break}return i.next=9,o.chooseAsync();case 9:if(!1!==(u=i.sent)){i.next=18;break}if(n&&c.events.emit(S.K.SWITCH,S.C.DASHBOARD_SCENE),!B.Z.instance.autoPlaySingleMode){i.next=17;break}return i.next=15,Q();case 15:return a(H()),i.abrupt("return");case 17:return i.abrupt("return");case 18:return i.prev=18,i.next=21,window.game.facebook.getTournamentAsync();case 21:return f=i.sent,a(Z(f)),i.abrupt("return");case 26:i.prev=26,i.t0=i.catch(18);case 28:i.next=45;break;case 30:if(!t||t===m.U.playerId){i.next=43;break}return i.next=33,o.createAsync(t);case 33:if(!1!==(u=i.sent)){i.next=37;break}return n&&c.events.emit(S.K.SWITCH,S.C.DASHBOARD_SCENE),i.abrupt("return");case 37:if(!B.Z.instance.autoPlaySingleMode){i.next=42;break}return i.next=40,Q();case 40:return a(H()),i.abrupt("return");case 42:u||"reset"===e||(u=e);case 43:l=o.contextType,a((0,I._K)(u,l));case 45:return G({contextId:u}),g=s.getPlayerId(),v=s.getConnectedPlayers(),i.next=50,o.getContextPlayers(g);case 50:return y=i.sent,A=m.U,t!==A.playerId&&v[t]?A=v[t]:1===y.length&&(A=y[0]),a((0,R.$4)()),b=(C=A).playerId,x=C.name,O=C.photo,P={playerId:b,name:x,photo:O},i.next=58,a(X(_.jt,P));case 58:a((0,I._K)(u,l)),i.next=70;break;case 61:if(i.prev=61,i.t1=i.catch(0),!(i.t1 instanceof E)){i.next=65;break}return i.abrupt("return");case 65:if("USER_INPUT"!==(null==i.t1?void 0:i.t1.code)){i.next=67;break}return i.abrupt("return");case 67:if("INVALID_OPERATION"!==(null==i.t1?void 0:i.t1.code)){i.next=69;break}return i.abrupt("return");case 69:(0,w.tO)(i.t1);case 70:return i.prev=70,F(10),i.finish(70);case 73:case"end":return i.stop()}}),i,null,[[0,61,70,73],[18,26]])})));return function(e){return i.apply(this,arguments)}}()},Y=function(){return function(){var e=(0,a.Z)(p().mark((function e(t){var n,i,a,r,o,u,l,h,d,f,g,m,v,y,S,A,C;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window.game,i=n.player,a=n.facebook,(r=n.globalScene).screen.open(T.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,loading:!0}),o=i.getPlayerId(),u=i.getConnectedPlayerIds(100,0),l=i.getConnectedPlayers(100,0),0==(h=c()(u).call(u,(function(e){var t;return s()(t=B.Z.instance.friendsChallenged).call(t,e)<0&&e!=o}))).length&&(h.push.apply(h,u),B.Z.instance.friendsChallenged=[]),console.log({friendListCanBeChallenged:h}),d="",f="",g=a.contextType,m=null,h.length>0&&(v=Phaser.Math.RND.between(0,h.length-1),d=h[v],l[d]&&(m=l[d],B.Z.instance.friendsChallenged.push(d))),!d||"string"!==typeof d){e.next=18;break}return e.next=17,a.createAsync(d);case 17:f=e.sent;case 18:if(m&&f){e.next=22;break}return e.next=21,t(z());case 21:return e.abrupt("return");case 22:return G({contextId:f}),t((0,R.$4)()),S=(y=m).name,A=y.photo,C={playerId:d,name:S,photo:A},e.next=28,t(X(_.jt,C));case 28:t((0,I._K)(f,g)),F(100),e.next=38;break;case 32:if(e.prev=32,e.t0=e.catch(0),F(100),!(e.t0 instanceof E)){e.next=37;break}return e.abrupt("return");case 37:(0,w.tO)(e.t0);case 38:return e.prev=38,e.finish(38);case 40:case"end":return e.stop()}}),e,null,[[0,32,38,40]])})));return function(t){return e.apply(this,arguments)}}()},V=function(e){return function(){var t=(0,a.Z)(p().mark((function t(n){var i,a,r,s,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.facebook,r=i.globalScene,s=i.analytics,r.screen.open(T.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,loading:!0}),o=a.getContextID(),G({contextId:o}),s.event(g._.JOIN_GROUP,{group_id:o}),t.next=8,n(X(_.ey,e));case 8:t.next=17;break;case 10:if(t.prev=10,t.t0=t.catch(0),!(t.t0 instanceof E)){t.next=14;break}return t.abrupt("return");case 14:if("INVALID_OPERATION"!==(null==t.t0?void 0:t.t0.code)){t.next=16;break}return t.abrupt("return");case 16:(0,w.tO)(t.t0);case 17:return t.prev=17,F(100),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[0,10,17,20]])})));return function(e){return t.apply(this,arguments)}}()},K=function(e,t){return function(){var n=(0,a.Z)(p().mark((function n(i,a){var r,s,o,c,u,l,h,d,f,g,v,y,E,A,C;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r=window.game,s=r.player,o=r.profile,c=r.facebook,(u=r.globalScene).screen.open(T.o4.NOTIFY_SCREEN,{message:u.lang.Text.LOADING,loading:!0}),l=a(),h=s.getPlayerId(l),!((d=s.getConnectedPlayers(l)).length>0)||d[t]){n.next=10;break}return i($({mode:_.oN})),u.events.emit(S.K.SWITCH,S.C.GAME_SCENE),n.abrupt("return");case 10:return f=m.U,n.next=13,c.getContextPlayers(h);case 13:if(g=n.sent,t===h||t===f.playerId||!d[t]){n.next=18;break}f=d[t],n.next=26;break;case 18:if(1!==g.length){n.next=22;break}f=g[0],n.next=26;break;case 22:return n.next=24,o.requestProfiles([t]);case 24:(v=o.getProfiles())[t]&&(f=v[t]);case 26:return n.next=28,i((0,D.Pe)(e,f));case 28:if(l=a(),(0,k.B5)(l,{playerId:h})!==m.U.playerId){n.next=33;break}return n.next=33,i((0,D._8)(e));case 33:if(l=a(),(0,k.B5)(l,{playerId:h})===h||!d[t]){n.next=38;break}return i(W(t,!0)),n.abrupt("return");case 38:if((0,k.rl)(l)===e){n.next=42;break}return u.events.emit(S.K.SWITCH,S.C.DASHBOARD_SCENE),n.abrupt("return");case 42:y=(0,k.x0)(l),E=(0,k.pP)(l,{playerId:h}),A=c.getContextID(),C=c.contextType,i((0,I._K)(A,C)),window.isFinishingFriendMatch=!1,E||i($({mode:_.jt,status:y})),E&&(i($({mode:_.oN})),window.isFinishingFriendMatch=!0),u.events.emit(S.K.SWITCH,S.C.GAME_SCENE),n.next=56;break;case 53:n.prev=53,n.t0=n.catch(0),(0,w.tO)(n.t0);case 56:return n.prev=56,F(500),n.finish(56);case 59:case"end":return n.stop()}}),n,null,[[0,53,56,59]])})));return function(e,t){return n.apply(this,arguments)}}()},j=function(){return function(){var e=(0,a.Z)(p().mark((function e(t,n){var i,a,r,s,o,c,u,l,h,d,f,m,v,y,E,S,A;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=window.game,a=i.analytics,i.facebook,(r=i.globalScene).screen.open(T.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,loading:!0}),s=n(),o=(0,P.f)(s),c=(0,L.V)(s),u=c.level,l=void 0===u?0:u,h=c.score,d=void 0===h?0:h,f=c.moves,m=void 0===f?0:f,v=c.total_game,y=c.difficulty,E=c.time_played,S=c.success,A=c.suit_size,console.log((0,L.V)(s)),t(J(d)),e.next=10,t(q(o,{score:d,level:l,time:E,moves:m}));case 10:s=n(),a.event(g._.MATCH_END,{game_mode:GameCore.Utils.String.toUpperCamelCase(o),total_game:v,suit_size:A,difficulty:y,level:l,level_name:"level_"+l,score:d,moves:m,time_played:E,success:S}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),(0,w.tO)(e.t0);case 17:return e.prev=17,F(200),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[0,14,17,20]])})));return function(t,n){return e.apply(this,arguments)}}()},J=function(e){return function(t){try{var n=window.game.player,i=n.getPlayerId();(0,A.aV)(i,e).catch((function(e){(0,w.tO)(new Error(e))}));var a=n.getPlayerData(),r=a.score,s=void 0===r?0:r,o=a.level;s<e&&n.setBestScore(e);var c={score:e,level:o};t((0,R.Q0)(i,c)),t((0,R.eG)(c))}catch(u){if(u instanceof C)return;(0,w.tO)(u)}}},X=function(e,t){return void 0===t&&(t=null),function(){var n=(0,a.Z)(p().mark((function n(i,a){var r,s,o,c,u,h,d,f,m,v,y,E,A,C,b,P,L;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,s=window.game,o=s.player,c=s.analytics,u=s.facebook,h=s.globalScene,d=u.getContextID(),f=0,m=a(),c.event(g._.MATCH_START,{game_mode:GameCore.Utils.String.toUpperCamelCase(e),level:1,level_name:"level_1"}),i({type:x.Er,payload:{}}),v={mode:e,contextId:d,status:null},!l()(r=[_.oN,_.kC]).call(r,e)){n.next=17;break}return n.next=11,i((0,D.tS)());case 11:if(m=a(),(0,k.L7)(m)){n.next=16;break}return n.next=16,i((0,D.z$)());case 16:f=(0,k.z3)(m);case 17:if(e===_.ey&&i((0,D.Y5)(t)),e!==_.jt){n.next=26;break}return y=o.getPlayerSettings(),E=y.suitSize,A=y.difficulty,C={suitSize:E,difficulty:A},n.next=24,i((0,D.rd)(t,C));case 24:m=a(),d||(d=window.FBInstant.context.getID());case 26:e===_.RK&&i((0,D.j9)()),b=o.getPlayerData(m),P=b.score,L=void 0===P?0:P,i((0,R.eG)({score:f,bestScore:L})),i({type:x.tk,payload:v}),B.Z.instance.setGameMode(e),i((0,I.qL)(e)),h.events.emit(S.K.SWITCH,S.C.GAME_SCENE),n.next=42;break;case 35:if(n.prev=35,n.t0=n.catch(0),!(n.t0 instanceof O.Z)){n.next=41;break}return window.game.globalScene.screen.open(T.o4.NOTIFY_SCREEN,{message:"Sorry!, you can now\ncreate this match!",duration:2500,loading:!1}),n.abrupt("return");case 41:(0,w.tO)(n.t0);case 42:return n.prev=42,F(0),n.finish(42);case 45:case"end":return n.stop()}}),n,null,[[0,35,42,45]])})));return function(e,t){return n.apply(this,arguments)}}()},q=function(e,t){return function(){var n=(0,a.Z)(p().mark((function n(a,r){var o,c,u,l,h,d,f,g,m,v,y,E,S,T,A,C,b,I,w,O,P;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c=window.game.player,u=t.score,l=void 0===u?0:u,h=t.level,d=void 0===h?0:h,f=t.time,g=void 0===f?0:f,m=t.moves,v=void 0===m?0:m,y=r(),!(s()(o=[_.oN,_.kC]).call(o,e)>=0)){n.next=7;break}return E=(0,k.L7)(y),n.next=7,a((0,D.M$)(E));case 7:if(e!==_.kC){n.next=12;break}if(!(S=(0,N.V)(y))){n.next=12;break}return n.next=12,(0,M.bh)(S,c.getPlayerId(),l);case 12:if(e===_.ey&&(a((0,D._O)()),T=c.getPlayerId(),a((0,R.Q0)(T,t))),e!==_.jt){n.next=23;break}return A=(0,k.rl)(y),C=getChallengeMatchData(y),b=C.whitePlayerId,I=C.extraData,w=window.game.player.getPlayerId(),O=w===b,P=(0,i.Z)({},I),O?P.whitePlayerData={score:l,time:g,moves:v}:P.blackPlayerData={score:l,time:g,moves:v},n.next=23,a((0,D.QU)(A,l,(0,i.Z)({level:d},P)));case 23:a({type:x.Mg,payload:{mode:e}});case 24:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Q=function(){var e=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SOLO"!=window.FBInstant.context.getType()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new(d())((function(e){try{if("SOLO"==window.FBInstant.context.getType())return e();var t=setInterval((function(){"SOLO"==window.FBInstant.context.getType()&&(clearInterval(t),e())}),200),n=function(){var n=(0,a.Z)(p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.FBInstant.context.switchAsync("SOLO",!0);case 3:window.game.analytics.event(g._.SWITCH_SOLO_CONTEXT,{success:!0}),n.next=11;break;case 6:n.prev=6,n.t0=n.catch(0),window.game.analytics.event(g._.SWITCH_SOLO_CONTEXT,{success:!1}),clearInterval(t),e();case 11:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(){return n.apply(this,arguments)}}();n()}catch(i){console.log("same context"),e()}})).then((function(){}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){return function(t){var n=e.mode,i=e.status;t({type:x.qm,payload:{mode:n,status:i}}),B.Z.instance.setGameMode(n),(0,w.sw)("game-mode",n)}}},480:function(e,t,n){"use strict";n.d(t,{Tb:function(){return F},Pe:function(){return W},rd:function(){return Z},Y5:function(){return V},j9:function(){return j},z$:function(){return N},QU:function(){return z},_O:function(){return K},M$:function(){return G},tS:function(){return M},_8:function(){return H},pP:function(){return X},UK:function(){return Y}});var i=n(32),a=n(22),r=n(20),s=n.n(r),o=n(48),c=n.n(o),u=n(33),l=n.n(u),h=n(60),d=n.n(h),f=n(39),p=n(483),g=n(56),m=n(484),v=n(143),y=n(468),E=n(481),S=n(2),T=n(55),A=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchStatus",i.message=t||"The match status is not valid",i.payload=n,i}return(0,S.Z)(t,e),t}((0,T.Z)(Error)),C=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidOpponentId",i.message=t||"Invalid opponent id",i.payload=n,i}return(0,S.Z)(t,e),t}((0,T.Z)(Error)),b=n(482),I=n(223),w=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidBlackPlayerId",i.message=t||"Invalid black player id",i.payload=n,i}return(0,S.Z)(t,e),t}((0,T.Z)(Error)),x=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidRequestedMatchId",i.message=t||"The matchId in match data not matched with requested matchId",i.payload=n,i}return(0,S.Z)(t,e),t}((0,T.Z)(Error)),_=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidWhitePlayerId",i.message=t||"Invalid white player id",i.payload=n,i}return(0,S.Z)(t,e),t}((0,T.Z)(Error)),O=function(e){var t=e.matchId,n=e.currentMatchId;if(""===t||"string"!==typeof t)throw new E.Z(null,{matchId:t});if(""===n||"string"!==typeof n)throw new E.Z(null,{currentMatchId:n});if(t!==n)throw new x(null,{matchId:t,currentMatchId:n})},P=function(e){var t=e.playerId,n=e.match,i=n._id,a=n.playerId,r=n.status;if(""===i||"string"!==typeof i)throw new E.Z(null,{matchId:i});if("finished"===r||"string"!==typeof r)throw new A("This match is finished",{status:r});if(a!==t)throw new b.Z(null,{playerId:a,currentPlayerId:t})},k=function(e){var t=e.opponentId;if(""===t||"string"!==typeof t)throw new C(null,{opponentId:t})},L=function(e){var t=e.matchId;if(""===t||"string"!==typeof t)throw new E.Z(null,{matchId:t})},D=function(e){var t=e.match,n=t._id,i=t.whitePlayerId,a=t.blackPlayerId;if(""===n||"string"!==typeof n)throw new E.Z(null,{matchId:n});if(""===i||"string"!==typeof i)throw new _(null,{whitePlayerId:i});if(""===a||"string"!==typeof a)throw new w(null,{blackPlayerId:a})},R=GameCore.Configs.Match,B=function(e){try{return GameCore.Utils.Hash.stringToHash(c()(e))}catch(t){return""}},N=function(){return function(){var e=(0,a.Z)(s().mark((function e(t){var n,a,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=window.game.player,t({type:v.xm,payload:{}}),a=n.getPlayerId(),r=(0,i.Z)({},R.LocalSingleMatchDefault,{status:"active",playerId:a,startedAt:Date.now()}),P({playerId:a,match:r}),t(U(r)),(0,p.vk)(R.SingleMatchStore,r),e.next=18;break;case 10:if(e.prev=10,e.t0=e.catch(0),t(U(null)),!(e.t0 instanceof E.Z)){e.next=15;break}return e.abrupt("return");case 15:if(!(e.t0 instanceof A)){e.next=17;break}return e.abrupt("return");case 17:(0,g.tO)(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},M=function(){return function(e){try{var t=window.game.player;e({type:v.AJ,payload:{}});var n=t.getPlayerId(),i=(0,p.Th)(R.SingleMatchStore)||{},a=i.data;i.data=function(e){try{return JSON.parse(GameCore.Utils.Hash.hashToString(e))}catch(t){return""}}(a),P({playerId:n,match:i}),e(U(i))}catch(r){if(e(U(null)),r instanceof E.Z)return;if(r instanceof b.Z)return;if(r instanceof A)return;(0,g.tO)(r)}}},G=function(e){return function(){var t=(0,a.Z)(s().mark((function t(n,a){var r,o,c,u,l,h,d,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=window.game.player,L({matchId:e}),o=a(),c=(0,I.L7)(o),u=r.getPlayerId(),O({matchId:e,currentMatchId:c}),n({type:v.v7,payload:{matchId:e}}),l=(0,I.gd)(o),P({playerId:u,match:l}),h=(0,i.Z)({},R.LocalSingleMatchDefault,l,{_id:e,status:"finished",playerId:u,finishAt:Date.now()}),n(U(h)),d=h.data,(f=(0,i.Z)({},h)).data=B(d),(0,p.vk)(R.SingleMatchStore,f),t.next=26;break;case 18:if(t.prev=18,t.t0=t.catch(0),n(U(null)),!(t.t0 instanceof E.Z)){t.next=23;break}return t.abrupt("return");case 23:if(!(t.t0 instanceof A)){t.next=25;break}return t.abrupt("return");case 25:(0,g.tO)(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},U=function(e){return{type:v.Uo,payload:{match:e}}},F=function(){return{type:v.zu,payload:{}}},Z=function(e,t){return function(){var n=(0,a.Z)(s().mark((function n(i){var a,r,o,c,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,r=a.profile,(o=a.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:o.lang.Text.LOADING,loading:!0}),c=e.playerId,k({opponentId:c}),i({type:v.tU,payload:{opponentInfo:e,extraData:t}}),n.next=8,(0,m.yv)(c,t);case 8:return u=n.sent,D({match:u}),n.next=12,r.requestProfiles([c]);case 12:i(Y(u)),n.next=23;break;case 15:if(n.prev=15,n.t0=n.catch(0),i(Y(null)),!(n.t0 instanceof E.Z)){n.next=20;break}return n.abrupt("return");case 20:if(!(n.t0 instanceof C)){n.next=22;break}return n.abrupt("return");case 22:(0,g.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()},H=function(e){return function(){var t=(0,a.Z)(s().mark((function t(n){var i,a,r,o,c,u,l,h,d,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game,a=i.player,r=i.profile,(o=i.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:o.lang.Text.LOADING,loading:!0}),L({matchId:e}),n({type:v.Qi,payload:{matchId:e}}),t.next=7,(0,m.en)(e);case 7:if(c=t.sent,D({match:c}),u=c.status,l=c.whitePlayerId,h=c.blackPlayerId,u!==y.kR){t.next=16;break}return d=a.getPlayerId(),p=d===l?h:l,t.next=16,r.requestProfiles([p]);case 16:n(Y(c)),t.next=25;break;case 19:if(t.prev=19,t.t0=t.catch(0),n(Y(null)),!(t.t0 instanceof E.Z)){t.next=24;break}return t.abrupt("return");case 24:(0,g.tO)(t.t0);case 25:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()},W=function(e,t){return function(){var n=(0,a.Z)(s().mark((function n(i){var a,r,o,c,u,l,h,d,p,y;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=window.game,r=a.player,(o=a.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:o.lang.Text.LOADING,loading:!0}),L({matchId:e}),i({type:v.f3,payload:{matchId:e,opponentInfo:t}}),n.next=7,(0,m.qm)(e);case 7:c=n.sent,D({match:c}),u=c.whitePlayerId,l=c.whitePlayerScore,h=c.blackPlayerScore,d=r.getPlayerId(),p=r.getPlayerData(),y=p.score,i(Y(c,{score:d===u?l:h,bestScore:y})),n.next=23;break;case 17:if(n.prev=17,n.t0=n.catch(0),i(Y(null)),!(n.t0 instanceof E.Z)){n.next=22;break}return n.abrupt("return");case 22:(0,g.tO)(n.t0);case 23:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},z=function(e,t,n){return function(){var i=(0,a.Z)(s().mark((function i(a){var r,o,c;return s().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,(r=window.game.globalScene).screen.open(f.o4.NOTIFY_SCREEN,{message:r.lang.Text.LOADING,loading:!0}),L({matchId:e}),a({type:v.DI,payload:{matchId:e,score:t,extraData:n}}),o=n.level,i.next=8,(0,m.ZG)(e,t,o,n);case 8:return c=i.sent,D({match:c}),i.next=12,a(Y(c));case 12:i.next=20;break;case 14:if(i.prev=14,i.t0=i.catch(0),a(Y(null)),!(i.t0 instanceof E.Z)){i.next=19;break}return i.abrupt("return");case 19:(0,g.tO)(i.t0);case 20:case"end":return i.stop()}}),i,null,[[0,14]])})));return function(e){return i.apply(this,arguments)}}()},Y=function(e,t,n){return void 0===n&&(n=null),{type:v.AO,payload:{match:e,opponentInfo:t,current:n}}},V=function(e){return{type:v.Vj,payload:{opponentInfo:e}}},K=function(){return{type:v.Sl,payload:{}}},j=function(){return function(){var e=(0,a.Z)(s().mark((function e(t){var n,i,a,r,o,c,u,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=window.game.player,r=a.getPlayer(),o=r.playerId,c=r.name,u=r.photo,t({type:v.ar,payload:{playerId:o}}),h={},l()(n=d()(i=new Array(20)).call(i,null)).call(n,(function(e,t){var n="0"+(t+1);h[n]={playerId:n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.png"}})),h[o]={playerId:o,name:c,photo:u},t(J("mock",h));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J=function(e,t){return{type:v.li,payload:{matchId:e,players:t}}},X=function(e){return void 0===e&&(e=!1),{type:v.cZ,payload:{matchResultFromMessage:e}}}},228:function(e,t,n){"use strict";n.d(t,{$4:function(){return a},Q0:function(){return r},eG:function(){return s}});var i=n(143),a=function(e){return{type:i.VY,payload:{playerId:e}}},r=function(e,t){return{type:i.HV,payload:{playerId:e,stats:t}}},s=function(e){return{type:i.DP,payload:{stats:e}}}},484:function(e,t,n){"use strict";n.d(t,{ZG:function(){return h},en:function(){return u},qm:function(){return l},yv:function(){return c}});var i=n(22),a=n(20),r=n.n(a),s=n(144),o=GameCore.Configs.ApiHost,c=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"matches",e.next=3,(0,s.v)("matches",{opponentPlayerId:t,extraData:n},{},o);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t+"/join",e.next=3,(0,s.v)(n,{},{},o);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="matches/"+t,e.next=3,(0,s.U)(n,{},o);case 3:return i=e.sent,e.abrupt("return",(null==i?void 0:i.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)(r().mark((function e(t,n,i,a){var c,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="matches/"+t+"/finish",e.next=3,(0,s.v)(c,{matchId:t,score:n,level:i,extraData:a},{},o);case 3:return u=e.sent,e.abrupt("return",(null==u?void 0:u.data)||{});case 5:case"end":return e.stop()}}),e)})));return function(t,n,i,a){return e.apply(this,arguments)}}()},143:function(e,t,n){"use strict";n.d(t,{AJ:function(){return p},AO:function(){return C},DI:function(){return T},DP:function(){return l},Er:function(){return i},HV:function(){return u},Ly:function(){return O},Mg:function(){return r},NW:function(){return P},PM:function(){return d},Qi:function(){return E},Sl:function(){return w},T7:function(){return m},UK:function(){return k},Un:function(){return b},Uo:function(){return v},VY:function(){return c},Vj:function(){return I},XW:function(){return o},ar:function(){return x},cZ:function(){return L},f3:function(){return A},go:function(){return h},li:function(){return _},qm:function(){return s},tU:function(){return S},tk:function(){return a},v7:function(){return g},xm:function(){return f},zu:function(){return y}});var i="MATCH_GAMEPLAY_INITIALIZE",a="MATCH_GAMEPLAY_START",r="MATCH_GAMEPLAY_FINISH",s="MATCH_GAMEPLAY_UPDATE",o="MATCH_GAMEPLAY_RESCUE",c="MATCH_STATS_DATA_CLEAR",u="MATCH_STATS_DATA_UPDATE",l="MATCH_STATS_CURRENT_UPDATE",h="MATCH_STATS_CONTEXT_REQUEST",d="MATCH_STATS_CONTEXT_RECEIVED",f="MATCH_SINGLE_CREATE_REQUEST",p="MATCH_SINGLE_DETAIL_REQUEST",g="MATCH_SINGLE_FINISH_REQUEST",m="MATCH_SINGLE_MOVE_UPDATED",v="MATCH_SINGLE_DATA_RECEIVED",y="MATCH_SINGLE_DATA_CLEAR",E="MATCH_CHALLENGE_JOIN_REQUEST",S="MATCH_CHALLENGE_CREATE_REQUEST",T="MATCH_CHALLENGE_FINISH_REQUEST",A="MATCH_CHALLENGE_CONTINUE_REQUEST",C="MATCH_CHALLENGE_DATA_RECEIVED",b="MATCH_CHALLENGE_DATA_CLEAR",I="MATCH_GROUP_CREATE_REQUEST",w="MATCH_GROUP_FINISH_REQUEST",x="MATCH_ONLINE_CREATE_REQUEST",_="MATCH_ONLINE_DATA_RECEIVED",O="MATCH_ONLINE_STATS_UPDATE",P="MATCH_ONLINE_FINISH_REQUEST",k="MATCH_ONLINE_DATA_CLEAR",L="MATCH_RESUTL_FROM_MESSAGE"},118:function(e,t,n){"use strict";n.d(t,{RK:function(){return o},ey:function(){return r},jt:function(){return a},kC:function(){return s},oN:function(){return i}});var i="single",a="challenge-friends",r="matching-group",s="tournaments",o="online"},468:function(e,t,n){"use strict";n.d(t,{kR:function(){return a},o3:function(){return r},ys:function(){return i}});var i="open",a="active",r="finished"},467:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var i="match"},481:function(e,t,n){"use strict";var i=n(2),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidMatchId",i.message=t||"Invalid match id",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(55).Z)(Error));t.Z=a},482:function(e,t,n){"use strict";var i=n(2),a=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).name="InvalidPlayerId",i.message=t||"The playerId is not valid",i.payload=n,i}return(0,i.Z)(t,e),t}((0,n(55).Z)(Error));t.Z=a},226:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(78),a=n(224),r=(0,i.P1)([function(e){return(0,a.y)(e).gameplay.mode}],(function(e){return e}))},224:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var i=n(467),a=function(e){return e[i.L]}},223:function(e,t,n){"use strict";n.d(t,{B5:function(){return g},L7:function(){return u},Me:function(){return E},Uq:function(){return y},gd:function(){return c},iq:function(){return h},oN:function(){return p},pP:function(){return m},rl:function(){return d},x0:function(){return f},z3:function(){return l},zQ:function(){return v}});var i=n(145),a=n(78),r=n(224),s=function(e,t){return t.playerId},o=function(e){return(0,r.y)(e).match.challenge},c=(0,a.P1)([function(e){return(0,r.y)(e).match.single}],(function(e){return e})),u=(0,a.P1)([function(e){return(0,r.y)(e).match.single._id}],(function(e){return e})),l=(0,a.P1)([function(e){return(0,r.y)(e).match.single.score}],(function(e){return e||0})),h=(0,a.P1)([o],(function(e){return e})),d=(0,a.P1)([function(e){return(0,r.y)(e).match.challenge._id}],(function(e){return e})),f=(0,a.P1)([function(e){return(0,r.y)(e).match.challenge.status}],(function(e){return e})),p=(0,a.P1)([function(e){return(0,r.y)(e).match.challenge.opponentInfo}],(function(e){return e})),g=(0,a.P1)([h,s],(function(e,t){var n=e.whitePlayerId,a=e.blackPlayerId;return n===t?n:a===t?a:i.U.playerId})),m=(0,a.P1)([h,s],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),v=(0,a.P1)([h,function(e,t){return t.opponentId}],(function(e,t){var n=e.whitePlayerId,i=e.blackPlayerId,a=e.whitePlayerFinish,r=e.blackPlayerFinish;return t&&n===t?a:!(!t||i!==t)&&r})),y=(0,a.P1)([o],(function(e){return e.extraData})),E=(0,a.P1)([function(e){return(0,r.y)(e).match.group.opponentInfo}],(function(e){return e}))},487:function(e,t,n){"use strict";n.d(t,{J:function(){return r},V:function(){return s}});var i=n(78),a=n(224),r=(0,i.P1)([function(e){return(0,a.y)(e).stats.data}],(function(e){return e})),s=(0,i.P1)([function(e){return(0,a.y)(e).stats.current}],(function(e){return e}))},485:function(e,t,n){"use strict";n.d(t,{cQ:function(){return y},l6:function(){return T},lj:function(){return E}});var i=n(22),a=n(20),r=n.n(a),s=n(48),o=n.n(s),c=n(47),u=n.n(c),l=n(146),h=n(227),d=n(118),f=n(226),p=n(225),g=n(39),m=n(470),v=GameCore.Configs.Tournament.UseLeaderboard,y=function(e,t){return void 0===t&&(t=""),{type:m.Cg,payload:{tournamentId:e,leaderboardId:t}}},E=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n){var i,a,s,c,u,l,h,d,f,g,m,v,E;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=window.game.facebook,a=e.playerId,s=e.playerName,c=e.score,u=e.level,l=e.autoStartGame,h=s+"'s Tournament",d=GameCore.Utils.String.generateObjectId(),f=window.game.player.getPlayerSettings(),g=f.suitSize,m=f.difficulty,t.next=8,i.tournament.createAsync({initialScore:c,config:{title:h,tournamentTitle:h},data:{playerId:a,playerName:s,leaderboardId:d,level:u,suitSize:g,difficulty:m}});case 8:return v=t.sent,E=v.getID(),l&&n(y(E,d)),t.next=13,(0,p.Z5)({_id:d,createdBy:a,name:h,description:o()({contextID:E,tournamentID:E,suitSize:g,difficulty:m}),type:"tournament_leaderboard",expireTime:604800});case 13:if(t.sent._id!==d){t.next=17;break}return t.next=17,(0,p.bh)(d,a,c);case 17:window.game.player.joinTournament({leaderboardId:d,endTime:v.getEndTime(),level:u}),e.success=!0,t.next=25;break;case 21:throw t.prev=21,t.t0=t.catch(0),e.success=!1,t.t0;case 25:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return(0,i.Z)(r().mark((function t(){var n,i,a,s,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.game.facebook,i=e.playerId,a=e.playerName,s=e.score,o={score:s,data:{type:l.nx,playerId:i,playerName:a}},t.next=5,n.tournament.shareAsync(o);case 5:case"end":return t.stop()}}),t)})))},T=function(e){return function(){var t=(0,i.Z)(r().mark((function t(n,i){var a,s,o,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=window.game.globalScene,o=i(),c=(0,f.f)(o),u()(a=[d.oN,d.kC]).call(a,c)){t.next=5;break}return t.abrupt("return");case 5:if(n({type:m.DK,payload:{}}),s.screen.open(g.o4.NOTIFY_SCREEN,{message:s.lang.Text.LOADING,loading:!0}),!v){t.next=12;break}return t.next=10,w(e,o);case 10:t.next=14;break;case 12:return t.next=14,O(e);case 14:s.screen.close(g.o4.NOTIFY_SCREEN),n(P(e));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},A=0,C=!1,b=0,I=!1,w=function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,o,c,u,l,d,f,p;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=window.game,a=i.player,s=i.facebook,o=a.getPlayer(),c=o.playerId,u=o.name,l=a.getBestScore(),e.prev=3,e.next=6,s.getTournamentAsync();case 6:if(d=(0,h.V)(n),!_(t,l)){e.next=15;break}return A+=1,f={playerId:c,playerName:u,score:t,leaderboardId:d},e.next=12,window.game.storage.dispatch(S(f)).then((function(){C=!0}));case 12:C=!0,e.next=17;break;case 15:return e.next=17,s.tournament.postScoreAsync(t);case 17:e.next=28;break;case 19:if(e.prev=19,e.t0=e.catch(3),"TOURNAMENT_NOT_FOUND"!==(null==e.t0?void 0:e.t0.code)){e.next=28;break}if(x(t,l)){e.next=24;break}return e.abrupt("return");case 24:return b+=1,p={playerId:c,playerName:u,score:t,autoStartGame:!1},e.next=28,window.game.storage.dispatch(E(p)).then((function(){I=!0})).catch((function(){}));case 28:return e.prev=28,e.finish(28);case 30:case"end":return e.stop()}}),e,null,[[3,19,28,30]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e,t){return!window.game.player.getPlayerIsNew()&&e>t||!(I||b>1)&&Math.random()<.5},_=function(){return!(C||A>1)},O=function(){var e=(0,i.Z)(r().mark((function e(t){var n,i,a,s,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.game,i=n.player,a=n.facebook,s=i.getBestScore(),e.prev=2,e.next=5,a.getTournamentAsync();case 5:if(!_(t,s)){e.next=12;break}return A+=1,e.next=9,a.tournament.shareAsync({score:t});case 9:C=!0,e.next=14;break;case 12:return e.next=14,a.tournament.postScoreAsync(t);case 14:e.next=25;break;case 16:if(e.prev=16,e.t0=e.catch(2),"TOURNAMENT_NOT_FOUND"!==e.t0.code){e.next=25;break}if(x(t,s)){e.next=21;break}return e.abrupt("return");case 21:return b+=1,o=i.getPlayer(),c=o.name,e.next=25,a.tournament.createAsync({initialScore:t,config:{tournamentTitle:c+"'s Tournament"}}).then((function(){I=!0})).catch((function(e){}));case 25:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t){return e.apply(this,arguments)}}(),P=function(e){return{type:m.ge,payload:{score:e}}}},225:function(e,t,n){"use strict";n.d(t,{H$:function(){return S},Iy:function(){return C},Z5:function(){return E},bh:function(){return A},wF:function(){return T},xB:function(){return b}});var i=n(32),a=n(22),r=n(33),s=n.n(r),o=n(60),c=n.n(o),u=n(20),l=n.n(u),h=n(144),d=n(117),f=n(486),p=n(142),g=GameCore.Configs,m=g.AppId,v=g.OtherHost,y=g.LeadersBoard,E=function(){var e=(0,a.Z)(l().mark((function e(t){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={appId:m,resetScore:0,numberOfLeaders:15,timezone:"utc+0",sortOrder:"desc",statistics:"max",resettable:"manually",description:"no description"},!y.UseMock){e.next=5;break}return e.next=4,(0,d.qZ)(1e3);case 4:return e.abrupt("return",(0,i.Z)({},n,t,{_id:y.LeaderboardId,type:"app_leaderboard",description:"mockup_leaderboard",createdAt:new Date(Date.now()).toISOString(),updatedAt:new Date(Date.now()).toISOString()}));case 5:return"leaderboards",e.next=8,(0,h.v)("leaderboards",(0,i.Z)({},n,t),{},v);case 8:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,r,o,u,f,p,g,m,E,S,T;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),i=[],!y.UseMock){e.next=7;break}return e.next=5,(0,d.qZ)(1e3);case 5:return u=(o=n).limit,f=void 0===u?10:u,p=o.offset,g=void 0===p?0:p,e.abrupt("return",s()(a=c()(r=new Array(f)).call(r,null)).call(a,(function(e,t){var n=(t+1)*(g+1),i=y.MockOptions.PlayerEntryIndex===t,a={playerId:"player-0"+n,name:"MPlayer "+n,photo:"./assets/images/others/avatar.jpg",rank:n,score:Math.floor(1e5/n+1e4*Math.random()).toString()};if(i){var r=window.game.player.getPlayer(),s=r.playerId,o=r.name,c=r.photo;a.playerId=s,a.name=o,a.photo=c}return a})));case 7:return m=GameCore.Utils.String.params(n),E="leaderboards/"+t+"/leaders",e.next=11,(0,h.U)(E+"?"+m,{},v);case 11:if((S=e.sent)&&(null==S||!S.error)){e.next=14;break}throw new Error((null==S?void 0:S.error)||"Leaderboard not found");case 14:if(!((T=(null==S?void 0:S.data)||[]).length<1)){e.next=17;break}return e.abrupt("return",i);case 17:return i=T,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="leaderboards/"+t,e.next=3,(0,h.U)(""+n,{},v);case 3:if((i=e.sent)&&(null==i||!i.error)){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",null==i?void 0:i.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(l().mark((function e(t,n,i){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.v)("leaderboards/"+t+"/players/"+n,{score:i},{},v);case 2:return a=e.sent,e.abrupt("return",(null==a?void 0:a.data)||{});case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(l().mark((function e(){var t,n,i,a,r,o,u,g,m,E,S,T,A,C;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y.UseMock){e.next=5;break}return e.next=3,(0,d.qZ)(2e3*Math.random());case 3:return i=Math.floor(3*Math.random()),e.abrupt("return",s()(t=c()(n=new Array(i)).call(n,null)).call(t,(function(e,t){var n=t+1;return{id:n,title:n.toString(),endTime:Math.round(Date.now()/1e3+100*Math.random()),contextID:n,payload:{playerId:"",playerName:"",leaderboardId:n,level:1,suitSize:"one",difficulty:"easy"}}})));case 5:return a=GameCore.Utils.String.params({limit:100,type:"world_tournament_leaderboard"}),"leaderboards",e.next=9,(0,h.U)("leaderboards?"+a,{},v);case 9:if((r=e.sent)&&(null==r||!r.error)){e.next=12;break}throw new f.Z;case 12:o=(null==r?void 0:r.data)||[],u=[],g=0;case 15:if(!(g<o.length)){e.next=36;break}m=null,e.prev=17,m=JSON.parse(o[g].description),e.next=24;break;case 21:return e.prev=21,e.t0=e.catch(17),e.abrupt("continue",33);case 24:if(E=new Date(o[g].createdAt).getTime(),S=Math.round((6048e5+E)/1e3),!(1e3*S-Date.now()<=0)){e.next=29;break}return e.abrupt("continue",33);case 29:T=m.suitSize||p.Z.suitSize,A=m.difficulty||p.Z.difficulty,C={id:m.tournamentID,title:o[g].name,endTime:S,contextID:m.contextID,payload:{playerId:"",playerName:"",leaderboardId:o[g]._id,level:m.level,suitSize:T,difficulty:A}},u.push(C);case 33:g++,e.next=15;break;case 36:return e.abrupt("return",u);case 37:case"end":return e.stop()}}),e,null,[[17,21]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(l().mark((function e(t,n){var i,a,r,s,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,t){e.next=3;break}return e.abrupt("return",i);case 3:if(a=y.Prefix+"/"+n+"/players"){e.next=6;break}return e.abrupt("return",i);case 6:return r=GameCore.Utils.String.params({playerIds:t}),e.next=9,(0,h.U)(a+"?"+r,{},v);case 9:if(s=e.sent,!((o=(null==s?void 0:s.data)||[]).length<1)){e.next=13;break}return e.abrupt("return",i);case 13:return i=o[0],e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},470:function(e,t,n){"use strict";n.d(t,{Cg:function(){return i},DK:function(){return a},ge:function(){return r}});var i="TOURNAMENT_ACTIVE",a="TOURNAMENT_REQUEST",r="TOURNAMENT_RECEIVED"},469:function(e,t,n){"use strict";n.d(t,{L:function(){return i}});var i="tournament"},227:function(e,t,n){"use strict";n.d(t,{V:function(){return o},k:function(){return s}});var i=n(78),a=n(469),r=function(e){return e[a.L]},s=(0,i.P1)([function(e){return r(e).tournamentId}],(function(e){return e})),o=(0,i.P1)([function(e){return r(e).leaderboardId}],(function(e){return e}))},29:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var i={BUTTON_CLICK:"button_click",SCREEN_OPEN:"screen_open",LOAD_START:"load_start",LOAD_COMPLETE:"load_complete",APP_READY:"app_ready",TUTORIAL_BEGIN:"tutorial_begin",TUTORIAL_STEP:"tutorial_step",TUTORIAL_COMPLETE:"tutorial_complete",MATCH_START:"match_start",MATCH_END:"match_end",JOURNEY_START:"journey_start",JOURNEY_END:"journey_end",LEVEL_START:"level_start",LEVEL_CONTINUE:"level_continue",LEVEL_END:"level_end",LEVEL_GIVE_UP:"level_give_up",SHARE:"share",MESSAGE:"message",INVITE:"invite",SHORTCUT_CREATE:"shortcut_create",SHORTCUT_CREATE_POPUP:"shortcut_create_popup",BOT_SUBSCRIBE:"bot_subscribe",BOT_SUBSCRIBE_POPUP:"bot_subscribe_popup",AD_LOAD:"ad_load",AD_LOAD_FAILED:"ad_load_failed",AD_SHOW:"ad_show",AD_SHOW_FAILED:"ad_show_failed",MISSING_AD_SHOW:"missing_ad_show",NEW_USER:"new_user",AD_IMPRESSION:"ad_impression",JOIN_GROUP:"join_group",THEME_CHANGED:"theme_changed",FOUNDATION_FINISH:"foundation_finish",FOUNDATION_MODE:"foundation_mode",TOURNAMENT_SHARE:"tournament_share",TOURNAMENT_CREATE:"tournament_create",TOURNAMENT_POST_SCORE:"tournament_post_score",TOURNAMENT_START:"tournament_start",SWITCH_SOLO_CONTEXT:"switch_solo_context"}},142:function(e,t){"use strict";var n={sound:!0,music:!0,vibrate:!0,language:"en",theme:GameCore.Configs.DefaultTheme,tapToMove:!0,smartClick:!0,autoHints:!0,autoComplete:!0,relaxedSpider:!0,suitSize:"one",difficulty:"easy",backgroundIdx:0,cardFaceIdx:0,cardBackIdx:0};t.Z=n},219:function(e,t,n){"use strict";var i=n(220),a=function(){function e(e,t,n,a){this.playerId=void 0,this.name=void 0,this.photo=void 0,this.locale=void 0,this.playerId=e,this.name=t,this.photo=n||i.Z.AVATAR.FILE,this.locale=a||"en_US"}return e.prototype.toObject=function(){return{playerId:this.playerId,name:this.name,photo:this.photo,locale:this.locale}},e}();t.Z=a},474:function(e,t){"use strict";t.Z={OPEN:"open",CLOSE:"close",CREATED:"created"}},471:function(e,t){"use strict";t.Z={Mobile:{Background:["bg-0","bg-1","bg-2","bg-3","bg-4"],CardFace:["card-style-0","card-style-1","card-style-2","card-style-3"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4","card-back-5"]},Desktop:{Background:["bg-desktop-0","bg-desktop-1","bg-desktop-2","bg-desktop-3","bg-desktop-4"],CardFace:["card-style-0","card-style-desktop-0","card-style-2","card-style-3"],CardBack:["card-back-0","card-back-1","card-back-2","card-back-3","card-back-4","card-back-5"]}}},472:function(e,t){"use strict";t.Z={RESIZE:"resize",CHANGE_LAYOUT:"change-layout"}},475:function(e,t,n){"use strict";n.d(t,{U1:function(){return g},_K:function(){return m},qF:function(){return v},qL:function(){return y}});var i=n(22),a=n(20),r=n.n(a),s=n(47),o=n.n(s),c=n(221),u=n(146),l=n(145),h=n(118),d=n(56),f=n(476),p=n(222),g=function(e,t,n){return{type:c.kL,payload:{contextId:e,contextType:t,entryPointData:n}}},m=function(e,t){return{type:c.fJ,payload:{contextId:e,contextType:t}}},v=function(){return function(){var e=(0,i.Z)(r().mark((function e(t,n){var i,a,s,c,d,g,m,v,E,S,T,A,C,b,I,w,x,_;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),s=(0,f.f)(a),c=window.game.player,d=c.getPlayerId(),g=s.contextId,m=s.entryPointData,E=(v=m||{}).type,S=v.matchId,T=v.playerId,A=v.opponentId,C=void 0===A?l.U.playerId:A,b=v.tournamentContextId,I=d===T,w=C===l.U.playerId,x=w||o()(i=[C,T]).call(i,d),_=h.oN,e.prev=10,e.next=13,window.game.facebook.getTournamentAsync();case 13:_=h.kC,e.next=18;break;case 16:e.prev=16,e.t0=e.catch(10);case 18:g&&(void 0===E||E===u.nx)&&p.Z.instance.isGameLoadedInTournament&&(_=h.kC),E===u.nx&&b&&(_=h.kC),g&&E===u.W6&&!I&&(_=h.jt),S&&g&&x&&E===u.Sb&&(_=h.jt),g&&E===u.lB&&(_=h.ey),t(y(_));case 24:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},y=function(e){return function(t){t({type:c.EH,payload:{gameMode:e}}),(0,d.sw)("game-mode",e)}}},478:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var i=n(221),a=function(e){return{type:i.DW,payload:{sceneKey:e}}}},476:function(e,t,n){"use strict";n.d(t,{F:function(){return r},f:function(){return a}});var i=n(78),a=(0,i.P1)([function(e){return e.context}],(function(e){return e})),r=(0,i.P1)([function(e){return e.context.currentGameMode}],(function(e){return e}))},117:function(e,t,n){"use strict";n.d(t,{F0:function(){return l},Gm:function(){return c},VY:function(){return u},qZ:function(){return o}});var i=n(58),a=n.n(i),r=n(67),s=n.n(r),o=function(e){return new(a())((function(t){return setTimeout(t,e)}))},c=function(e){var t=new Date(e),n=new Date;return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},u=function(e){return Date.now()-e<6048e5},l=function(e,t){void 0===t&&(t=!0);var n=new Date(e).toISOString();return t?s()(n).call(n,11,-5):s()(n).call(n,14,-5)}},56:function(e,t,n){"use strict";n.d(t,{sw:function(){return i},tO:function(){return r}});n(235),n(48),n(83);var i=function(e,t){window.Sentry&&window.Sentry.addBreadcrumb({category:e,message:t})},a=function(e){console.error(e)},r=function(e){e&&a(e)}},483:function(e,t,n){"use strict";n.d(t,{Th:function(){return a},tL:function(){return s},vk:function(){return r}});var i=n(116),a=function(e){try{var t=localStorage.getItem(e);return null===t?null:GameCore.Utils.Json.decode(t)}catch(n){return null}},r=function(e,t){try{var n=a(e),r={};GameCore.Utils.Valid.isObject(n)&&(r=n);var s=GameCore.Utils.Json.clone(t);if(!GameCore.Utils.Valid.isObject(s))return!1;var o=GameCore.Utils.Object.clear(s),c=(0,i.TS)(r,o),u=GameCore.Utils.Json.encode(c);return localStorage.setItem(e,u),!0}catch(l){return!1}},s=function(e){try{return localStorage.removeItem(e),!0}catch(t){return!1}}},464:function(e,t){"use strict";t.Z={GENERIC_NOTIFICATION:0,NEW_USER_NOTIFICATION:1,MONDAY_NOTIFICATION:2,TUESDAY_NOTIFICATION:3,WEDNESDAY_NOTIFICATION:4,THURSDAY_NOTIFICATION:5,FRIDAY_NOTIFICATION:6,SATURDAY_NOTIFICATION:7,SUNDAY_NOTIFICATION:8}},671:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=JSON.parse('{"data":["Smith","Johnson","Williams","Brown","Jones","Miller","Davis","Garcia","Rodriguez","Wilson","Martinez","Anderson","Taylor","Thomas","Hernandez","Moore","Martin","Jackson","Thompson","White","Lopez","Lee","Gonzalez","Harris","Clark","Lewis","Robinson","Walker","Perez","Hall","Young","Allen","Sanchez","Wright","King","Scott","Green","Baker","Adams","Nelson","Hill","Ramirez","Campbell","Mitchell","Roberts","Carter","Phillips","Evans","Turner","Torres","Parker","Collins","Edwards","Stewart","Flores","Morris","Nguyen","Murphy","Rivera","Cook","Rogers","Morgan","Peterson","Cooper","Reed","Bailey","Bell","Gomez","Kelly","Howard","Ward","Cox","Diaz","Richardson","Wood","Watson","Brooks","Bennett","Gray","James","Reyes","Cruz","Hughes","Price","Myers","Long","Foster","Sanders","Ross","Morales","Powell","Sullivan","Russell","Ortiz","Jenkins","Gutierrez","Perry","Butler","Barnes","Fisher","Henderson","Coleman","Simmons","Patterson","Jordan","Reynolds","Hamilton","Graham","Kim","Gonzales","Alexander","Ramos","Wallace","Griffin","West","Cole","Hayes","Chavez","Gibson","Bryant","Ellis","Stevens","Murray","Ford","Marshall","Owens","Mcdonald","Harrison","Ruiz","Kennedy","Wells","Alvarez","Woods","Mendoza","Castillo","Olson","Webb","Washington","Tucker","Freeman","Burns","Henry","Vasquez","Snyder","Simpson","Crawford","Jimenez","Porter","Mason","Shaw","Gordon","Wagner","Hunter","Romero","Hicks","Dixon","Hunt","Palmer","Robertson","Black","Holmes","Stone","Meyer","Boyd","Mills","Warren","Fox","Rose","Rice","Moreno","Schmidt","Patel","Ferguson","Nichols","Herrera","Medina","Ryan","Fernandez","Weaver","Daniels","Stephens","Gardner","Payne","Kelley","Dunn","Pierce","Arnold","Tran","Spencer","Peters","Hawkins","Grant","Hansen","Castro","Hoffman","Hart","Elliott","Cunningham","Knight","Bradley","Carroll","Hudson","Duncan","Armstrong","Berry","Andrews","Johnston","Ray","Lane","Riley","Carpenter","Perkins","Aguilar","Silva","Richards","Willis","Matthews","Chapman","Lawrence","Garza","Vargas","Watkins","Wheeler","Larson","Carlson","Harper","George","Greene","Burke","Guzman","Morrison","Munoz","Jacobs","Obrien","Lawson","Franklin","Lynch","Bishop","Carr","Salazar","Austin","Mendez","Gilbert","Jensen","Williamson","Montgomery","Harvey","Oliver","Howell","Dean","Hanson","Weber","Garrett","Sims","Burton","Fuller","Soto","Mccoy","Welch","Chen","Schultz","Walters","Reid","Fields","Walsh","Little","Fowler","Bowman","Davidson","May","Day","Schneider","Newman","Brewer","Lucas","Holland","Wong","Banks","Santos","Curtis","Pearson","Delgado","Valdez","Pena","Rios","Douglas","Sandoval","Barrett","Hopkins","Keller","Guerrero","Stanley","Bates","Alvarado","Beck","Ortega","Wade","Estrada","Contreras","Barnett","Caldwell","Santiago","Lambert","Powers","Chambers","Nunez","Craig","Leonard","Lowe","Rhodes","Byrd","Gregory","Shelton","Frazier","Becker","Maldonado","Fleming","Vega","Sutton","Cohen","Jennings","Parks","Mcdaniel","Watts","Barker","Norris","Vaughn","Vazquez","Holt","Schwartz","Steele","Benson","Neal","Dominguez","Horton","Terry","Wolfe","Hale","Lyons","Graves","Haynes","Miles","Park","Warner","Padilla","Bush","Thornton","Mccarthy","Mann","Zimmerman","Erickson","Fletcher","Mckinney","Page","Dawson","Joseph","Marquez","Reeves","Klein","Espinoza","Baldwin","Moran","Love","Robbins","Higgins","Ball","Cortez","Le","Griffith","Bowen","Sharp","Cummings","Ramsey","Hardy","Swanson","Barber","Acosta","Luna","Chandler","Blair","Daniel","Cross","Simon","Dennis","Oconnor","Quinn","Gross","Navarro","Moss","Fitzgerald","Doyle","Mclaughlin","Rojas","Rodgers","Stevenson","Singh","Yang","Figueroa","Harmon","Newton","Paul","Manning","Garner","Mcgee","Reese","Francis","Burgess","Adkins","Goodman","Curry","Brady","Christensen","Potter","Walton","Goodwin","Mullins","Molina","Webster","Fischer","Campos","Avila","Sherman","Todd","Chang","Blake","Malone","Wolf","Hodges","Juarez","Gill","Farmer","Hines","Gallagher","Duran","Hubbard","Cannon","Miranda","Wang","Saunders","Tate","Mack","Hammond","Carrillo","Townsend","Wise","Ingram","Barton","Mejia","Ayala","Schroeder","Hampton","Rowe","Parsons","Frank","Waters","Strickland","Osborne","Maxwell","Chan","Deleon","Norman","Harrington","Casey","Patton","Logan","Bowers","Mueller","Glover","Floyd","Hartman","Buchanan","Cobb","French","Kramer","Mccormick","Clarke","Tyler","Gibbs","Moody","Conner","Sparks","Mcguire","Leon","Bauer","Norton","Pope","Flynn","Hogan","Robles","Salinas","Yates","Lindsey","Lloyd","Marsh","Mcbride","Owen","Solis","Pham","Lang","Pratt","Lara","Brock","Ballard","Trujillo","Shaffer","Drake","Roman","Aguirre","Morton","Stokes","Lamb","Pacheco","Patrick","Cochran","Shepherd","Cain","Burnett","Hess","Li","Cervantes","Olsen","Briggs","Ochoa","Cabrera","Velasquez","Montoya","Roth","Meyers","Cardenas","Fuentes","Weiss","Hoover","Wilkins","Nicholson","Underwood","Short","Carson","Morrow","Colon","Holloway","Summers","Bryan","Petersen","Mckenzie","Serrano","Wilcox","Carey","Clayton","Poole","Calderon","Gallegos","Greer","Rivas","Guerra","Decker","Collier","Wall","Whitaker","Bass","Flowers","Davenport","Conley","Houston","Huff","Copeland","Hood","Monroe","Massey","Roberson","Combs","Franco","Larsen","Pittman","Randall","Skinner","Wilkinson","Kirby","Cameron","Bridges","Anthony","Richard","Kirk","Bruce","Singleton","Mathis","Bradford","Boone","Abbott","Charles","Allison","Sweeney","Atkinson","Horn","Jefferson","Rosales","York","Christian","Phelps","Farrell","Castaneda","Nash","Dickerson","Bond","Wyatt","Foley","Chase","Gates","Vincent","Mathews","Hodge","Garrison","Trevino","Villarreal","Heath","Dalton","Valencia","Callahan","Hensley","Atkins","Huffman","Roy","Boyer","Shields","Lin","Hancock","Grimes","Glenn","Cline","Delacruz","Camacho","Dillon","Parrish","Oneill","Melton","Booth","Kane","Berg","Harrell","Pitts","Savage","Wiggins","Brennan","Salas","Marks","Russo","Sawyer","Baxter","Golden","Hutchinson","Liu","Walter","Mcdowell","Wiley","Rich","Humphrey","Johns","Koch","Suarez","Hobbs","Beard","Gilmore","Ibarra","Keith","Macias","Khan","Andrade","Ware","Stephenson","Henson","Wilkerson","Dyer","Mcclure","Blackwell","Mercado","Tanner","Eaton","Clay","Barron","Beasley","Oneal","Preston","Small","Wu","Zamora","Macdonald","Vance","Snow","Mcclain","Stafford","Orozco","Barry","English","Shannon","Kline","Jacobson","Woodard","Huang","Kemp","Mosley","Prince","Merritt","Hurst","Villanueva","Roach","Nolan","Lam","Yoder","Mccullough","Lester","Santana","Valenzuela","Winters","Barrera","Leach","Orr","Berger","Mckee","Strong","Conway","Stein","Whitehead","Bullock","Escobar","Knox","Meadows","Solomon","Velez","Odonnell","Kerr","Stout","Blankenship","Browning","Kent","Lozano","Bartlett","Pruitt","Buck","Barr","Gaines","Durham","Gentry","Mcintyre","Sloan","Melendez","Rocha","Herman","Sexton","Moon","Hendricks","Rangel","Stark","Lowery","Hardin","Hull","Sellers","Ellison","Calhoun","Gillespie","Mora","Knapp","Mccall","Morse","Dorsey","Weeks","Nielsen","Livingston","Leblanc","Mclean","Bradshaw","Glass","Middleton","Buckley","Schaefer","Frost","Howe","House","Mcintosh","Ho","Pennington","Reilly","Hebert","Mcfarland","Hickman","Noble","Spears","Conrad","Arias","Galvan","Velazquez","Huynh","Frederick","Randolph","Cantu","Fitzpatrick","Mahoney","Peck","Villa","Michael","Donovan","Mcconnell","Walls","Boyle","Mayer","Zuniga","Giles","Pineda","Pace","Hurley","Mays","Mcmillan","Crosby","Ayers","Case","Bentley","Shepard","Everett","Pugh","David","Mcmahon","Dunlap","Bender","Hahn","Harding","Acevedo","Raymond","Blackburn","Duffy","Landry","Dougherty","Bautista","Shah","Potts","Arroyo","Valentine","Meza","Gould","Vaughan","Fry","Rush","Avery","Herring","Dodson","Clements","Sampson","Tapia","Bean","Lynn","Crane","Farley","Cisneros","Benton","Ashley","Mckay","Finley","Best","Blevins","Friedman","Moses","Sosa","Blanchard","Huber","Frye","Krueger","Bernard","Rosario","Rubio","Mullen","Benjamin","Haley","Chung","Moyer","Choi","Horne","Yu","Woodward","Ali","Nixon","Hayden","Rivers","Estes","Mccarty","Richmond","Stuart","Maynard","Brandt","Oconnell","Hanna","Sanford","Sheppard","Church","Burch","Levy","Rasmussen","Coffey","Ponce","Faulkner","Donaldson","Schmitt","Novak","Costa","Montes","Booker","Cordova","Waller","Arellano","Maddox","Mata","Bonilla","Stanton","Compton","Kaufman","Dudley","Mcpherson","Beltran","Dickson","Mccann","Villegas","Proctor","Hester","Cantrell","Daugherty","Cherry","Bray","Davila","Rowland","Levine","Madden","Spence","Good","Irwin","Werner","Krause","Petty","Whitney","Baird","Hooper","Pollard","Zavala","Jarvis","Holden","Haas","Hendrix","Mcgrath","Bird","Lucero","Terrell","Riggs","Joyce","Mercer","Rollins","Galloway","Duke","Odom","Andersen","Downs","Hatfield","Benitez","Archer","Huerta","Travis","Mcneil","Hinton","Zhang","Hays","Mayo","Fritz","Branch","Mooney","Ewing","Ritter","Esparza","Frey","Braun","Gay","Riddle","Haney","Kaiser","Holder","Chaney","Mcknight","Gamble","Vang","Cooley","Carney","Cowan","Forbes","Ferrell","Davies","Barajas","Shea","Osborn","Bright","Cuevas","Bolton","Murillo","Lutz","Duarte","Kidd","Key","Cooke"]}'),a=function(e){return Math.floor(Math.random()*e)},r=function(){if(!i)return"Unknown";if(!i.data)return"Unknown";var e=i.data;if(!Array.isArray(e))return"Unknown";var t=e.length;return e[a(t)]+" "+e[a(t)]}},461:function(e,t){"use strict";t.Z=function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*#%&!",i="",a=e;void 0!=t&&(a-=t.length,i+=t);for(var r=0;r<a;r++){var s=Math.floor(67*Math.random());i+=n.charAt(s)}return i}},462:function(e,t){"use strict";t.Z=function(e,t){if(0==t.length)return e;for(var n=e,i=0;i<t.length;i++)n=n.replace(/{}/,""+t[i]);return n}}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.amdO={},function(){var e=[];n.O=function(t,i,a,r){if(!i){var s=1/0;for(l=0;l<e.length;l++){i=e[l][0],a=e[l][1],r=e[l][2];for(var o=!0,c=0;c<i.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(o=!1,r<s&&(s=r));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[i,a,r]}}(),n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))},n.u=function(e){return e+"."+{7:"5e516c400c9a1ee9a0cf",109:"671d671e4c6000e528ff",123:"c0dfd460b2000e6223b8",131:"a2f55696377a9a43ea29",302:"98133f8575b97dbd24d6",401:"b7c1473649495d44f4a5",498:"d9311ff9a2d85a386877",530:"b496a70eb28ecdd60866",613:"e689b03cc0d3c59e1330",616:"4222a4e953763b7c8571",638:"b6a9ca76f6c39011cc11",739:"16b18ca67b31a64a589b",803:"db5e67dc225ca5d519b0",942:"596373ea4ee94e79ba2f",961:"8994589bdc1fff66f0c9"}[e]+".bundle.js"},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="game-core:";n.l=function(i,a,r,s){if(e[i])e[i].push(a);else{var o,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var h=u[l];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+r){o=h;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+r),o.src=i),e[i]=[a];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(f);var a=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),c&&document.head.appendChild(o)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var a=i.length-1;a>-1&&!e;)e=i[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),function(){var e={757:0};n.f.j=function(t,i){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var r=new Promise((function(n,i){a=e[t]=[n,i]}));i.push(a[2]=r);var s=n.p+n.u(t),o=new Error;n.l(s,(function(i){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,a[1](o)}}),"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,r,s=i[0],o=i[1],c=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(i);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},i=self.webpackChunkgame_core=self.webpackChunkgame_core||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}(),n.O(void 0,[216,630,542],(function(){return n(687)})),n.O(void 0,[216,630,542],(function(){return n(688)})),n.O(void 0,[216,630,542],(function(){return n(520)})),n.O(void 0,[216,630,542],(function(){return n(521)})),n.O(void 0,[216,630,542],(function(){return n(689)})),n.O(void 0,[216,630,542],(function(){return n(619)}));var i=n.O(void 0,[216,630,542],(function(){return n(631)}));i=n.O(i)})();